(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rp(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var a=Function.bind.apply(t,o);return new a}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var XA={exports:{}},np={},QA={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd=Symbol.for("react.element"),rI=Symbol.for("react.portal"),nI=Symbol.for("react.fragment"),iI=Symbol.for("react.strict_mode"),oI=Symbol.for("react.profiler"),sI=Symbol.for("react.provider"),aI=Symbol.for("react.context"),lI=Symbol.for("react.forward_ref"),uI=Symbol.for("react.suspense"),cI=Symbol.for("react.memo"),dI=Symbol.for("react.lazy"),VS=Symbol.iterator;function fI(e){return e===null||typeof e!="object"?null:(e=VS&&e[VS]||e["@@iterator"],typeof e=="function"?e:null)}var YA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZA=Object.assign,eR={};function Wl(e,t,r){this.props=e,this.context=t,this.refs=eR,this.updater=r||YA}Wl.prototype.isReactComponent={};Wl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tR(){}tR.prototype=Wl.prototype;function Km(e,t,r){this.props=e,this.context=t,this.refs=eR,this.updater=r||YA}var Wm=Km.prototype=new tR;Wm.constructor=Km;ZA(Wm,Wl.prototype);Wm.isPureReactComponent=!0;var KS=Array.isArray,rR=Object.prototype.hasOwnProperty,Gm={current:null},nR={key:!0,ref:!0,__self:!0,__source:!0};function iR(e,t,r){var n,o={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)rR.call(t,n)&&!nR.hasOwnProperty(n)&&(o[n]=t[n]);var u=arguments.length-2;if(u===1)o.children=r;else if(1<u){for(var f=Array(u),c=0;c<u;c++)f[c]=arguments[c+2];o.children=f}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)o[n]===void 0&&(o[n]=u[n]);return{$$typeof:sd,type:e,key:a,ref:s,props:o,_owner:Gm.current}}function hI(e,t){return{$$typeof:sd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qm(e){return typeof e=="object"&&e!==null&&e.$$typeof===sd}function pI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var WS=/\/+/g;function Zg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pI(""+e.key):t.toString(36)}function dh(e,t,r,n,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case sd:case rI:s=!0}}if(s)return s=e,o=o(s),e=n===""?"."+Zg(s,0):n,KS(o)?(r="",e!=null&&(r=e.replace(WS,"$&/")+"/"),dh(o,t,r,"",function(c){return c})):o!=null&&(qm(o)&&(o=hI(o,r+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(WS,"$&/")+"/")+e)),t.push(o)),1;if(s=0,n=n===""?".":n+":",KS(e))for(var u=0;u<e.length;u++){a=e[u];var f=n+Zg(a,u);s+=dh(a,t,r,f,o)}else if(f=fI(e),typeof f=="function")for(e=f.call(e),u=0;!(a=e.next()).done;)a=a.value,f=n+Zg(a,u++),s+=dh(a,t,r,f,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Tf(e,t,r){if(e==null)return e;var n=[],o=0;return dh(e,n,"","",function(a){return t.call(r,a,o++)}),n}function gI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ai={current:null},fh={transition:null},yI={ReactCurrentDispatcher:Ai,ReactCurrentBatchConfig:fh,ReactCurrentOwner:Gm};qr.Children={map:Tf,forEach:function(e,t,r){Tf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Tf(e,function(){t++}),t},toArray:function(e){return Tf(e,function(t){return t})||[]},only:function(e){if(!qm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qr.Component=Wl;qr.Fragment=nI;qr.Profiler=oI;qr.PureComponent=Km;qr.StrictMode=iI;qr.Suspense=uI;qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yI;qr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ZA({},e.props),o=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=Gm.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(f in t)rR.call(t,f)&&!nR.hasOwnProperty(f)&&(n[f]=t[f]===void 0&&u!==void 0?u[f]:t[f])}var f=arguments.length-2;if(f===1)n.children=r;else if(1<f){u=Array(f);for(var c=0;c<f;c++)u[c]=arguments[c+2];n.children=u}return{$$typeof:sd,type:e.type,key:o,ref:a,props:n,_owner:s}};qr.createContext=function(e){return e={$$typeof:aI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sI,_context:e},e.Consumer=e};qr.createElement=iR;qr.createFactory=function(e){var t=iR.bind(null,e);return t.type=e,t};qr.createRef=function(){return{current:null}};qr.forwardRef=function(e){return{$$typeof:lI,render:e}};qr.isValidElement=qm;qr.lazy=function(e){return{$$typeof:dI,_payload:{_status:-1,_result:e},_init:gI}};qr.memo=function(e,t){return{$$typeof:cI,type:e,compare:t===void 0?null:t}};qr.startTransition=function(e){var t=fh.transition;fh.transition={};try{e()}finally{fh.transition=t}};qr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qr.useCallback=function(e,t){return Ai.current.useCallback(e,t)};qr.useContext=function(e){return Ai.current.useContext(e)};qr.useDebugValue=function(){};qr.useDeferredValue=function(e){return Ai.current.useDeferredValue(e)};qr.useEffect=function(e,t){return Ai.current.useEffect(e,t)};qr.useId=function(){return Ai.current.useId()};qr.useImperativeHandle=function(e,t,r){return Ai.current.useImperativeHandle(e,t,r)};qr.useInsertionEffect=function(e,t){return Ai.current.useInsertionEffect(e,t)};qr.useLayoutEffect=function(e,t){return Ai.current.useLayoutEffect(e,t)};qr.useMemo=function(e,t){return Ai.current.useMemo(e,t)};qr.useReducer=function(e,t,r){return Ai.current.useReducer(e,t,r)};qr.useRef=function(e){return Ai.current.useRef(e)};qr.useState=function(e){return Ai.current.useState(e)};qr.useSyncExternalStore=function(e,t,r){return Ai.current.useSyncExternalStore(e,t,r)};qr.useTransition=function(){return Ai.current.useTransition()};qr.version="18.2.0";QA.exports=qr;var un=QA.exports;const mI=JA(un);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI=un,wI=Symbol.for("react.element"),_I=Symbol.for("react.fragment"),SI=Object.prototype.hasOwnProperty,EI=vI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bI={key:!0,ref:!0,__self:!0,__source:!0};function oR(e,t,r){var n,o={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)SI.call(t,n)&&!bI.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:wI,type:e,key:a,ref:s,props:o,_owner:EI.current}}np.Fragment=_I;np.jsx=oR;np.jsxs=oR;XA.exports=np;var Ar=XA.exports,N0={},sR={exports:{}},Qi={},aR={exports:{}},lR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(De,tt){var re=De.length;De.push(tt);e:for(;0<re;){var Ie=re-1>>>1,Ge=De[Ie];if(0<o(Ge,tt))De[Ie]=tt,De[re]=Ge,re=Ie;else break e}}function r(De){return De.length===0?null:De[0]}function n(De){if(De.length===0)return null;var tt=De[0],re=De.pop();if(re!==tt){De[0]=re;e:for(var Ie=0,Ge=De.length,dt=Ge>>>1;Ie<dt;){var Ze=2*(Ie+1)-1,qe=De[Ze],Fe=Ze+1,lt=De[Fe];if(0>o(qe,re))Fe<Ge&&0>o(lt,qe)?(De[Ie]=lt,De[Fe]=re,Ie=Fe):(De[Ie]=qe,De[Ze]=re,Ie=Ze);else if(Fe<Ge&&0>o(lt,re))De[Ie]=lt,De[Fe]=re,Ie=Fe;else break e}}return tt}function o(De,tt){var re=De.sortIndex-tt.sortIndex;return re!==0?re:De.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var f=[],c=[],g=1,p=null,m=3,_=!1,C=!1,R=!1,I=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(De){for(var tt=r(c);tt!==null;){if(tt.callback===null)n(c);else if(tt.startTime<=De)n(c),tt.sortIndex=tt.expirationTime,t(f,tt);else break;tt=r(c)}}function B(De){if(R=!1,T(De),!C)if(r(f)!==null)C=!0,ke(H);else{var tt=r(c);tt!==null&&Be(B,tt.startTime-De)}}function H(De,tt){C=!1,R&&(R=!1,S(ne),ne=-1),_=!0;var re=m;try{for(T(tt),p=r(f);p!==null&&(!(p.expirationTime>tt)||De&&!J());){var Ie=p.callback;if(typeof Ie=="function"){p.callback=null,m=p.priorityLevel;var Ge=Ie(p.expirationTime<=tt);tt=e.unstable_now(),typeof Ge=="function"?p.callback=Ge:p===r(f)&&n(f),T(tt)}else n(f);p=r(f)}if(p!==null)var dt=!0;else{var Ze=r(c);Ze!==null&&Be(B,Ze.startTime-tt),dt=!1}return dt}finally{p=null,m=re,_=!1}}var $=!1,F=null,ne=-1,Y=5,M=-1;function J(){return!(e.unstable_now()-M<Y)}function Le(){if(F!==null){var De=e.unstable_now();M=De;var tt=!0;try{tt=F(!0,De)}finally{tt?Ue():($=!1,F=null)}}else $=!1}var Ue;if(typeof b=="function")Ue=function(){b(Le)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,nt=je.port2;je.port1.onmessage=Le,Ue=function(){nt.postMessage(null)}}else Ue=function(){I(Le,0)};function ke(De){F=De,$||($=!0,Ue())}function Be(De,tt){ne=I(function(){De(e.unstable_now())},tt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(De){De.callback=null},e.unstable_continueExecution=function(){C||_||(C=!0,ke(H))},e.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<De?Math.floor(1e3/De):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(De){switch(m){case 1:case 2:case 3:var tt=3;break;default:tt=m}var re=m;m=tt;try{return De()}finally{m=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(De,tt){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var re=m;m=De;try{return tt()}finally{m=re}},e.unstable_scheduleCallback=function(De,tt,re){var Ie=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Ie+re:Ie):re=Ie,De){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=re+Ge,De={id:g++,callback:tt,priorityLevel:De,startTime:re,expirationTime:Ge,sortIndex:-1},re>Ie?(De.sortIndex=re,t(c,De),r(f)===null&&De===r(c)&&(R?(S(ne),ne=-1):R=!0,Be(B,re-Ie))):(De.sortIndex=Ge,t(f,De),C||_||(C=!0,ke(H))),De},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(De){var tt=m;return function(){var re=m;m=tt;try{return De.apply(this,arguments)}finally{m=re}}}})(lR);aR.exports=lR;var AI=aR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR=un,Xi=AI;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cR=new Set,jc={};function Ca(e,t){Dl(e,t),Dl(e+"Capture",t)}function Dl(e,t){for(jc[e]=t,e=0;e<t.length;e++)cR.add(t[e])}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k0=Object.prototype.hasOwnProperty,RI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,GS={},qS={};function xI(e){return k0.call(qS,e)?!0:k0.call(GS,e)?!1:RI.test(e)?qS[e]=!0:(GS[e]=!0,!1)}function CI(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TI(e,t,r,n){if(t===null||typeof t>"u"||CI(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ri(e,t,r,n,o,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ci[e]=new Ri(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ci[t]=new Ri(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ci[e]=new Ri(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ci[e]=new Ri(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ci[e]=new Ri(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ci[e]=new Ri(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ci[e]=new Ri(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ci[e]=new Ri(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ci[e]=new Ri(e,5,!1,e.toLowerCase(),null,!1,!1)});var zm=/[\-:]([a-z])/g;function Jm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zm,Jm);ci[t]=new Ri(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zm,Jm);ci[t]=new Ri(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zm,Jm);ci[t]=new Ri(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ci[e]=new Ri(e,1,!1,e.toLowerCase(),null,!1,!1)});ci.xlinkHref=new Ri("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ci[e]=new Ri(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xm(e,t,r,n){var o=ci.hasOwnProperty(t)?ci[t]:null;(o!==null?o.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TI(t,r,o,n)&&(r=null),n||o===null?xI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ls=uR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pf=Symbol.for("react.element"),ml=Symbol.for("react.portal"),vl=Symbol.for("react.fragment"),Qm=Symbol.for("react.strict_mode"),D0=Symbol.for("react.profiler"),dR=Symbol.for("react.provider"),fR=Symbol.for("react.context"),Ym=Symbol.for("react.forward_ref"),L0=Symbol.for("react.suspense"),U0=Symbol.for("react.suspense_list"),Zm=Symbol.for("react.memo"),_s=Symbol.for("react.lazy"),hR=Symbol.for("react.offscreen"),zS=Symbol.iterator;function _u(e){return e===null||typeof e!="object"?null:(e=zS&&e[zS]||e["@@iterator"],typeof e=="function"?e:null)}var kn=Object.assign,ey;function Tc(e){if(ey===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ey=t&&t[1]||""}return`
`+ey+e}var ty=!1;function ry(e,t){if(!e||ty)return"";ty=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),a=n.stack.split(`
`),s=o.length-1,u=a.length-1;1<=s&&0<=u&&o[s]!==a[u];)u--;for(;1<=s&&0<=u;s--,u--)if(o[s]!==a[u]){if(s!==1||u!==1)do if(s--,u--,0>u||o[s]!==a[u]){var f=`
`+o[s].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=s&&0<=u);break}}}finally{ty=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Tc(e):""}function PI(e){switch(e.tag){case 5:return Tc(e.type);case 16:return Tc("Lazy");case 13:return Tc("Suspense");case 19:return Tc("SuspenseList");case 0:case 2:case 15:return e=ry(e.type,!1),e;case 11:return e=ry(e.type.render,!1),e;case 1:return e=ry(e.type,!0),e;default:return""}}function M0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vl:return"Fragment";case ml:return"Portal";case D0:return"Profiler";case Qm:return"StrictMode";case L0:return"Suspense";case U0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fR:return(e.displayName||"Context")+".Consumer";case dR:return(e._context.displayName||"Context")+".Provider";case Ym:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zm:return t=e.displayName||null,t!==null?t:M0(e.type)||"Memo";case _s:t=e._payload,e=e._init;try{return M0(e(t))}catch{}}return null}function II(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M0(t);case 8:return t===Qm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ls(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function FI(e){var t=pR(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function If(e){e._valueTracker||(e._valueTracker=FI(e))}function gR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=pR(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function xh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function B0(e,t){var r=t.checked;return kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function JS(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ls(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yR(e,t){t=t.checked,t!=null&&Xm(e,"checked",t,!1)}function H0(e,t){yR(e,t);var r=Ls(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?j0(e,t.type,r):t.hasOwnProperty("defaultValue")&&j0(e,t.type,Ls(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function XS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function j0(e,t,r){(t!=="number"||xh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pc=Array.isArray;function Pl(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ls(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function $0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function QS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(At(92));if(Pc(r)){if(1<r.length)throw Error(At(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ls(r)}}function mR(e,t){var r=Ls(t.value),n=Ls(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function YS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function V0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ff,wR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ff=Ff||document.createElement("div"),Ff.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ff.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $c(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Oc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OI=["Webkit","ms","Moz","O"];Object.keys(Oc).forEach(function(e){OI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Oc[t]=Oc[e]})});function _R(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Oc.hasOwnProperty(e)&&Oc[e]?(""+t).trim():t+"px"}function SR(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=_R(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var NI=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K0(e,t){if(t){if(NI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function W0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G0=null;function ev(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var q0=null,Il=null,Fl=null;function ZS(e){if(e=ud(e)){if(typeof q0!="function")throw Error(At(280));var t=e.stateNode;t&&(t=lp(t),q0(e.stateNode,e.type,t))}}function ER(e){Il?Fl?Fl.push(e):Fl=[e]:Il=e}function bR(){if(Il){var e=Il,t=Fl;if(Fl=Il=null,ZS(e),t)for(e=0;e<t.length;e++)ZS(t[e])}}function AR(e,t){return e(t)}function RR(){}var ny=!1;function xR(e,t,r){if(ny)return e(t,r);ny=!0;try{return AR(e,t,r)}finally{ny=!1,(Il!==null||Fl!==null)&&(RR(),bR())}}function Vc(e,t){var r=e.stateNode;if(r===null)return null;var n=lp(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(At(231,t,typeof r));return r}var z0=!1;if(rs)try{var Su={};Object.defineProperty(Su,"passive",{get:function(){z0=!0}}),window.addEventListener("test",Su,Su),window.removeEventListener("test",Su,Su)}catch{z0=!1}function kI(e,t,r,n,o,a,s,u,f){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(g){this.onError(g)}}var Nc=!1,Ch=null,Th=!1,J0=null,DI={onError:function(e){Nc=!0,Ch=e}};function LI(e,t,r,n,o,a,s,u,f){Nc=!1,Ch=null,kI.apply(DI,arguments)}function UI(e,t,r,n,o,a,s,u,f){if(LI.apply(this,arguments),Nc){if(Nc){var c=Ch;Nc=!1,Ch=null}else throw Error(At(198));Th||(Th=!0,J0=c)}}function Ta(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function CR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eE(e){if(Ta(e)!==e)throw Error(At(188))}function MI(e){var t=e.alternate;if(!t){if(t=Ta(e),t===null)throw Error(At(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var a=o.alternate;if(a===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return eE(o),e;if(a===n)return eE(o),t;a=a.sibling}throw Error(At(188))}if(r.return!==n.return)r=o,n=a;else{for(var s=!1,u=o.child;u;){if(u===r){s=!0,r=o,n=a;break}if(u===n){s=!0,n=o,r=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===r){s=!0,r=a,n=o;break}if(u===n){s=!0,n=a,r=o;break}u=u.sibling}if(!s)throw Error(At(189))}}if(r.alternate!==n)throw Error(At(190))}if(r.tag!==3)throw Error(At(188));return r.stateNode.current===r?e:t}function TR(e){return e=MI(e),e!==null?PR(e):null}function PR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=PR(e);if(t!==null)return t;e=e.sibling}return null}var IR=Xi.unstable_scheduleCallback,tE=Xi.unstable_cancelCallback,BI=Xi.unstable_shouldYield,HI=Xi.unstable_requestPaint,jn=Xi.unstable_now,jI=Xi.unstable_getCurrentPriorityLevel,tv=Xi.unstable_ImmediatePriority,FR=Xi.unstable_UserBlockingPriority,Ph=Xi.unstable_NormalPriority,$I=Xi.unstable_LowPriority,OR=Xi.unstable_IdlePriority,ip=null,Bo=null;function VI(e){if(Bo&&typeof Bo.onCommitFiberRoot=="function")try{Bo.onCommitFiberRoot(ip,e,void 0,(e.current.flags&128)===128)}catch{}}var xo=Math.clz32?Math.clz32:GI,KI=Math.log,WI=Math.LN2;function GI(e){return e>>>=0,e===0?32:31-(KI(e)/WI|0)|0}var Of=64,Nf=4194304;function Ic(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ih(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,o=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var u=s&~o;u!==0?n=Ic(u):(a&=s,a!==0&&(n=Ic(a)))}else s=r&~o,s!==0?n=Ic(s):a!==0&&(n=Ic(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&o)&&(o=n&-n,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-xo(t),o=1<<r,n|=e[r],t&=~o;return n}function qI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zI(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-xo(a),u=1<<s,f=o[s];f===-1?(!(u&r)||u&n)&&(o[s]=qI(u,t)):f<=t&&(e.expiredLanes|=u),a&=~u}}function X0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function NR(){var e=Of;return Of<<=1,!(Of&4194240)&&(Of=64),e}function iy(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ad(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xo(t),e[t]=r}function JI(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-xo(r),a=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~a}}function rv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-xo(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var dn=0;function kR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var DR,nv,LR,UR,MR,Q0=!1,kf=[],Cs=null,Ts=null,Ps=null,Kc=new Map,Wc=new Map,Es=[],XI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rE(e,t){switch(e){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Kc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(t.pointerId)}}function Eu(e,t,r,n,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[o]},t!==null&&(t=ud(t),t!==null&&nv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function QI(e,t,r,n,o){switch(t){case"focusin":return Cs=Eu(Cs,e,t,r,n,o),!0;case"dragenter":return Ts=Eu(Ts,e,t,r,n,o),!0;case"mouseover":return Ps=Eu(Ps,e,t,r,n,o),!0;case"pointerover":var a=o.pointerId;return Kc.set(a,Eu(Kc.get(a)||null,e,t,r,n,o)),!0;case"gotpointercapture":return a=o.pointerId,Wc.set(a,Eu(Wc.get(a)||null,e,t,r,n,o)),!0}return!1}function BR(e){var t=ya(e.target);if(t!==null){var r=Ta(t);if(r!==null){if(t=r.tag,t===13){if(t=CR(r),t!==null){e.blockedOn=t,MR(e.priority,function(){LR(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Y0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);G0=n,r.target.dispatchEvent(n),G0=null}else return t=ud(r),t!==null&&nv(t),e.blockedOn=r,!1;t.shift()}return!0}function nE(e,t,r){hh(e)&&r.delete(t)}function YI(){Q0=!1,Cs!==null&&hh(Cs)&&(Cs=null),Ts!==null&&hh(Ts)&&(Ts=null),Ps!==null&&hh(Ps)&&(Ps=null),Kc.forEach(nE),Wc.forEach(nE)}function bu(e,t){e.blockedOn===t&&(e.blockedOn=null,Q0||(Q0=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,YI)))}function Gc(e){function t(o){return bu(o,e)}if(0<kf.length){bu(kf[0],e);for(var r=1;r<kf.length;r++){var n=kf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Cs!==null&&bu(Cs,e),Ts!==null&&bu(Ts,e),Ps!==null&&bu(Ps,e),Kc.forEach(t),Wc.forEach(t),r=0;r<Es.length;r++)n=Es[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Es.length&&(r=Es[0],r.blockedOn===null);)BR(r),r.blockedOn===null&&Es.shift()}var Ol=ls.ReactCurrentBatchConfig,Fh=!0;function ZI(e,t,r,n){var o=dn,a=Ol.transition;Ol.transition=null;try{dn=1,iv(e,t,r,n)}finally{dn=o,Ol.transition=a}}function eF(e,t,r,n){var o=dn,a=Ol.transition;Ol.transition=null;try{dn=4,iv(e,t,r,n)}finally{dn=o,Ol.transition=a}}function iv(e,t,r,n){if(Fh){var o=Y0(e,t,r,n);if(o===null)py(e,t,n,Oh,r),rE(e,n);else if(QI(o,e,t,r,n))n.stopPropagation();else if(rE(e,n),t&4&&-1<XI.indexOf(e)){for(;o!==null;){var a=ud(o);if(a!==null&&DR(a),a=Y0(e,t,r,n),a===null&&py(e,t,n,Oh,r),a===o)break;o=a}o!==null&&n.stopPropagation()}else py(e,t,n,null,r)}}var Oh=null;function Y0(e,t,r,n){if(Oh=null,e=ev(n),e=ya(e),e!==null)if(t=Ta(e),t===null)e=null;else if(r=t.tag,r===13){if(e=CR(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oh=e,null}function HR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jI()){case tv:return 1;case FR:return 4;case Ph:case $I:return 16;case OR:return 536870912;default:return 16}default:return 16}}var As=null,ov=null,ph=null;function jR(){if(ph)return ph;var e,t=ov,r=t.length,n,o="value"in As?As.value:As.textContent,a=o.length;for(e=0;e<r&&t[e]===o[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===o[a-n];n++);return ph=o.slice(e,1<n?1-n:void 0)}function gh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Df(){return!0}function iE(){return!1}function Yi(e){function t(r,n,o,a,s){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Df:iE,this.isPropagationStopped=iE,this}return kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Df)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Df)},persist:function(){},isPersistent:Df}),t}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sv=Yi(Gl),ld=kn({},Gl,{view:0,detail:0}),tF=Yi(ld),oy,sy,Au,op=kn({},ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:av,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Au&&(Au&&e.type==="mousemove"?(oy=e.screenX-Au.screenX,sy=e.screenY-Au.screenY):sy=oy=0,Au=e),oy)},movementY:function(e){return"movementY"in e?e.movementY:sy}}),oE=Yi(op),rF=kn({},op,{dataTransfer:0}),nF=Yi(rF),iF=kn({},ld,{relatedTarget:0}),ay=Yi(iF),oF=kn({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),sF=Yi(oF),aF=kn({},Gl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lF=Yi(aF),uF=kn({},Gl,{data:0}),sE=Yi(uF),cF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fF[e])?!!t[e]:!1}function av(){return hF}var pF=kn({},ld,{key:function(e){if(e.key){var t=cF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:av,charCode:function(e){return e.type==="keypress"?gh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gF=Yi(pF),yF=kn({},op,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aE=Yi(yF),mF=kn({},ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:av}),vF=Yi(mF),wF=kn({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),_F=Yi(wF),SF=kn({},op,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EF=Yi(SF),bF=[9,13,27,32],lv=rs&&"CompositionEvent"in window,kc=null;rs&&"documentMode"in document&&(kc=document.documentMode);var AF=rs&&"TextEvent"in window&&!kc,$R=rs&&(!lv||kc&&8<kc&&11>=kc),lE=String.fromCharCode(32),uE=!1;function VR(e,t){switch(e){case"keyup":return bF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wl=!1;function RF(e,t){switch(e){case"compositionend":return KR(t);case"keypress":return t.which!==32?null:(uE=!0,lE);case"textInput":return e=t.data,e===lE&&uE?null:e;default:return null}}function xF(e,t){if(wl)return e==="compositionend"||!lv&&VR(e,t)?(e=jR(),ph=ov=As=null,wl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $R&&t.locale!=="ko"?null:t.data;default:return null}}var CF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!CF[e.type]:t==="textarea"}function WR(e,t,r,n){ER(n),t=Nh(t,"onChange"),0<t.length&&(r=new sv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Dc=null,qc=null;function TF(e){rx(e,0)}function sp(e){var t=El(e);if(gR(t))return e}function PF(e,t){if(e==="change")return t}var GR=!1;if(rs){var ly;if(rs){var uy="oninput"in document;if(!uy){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),uy=typeof dE.oninput=="function"}ly=uy}else ly=!1;GR=ly&&(!document.documentMode||9<document.documentMode)}function fE(){Dc&&(Dc.detachEvent("onpropertychange",qR),qc=Dc=null)}function qR(e){if(e.propertyName==="value"&&sp(qc)){var t=[];WR(t,qc,e,ev(e)),xR(TF,t)}}function IF(e,t,r){e==="focusin"?(fE(),Dc=t,qc=r,Dc.attachEvent("onpropertychange",qR)):e==="focusout"&&fE()}function FF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sp(qc)}function OF(e,t){if(e==="click")return sp(t)}function NF(e,t){if(e==="input"||e==="change")return sp(t)}function kF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var To=typeof Object.is=="function"?Object.is:kF;function zc(e,t){if(To(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!k0.call(t,o)||!To(e[o],t[o]))return!1}return!0}function hE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pE(e,t){var r=hE(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hE(r)}}function zR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function JR(){for(var e=window,t=xh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=xh(e.document)}return t}function uv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function DF(e){var t=JR(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&zR(r.ownerDocument.documentElement,r)){if(n!==null&&uv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,a=Math.min(n.start,o);n=n.end===void 0?a:Math.min(n.end,o),!e.extend&&a>n&&(o=n,n=a,a=o),o=pE(r,a);var s=pE(r,n);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LF=rs&&"documentMode"in document&&11>=document.documentMode,_l=null,Z0=null,Lc=null,em=!1;function gE(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;em||_l==null||_l!==xh(n)||(n=_l,"selectionStart"in n&&uv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Lc&&zc(Lc,n)||(Lc=n,n=Nh(Z0,"onSelect"),0<n.length&&(t=new sv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=_l)))}function Lf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Sl={animationend:Lf("Animation","AnimationEnd"),animationiteration:Lf("Animation","AnimationIteration"),animationstart:Lf("Animation","AnimationStart"),transitionend:Lf("Transition","TransitionEnd")},cy={},XR={};rs&&(XR=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function ap(e){if(cy[e])return cy[e];if(!Sl[e])return e;var t=Sl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in XR)return cy[e]=t[r];return e}var QR=ap("animationend"),YR=ap("animationiteration"),ZR=ap("animationstart"),ex=ap("transitionend"),tx=new Map,yE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bs(e,t){tx.set(e,t),Ca(t,[e])}for(var dy=0;dy<yE.length;dy++){var fy=yE[dy],UF=fy.toLowerCase(),MF=fy[0].toUpperCase()+fy.slice(1);Bs(UF,"on"+MF)}Bs(QR,"onAnimationEnd");Bs(YR,"onAnimationIteration");Bs(ZR,"onAnimationStart");Bs("dblclick","onDoubleClick");Bs("focusin","onFocus");Bs("focusout","onBlur");Bs(ex,"onTransitionEnd");Dl("onMouseEnter",["mouseout","mouseover"]);Dl("onMouseLeave",["mouseout","mouseover"]);Dl("onPointerEnter",["pointerout","pointerover"]);Dl("onPointerLeave",["pointerout","pointerover"]);Ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fc));function mE(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,UI(n,t,void 0,e),e.currentTarget=null}function rx(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var u=n[s],f=u.instance,c=u.currentTarget;if(u=u.listener,f!==a&&o.isPropagationStopped())break e;mE(o,u,c),a=f}else for(s=0;s<n.length;s++){if(u=n[s],f=u.instance,c=u.currentTarget,u=u.listener,f!==a&&o.isPropagationStopped())break e;mE(o,u,c),a=f}}}if(Th)throw e=J0,Th=!1,J0=null,e}function En(e,t){var r=t[om];r===void 0&&(r=t[om]=new Set);var n=e+"__bubble";r.has(n)||(nx(t,e,2,!1),r.add(n))}function hy(e,t,r){var n=0;t&&(n|=4),nx(r,e,n,t)}var Uf="_reactListening"+Math.random().toString(36).slice(2);function Jc(e){if(!e[Uf]){e[Uf]=!0,cR.forEach(function(r){r!=="selectionchange"&&(BF.has(r)||hy(r,!1,e),hy(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uf]||(t[Uf]=!0,hy("selectionchange",!1,t))}}function nx(e,t,r,n){switch(HR(t)){case 1:var o=ZI;break;case 4:o=eF;break;default:o=iv}r=o.bind(null,t,r,e),o=void 0,!z0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function py(e,t,r,n,o){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var u=n.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(s===4)for(s=n.return;s!==null;){var f=s.tag;if((f===3||f===4)&&(f=s.stateNode.containerInfo,f===o||f.nodeType===8&&f.parentNode===o))return;s=s.return}for(;u!==null;){if(s=ya(u),s===null)return;if(f=s.tag,f===5||f===6){n=a=s;continue e}u=u.parentNode}}n=n.return}xR(function(){var c=a,g=ev(r),p=[];e:{var m=tx.get(e);if(m!==void 0){var _=sv,C=e;switch(e){case"keypress":if(gh(r)===0)break e;case"keydown":case"keyup":_=gF;break;case"focusin":C="focus",_=ay;break;case"focusout":C="blur",_=ay;break;case"beforeblur":case"afterblur":_=ay;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=oE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=nF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=vF;break;case QR:case YR:case ZR:_=sF;break;case ex:_=_F;break;case"scroll":_=tF;break;case"wheel":_=EF;break;case"copy":case"cut":case"paste":_=lF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=aE}var R=(t&4)!==0,I=!R&&e==="scroll",S=R?m!==null?m+"Capture":null:m;R=[];for(var b=c,T;b!==null;){T=b;var B=T.stateNode;if(T.tag===5&&B!==null&&(T=B,S!==null&&(B=Vc(b,S),B!=null&&R.push(Xc(b,B,T)))),I)break;b=b.return}0<R.length&&(m=new _(m,C,null,r,g),p.push({event:m,listeners:R}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&r!==G0&&(C=r.relatedTarget||r.fromElement)&&(ya(C)||C[ns]))break e;if((_||m)&&(m=g.window===g?g:(m=g.ownerDocument)?m.defaultView||m.parentWindow:window,_?(C=r.relatedTarget||r.toElement,_=c,C=C?ya(C):null,C!==null&&(I=Ta(C),C!==I||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=c),_!==C)){if(R=oE,B="onMouseLeave",S="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(R=aE,B="onPointerLeave",S="onPointerEnter",b="pointer"),I=_==null?m:El(_),T=C==null?m:El(C),m=new R(B,b+"leave",_,r,g),m.target=I,m.relatedTarget=T,B=null,ya(g)===c&&(R=new R(S,b+"enter",C,r,g),R.target=T,R.relatedTarget=I,B=R),I=B,_&&C)t:{for(R=_,S=C,b=0,T=R;T;T=hl(T))b++;for(T=0,B=S;B;B=hl(B))T++;for(;0<b-T;)R=hl(R),b--;for(;0<T-b;)S=hl(S),T--;for(;b--;){if(R===S||S!==null&&R===S.alternate)break t;R=hl(R),S=hl(S)}R=null}else R=null;_!==null&&vE(p,m,_,R,!1),C!==null&&I!==null&&vE(p,I,C,R,!0)}}e:{if(m=c?El(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var H=PF;else if(cE(m))if(GR)H=NF;else{H=FF;var $=IF}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(H=OF);if(H&&(H=H(e,c))){WR(p,H,r,g);break e}$&&$(e,m,c),e==="focusout"&&($=m._wrapperState)&&$.controlled&&m.type==="number"&&j0(m,"number",m.value)}switch($=c?El(c):window,e){case"focusin":(cE($)||$.contentEditable==="true")&&(_l=$,Z0=c,Lc=null);break;case"focusout":Lc=Z0=_l=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,gE(p,r,g);break;case"selectionchange":if(LF)break;case"keydown":case"keyup":gE(p,r,g)}var F;if(lv)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else wl?VR(e,r)&&(ne="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ne="onCompositionStart");ne&&($R&&r.locale!=="ko"&&(wl||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&wl&&(F=jR()):(As=g,ov="value"in As?As.value:As.textContent,wl=!0)),$=Nh(c,ne),0<$.length&&(ne=new sE(ne,e,null,r,g),p.push({event:ne,listeners:$}),F?ne.data=F:(F=KR(r),F!==null&&(ne.data=F)))),(F=AF?RF(e,r):xF(e,r))&&(c=Nh(c,"onBeforeInput"),0<c.length&&(g=new sE("onBeforeInput","beforeinput",null,r,g),p.push({event:g,listeners:c}),g.data=F))}rx(p,t)})}function Xc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Nh(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Vc(e,r),a!=null&&n.unshift(Xc(e,a,o)),a=Vc(e,t),a!=null&&n.push(Xc(e,a,o))),e=e.return}return n}function hl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vE(e,t,r,n,o){for(var a=t._reactName,s=[];r!==null&&r!==n;){var u=r,f=u.alternate,c=u.stateNode;if(f!==null&&f===n)break;u.tag===5&&c!==null&&(u=c,o?(f=Vc(r,a),f!=null&&s.unshift(Xc(r,f,u))):o||(f=Vc(r,a),f!=null&&s.push(Xc(r,f,u)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var HF=/\r\n?/g,jF=/\u0000|\uFFFD/g;function wE(e){return(typeof e=="string"?e:""+e).replace(HF,`
`).replace(jF,"")}function Mf(e,t,r){if(t=wE(t),wE(e)!==t&&r)throw Error(At(425))}function kh(){}var tm=null,rm=null;function nm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var im=typeof setTimeout=="function"?setTimeout:void 0,$F=typeof clearTimeout=="function"?clearTimeout:void 0,_E=typeof Promise=="function"?Promise:void 0,VF=typeof queueMicrotask=="function"?queueMicrotask:typeof _E<"u"?function(e){return _E.resolve(null).then(e).catch(KF)}:im;function KF(e){setTimeout(function(){throw e})}function gy(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){e.removeChild(o),Gc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);Gc(t)}function Is(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function SE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ql=Math.random().toString(36).slice(2),Mo="__reactFiber$"+ql,Qc="__reactProps$"+ql,ns="__reactContainer$"+ql,om="__reactEvents$"+ql,WF="__reactListeners$"+ql,GF="__reactHandles$"+ql;function ya(e){var t=e[Mo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ns]||r[Mo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=SE(e);e!==null;){if(r=e[Mo])return r;e=SE(e)}return t}e=r,r=e.parentNode}return null}function ud(e){return e=e[Mo]||e[ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function El(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function lp(e){return e[Qc]||null}var sm=[],bl=-1;function Hs(e){return{current:e}}function An(e){0>bl||(e.current=sm[bl],sm[bl]=null,bl--)}function _n(e,t){bl++,sm[bl]=e.current,e.current=t}var Us={},yi=Hs(Us),Di=Hs(!1),Sa=Us;function Ll(e,t){var r=e.type.contextTypes;if(!r)return Us;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in r)o[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Li(e){return e=e.childContextTypes,e!=null}function Dh(){An(Di),An(yi)}function EE(e,t,r){if(yi.current!==Us)throw Error(At(168));_n(yi,t),_n(Di,r)}function ix(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in t))throw Error(At(108,II(e)||"Unknown",o));return kn({},r,n)}function Lh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,Sa=yi.current,_n(yi,e),_n(Di,Di.current),!0}function bE(e,t,r){var n=e.stateNode;if(!n)throw Error(At(169));r?(e=ix(e,t,Sa),n.__reactInternalMemoizedMergedChildContext=e,An(Di),An(yi),_n(yi,e)):An(Di),_n(Di,r)}var Yo=null,up=!1,yy=!1;function ox(e){Yo===null?Yo=[e]:Yo.push(e)}function qF(e){up=!0,ox(e)}function js(){if(!yy&&Yo!==null){yy=!0;var e=0,t=dn;try{var r=Yo;for(dn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Yo=null,up=!1}catch(o){throw Yo!==null&&(Yo=Yo.slice(e+1)),IR(tv,js),o}finally{dn=t,yy=!1}}return null}var Al=[],Rl=0,Uh=null,Mh=0,so=[],ao=0,Ea=null,Zo=1,es="";function fa(e,t){Al[Rl++]=Mh,Al[Rl++]=Uh,Uh=e,Mh=t}function sx(e,t,r){so[ao++]=Zo,so[ao++]=es,so[ao++]=Ea,Ea=e;var n=Zo;e=es;var o=32-xo(n)-1;n&=~(1<<o),r+=1;var a=32-xo(t)+o;if(30<a){var s=o-o%5;a=(n&(1<<s)-1).toString(32),n>>=s,o-=s,Zo=1<<32-xo(t)+o|r<<o|n,es=a+e}else Zo=1<<a|r<<o|n,es=e}function cv(e){e.return!==null&&(fa(e,1),sx(e,1,0))}function dv(e){for(;e===Uh;)Uh=Al[--Rl],Al[Rl]=null,Mh=Al[--Rl],Al[Rl]=null;for(;e===Ea;)Ea=so[--ao],so[ao]=null,es=so[--ao],so[ao]=null,Zo=so[--ao],so[ao]=null}var Ji=null,zi=null,Tn=!1,Ao=null;function ax(e,t){var r=lo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function AE(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ji=e,zi=Is(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ji=e,zi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ea!==null?{id:Zo,overflow:es}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=lo(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ji=e,zi=null,!0):!1;default:return!1}}function am(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lm(e){if(Tn){var t=zi;if(t){var r=t;if(!AE(e,t)){if(am(e))throw Error(At(418));t=Is(r.nextSibling);var n=Ji;t&&AE(e,t)?ax(n,r):(e.flags=e.flags&-4097|2,Tn=!1,Ji=e)}}else{if(am(e))throw Error(At(418));e.flags=e.flags&-4097|2,Tn=!1,Ji=e}}}function RE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ji=e}function Bf(e){if(e!==Ji)return!1;if(!Tn)return RE(e),Tn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nm(e.type,e.memoizedProps)),t&&(t=zi)){if(am(e))throw lx(),Error(At(418));for(;t;)ax(e,t),t=Is(t.nextSibling)}if(RE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){zi=Is(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}zi=null}}else zi=Ji?Is(e.stateNode.nextSibling):null;return!0}function lx(){for(var e=zi;e;)e=Is(e.nextSibling)}function Ul(){zi=Ji=null,Tn=!1}function fv(e){Ao===null?Ao=[e]:Ao.push(e)}var zF=ls.ReactCurrentBatchConfig;function Eo(e,t){if(e&&e.defaultProps){t=kn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Bh=Hs(null),Hh=null,xl=null,hv=null;function pv(){hv=xl=Hh=null}function gv(e){var t=Bh.current;An(Bh),e._currentValue=t}function um(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Nl(e,t){Hh=e,hv=xl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ki=!0),e.firstContext=null)}function co(e){var t=e._currentValue;if(hv!==e)if(e={context:e,memoizedValue:t,next:null},xl===null){if(Hh===null)throw Error(At(308));xl=e,Hh.dependencies={lanes:0,firstContext:e}}else xl=xl.next=e;return t}var ma=null;function yv(e){ma===null?ma=[e]:ma.push(e)}function ux(e,t,r,n){var o=t.interleaved;return o===null?(r.next=r,yv(t)):(r.next=o.next,o.next=r),t.interleaved=r,is(e,n)}function is(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ss=!1;function mv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ts(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Yr&2){var o=n.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),n.pending=t,is(e,r)}return o=n.interleaved,o===null?(t.next=t,yv(n)):(t.next=o.next,o.next=t),n.interleaved=t,is(e,r)}function yh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,rv(e,r)}}function xE(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?o=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?o=a=t:a=a.next=t}else o=a=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function jh(e,t,r,n){var o=e.updateQueue;Ss=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var f=u,c=f.next;f.next=null,s===null?a=c:s.next=c,s=f;var g=e.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==s&&(u===null?g.firstBaseUpdate=c:u.next=c,g.lastBaseUpdate=f))}if(a!==null){var p=o.baseState;s=0,g=c=f=null,u=a;do{var m=u.lane,_=u.eventTime;if((n&m)===m){g!==null&&(g=g.next={eventTime:_,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=e,R=u;switch(m=t,_=r,R.tag){case 1:if(C=R.payload,typeof C=="function"){p=C.call(_,p,m);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,m=typeof C=="function"?C.call(_,p,m):C,m==null)break e;p=kn({},p,m);break e;case 2:Ss=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[u]:m.push(u))}else _={eventTime:_,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(c=g=_,f=p):g=g.next=_,s|=m;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;m=u,u=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(1);if(g===null&&(f=p),o.baseState=f,o.firstBaseUpdate=c,o.lastBaseUpdate=g,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Aa|=s,e.lanes=s,e.memoizedState=p}}function CE(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(At(191,o));o.call(n)}}}var dx=new uR.Component().refs;function cm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:kn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var cp={isMounted:function(e){return(e=e._reactInternals)?Ta(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=bi(),o=Ns(e),a=ts(n,o);a.payload=t,r!=null&&(a.callback=r),t=Fs(e,a,o),t!==null&&(Co(t,e,o,n),yh(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=bi(),o=Ns(e),a=ts(n,o);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Fs(e,a,o),t!==null&&(Co(t,e,o,n),yh(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bi(),n=Ns(e),o=ts(r,n);o.tag=2,t!=null&&(o.callback=t),t=Fs(e,o,n),t!==null&&(Co(t,e,n,r),yh(t,e,n))}};function TE(e,t,r,n,o,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!zc(r,n)||!zc(o,a):!0}function fx(e,t,r){var n=!1,o=Us,a=t.contextType;return typeof a=="object"&&a!==null?a=co(a):(o=Li(t)?Sa:yi.current,n=t.contextTypes,a=(n=n!=null)?Ll(e,o):Us),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cp,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function PE(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&cp.enqueueReplaceState(t,t.state,null)}function dm(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=dx,mv(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=co(a):(a=Li(t)?Sa:yi.current,o.context=Ll(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(cm(e,t,a,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&cp.enqueueReplaceState(o,o.state,null),jh(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ru(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(At(309));var n=r.stateNode}if(!n)throw Error(At(147,e));var o=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var u=o.refs;u===dx&&(u=o.refs={}),s===null?delete u[a]:u[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(At(284));if(!r._owner)throw Error(At(290,e))}return e}function Hf(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function IE(e){var t=e._init;return t(e._payload)}function hx(e){function t(S,b){if(e){var T=S.deletions;T===null?(S.deletions=[b],S.flags|=16):T.push(b)}}function r(S,b){if(!e)return null;for(;b!==null;)t(S,b),b=b.sibling;return null}function n(S,b){for(S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function o(S,b){return S=ks(S,b),S.index=0,S.sibling=null,S}function a(S,b,T){return S.index=T,e?(T=S.alternate,T!==null?(T=T.index,T<b?(S.flags|=2,b):T):(S.flags|=2,b)):(S.flags|=1048576,b)}function s(S){return e&&S.alternate===null&&(S.flags|=2),S}function u(S,b,T,B){return b===null||b.tag!==6?(b=by(T,S.mode,B),b.return=S,b):(b=o(b,T),b.return=S,b)}function f(S,b,T,B){var H=T.type;return H===vl?g(S,b,T.props.children,B,T.key):b!==null&&(b.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===_s&&IE(H)===b.type)?(B=o(b,T.props),B.ref=Ru(S,b,T),B.return=S,B):(B=Eh(T.type,T.key,T.props,null,S.mode,B),B.ref=Ru(S,b,T),B.return=S,B)}function c(S,b,T,B){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=Ay(T,S.mode,B),b.return=S,b):(b=o(b,T.children||[]),b.return=S,b)}function g(S,b,T,B,H){return b===null||b.tag!==7?(b=_a(T,S.mode,B,H),b.return=S,b):(b=o(b,T),b.return=S,b)}function p(S,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=by(""+b,S.mode,T),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Pf:return T=Eh(b.type,b.key,b.props,null,S.mode,T),T.ref=Ru(S,null,b),T.return=S,T;case ml:return b=Ay(b,S.mode,T),b.return=S,b;case _s:var B=b._init;return p(S,B(b._payload),T)}if(Pc(b)||_u(b))return b=_a(b,S.mode,T,null),b.return=S,b;Hf(S,b)}return null}function m(S,b,T,B){var H=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return H!==null?null:u(S,b,""+T,B);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Pf:return T.key===H?f(S,b,T,B):null;case ml:return T.key===H?c(S,b,T,B):null;case _s:return H=T._init,m(S,b,H(T._payload),B)}if(Pc(T)||_u(T))return H!==null?null:g(S,b,T,B,null);Hf(S,T)}return null}function _(S,b,T,B,H){if(typeof B=="string"&&B!==""||typeof B=="number")return S=S.get(T)||null,u(b,S,""+B,H);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Pf:return S=S.get(B.key===null?T:B.key)||null,f(b,S,B,H);case ml:return S=S.get(B.key===null?T:B.key)||null,c(b,S,B,H);case _s:var $=B._init;return _(S,b,T,$(B._payload),H)}if(Pc(B)||_u(B))return S=S.get(T)||null,g(b,S,B,H,null);Hf(b,B)}return null}function C(S,b,T,B){for(var H=null,$=null,F=b,ne=b=0,Y=null;F!==null&&ne<T.length;ne++){F.index>ne?(Y=F,F=null):Y=F.sibling;var M=m(S,F,T[ne],B);if(M===null){F===null&&(F=Y);break}e&&F&&M.alternate===null&&t(S,F),b=a(M,b,ne),$===null?H=M:$.sibling=M,$=M,F=Y}if(ne===T.length)return r(S,F),Tn&&fa(S,ne),H;if(F===null){for(;ne<T.length;ne++)F=p(S,T[ne],B),F!==null&&(b=a(F,b,ne),$===null?H=F:$.sibling=F,$=F);return Tn&&fa(S,ne),H}for(F=n(S,F);ne<T.length;ne++)Y=_(F,S,ne,T[ne],B),Y!==null&&(e&&Y.alternate!==null&&F.delete(Y.key===null?ne:Y.key),b=a(Y,b,ne),$===null?H=Y:$.sibling=Y,$=Y);return e&&F.forEach(function(J){return t(S,J)}),Tn&&fa(S,ne),H}function R(S,b,T,B){var H=_u(T);if(typeof H!="function")throw Error(At(150));if(T=H.call(T),T==null)throw Error(At(151));for(var $=H=null,F=b,ne=b=0,Y=null,M=T.next();F!==null&&!M.done;ne++,M=T.next()){F.index>ne?(Y=F,F=null):Y=F.sibling;var J=m(S,F,M.value,B);if(J===null){F===null&&(F=Y);break}e&&F&&J.alternate===null&&t(S,F),b=a(J,b,ne),$===null?H=J:$.sibling=J,$=J,F=Y}if(M.done)return r(S,F),Tn&&fa(S,ne),H;if(F===null){for(;!M.done;ne++,M=T.next())M=p(S,M.value,B),M!==null&&(b=a(M,b,ne),$===null?H=M:$.sibling=M,$=M);return Tn&&fa(S,ne),H}for(F=n(S,F);!M.done;ne++,M=T.next())M=_(F,S,ne,M.value,B),M!==null&&(e&&M.alternate!==null&&F.delete(M.key===null?ne:M.key),b=a(M,b,ne),$===null?H=M:$.sibling=M,$=M);return e&&F.forEach(function(Le){return t(S,Le)}),Tn&&fa(S,ne),H}function I(S,b,T,B){if(typeof T=="object"&&T!==null&&T.type===vl&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Pf:e:{for(var H=T.key,$=b;$!==null;){if($.key===H){if(H=T.type,H===vl){if($.tag===7){r(S,$.sibling),b=o($,T.props.children),b.return=S,S=b;break e}}else if($.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===_s&&IE(H)===$.type){r(S,$.sibling),b=o($,T.props),b.ref=Ru(S,$,T),b.return=S,S=b;break e}r(S,$);break}else t(S,$);$=$.sibling}T.type===vl?(b=_a(T.props.children,S.mode,B,T.key),b.return=S,S=b):(B=Eh(T.type,T.key,T.props,null,S.mode,B),B.ref=Ru(S,b,T),B.return=S,S=B)}return s(S);case ml:e:{for($=T.key;b!==null;){if(b.key===$)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){r(S,b.sibling),b=o(b,T.children||[]),b.return=S,S=b;break e}else{r(S,b);break}else t(S,b);b=b.sibling}b=Ay(T,S.mode,B),b.return=S,S=b}return s(S);case _s:return $=T._init,I(S,b,$(T._payload),B)}if(Pc(T))return C(S,b,T,B);if(_u(T))return R(S,b,T,B);Hf(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(r(S,b.sibling),b=o(b,T),b.return=S,S=b):(r(S,b),b=by(T,S.mode,B),b.return=S,S=b),s(S)):r(S,b)}return I}var Ml=hx(!0),px=hx(!1),cd={},Ho=Hs(cd),Yc=Hs(cd),Zc=Hs(cd);function va(e){if(e===cd)throw Error(At(174));return e}function vv(e,t){switch(_n(Zc,t),_n(Yc,e),_n(Ho,cd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:V0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=V0(t,e)}An(Ho),_n(Ho,t)}function Bl(){An(Ho),An(Yc),An(Zc)}function gx(e){va(Zc.current);var t=va(Ho.current),r=V0(t,e.type);t!==r&&(_n(Yc,e),_n(Ho,r))}function wv(e){Yc.current===e&&(An(Ho),An(Yc))}var On=Hs(0);function $h(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var my=[];function _v(){for(var e=0;e<my.length;e++)my[e]._workInProgressVersionPrimary=null;my.length=0}var mh=ls.ReactCurrentDispatcher,vy=ls.ReactCurrentBatchConfig,ba=0,Nn=null,Xn=null,ti=null,Vh=!1,Uc=!1,ed=0,JF=0;function fi(){throw Error(At(321))}function Sv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!To(e[r],t[r]))return!1;return!0}function Ev(e,t,r,n,o,a){if(ba=a,Nn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mh.current=e===null||e.memoizedState===null?ZF:eO,e=r(n,o),Uc){a=0;do{if(Uc=!1,ed=0,25<=a)throw Error(At(301));a+=1,ti=Xn=null,t.updateQueue=null,mh.current=tO,e=r(n,o)}while(Uc)}if(mh.current=Kh,t=Xn!==null&&Xn.next!==null,ba=0,ti=Xn=Nn=null,Vh=!1,t)throw Error(At(300));return e}function bv(){var e=ed!==0;return ed=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?Nn.memoizedState=ti=e:ti=ti.next=e,ti}function fo(){if(Xn===null){var e=Nn.alternate;e=e!==null?e.memoizedState:null}else e=Xn.next;var t=ti===null?Nn.memoizedState:ti.next;if(t!==null)ti=t,Xn=e;else{if(e===null)throw Error(At(310));Xn=e,e={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},ti===null?Nn.memoizedState=ti=e:ti=ti.next=e}return ti}function td(e,t){return typeof t=="function"?t(e):t}function wy(e){var t=fo(),r=t.queue;if(r===null)throw Error(At(311));r.lastRenderedReducer=e;var n=Xn,o=n.baseQueue,a=r.pending;if(a!==null){if(o!==null){var s=o.next;o.next=a.next,a.next=s}n.baseQueue=o=a,r.pending=null}if(o!==null){a=o.next,n=n.baseState;var u=s=null,f=null,c=a;do{var g=c.lane;if((ba&g)===g)f!==null&&(f=f.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var p={lane:g,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};f===null?(u=f=p,s=n):f=f.next=p,Nn.lanes|=g,Aa|=g}c=c.next}while(c!==null&&c!==a);f===null?s=n:f.next=u,To(n,t.memoizedState)||(ki=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=f,r.lastRenderedState=n}if(e=r.interleaved,e!==null){o=e;do a=o.lane,Nn.lanes|=a,Aa|=a,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _y(e){var t=fo(),r=t.queue;if(r===null)throw Error(At(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,a=t.memoizedState;if(o!==null){r.pending=null;var s=o=o.next;do a=e(a,s.action),s=s.next;while(s!==o);To(a,t.memoizedState)||(ki=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function yx(){}function mx(e,t){var r=Nn,n=fo(),o=t(),a=!To(n.memoizedState,o);if(a&&(n.memoizedState=o,ki=!0),n=n.queue,Av(_x.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ti!==null&&ti.memoizedState.tag&1){if(r.flags|=2048,rd(9,wx.bind(null,r,n,o,t),void 0,null),ri===null)throw Error(At(349));ba&30||vx(r,t,o)}return o}function vx(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function wx(e,t,r,n){t.value=r,t.getSnapshot=n,Sx(t)&&Ex(e)}function _x(e,t,r){return r(function(){Sx(t)&&Ex(e)})}function Sx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!To(e,r)}catch{return!0}}function Ex(e){var t=is(e,1);t!==null&&Co(t,e,1,-1)}function FE(e){var t=ko();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:td,lastRenderedState:e},t.queue=e,e=e.dispatch=YF.bind(null,Nn,e),[t.memoizedState,e]}function rd(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function bx(){return fo().memoizedState}function vh(e,t,r,n){var o=ko();Nn.flags|=e,o.memoizedState=rd(1|t,r,void 0,n===void 0?null:n)}function dp(e,t,r,n){var o=fo();n=n===void 0?null:n;var a=void 0;if(Xn!==null){var s=Xn.memoizedState;if(a=s.destroy,n!==null&&Sv(n,s.deps)){o.memoizedState=rd(t,r,a,n);return}}Nn.flags|=e,o.memoizedState=rd(1|t,r,a,n)}function OE(e,t){return vh(8390656,8,e,t)}function Av(e,t){return dp(2048,8,e,t)}function Ax(e,t){return dp(4,2,e,t)}function Rx(e,t){return dp(4,4,e,t)}function xx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cx(e,t,r){return r=r!=null?r.concat([e]):null,dp(4,4,xx.bind(null,t,e),r)}function Rv(){}function Tx(e,t){var r=fo();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Sv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Px(e,t){var r=fo();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Sv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ix(e,t,r){return ba&21?(To(r,t)||(r=NR(),Nn.lanes|=r,Aa|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ki=!0),e.memoizedState=r)}function XF(e,t){var r=dn;dn=r!==0&&4>r?r:4,e(!0);var n=vy.transition;vy.transition={};try{e(!1),t()}finally{dn=r,vy.transition=n}}function Fx(){return fo().memoizedState}function QF(e,t,r){var n=Ns(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ox(e))Nx(t,r);else if(r=ux(e,t,r,n),r!==null){var o=bi();Co(r,e,n,o),kx(r,t,n)}}function YF(e,t,r){var n=Ns(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ox(e))Nx(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,u=a(s,r);if(o.hasEagerState=!0,o.eagerState=u,To(u,s)){var f=t.interleaved;f===null?(o.next=o,yv(t)):(o.next=f.next,f.next=o),t.interleaved=o;return}}catch{}finally{}r=ux(e,t,o,n),r!==null&&(o=bi(),Co(r,e,n,o),kx(r,t,n))}}function Ox(e){var t=e.alternate;return e===Nn||t!==null&&t===Nn}function Nx(e,t){Uc=Vh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function kx(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,rv(e,r)}}var Kh={readContext:co,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},ZF={readContext:co,useCallback:function(e,t){return ko().memoizedState=[e,t===void 0?null:t],e},useContext:co,useEffect:OE,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,vh(4194308,4,xx.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vh(4194308,4,e,t)},useInsertionEffect:function(e,t){return vh(4,2,e,t)},useMemo:function(e,t){var r=ko();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ko();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=QF.bind(null,Nn,e),[n.memoizedState,e]},useRef:function(e){var t=ko();return e={current:e},t.memoizedState=e},useState:FE,useDebugValue:Rv,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=FE(!1),t=e[0];return e=XF.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Nn,o=ko();if(Tn){if(r===void 0)throw Error(At(407));r=r()}else{if(r=t(),ri===null)throw Error(At(349));ba&30||vx(n,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,OE(_x.bind(null,n,a,e),[e]),n.flags|=2048,rd(9,wx.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ko(),t=ri.identifierPrefix;if(Tn){var r=es,n=Zo;r=(n&~(1<<32-xo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ed++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=JF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eO={readContext:co,useCallback:Tx,useContext:co,useEffect:Av,useImperativeHandle:Cx,useInsertionEffect:Ax,useLayoutEffect:Rx,useMemo:Px,useReducer:wy,useRef:bx,useState:function(){return wy(td)},useDebugValue:Rv,useDeferredValue:function(e){var t=fo();return Ix(t,Xn.memoizedState,e)},useTransition:function(){var e=wy(td)[0],t=fo().memoizedState;return[e,t]},useMutableSource:yx,useSyncExternalStore:mx,useId:Fx,unstable_isNewReconciler:!1},tO={readContext:co,useCallback:Tx,useContext:co,useEffect:Av,useImperativeHandle:Cx,useInsertionEffect:Ax,useLayoutEffect:Rx,useMemo:Px,useReducer:_y,useRef:bx,useState:function(){return _y(td)},useDebugValue:Rv,useDeferredValue:function(e){var t=fo();return Xn===null?t.memoizedState=e:Ix(t,Xn.memoizedState,e)},useTransition:function(){var e=_y(td)[0],t=fo().memoizedState;return[e,t]},useMutableSource:yx,useSyncExternalStore:mx,useId:Fx,unstable_isNewReconciler:!1};function Hl(e,t){try{var r="",n=t;do r+=PI(n),n=n.return;while(n);var o=r}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Sy(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function fm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var rO=typeof WeakMap=="function"?WeakMap:Map;function Dx(e,t,r){r=ts(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Gh||(Gh=!0,Em=n),fm(e,t)},r}function Lx(e,t,r){r=ts(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){fm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){fm(e,t),typeof n!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function NE(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new rO;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=yO.bind(null,e,t,r),t.then(e,e))}function kE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function DE(e,t,r,n,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ts(-1,1),t.tag=2,Fs(r,t,1))),r.lanes|=1),e)}var nO=ls.ReactCurrentOwner,ki=!1;function Ei(e,t,r,n){t.child=e===null?px(t,null,r,n):Ml(t,e.child,r,n)}function LE(e,t,r,n,o){r=r.render;var a=t.ref;return Nl(t,o),n=Ev(e,t,r,n,a,o),r=bv(),e!==null&&!ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,os(e,t,o)):(Tn&&r&&cv(t),t.flags|=1,Ei(e,t,n,o),t.child)}function UE(e,t,r,n,o){if(e===null){var a=r.type;return typeof a=="function"&&!Nv(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Ux(e,t,a,n,o)):(e=Eh(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:zc,r(s,n)&&e.ref===t.ref)return os(e,t,o)}return t.flags|=1,e=ks(a,n),e.ref=t.ref,e.return=t,t.child=e}function Ux(e,t,r,n,o){if(e!==null){var a=e.memoizedProps;if(zc(a,n)&&e.ref===t.ref)if(ki=!1,t.pendingProps=n=a,(e.lanes&o)!==0)e.flags&131072&&(ki=!0);else return t.lanes=e.lanes,os(e,t,o)}return hm(e,t,r,n,o)}function Mx(e,t,r){var n=t.pendingProps,o=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Tl,qi),qi|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_n(Tl,qi),qi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,_n(Tl,qi),qi|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,_n(Tl,qi),qi|=n;return Ei(e,t,o,r),t.child}function Bx(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function hm(e,t,r,n,o){var a=Li(r)?Sa:yi.current;return a=Ll(t,a),Nl(t,o),r=Ev(e,t,r,n,a,o),n=bv(),e!==null&&!ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,os(e,t,o)):(Tn&&n&&cv(t),t.flags|=1,Ei(e,t,r,o),t.child)}function ME(e,t,r,n,o){if(Li(r)){var a=!0;Lh(t)}else a=!1;if(Nl(t,o),t.stateNode===null)wh(e,t),fx(t,r,n),dm(t,r,n,o),n=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var f=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=co(c):(c=Li(r)?Sa:yi.current,c=Ll(t,c));var g=r.getDerivedStateFromProps,p=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==n||f!==c)&&PE(t,s,n,c),Ss=!1;var m=t.memoizedState;s.state=m,jh(t,n,s,o),f=t.memoizedState,u!==n||m!==f||Di.current||Ss?(typeof g=="function"&&(cm(t,r,g,n),f=t.memoizedState),(u=Ss||TE(t,r,u,n,m,f,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=c,n=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,cx(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Eo(t.type,u),s.props=c,p=t.pendingProps,m=s.context,f=r.contextType,typeof f=="object"&&f!==null?f=co(f):(f=Li(r)?Sa:yi.current,f=Ll(t,f));var _=r.getDerivedStateFromProps;(g=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||m!==f)&&PE(t,s,n,f),Ss=!1,m=t.memoizedState,s.state=m,jh(t,n,s,o);var C=t.memoizedState;u!==p||m!==C||Di.current||Ss?(typeof _=="function"&&(cm(t,r,_,n),C=t.memoizedState),(c=Ss||TE(t,r,c,n,m,C,f)||!1)?(g||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,C,f),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,C,f)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=C),s.props=n,s.state=C,s.context=f,n=c):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return pm(e,t,r,n,a,o)}function pm(e,t,r,n,o,a){Bx(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return o&&bE(t,r,!1),os(e,t,a);n=t.stateNode,nO.current=t;var u=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Ml(t,e.child,null,a),t.child=Ml(t,null,u,a)):Ei(e,t,u,a),t.memoizedState=n.state,o&&bE(t,r,!0),t.child}function Hx(e){var t=e.stateNode;t.pendingContext?EE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&EE(e,t.context,!1),vv(e,t.containerInfo)}function BE(e,t,r,n,o){return Ul(),fv(o),t.flags|=256,Ei(e,t,r,n),t.child}var gm={dehydrated:null,treeContext:null,retryLane:0};function ym(e){return{baseLanes:e,cachePool:null,transitions:null}}function jx(e,t,r){var n=t.pendingProps,o=On.current,a=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),_n(On,o&1),e===null)return lm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=pp(s,n,0,null),e=_a(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ym(r),t.memoizedState=gm,e):xv(t,s));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return iO(e,t,s,n,u,o,r);if(a){a=n.fallback,s=t.mode,o=e.child,u=o.sibling;var f={mode:"hidden",children:n.children};return!(s&1)&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=f,t.deletions=null):(n=ks(o,f),n.subtreeFlags=o.subtreeFlags&14680064),u!==null?a=ks(u,a):(a=_a(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?ym(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=gm,n}return a=e.child,e=a.sibling,n=ks(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function xv(e,t){return t=pp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jf(e,t,r,n){return n!==null&&fv(n),Ml(t,e.child,null,r),e=xv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iO(e,t,r,n,o,a,s){if(r)return t.flags&256?(t.flags&=-257,n=Sy(Error(At(422))),jf(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,o=t.mode,n=pp({mode:"visible",children:n.children},o,0,null),a=_a(a,o,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Ml(t,e.child,null,s),t.child.memoizedState=ym(s),t.memoizedState=gm,a);if(!(t.mode&1))return jf(e,t,s,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var u=n.dgst;return n=u,a=Error(At(419)),n=Sy(a,n,void 0),jf(e,t,s,n)}if(u=(s&e.childLanes)!==0,ki||u){if(n=ri,n!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|s)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,is(e,o),Co(n,e,o,-1))}return Ov(),n=Sy(Error(At(421))),jf(e,t,s,n)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=mO.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,zi=Is(o.nextSibling),Ji=t,Tn=!0,Ao=null,e!==null&&(so[ao++]=Zo,so[ao++]=es,so[ao++]=Ea,Zo=e.id,es=e.overflow,Ea=t),t=xv(t,n.children),t.flags|=4096,t)}function HE(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),um(e.return,t,r)}function Ey(e,t,r,n,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o)}function $x(e,t,r){var n=t.pendingProps,o=n.revealOrder,a=n.tail;if(Ei(e,t,n.children,r),n=On.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&HE(e,r,t);else if(e.tag===19)HE(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(_n(On,n),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&$h(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Ey(t,!1,o,r,a);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&$h(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Ey(t,!0,r,null,a);break;case"together":Ey(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function os(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Aa|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,r=ks(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ks(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function oO(e,t,r){switch(t.tag){case 3:Hx(t),Ul();break;case 5:gx(t);break;case 1:Li(t.type)&&Lh(t);break;case 4:vv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;_n(Bh,n._currentValue),n._currentValue=o;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(_n(On,On.current&1),t.flags|=128,null):r&t.child.childLanes?jx(e,t,r):(_n(On,On.current&1),e=os(e,t,r),e!==null?e.sibling:null);_n(On,On.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return $x(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),_n(On,On.current),n)break;return null;case 22:case 23:return t.lanes=0,Mx(e,t,r)}return os(e,t,r)}var Vx,mm,Kx,Wx;Vx=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mm=function(){};Kx=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,va(Ho.current);var a=null;switch(r){case"input":o=B0(e,o),n=B0(e,n),a=[];break;case"select":o=kn({},o,{value:void 0}),n=kn({},n,{value:void 0}),a=[];break;case"textarea":o=$0(e,o),n=$0(e,n),a=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=kh)}K0(r,n);var s;r=null;for(c in o)if(!n.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var u=o[c];for(s in u)u.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(jc.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var f=n[c];if(u=o!=null?o[c]:void 0,n.hasOwnProperty(c)&&f!==u&&(f!=null||u!=null))if(c==="style")if(u){for(s in u)!u.hasOwnProperty(s)||f&&f.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in f)f.hasOwnProperty(s)&&u[s]!==f[s]&&(r||(r={}),r[s]=f[s])}else r||(a||(a=[]),a.push(c,r)),r=f;else c==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(a=a||[]).push(c,f)):c==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(c,""+f):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(jc.hasOwnProperty(c)?(f!=null&&c==="onScroll"&&En("scroll",e),a||u===f||(a=[])):(a=a||[]).push(c,f))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};Wx=function(e,t,r,n){r!==n&&(t.flags|=4)};function xu(e,t){if(!Tn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function hi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function sO(e,t,r){var n=t.pendingProps;switch(dv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(t),null;case 1:return Li(t.type)&&Dh(),hi(t),null;case 3:return n=t.stateNode,Bl(),An(Di),An(yi),_v(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Bf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ao!==null&&(Rm(Ao),Ao=null))),mm(e,t),hi(t),null;case 5:wv(t);var o=va(Zc.current);if(r=t.type,e!==null&&t.stateNode!=null)Kx(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(At(166));return hi(t),null}if(e=va(Ho.current),Bf(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Mo]=t,n[Qc]=a,e=(t.mode&1)!==0,r){case"dialog":En("cancel",n),En("close",n);break;case"iframe":case"object":case"embed":En("load",n);break;case"video":case"audio":for(o=0;o<Fc.length;o++)En(Fc[o],n);break;case"source":En("error",n);break;case"img":case"image":case"link":En("error",n),En("load",n);break;case"details":En("toggle",n);break;case"input":JS(n,a),En("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},En("invalid",n);break;case"textarea":QS(n,a),En("invalid",n)}K0(r,a),o=null;for(var s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="children"?typeof u=="string"?n.textContent!==u&&(a.suppressHydrationWarning!==!0&&Mf(n.textContent,u,e),o=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Mf(n.textContent,u,e),o=["children",""+u]):jc.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&En("scroll",n)}switch(r){case"input":If(n),XS(n,a,!0);break;case"textarea":If(n),YS(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=kh)}n=o,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vR(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Mo]=t,e[Qc]=n,Vx(e,t,!1,!1),t.stateNode=e;e:{switch(s=W0(r,n),r){case"dialog":En("cancel",e),En("close",e),o=n;break;case"iframe":case"object":case"embed":En("load",e),o=n;break;case"video":case"audio":for(o=0;o<Fc.length;o++)En(Fc[o],e);o=n;break;case"source":En("error",e),o=n;break;case"img":case"image":case"link":En("error",e),En("load",e),o=n;break;case"details":En("toggle",e),o=n;break;case"input":JS(e,n),o=B0(e,n),En("invalid",e);break;case"option":o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=kn({},n,{value:void 0}),En("invalid",e);break;case"textarea":QS(e,n),o=$0(e,n),En("invalid",e);break;default:o=n}K0(r,o),u=o;for(a in u)if(u.hasOwnProperty(a)){var f=u[a];a==="style"?SR(e,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&wR(e,f)):a==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&$c(e,f):typeof f=="number"&&$c(e,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(jc.hasOwnProperty(a)?f!=null&&a==="onScroll"&&En("scroll",e):f!=null&&Xm(e,a,f,s))}switch(r){case"input":If(e),XS(e,n,!1);break;case"textarea":If(e),YS(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ls(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Pl(e,!!n.multiple,a,!1):n.defaultValue!=null&&Pl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=kh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return hi(t),null;case 6:if(e&&t.stateNode!=null)Wx(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(At(166));if(r=va(Zc.current),va(Ho.current),Bf(t)){if(n=t.stateNode,r=t.memoizedProps,n[Mo]=t,(a=n.nodeValue!==r)&&(e=Ji,e!==null))switch(e.tag){case 3:Mf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mf(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Mo]=t,t.stateNode=n}return hi(t),null;case 13:if(An(On),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Tn&&zi!==null&&t.mode&1&&!(t.flags&128))lx(),Ul(),t.flags|=98560,a=!1;else if(a=Bf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(At(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(At(317));a[Mo]=t}else Ul(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;hi(t),a=!1}else Ao!==null&&(Rm(Ao),Ao=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||On.current&1?Yn===0&&(Yn=3):Ov())),t.updateQueue!==null&&(t.flags|=4),hi(t),null);case 4:return Bl(),mm(e,t),e===null&&Jc(t.stateNode.containerInfo),hi(t),null;case 10:return gv(t.type._context),hi(t),null;case 17:return Li(t.type)&&Dh(),hi(t),null;case 19:if(An(On),a=t.memoizedState,a===null)return hi(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)xu(a,!1);else{if(Yn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=$h(e),s!==null){for(t.flags|=128,xu(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _n(On,On.current&1|2),t.child}e=e.sibling}a.tail!==null&&jn()>jl&&(t.flags|=128,n=!0,xu(a,!1),t.lanes=4194304)}else{if(!n)if(e=$h(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Tn)return hi(t),null}else 2*jn()-a.renderingStartTime>jl&&r!==1073741824&&(t.flags|=128,n=!0,xu(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=jn(),t.sibling=null,r=On.current,_n(On,n?r&1|2:r&1),t):(hi(t),null);case 22:case 23:return Fv(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?qi&1073741824&&(hi(t),t.subtreeFlags&6&&(t.flags|=8192)):hi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function aO(e,t){switch(dv(t),t.tag){case 1:return Li(t.type)&&Dh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bl(),An(Di),An(yi),_v(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wv(t),null;case 13:if(An(On),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));Ul()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return An(On),null;case 4:return Bl(),null;case 10:return gv(t.type._context),null;case 22:case 23:return Fv(),null;case 24:return null;default:return null}}var $f=!1,gi=!1,lO=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Cl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ln(e,t,n)}else r.current=null}function vm(e,t,r){try{r()}catch(n){Ln(e,t,n)}}var jE=!1;function uO(e,t){if(tm=Fh,e=JR(),uv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,u=-1,f=-1,c=0,g=0,p=e,m=null;t:for(;;){for(var _;p!==r||o!==0&&p.nodeType!==3||(u=s+o),p!==a||n!==0&&p.nodeType!==3||(f=s+n),p.nodeType===3&&(s+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===e)break t;if(m===r&&++c===o&&(u=s),m===a&&++g===n&&(f=s),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}r=u===-1||f===-1?null:{start:u,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(rm={focusedElem:e,selectionRange:r},Fh=!1,Xt=t;Xt!==null;)if(t=Xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xt=e;else for(;Xt!==null;){t=Xt;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,I=C.memoizedState,S=t.stateNode,b=S.getSnapshotBeforeUpdate(t.elementType===t.type?R:Eo(t.type,R),I);S.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(B){Ln(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,Xt=e;break}Xt=t.return}return C=jE,jE=!1,C}function Mc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&vm(t,r,a)}o=o.next}while(o!==n)}}function fp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function wm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Gx(e){var t=e.alternate;t!==null&&(e.alternate=null,Gx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mo],delete t[Qc],delete t[om],delete t[WF],delete t[GF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qx(e){return e.tag===5||e.tag===3||e.tag===4}function $E(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _m(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=kh));else if(n!==4&&(e=e.child,e!==null))for(_m(e,t,r),e=e.sibling;e!==null;)_m(e,t,r),e=e.sibling}function Sm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Sm(e,t,r),e=e.sibling;e!==null;)Sm(e,t,r),e=e.sibling}var ai=null,bo=!1;function ps(e,t,r){for(r=r.child;r!==null;)zx(e,t,r),r=r.sibling}function zx(e,t,r){if(Bo&&typeof Bo.onCommitFiberUnmount=="function")try{Bo.onCommitFiberUnmount(ip,r)}catch{}switch(r.tag){case 5:gi||Cl(r,t);case 6:var n=ai,o=bo;ai=null,ps(e,t,r),ai=n,bo=o,ai!==null&&(bo?(e=ai,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ai.removeChild(r.stateNode));break;case 18:ai!==null&&(bo?(e=ai,r=r.stateNode,e.nodeType===8?gy(e.parentNode,r):e.nodeType===1&&gy(e,r),Gc(e)):gy(ai,r.stateNode));break;case 4:n=ai,o=bo,ai=r.stateNode.containerInfo,bo=!0,ps(e,t,r),ai=n,bo=o;break;case 0:case 11:case 14:case 15:if(!gi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var a=o,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&vm(r,t,s),o=o.next}while(o!==n)}ps(e,t,r);break;case 1:if(!gi&&(Cl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){Ln(r,t,u)}ps(e,t,r);break;case 21:ps(e,t,r);break;case 22:r.mode&1?(gi=(n=gi)||r.memoizedState!==null,ps(e,t,r),gi=n):ps(e,t,r);break;default:ps(e,t,r)}}function VE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new lO),t.forEach(function(n){var o=vO.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function So(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var a=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:ai=u.stateNode,bo=!1;break e;case 3:ai=u.stateNode.containerInfo,bo=!0;break e;case 4:ai=u.stateNode.containerInfo,bo=!0;break e}u=u.return}if(ai===null)throw Error(At(160));zx(a,s,o),ai=null,bo=!1;var f=o.alternate;f!==null&&(f.return=null),o.return=null}catch(c){Ln(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jx(t,e),t=t.sibling}function Jx(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(So(t,e),No(e),n&4){try{Mc(3,e,e.return),fp(3,e)}catch(R){Ln(e,e.return,R)}try{Mc(5,e,e.return)}catch(R){Ln(e,e.return,R)}}break;case 1:So(t,e),No(e),n&512&&r!==null&&Cl(r,r.return);break;case 5:if(So(t,e),No(e),n&512&&r!==null&&Cl(r,r.return),e.flags&32){var o=e.stateNode;try{$c(o,"")}catch(R){Ln(e,e.return,R)}}if(n&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,u=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&yR(o,a),W0(u,s);var c=W0(u,a);for(s=0;s<f.length;s+=2){var g=f[s],p=f[s+1];g==="style"?SR(o,p):g==="dangerouslySetInnerHTML"?wR(o,p):g==="children"?$c(o,p):Xm(o,g,p,c)}switch(u){case"input":H0(o,a);break;case"textarea":mR(o,a);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var _=a.value;_!=null?Pl(o,!!a.multiple,_,!1):m!==!!a.multiple&&(a.defaultValue!=null?Pl(o,!!a.multiple,a.defaultValue,!0):Pl(o,!!a.multiple,a.multiple?[]:"",!1))}o[Qc]=a}catch(R){Ln(e,e.return,R)}}break;case 6:if(So(t,e),No(e),n&4){if(e.stateNode===null)throw Error(At(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(R){Ln(e,e.return,R)}}break;case 3:if(So(t,e),No(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Gc(t.containerInfo)}catch(R){Ln(e,e.return,R)}break;case 4:So(t,e),No(e);break;case 13:So(t,e),No(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(Pv=jn())),n&4&&VE(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(gi=(c=gi)||g,So(t,e),gi=c):So(t,e),No(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!g&&e.mode&1)for(Xt=e,g=e.child;g!==null;){for(p=Xt=g;Xt!==null;){switch(m=Xt,_=m.child,m.tag){case 0:case 11:case 14:case 15:Mc(4,m,m.return);break;case 1:Cl(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(R){Ln(n,r,R)}}break;case 5:Cl(m,m.return);break;case 22:if(m.memoizedState!==null){WE(p);continue}}_!==null?(_.return=m,Xt=_):WE(p)}g=g.sibling}e:for(g=null,p=e;;){if(p.tag===5){if(g===null){g=p;try{o=p.stateNode,c?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=p.stateNode,f=p.memoizedProps.style,s=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=_R("display",s))}catch(R){Ln(e,e.return,R)}}}else if(p.tag===6){if(g===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(R){Ln(e,e.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;g===p&&(g=null),p=p.return}g===p&&(g=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:So(t,e),No(e),n&4&&VE(e);break;case 21:break;default:So(t,e),No(e)}}function No(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qx(r)){var n=r;break e}r=r.return}throw Error(At(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&($c(o,""),n.flags&=-33);var a=$E(e);Sm(e,a,o);break;case 3:case 4:var s=n.stateNode.containerInfo,u=$E(e);_m(e,u,s);break;default:throw Error(At(161))}}catch(f){Ln(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cO(e,t,r){Xt=e,Xx(e)}function Xx(e,t,r){for(var n=(e.mode&1)!==0;Xt!==null;){var o=Xt,a=o.child;if(o.tag===22&&n){var s=o.memoizedState!==null||$f;if(!s){var u=o.alternate,f=u!==null&&u.memoizedState!==null||gi;u=$f;var c=gi;if($f=s,(gi=f)&&!c)for(Xt=o;Xt!==null;)s=Xt,f=s.child,s.tag===22&&s.memoizedState!==null?GE(o):f!==null?(f.return=s,Xt=f):GE(o);for(;a!==null;)Xt=a,Xx(a),a=a.sibling;Xt=o,$f=u,gi=c}KE(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,Xt=a):KE(e)}}function KE(e){for(;Xt!==null;){var t=Xt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gi||fp(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!gi)if(r===null)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:Eo(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&CE(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}CE(t,s,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var g=c.memoizedState;if(g!==null){var p=g.dehydrated;p!==null&&Gc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}gi||t.flags&512&&wm(t)}catch(m){Ln(t,t.return,m)}}if(t===e){Xt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Xt=r;break}Xt=t.return}}function WE(e){for(;Xt!==null;){var t=Xt;if(t===e){Xt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Xt=r;break}Xt=t.return}}function GE(e){for(;Xt!==null;){var t=Xt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fp(4,t)}catch(f){Ln(t,r,f)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var o=t.return;try{n.componentDidMount()}catch(f){Ln(t,o,f)}}var a=t.return;try{wm(t)}catch(f){Ln(t,a,f)}break;case 5:var s=t.return;try{wm(t)}catch(f){Ln(t,s,f)}}}catch(f){Ln(t,t.return,f)}if(t===e){Xt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Xt=u;break}Xt=t.return}}var dO=Math.ceil,Wh=ls.ReactCurrentDispatcher,Cv=ls.ReactCurrentOwner,uo=ls.ReactCurrentBatchConfig,Yr=0,ri=null,Wn=null,ui=0,qi=0,Tl=Hs(0),Yn=0,nd=null,Aa=0,hp=0,Tv=0,Bc=null,Oi=null,Pv=0,jl=1/0,Qo=null,Gh=!1,Em=null,Os=null,Vf=!1,Rs=null,qh=0,Hc=0,bm=null,_h=-1,Sh=0;function bi(){return Yr&6?jn():_h!==-1?_h:_h=jn()}function Ns(e){return e.mode&1?Yr&2&&ui!==0?ui&-ui:zF.transition!==null?(Sh===0&&(Sh=NR()),Sh):(e=dn,e!==0||(e=window.event,e=e===void 0?16:HR(e.type)),e):1}function Co(e,t,r,n){if(50<Hc)throw Hc=0,bm=null,Error(At(185));ad(e,r,n),(!(Yr&2)||e!==ri)&&(e===ri&&(!(Yr&2)&&(hp|=r),Yn===4&&bs(e,ui)),Ui(e,n),r===1&&Yr===0&&!(t.mode&1)&&(jl=jn()+500,up&&js()))}function Ui(e,t){var r=e.callbackNode;zI(e,t);var n=Ih(e,e===ri?ui:0);if(n===0)r!==null&&tE(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&tE(r),t===1)e.tag===0?qF(qE.bind(null,e)):ox(qE.bind(null,e)),VF(function(){!(Yr&6)&&js()}),r=null;else{switch(kR(n)){case 1:r=tv;break;case 4:r=FR;break;case 16:r=Ph;break;case 536870912:r=OR;break;default:r=Ph}r=iC(r,Qx.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Qx(e,t){if(_h=-1,Sh=0,Yr&6)throw Error(At(327));var r=e.callbackNode;if(kl()&&e.callbackNode!==r)return null;var n=Ih(e,e===ri?ui:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=zh(e,n);else{t=n;var o=Yr;Yr|=2;var a=Zx();(ri!==e||ui!==t)&&(Qo=null,jl=jn()+500,wa(e,t));do try{pO();break}catch(u){Yx(e,u)}while(1);pv(),Wh.current=a,Yr=o,Wn!==null?t=0:(ri=null,ui=0,t=Yn)}if(t!==0){if(t===2&&(o=X0(e),o!==0&&(n=o,t=Am(e,o))),t===1)throw r=nd,wa(e,0),bs(e,n),Ui(e,jn()),r;if(t===6)bs(e,n);else{if(o=e.current.alternate,!(n&30)&&!fO(o)&&(t=zh(e,n),t===2&&(a=X0(e),a!==0&&(n=a,t=Am(e,a))),t===1))throw r=nd,wa(e,0),bs(e,n),Ui(e,jn()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(At(345));case 2:ha(e,Oi,Qo);break;case 3:if(bs(e,n),(n&130023424)===n&&(t=Pv+500-jn(),10<t)){if(Ih(e,0)!==0)break;if(o=e.suspendedLanes,(o&n)!==n){bi(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=im(ha.bind(null,e,Oi,Qo),t);break}ha(e,Oi,Qo);break;case 4:if(bs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,o=-1;0<n;){var s=31-xo(n);a=1<<s,s=t[s],s>o&&(o=s),n&=~a}if(n=o,n=jn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dO(n/1960))-n,10<n){e.timeoutHandle=im(ha.bind(null,e,Oi,Qo),n);break}ha(e,Oi,Qo);break;case 5:ha(e,Oi,Qo);break;default:throw Error(At(329))}}}return Ui(e,jn()),e.callbackNode===r?Qx.bind(null,e):null}function Am(e,t){var r=Bc;return e.current.memoizedState.isDehydrated&&(wa(e,t).flags|=256),e=zh(e,t),e!==2&&(t=Oi,Oi=r,t!==null&&Rm(t)),e}function Rm(e){Oi===null?Oi=e:Oi.push.apply(Oi,e)}function fO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],a=o.getSnapshot;o=o.value;try{if(!To(a(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bs(e,t){for(t&=~Tv,t&=~hp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-xo(t),n=1<<r;e[r]=-1,t&=~n}}function qE(e){if(Yr&6)throw Error(At(327));kl();var t=Ih(e,0);if(!(t&1))return Ui(e,jn()),null;var r=zh(e,t);if(e.tag!==0&&r===2){var n=X0(e);n!==0&&(t=n,r=Am(e,n))}if(r===1)throw r=nd,wa(e,0),bs(e,t),Ui(e,jn()),r;if(r===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ha(e,Oi,Qo),Ui(e,jn()),null}function Iv(e,t){var r=Yr;Yr|=1;try{return e(t)}finally{Yr=r,Yr===0&&(jl=jn()+500,up&&js())}}function Ra(e){Rs!==null&&Rs.tag===0&&!(Yr&6)&&kl();var t=Yr;Yr|=1;var r=uo.transition,n=dn;try{if(uo.transition=null,dn=1,e)return e()}finally{dn=n,uo.transition=r,Yr=t,!(Yr&6)&&js()}}function Fv(){qi=Tl.current,An(Tl)}function wa(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$F(r)),Wn!==null)for(r=Wn.return;r!==null;){var n=r;switch(dv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dh();break;case 3:Bl(),An(Di),An(yi),_v();break;case 5:wv(n);break;case 4:Bl();break;case 13:An(On);break;case 19:An(On);break;case 10:gv(n.type._context);break;case 22:case 23:Fv()}r=r.return}if(ri=e,Wn=e=ks(e.current,null),ui=qi=t,Yn=0,nd=null,Tv=hp=Aa=0,Oi=Bc=null,ma!==null){for(t=0;t<ma.length;t++)if(r=ma[t],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=o,n.next=s}r.pending=n}ma=null}return e}function Yx(e,t){do{var r=Wn;try{if(pv(),mh.current=Kh,Vh){for(var n=Nn.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Vh=!1}if(ba=0,ti=Xn=Nn=null,Uc=!1,ed=0,Cv.current=null,r===null||r.return===null){Yn=1,nd=t,Wn=null;break}e:{var a=e,s=r.return,u=r,f=t;if(t=ui,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var c=f,g=u,p=g.tag;if(!(g.mode&1)&&(p===0||p===11||p===15)){var m=g.alternate;m?(g.updateQueue=m.updateQueue,g.memoizedState=m.memoizedState,g.lanes=m.lanes):(g.updateQueue=null,g.memoizedState=null)}var _=kE(s);if(_!==null){_.flags&=-257,DE(_,s,u,a,t),_.mode&1&&NE(a,c,t),t=_,f=c;var C=t.updateQueue;if(C===null){var R=new Set;R.add(f),t.updateQueue=R}else C.add(f);break e}else{if(!(t&1)){NE(a,c,t),Ov();break e}f=Error(At(426))}}else if(Tn&&u.mode&1){var I=kE(s);if(I!==null){!(I.flags&65536)&&(I.flags|=256),DE(I,s,u,a,t),fv(Hl(f,u));break e}}a=f=Hl(f,u),Yn!==4&&(Yn=2),Bc===null?Bc=[a]:Bc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var S=Dx(a,f,t);xE(a,S);break e;case 1:u=f;var b=a.type,T=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Os===null||!Os.has(T)))){a.flags|=65536,t&=-t,a.lanes|=t;var B=Lx(a,u,t);xE(a,B);break e}}a=a.return}while(a!==null)}tC(r)}catch(H){t=H,Wn===r&&r!==null&&(Wn=r=r.return);continue}break}while(1)}function Zx(){var e=Wh.current;return Wh.current=Kh,e===null?Kh:e}function Ov(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),ri===null||!(Aa&268435455)&&!(hp&268435455)||bs(ri,ui)}function zh(e,t){var r=Yr;Yr|=2;var n=Zx();(ri!==e||ui!==t)&&(Qo=null,wa(e,t));do try{hO();break}catch(o){Yx(e,o)}while(1);if(pv(),Yr=r,Wh.current=n,Wn!==null)throw Error(At(261));return ri=null,ui=0,Yn}function hO(){for(;Wn!==null;)eC(Wn)}function pO(){for(;Wn!==null&&!BI();)eC(Wn)}function eC(e){var t=nC(e.alternate,e,qi);e.memoizedProps=e.pendingProps,t===null?tC(e):Wn=t,Cv.current=null}function tC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=aO(r,t),r!==null){r.flags&=32767,Wn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Yn=6,Wn=null;return}}else if(r=sO(r,t,qi),r!==null){Wn=r;return}if(t=t.sibling,t!==null){Wn=t;return}Wn=t=e}while(t!==null);Yn===0&&(Yn=5)}function ha(e,t,r){var n=dn,o=uo.transition;try{uo.transition=null,dn=1,gO(e,t,r,n)}finally{uo.transition=o,dn=n}return null}function gO(e,t,r,n){do kl();while(Rs!==null);if(Yr&6)throw Error(At(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(JI(e,a),e===ri&&(Wn=ri=null,ui=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Vf||(Vf=!0,iC(Ph,function(){return kl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=uo.transition,uo.transition=null;var s=dn;dn=1;var u=Yr;Yr|=4,Cv.current=null,uO(e,r),Jx(r,e),DF(rm),Fh=!!tm,rm=tm=null,e.current=r,cO(r),HI(),Yr=u,dn=s,uo.transition=a}else e.current=r;if(Vf&&(Vf=!1,Rs=e,qh=o),a=e.pendingLanes,a===0&&(Os=null),VI(r.stateNode),Ui(e,jn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(Gh)throw Gh=!1,e=Em,Em=null,e;return qh&1&&e.tag!==0&&kl(),a=e.pendingLanes,a&1?e===bm?Hc++:(Hc=0,bm=e):Hc=0,js(),null}function kl(){if(Rs!==null){var e=kR(qh),t=uo.transition,r=dn;try{if(uo.transition=null,dn=16>e?16:e,Rs===null)var n=!1;else{if(e=Rs,Rs=null,qh=0,Yr&6)throw Error(At(331));var o=Yr;for(Yr|=4,Xt=e.current;Xt!==null;){var a=Xt,s=a.child;if(Xt.flags&16){var u=a.deletions;if(u!==null){for(var f=0;f<u.length;f++){var c=u[f];for(Xt=c;Xt!==null;){var g=Xt;switch(g.tag){case 0:case 11:case 15:Mc(8,g,a)}var p=g.child;if(p!==null)p.return=g,Xt=p;else for(;Xt!==null;){g=Xt;var m=g.sibling,_=g.return;if(Gx(g),g===c){Xt=null;break}if(m!==null){m.return=_,Xt=m;break}Xt=_}}}var C=a.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var I=R.sibling;R.sibling=null,R=I}while(R!==null)}}Xt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Xt=s;else e:for(;Xt!==null;){if(a=Xt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Mc(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,Xt=S;break e}Xt=a.return}}var b=e.current;for(Xt=b;Xt!==null;){s=Xt;var T=s.child;if(s.subtreeFlags&2064&&T!==null)T.return=s,Xt=T;else e:for(s=b;Xt!==null;){if(u=Xt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:fp(9,u)}}catch(H){Ln(u,u.return,H)}if(u===s){Xt=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,Xt=B;break e}Xt=u.return}}if(Yr=o,js(),Bo&&typeof Bo.onPostCommitFiberRoot=="function")try{Bo.onPostCommitFiberRoot(ip,e)}catch{}n=!0}return n}finally{dn=r,uo.transition=t}}return!1}function zE(e,t,r){t=Hl(r,t),t=Dx(e,t,1),e=Fs(e,t,1),t=bi(),e!==null&&(ad(e,1,t),Ui(e,t))}function Ln(e,t,r){if(e.tag===3)zE(e,e,r);else for(;t!==null;){if(t.tag===3){zE(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Os===null||!Os.has(n))){e=Hl(r,e),e=Lx(t,e,1),t=Fs(t,e,1),e=bi(),t!==null&&(ad(t,1,e),Ui(t,e));break}}t=t.return}}function yO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=bi(),e.pingedLanes|=e.suspendedLanes&r,ri===e&&(ui&r)===r&&(Yn===4||Yn===3&&(ui&130023424)===ui&&500>jn()-Pv?wa(e,0):Tv|=r),Ui(e,t)}function rC(e,t){t===0&&(e.mode&1?(t=Nf,Nf<<=1,!(Nf&130023424)&&(Nf=4194304)):t=1);var r=bi();e=is(e,t),e!==null&&(ad(e,t,r),Ui(e,r))}function mO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),rC(e,r)}function vO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(At(314))}n!==null&&n.delete(t),rC(e,r)}var nC;nC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Di.current)ki=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ki=!1,oO(e,t,r);ki=!!(e.flags&131072)}else ki=!1,Tn&&t.flags&1048576&&sx(t,Mh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;wh(e,t),e=t.pendingProps;var o=Ll(t,yi.current);Nl(t,r),o=Ev(null,t,n,e,o,r);var a=bv();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(n)?(a=!0,Lh(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,mv(t),o.updater=cp,t.stateNode=o,o._reactInternals=t,dm(t,n,e,r),t=pm(null,t,n,!0,a,r)):(t.tag=0,Tn&&a&&cv(t),Ei(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(wh(e,t),e=t.pendingProps,o=n._init,n=o(n._payload),t.type=n,o=t.tag=_O(n),e=Eo(n,e),o){case 0:t=hm(null,t,n,e,r);break e;case 1:t=ME(null,t,n,e,r);break e;case 11:t=LE(null,t,n,e,r);break e;case 14:t=UE(null,t,n,Eo(n.type,e),r);break e}throw Error(At(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Eo(n,o),hm(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Eo(n,o),ME(e,t,n,o,r);case 3:e:{if(Hx(t),e===null)throw Error(At(387));n=t.pendingProps,a=t.memoizedState,o=a.element,cx(e,t),jh(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=Hl(Error(At(423)),t),t=BE(e,t,n,r,o);break e}else if(n!==o){o=Hl(Error(At(424)),t),t=BE(e,t,n,r,o);break e}else for(zi=Is(t.stateNode.containerInfo.firstChild),Ji=t,Tn=!0,Ao=null,r=px(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ul(),n===o){t=os(e,t,r);break e}Ei(e,t,n,r)}t=t.child}return t;case 5:return gx(t),e===null&&lm(t),n=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,s=o.children,nm(n,o)?s=null:a!==null&&nm(n,a)&&(t.flags|=32),Bx(e,t),Ei(e,t,s,r),t.child;case 6:return e===null&&lm(t),null;case 13:return jx(e,t,r);case 4:return vv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ml(t,null,n,r):Ei(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Eo(n,o),LE(e,t,n,o,r);case 7:return Ei(e,t,t.pendingProps,r),t.child;case 8:return Ei(e,t,t.pendingProps.children,r),t.child;case 12:return Ei(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,_n(Bh,n._currentValue),n._currentValue=s,a!==null)if(To(a.value,s)){if(a.children===o.children&&!Di.current){t=os(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){s=a.child;for(var f=u.firstContext;f!==null;){if(f.context===n){if(a.tag===1){f=ts(-1,r&-r),f.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var g=c.pending;g===null?f.next=f:(f.next=g.next,g.next=f),c.pending=f}}a.lanes|=r,f=a.alternate,f!==null&&(f.lanes|=r),um(a.return,r,t),u.lanes|=r;break}f=f.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(At(341));s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),um(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ei(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,Nl(t,r),o=co(o),n=n(o),t.flags|=1,Ei(e,t,n,r),t.child;case 14:return n=t.type,o=Eo(n,t.pendingProps),o=Eo(n.type,o),UE(e,t,n,o,r);case 15:return Ux(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Eo(n,o),wh(e,t),t.tag=1,Li(n)?(e=!0,Lh(t)):e=!1,Nl(t,r),fx(t,n,o),dm(t,n,o,r),pm(null,t,n,!0,e,r);case 19:return $x(e,t,r);case 22:return Mx(e,t,r)}throw Error(At(156,t.tag))};function iC(e,t){return IR(e,t)}function wO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lo(e,t,r,n){return new wO(e,t,r,n)}function Nv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _O(e){if(typeof e=="function")return Nv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ym)return 11;if(e===Zm)return 14}return 2}function ks(e,t){var r=e.alternate;return r===null?(r=lo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Eh(e,t,r,n,o,a){var s=2;if(n=e,typeof e=="function")Nv(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case vl:return _a(r.children,o,a,t);case Qm:s=8,o|=8;break;case D0:return e=lo(12,r,t,o|2),e.elementType=D0,e.lanes=a,e;case L0:return e=lo(13,r,t,o),e.elementType=L0,e.lanes=a,e;case U0:return e=lo(19,r,t,o),e.elementType=U0,e.lanes=a,e;case hR:return pp(r,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dR:s=10;break e;case fR:s=9;break e;case Ym:s=11;break e;case Zm:s=14;break e;case _s:s=16,n=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=lo(s,r,t,o),t.elementType=e,t.type=n,t.lanes=a,t}function _a(e,t,r,n){return e=lo(7,e,n,t),e.lanes=r,e}function pp(e,t,r,n){return e=lo(22,e,n,t),e.elementType=hR,e.lanes=r,e.stateNode={isHidden:!1},e}function by(e,t,r){return e=lo(6,e,null,t),e.lanes=r,e}function Ay(e,t,r){return t=lo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SO(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iy(0),this.expirationTimes=iy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iy(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function kv(e,t,r,n,o,a,s,u,f){return e=new SO(e,t,r,u,f),t===1?(t=1,a===!0&&(t|=8)):t=0,a=lo(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},mv(a),e}function EO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ml,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function oC(e){if(!e)return Us;e=e._reactInternals;e:{if(Ta(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var r=e.type;if(Li(r))return ix(e,r,t)}return t}function sC(e,t,r,n,o,a,s,u,f){return e=kv(r,n,!0,e,o,a,s,u,f),e.context=oC(null),r=e.current,n=bi(),o=Ns(r),a=ts(n,o),a.callback=t??null,Fs(r,a,o),e.current.lanes=o,ad(e,o,n),Ui(e,n),e}function gp(e,t,r,n){var o=t.current,a=bi(),s=Ns(o);return r=oC(r),t.context===null?t.context=r:t.pendingContext=r,t=ts(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Fs(o,t,s),e!==null&&(Co(e,o,s,a),yh(e,o,s)),s}function Jh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function JE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Dv(e,t){JE(e,t),(e=e.alternate)&&JE(e,t)}function bO(){return null}var aC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lv(e){this._internalRoot=e}yp.prototype.render=Lv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));gp(e,t,null,null)};yp.prototype.unmount=Lv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ra(function(){gp(null,e,null,null)}),t[ns]=null}};function yp(e){this._internalRoot=e}yp.prototype.unstable_scheduleHydration=function(e){if(e){var t=UR();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Es.length&&t!==0&&t<Es[r].priority;r++);Es.splice(r,0,e),r===0&&BR(e)}};function Uv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function XE(){}function AO(e,t,r,n,o){if(o){if(typeof n=="function"){var a=n;n=function(){var c=Jh(s);a.call(c)}}var s=sC(t,n,e,0,null,!1,!1,"",XE);return e._reactRootContainer=s,e[ns]=s.current,Jc(e.nodeType===8?e.parentNode:e),Ra(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof n=="function"){var u=n;n=function(){var c=Jh(f);u.call(c)}}var f=kv(e,0,!1,null,null,!1,!1,"",XE);return e._reactRootContainer=f,e[ns]=f.current,Jc(e.nodeType===8?e.parentNode:e),Ra(function(){gp(t,f,r,n)}),f}function vp(e,t,r,n,o){var a=r._reactRootContainer;if(a){var s=a;if(typeof o=="function"){var u=o;o=function(){var f=Jh(s);u.call(f)}}gp(t,s,e,o)}else s=AO(r,t,e,o,n);return Jh(s)}DR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ic(t.pendingLanes);r!==0&&(rv(t,r|1),Ui(t,jn()),!(Yr&6)&&(jl=jn()+500,js()))}break;case 13:Ra(function(){var n=is(e,1);if(n!==null){var o=bi();Co(n,e,1,o)}}),Dv(e,1)}};nv=function(e){if(e.tag===13){var t=is(e,134217728);if(t!==null){var r=bi();Co(t,e,134217728,r)}Dv(e,134217728)}};LR=function(e){if(e.tag===13){var t=Ns(e),r=is(e,t);if(r!==null){var n=bi();Co(r,e,t,n)}Dv(e,t)}};UR=function(){return dn};MR=function(e,t){var r=dn;try{return dn=e,t()}finally{dn=r}};q0=function(e,t,r){switch(t){case"input":if(H0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=lp(n);if(!o)throw Error(At(90));gR(n),H0(n,o)}}}break;case"textarea":mR(e,r);break;case"select":t=r.value,t!=null&&Pl(e,!!r.multiple,t,!1)}};AR=Iv;RR=Ra;var RO={usingClientEntryPoint:!1,Events:[ud,El,lp,ER,bR,Iv]},Cu={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xO={bundleType:Cu.bundleType,version:Cu.version,rendererPackageName:Cu.rendererPackageName,rendererConfig:Cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=TR(e),e===null?null:e.stateNode},findFiberByHostInstance:Cu.findFiberByHostInstance||bO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{ip=Kf.inject(xO),Bo=Kf}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RO;Qi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uv(t))throw Error(At(200));return EO(e,t,null,r)};Qi.createRoot=function(e,t){if(!Uv(e))throw Error(At(299));var r=!1,n="",o=aC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=kv(e,1,!1,null,null,r,!1,n,o),e[ns]=t.current,Jc(e.nodeType===8?e.parentNode:e),new Lv(t)};Qi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=TR(t),e=e===null?null:e.stateNode,e};Qi.flushSync=function(e){return Ra(e)};Qi.hydrate=function(e,t,r){if(!mp(t))throw Error(At(200));return vp(null,e,t,!0,r)};Qi.hydrateRoot=function(e,t,r){if(!Uv(e))throw Error(At(405));var n=r!=null&&r.hydratedSources||null,o=!1,a="",s=aC;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=sC(t,null,e,1,r??null,o,!1,a,s),e[ns]=t.current,Jc(e),n)for(e=0;e<n.length;e++)r=n[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new yp(t)};Qi.render=function(e,t,r){if(!mp(t))throw Error(At(200));return vp(null,e,t,!1,r)};Qi.unmountComponentAtNode=function(e){if(!mp(e))throw Error(At(40));return e._reactRootContainer?(Ra(function(){vp(null,null,e,!1,function(){e._reactRootContainer=null,e[ns]=null})}),!0):!1};Qi.unstable_batchedUpdates=Iv;Qi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!mp(r))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return vp(e,t,r,!1,n)};Qi.version="18.2.0-next-9e3b772b8-20220608";function lC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lC)}catch(e){console.error(e)}}lC(),sR.exports=Qi;var CO=sR.exports,QE=CO;N0.createRoot=QE.createRoot,N0.hydrateRoot=QE.hydrateRoot;var xm=function(e,t){return xm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},xm(e,t)};function po(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");xm(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var or=function(){return or=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},or.apply(this,arguments)};function $l(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Uo(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var uC={exports:{}},fn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ii=typeof Symbol=="function"&&Symbol.for,Mv=ii?Symbol.for("react.element"):60103,Bv=ii?Symbol.for("react.portal"):60106,wp=ii?Symbol.for("react.fragment"):60107,_p=ii?Symbol.for("react.strict_mode"):60108,Sp=ii?Symbol.for("react.profiler"):60114,Ep=ii?Symbol.for("react.provider"):60109,bp=ii?Symbol.for("react.context"):60110,Hv=ii?Symbol.for("react.async_mode"):60111,Ap=ii?Symbol.for("react.concurrent_mode"):60111,Rp=ii?Symbol.for("react.forward_ref"):60112,xp=ii?Symbol.for("react.suspense"):60113,TO=ii?Symbol.for("react.suspense_list"):60120,Cp=ii?Symbol.for("react.memo"):60115,Tp=ii?Symbol.for("react.lazy"):60116,PO=ii?Symbol.for("react.block"):60121,IO=ii?Symbol.for("react.fundamental"):60117,FO=ii?Symbol.for("react.responder"):60118,OO=ii?Symbol.for("react.scope"):60119;function Zi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Mv:switch(e=e.type,e){case Hv:case Ap:case wp:case Sp:case _p:case xp:return e;default:switch(e=e&&e.$$typeof,e){case bp:case Rp:case Tp:case Cp:case Ep:return e;default:return t}}case Bv:return t}}}function cC(e){return Zi(e)===Ap}fn.AsyncMode=Hv;fn.ConcurrentMode=Ap;fn.ContextConsumer=bp;fn.ContextProvider=Ep;fn.Element=Mv;fn.ForwardRef=Rp;fn.Fragment=wp;fn.Lazy=Tp;fn.Memo=Cp;fn.Portal=Bv;fn.Profiler=Sp;fn.StrictMode=_p;fn.Suspense=xp;fn.isAsyncMode=function(e){return cC(e)||Zi(e)===Hv};fn.isConcurrentMode=cC;fn.isContextConsumer=function(e){return Zi(e)===bp};fn.isContextProvider=function(e){return Zi(e)===Ep};fn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mv};fn.isForwardRef=function(e){return Zi(e)===Rp};fn.isFragment=function(e){return Zi(e)===wp};fn.isLazy=function(e){return Zi(e)===Tp};fn.isMemo=function(e){return Zi(e)===Cp};fn.isPortal=function(e){return Zi(e)===Bv};fn.isProfiler=function(e){return Zi(e)===Sp};fn.isStrictMode=function(e){return Zi(e)===_p};fn.isSuspense=function(e){return Zi(e)===xp};fn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===wp||e===Ap||e===Sp||e===_p||e===xp||e===TO||typeof e=="object"&&e!==null&&(e.$$typeof===Tp||e.$$typeof===Cp||e.$$typeof===Ep||e.$$typeof===bp||e.$$typeof===Rp||e.$$typeof===IO||e.$$typeof===FO||e.$$typeof===OO||e.$$typeof===PO)};fn.typeOf=Zi;uC.exports=fn;var NO=uC.exports,dC=NO,kO={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},DO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fC={};fC[dC.ForwardRef]=kO;fC[dC.Memo]=DO;function hC(e,t,r){if(r===void 0&&(r=Error),!e)throw new r(t)}var zr;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(zr||(zr={}));var bn;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(bn||(bn={}));var Vl;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(Vl||(Vl={}));function YE(e){return e.type===bn.literal}function LO(e){return e.type===bn.argument}function pC(e){return e.type===bn.number}function gC(e){return e.type===bn.date}function yC(e){return e.type===bn.time}function mC(e){return e.type===bn.select}function vC(e){return e.type===bn.plural}function UO(e){return e.type===bn.pound}function wC(e){return e.type===bn.tag}function _C(e){return!!(e&&typeof e=="object"&&e.type===Vl.number)}function Cm(e){return!!(e&&typeof e=="object"&&e.type===Vl.dateTime)}var SC=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,MO=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function BO(e){var t={};return e.replace(MO,function(r){var n=r.length;switch(r[0]){case"G":t.era=n===4?"long":n===5?"narrow":"short";break;case"y":t.year=n===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=n===4?"short":n===5?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}var HO=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function jO(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var t=e.split(HO).filter(function(m){return m.length>0}),r=[],n=0,o=t;n<o.length;n++){var a=o[n],s=a.split("/");if(s.length===0)throw new Error("Invalid number skeleton");for(var u=s[0],f=s.slice(1),c=0,g=f;c<g.length;c++){var p=g[c];if(p.length===0)throw new Error("Invalid number skeleton")}r.push({stem:u,options:f})}return r}function $O(e){return e.replace(/^(.*?)-/,"")}var ZE=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,EC=/^(@+)?(\+|#+)?[rs]?$/g,VO=/(\*)(0+)|(#+)(0+)|(0+)/g,bC=/^(0+)$/;function e1(e){var t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(EC,function(r,n,o){return typeof o!="string"?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):o==="+"?t.minimumSignificantDigits=n.length:n[0]==="#"?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+(typeof o=="string"?o.length:0)),""}),t}function AC(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function KO(e){var t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){var r=e.slice(0,2);if(r==="+!"?(t.signDisplay="always",e=e.slice(2)):r==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!bC.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function t1(e){var t={},r=AC(e);return r||t}function WO(e){for(var t={},r=0,n=e;r<n.length;r++){var o=n[r];switch(o.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=$O(o.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=or(or(or({},t),{notation:"scientific"}),o.options.reduce(function(f,c){return or(or({},f),t1(c))},{}));continue;case"engineering":t=or(or(or({},t),{notation:"engineering"}),o.options.reduce(function(f,c){return or(or({},f),t1(c))},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(VO,function(f,c,g,p,m,_){if(c)t.minimumIntegerDigits=g.length;else{if(p&&m)throw new Error("We currently do not support maximum integer digits");if(_)throw new Error("We currently do not support exact integer digits")}return""});continue}if(bC.test(o.stem)){t.minimumIntegerDigits=o.stem.length;continue}if(ZE.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(ZE,function(f,c,g,p,m,_){return g==="*"?t.minimumFractionDigits=c.length:p&&p[0]==="#"?t.maximumFractionDigits=p.length:m&&_?(t.minimumFractionDigits=m.length,t.maximumFractionDigits=m.length+_.length):(t.minimumFractionDigits=c.length,t.maximumFractionDigits=c.length),""});var a=o.options[0];a==="w"?t=or(or({},t),{trailingZeroDisplay:"stripIfInteger"}):a&&(t=or(or({},t),e1(a)));continue}if(EC.test(o.stem)){t=or(or({},t),e1(o.stem));continue}var s=AC(o.stem);s&&(t=or(or({},t),s));var u=KO(o.stem);u&&(t=or(or({},t),u))}return t}var Wf={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","h","K"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TL:["H","hB","hb","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function GO(e,t){for(var r="",n=0;n<e.length;n++){var o=e.charAt(n);if(o==="j"){for(var a=0;n+1<e.length&&e.charAt(n+1)===o;)a++,n++;var s=1+(a&1),u=a<2?1:3+(a>>1),f="a",c=qO(t);for((c=="H"||c=="k")&&(u=0);u-- >0;)r+=f;for(;s-- >0;)r=c+r}else o==="J"?r+="H":r+=o}return r}function qO(e){var t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var r=e.language,n;r!=="root"&&(n=e.maximize().region);var o=Wf[n||""]||Wf[r||""]||Wf["".concat(r,"-001")]||Wf["001"];return o[0]}var Ry,zO=new RegExp("^".concat(SC.source,"*")),JO=new RegExp("".concat(SC.source,"*$"));function Jr(e,t){return{start:e,end:t}}var XO=!!String.prototype.startsWith,QO=!!String.fromCodePoint,YO=!!Object.fromEntries,ZO=!!String.prototype.codePointAt,eN=!!String.prototype.trimStart,tN=!!String.prototype.trimEnd,rN=!!Number.isSafeInteger,nN=rN?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},Tm=!0;try{var iN=xC("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Tm=((Ry=iN.exec("a"))===null||Ry===void 0?void 0:Ry[0])==="a"}catch{Tm=!1}var r1=XO?function(t,r,n){return t.startsWith(r,n)}:function(t,r,n){return t.slice(n,n+r.length)===r},Pm=QO?String.fromCodePoint:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n="",o=t.length,a=0,s;o>a;){if(s=t[a++],s>1114111)throw RangeError(s+" is not a valid code point");n+=s<65536?String.fromCharCode(s):String.fromCharCode(((s-=65536)>>10)+55296,s%1024+56320)}return n},n1=YO?Object.fromEntries:function(t){for(var r={},n=0,o=t;n<o.length;n++){var a=o[n],s=a[0],u=a[1];r[s]=u}return r},RC=ZO?function(t,r){return t.codePointAt(r)}:function(t,r){var n=t.length;if(!(r<0||r>=n)){var o=t.charCodeAt(r),a;return o<55296||o>56319||r+1===n||(a=t.charCodeAt(r+1))<56320||a>57343?o:(o-55296<<10)+(a-56320)+65536}},oN=eN?function(t){return t.trimStart()}:function(t){return t.replace(zO,"")},sN=tN?function(t){return t.trimEnd()}:function(t){return t.replace(JO,"")};function xC(e,t){return new RegExp(e,t)}var Im;if(Tm){var i1=xC("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Im=function(t,r){var n;i1.lastIndex=r;var o=i1.exec(t);return(n=o[1])!==null&&n!==void 0?n:""}}else Im=function(t,r){for(var n=[];;){var o=RC(t,r);if(o===void 0||CC(o)||cN(o))break;n.push(o),r+=o>=65536?2:1}return Pm.apply(void 0,n)};var aN=function(){function e(t,r){r===void 0&&(r={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!r.ignoreTag,this.locale=r.locale,this.requiresOtherClause=!!r.requiresOtherClause,this.shouldParseSkeletons=!!r.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(t,r,n){for(var o=[];!this.isEOF();){var a=this.char();if(a===123){var s=this.parseArgument(t,n);if(s.err)return s;o.push(s.val)}else{if(a===125&&t>0)break;if(a===35&&(r==="plural"||r==="selectordinal")){var u=this.clonePosition();this.bump(),o.push({type:bn.pound,location:Jr(u,this.clonePosition())})}else if(a===60&&!this.ignoreTag&&this.peek()===47){if(n)break;return this.error(zr.UNMATCHED_CLOSING_TAG,Jr(this.clonePosition(),this.clonePosition()))}else if(a===60&&!this.ignoreTag&&Fm(this.peek()||0)){var s=this.parseTag(t,r);if(s.err)return s;o.push(s.val)}else{var s=this.parseLiteral(t,r);if(s.err)return s;o.push(s.val)}}}return{val:o,err:null}},e.prototype.parseTag=function(t,r){var n=this.clonePosition();this.bump();var o=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:bn.literal,value:"<".concat(o,"/>"),location:Jr(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var a=this.parseMessage(t+1,r,!0);if(a.err)return a;var s=a.val,u=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Fm(this.char()))return this.error(zr.INVALID_TAG,Jr(u,this.clonePosition()));var f=this.clonePosition(),c=this.parseTagName();return o!==c?this.error(zr.UNMATCHED_CLOSING_TAG,Jr(f,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:bn.tag,value:o,children:s,location:Jr(n,this.clonePosition())},err:null}:this.error(zr.INVALID_TAG,Jr(u,this.clonePosition())))}else return this.error(zr.UNCLOSED_TAG,Jr(n,this.clonePosition()))}else return this.error(zr.INVALID_TAG,Jr(n,this.clonePosition()))},e.prototype.parseTagName=function(){var t=this.offset();for(this.bump();!this.isEOF()&&uN(this.char());)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(t,r){for(var n=this.clonePosition(),o="";;){var a=this.tryParseQuote(r);if(a){o+=a;continue}var s=this.tryParseUnquoted(t,r);if(s){o+=s;continue}var u=this.tryParseLeftAngleBracket();if(u){o+=u;continue}break}var f=Jr(n,this.clonePosition());return{val:{type:bn.literal,value:o,location:f},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!lN(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();var r=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(n===39)if(this.peek()===39)r.push(39),this.bump();else{this.bump();break}else r.push(n);this.bump()}return Pm.apply(void 0,r)},e.prototype.tryParseUnquoted=function(t,r){if(this.isEOF())return null;var n=this.char();return n===60||n===123||n===35&&(r==="plural"||r==="selectordinal")||n===125&&t>0?null:(this.bump(),Pm(n))},e.prototype.parseArgument=function(t,r){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(zr.EXPECT_ARGUMENT_CLOSING_BRACE,Jr(n,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(zr.EMPTY_ARGUMENT,Jr(n,this.clonePosition()));var o=this.parseIdentifierIfPossible().value;if(!o)return this.error(zr.MALFORMED_ARGUMENT,Jr(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(zr.EXPECT_ARGUMENT_CLOSING_BRACE,Jr(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:bn.argument,value:o,location:Jr(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(zr.EXPECT_ARGUMENT_CLOSING_BRACE,Jr(n,this.clonePosition())):this.parseArgumentOptions(t,r,o,n);default:return this.error(zr.MALFORMED_ARGUMENT,Jr(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),r=this.offset(),n=Im(this.message,r),o=r+n.length;this.bumpTo(o);var a=this.clonePosition(),s=Jr(t,a);return{value:n,location:s}},e.prototype.parseArgumentOptions=function(t,r,n,o){var a,s=this.clonePosition(),u=this.parseIdentifierIfPossible().value,f=this.clonePosition();switch(u){case"":return this.error(zr.EXPECT_ARGUMENT_TYPE,Jr(s,f));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var g=this.clonePosition(),p=this.parseSimpleArgStyleIfPossible();if(p.err)return p;var m=sN(p.val);if(m.length===0)return this.error(zr.EXPECT_ARGUMENT_STYLE,Jr(this.clonePosition(),this.clonePosition()));var _=Jr(g,this.clonePosition());c={style:m,styleLocation:_}}var C=this.tryParseArgumentClose(o);if(C.err)return C;var R=Jr(o,this.clonePosition());if(c&&r1(c==null?void 0:c.style,"::",0)){var I=oN(c.style.slice(2));if(u==="number"){var p=this.parseNumberSkeletonFromString(I,c.styleLocation);return p.err?p:{val:{type:bn.number,value:n,location:R,style:p.val},err:null}}else{if(I.length===0)return this.error(zr.EXPECT_DATE_TIME_SKELETON,R);var S=I;this.locale&&(S=GO(I,this.locale));var m={type:Vl.dateTime,pattern:S,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?BO(S):{}},b=u==="date"?bn.date:bn.time;return{val:{type:b,value:n,location:R,style:m},err:null}}}return{val:{type:u==="number"?bn.number:u==="date"?bn.date:bn.time,value:n,location:R,style:(a=c==null?void 0:c.style)!==null&&a!==void 0?a:null},err:null}}case"plural":case"selectordinal":case"select":{var T=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(zr.EXPECT_SELECT_ARGUMENT_OPTIONS,Jr(T,or({},T)));this.bumpSpace();var B=this.parseIdentifierIfPossible(),H=0;if(u!=="select"&&B.value==="offset"){if(!this.bumpIf(":"))return this.error(zr.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Jr(this.clonePosition(),this.clonePosition()));this.bumpSpace();var p=this.tryParseDecimalInteger(zr.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,zr.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(p.err)return p;this.bumpSpace(),B=this.parseIdentifierIfPossible(),H=p.val}var $=this.tryParsePluralOrSelectOptions(t,u,r,B);if($.err)return $;var C=this.tryParseArgumentClose(o);if(C.err)return C;var F=Jr(o,this.clonePosition());return u==="select"?{val:{type:bn.select,value:n,options:n1($.val),location:F},err:null}:{val:{type:bn.plural,value:n,options:n1($.val),offset:H,pluralType:u==="plural"?"cardinal":"ordinal",location:F},err:null}}default:return this.error(zr.INVALID_ARGUMENT_TYPE,Jr(s,f))}},e.prototype.tryParseArgumentClose=function(t){return this.isEOF()||this.char()!==125?this.error(zr.EXPECT_ARGUMENT_CLOSING_BRACE,Jr(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,r=this.clonePosition();!this.isEOF();){var n=this.char();switch(n){case 39:{this.bump();var o=this.clonePosition();if(!this.bumpUntil("'"))return this.error(zr.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Jr(o,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(r.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(r.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(t,r){var n=[];try{n=jO(t)}catch{return this.error(zr.INVALID_NUMBER_SKELETON,r)}return{val:{type:Vl.number,tokens:n,location:r,parsedOptions:this.shouldParseSkeletons?WO(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(t,r,n,o){for(var a,s=!1,u=[],f=new Set,c=o.value,g=o.location;;){if(c.length===0){var p=this.clonePosition();if(r!=="select"&&this.bumpIf("=")){var m=this.tryParseDecimalInteger(zr.EXPECT_PLURAL_ARGUMENT_SELECTOR,zr.INVALID_PLURAL_ARGUMENT_SELECTOR);if(m.err)return m;g=Jr(p,this.clonePosition()),c=this.message.slice(p.offset,this.offset())}else break}if(f.has(c))return this.error(r==="select"?zr.DUPLICATE_SELECT_ARGUMENT_SELECTOR:zr.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,g);c==="other"&&(s=!0),this.bumpSpace();var _=this.clonePosition();if(!this.bumpIf("{"))return this.error(r==="select"?zr.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:zr.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Jr(this.clonePosition(),this.clonePosition()));var C=this.parseMessage(t+1,r,n);if(C.err)return C;var R=this.tryParseArgumentClose(_);if(R.err)return R;u.push([c,{value:C.val,location:Jr(_,this.clonePosition())}]),f.add(c),this.bumpSpace(),a=this.parseIdentifierIfPossible(),c=a.value,g=a.location}return u.length===0?this.error(r==="select"?zr.EXPECT_SELECT_ARGUMENT_SELECTOR:zr.EXPECT_PLURAL_ARGUMENT_SELECTOR,Jr(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!s?this.error(zr.MISSING_OTHER_CLAUSE,Jr(this.clonePosition(),this.clonePosition())):{val:u,err:null}},e.prototype.tryParseDecimalInteger=function(t,r){var n=1,o=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var a=!1,s=0;!this.isEOF();){var u=this.char();if(u>=48&&u<=57)a=!0,s=s*10+(u-48),this.bump();else break}var f=Jr(o,this.clonePosition());return a?(s*=n,nN(s)?{val:s,err:null}:this.error(r,f)):this.error(t,f)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var r=RC(this.message,t);if(r===void 0)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return r},e.prototype.error=function(t,r){return{val:null,err:{kind:t,message:this.message,location:r}}},e.prototype.bump=function(){if(!this.isEOF()){var t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},e.prototype.bumpIf=function(t){if(r1(this.message,t,this.offset())){for(var r=0;r<t.length;r++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(t){var r=this.offset(),n=this.message.indexOf(t,r);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var r=this.offset();if(r===t)break;if(r>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&CC(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),r=this.offset(),n=this.message.charCodeAt(r+(t>=65536?2:1));return n??null},e}();function Fm(e){return e>=97&&e<=122||e>=65&&e<=90}function lN(e){return Fm(e)||e===47}function uN(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function CC(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function cN(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function Om(e){e.forEach(function(t){if(delete t.location,mC(t)||vC(t))for(var r in t.options)delete t.options[r].location,Om(t.options[r].value);else pC(t)&&_C(t.style)||(gC(t)||yC(t))&&Cm(t.style)?delete t.style.location:wC(t)&&Om(t.children)})}function dN(e,t){t===void 0&&(t={}),t=or({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var r=new aN(e,t).parse();if(r.err){var n=SyntaxError(zr[r.err.kind]);throw n.location=r.err.location,n.originalMessage=r.err.message,n}return t!=null&&t.captureLocation||Om(r.val),r.val}function Do(e,t){var r=t&&t.cache?t.cache:mN,n=t&&t.serializer?t.serializer:yN,o=t&&t.strategy?t.strategy:hN;return o(e,{cache:r,serializer:n})}function fN(e){return e==null||typeof e=="number"||typeof e=="boolean"}function TC(e,t,r,n){var o=fN(n)?n:r(n),a=t.get(o);return typeof a>"u"&&(a=e.call(this,n),t.set(o,a)),a}function PC(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),a=t.get(o);return typeof a>"u"&&(a=e.apply(this,n),t.set(o,a)),a}function jv(e,t,r,n,o){return r.bind(t,e,n,o)}function hN(e,t){var r=e.length===1?TC:PC;return jv(e,this,r,t.cache.create(),t.serializer)}function pN(e,t){return jv(e,this,PC,t.cache.create(),t.serializer)}function gN(e,t){return jv(e,this,TC,t.cache.create(),t.serializer)}var yN=function(){return JSON.stringify(arguments)};function $v(){this.cache=Object.create(null)}$v.prototype.get=function(e){return this.cache[e]};$v.prototype.set=function(e,t){this.cache[e]=t};var mN={create:function(){return new $v}},Lo={variadic:pN,monadic:gN},jo;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(jo||(jo={}));var $s=function(e){po(t,e);function t(r,n,o){var a=e.call(this,r)||this;return a.code=n,a.originalMessage=o,a}return t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),o1=function(e){po(t,e);function t(r,n,o,a){return e.call(this,'Invalid values for "'.concat(r,'": "').concat(n,'". Options are "').concat(Object.keys(o).join('", "'),'"'),jo.INVALID_VALUE,a)||this}return t}($s),vN=function(e){po(t,e);function t(r,n,o){return e.call(this,'Value for "'.concat(r,'" must be of type ').concat(n),jo.INVALID_VALUE,o)||this}return t}($s),wN=function(e){po(t,e);function t(r,n){return e.call(this,'The intl string context variable "'.concat(r,'" was not provided to the string "').concat(n,'"'),jo.MISSING_VALUE,n)||this}return t}($s),Si;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(Si||(Si={}));function _N(e){return e.length<2?e:e.reduce(function(t,r){var n=t[t.length-1];return!n||n.type!==Si.literal||r.type!==Si.literal?t.push(r):n.value+=r.value,t},[])}function IC(e){return typeof e=="function"}function bh(e,t,r,n,o,a,s){if(e.length===1&&YE(e[0]))return[{type:Si.literal,value:e[0].value}];for(var u=[],f=0,c=e;f<c.length;f++){var g=c[f];if(YE(g)){u.push({type:Si.literal,value:g.value});continue}if(UO(g)){typeof a=="number"&&u.push({type:Si.literal,value:r.getNumberFormat(t).format(a)});continue}var p=g.value;if(!(o&&p in o))throw new wN(p,s);var m=o[p];if(LO(g)){(!m||typeof m=="string"||typeof m=="number")&&(m=typeof m=="string"||typeof m=="number"?String(m):""),u.push({type:typeof m=="string"?Si.literal:Si.object,value:m});continue}if(gC(g)){var _=typeof g.style=="string"?n.date[g.style]:Cm(g.style)?g.style.parsedOptions:void 0;u.push({type:Si.literal,value:r.getDateTimeFormat(t,_).format(m)});continue}if(yC(g)){var _=typeof g.style=="string"?n.time[g.style]:Cm(g.style)?g.style.parsedOptions:n.time.medium;u.push({type:Si.literal,value:r.getDateTimeFormat(t,_).format(m)});continue}if(pC(g)){var _=typeof g.style=="string"?n.number[g.style]:_C(g.style)?g.style.parsedOptions:void 0;_&&_.scale&&(m=m*(_.scale||1)),u.push({type:Si.literal,value:r.getNumberFormat(t,_).format(m)});continue}if(wC(g)){var C=g.children,R=g.value,I=o[R];if(!IC(I))throw new vN(R,"function",s);var S=bh(C,t,r,n,o,a),b=I(S.map(function(H){return H.value}));Array.isArray(b)||(b=[b]),u.push.apply(u,b.map(function(H){return{type:typeof H=="string"?Si.literal:Si.object,value:H}}))}if(mC(g)){var T=g.options[m]||g.options.other;if(!T)throw new o1(g.value,m,Object.keys(g.options),s);u.push.apply(u,bh(T.value,t,r,n,o));continue}if(vC(g)){var T=g.options["=".concat(m)];if(!T){if(!Intl.PluralRules)throw new $s(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,jo.MISSING_INTL_API,s);var B=r.getPluralRules(t,{type:g.pluralType}).select(m-(g.offset||0));T=g.options[B]||g.options.other}if(!T)throw new o1(g.value,m,Object.keys(g.options),s);u.push.apply(u,bh(T.value,t,r,n,o,m-(g.offset||0)));continue}}return _N(u)}function SN(e,t){return t?or(or(or({},e||{}),t||{}),Object.keys(e).reduce(function(r,n){return r[n]=or(or({},e[n]),t[n]||{}),r},{})):e}function EN(e,t){return t?Object.keys(e).reduce(function(r,n){return r[n]=SN(e[n],t[n]),r},or({},e)):e}function xy(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}function bN(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Do(function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((t=Intl.NumberFormat).bind.apply(t,Uo([void 0],r,!1)))},{cache:xy(e.number),strategy:Lo.variadic}),getDateTimeFormat:Do(function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((t=Intl.DateTimeFormat).bind.apply(t,Uo([void 0],r,!1)))},{cache:xy(e.dateTime),strategy:Lo.variadic}),getPluralRules:Do(function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((t=Intl.PluralRules).bind.apply(t,Uo([void 0],r,!1)))},{cache:xy(e.pluralRules),strategy:Lo.variadic})}}var FC=function(){function e(t,r,n,o){r===void 0&&(r=e.defaultLocale);var a=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(f){var c=a.formatToParts(f);if(c.length===1)return c[0].value;var g=c.reduce(function(p,m){return!p.length||m.type!==Si.literal||typeof p[p.length-1]!="string"?p.push(m.value):p[p.length-1]+=m.value,p},[]);return g.length<=1?g[0]||"":g},this.formatToParts=function(f){return bh(a.ast,a.locales,a.formatters,a.formats,f,void 0,a.message)},this.resolvedOptions=function(){var f;return{locale:((f=a.resolvedLocale)===null||f===void 0?void 0:f.toString())||Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},this.locales=r,this.resolvedLocale=e.resolveLocale(r),typeof t=="string"){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var s=o||{};s.formatters;var u=$l(s,["formatters"]);this.ast=e.__parse(t,or(or({},u),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=EN(e.formats,n),this.formatters=o&&o.formatters||bN(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(t){if(!(typeof Intl.Locale>"u")){var r=Intl.NumberFormat.supportedLocalesOf(t);return r.length>0?new Intl.Locale(r[0]):new Intl.Locale(typeof t=="string"?t:t[0])}},e.__parse=dN,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}(),xa;(function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"})(xa||(xa={}));var dd=function(e){po(t,e);function t(r,n,o){var a=this,s=o?o instanceof Error?o:new Error(String(o)):void 0;return a=e.call(this,"[@formatjs/intl Error ".concat(r,"] ").concat(n,`
`).concat(s?`
`.concat(s.message,`
`).concat(s.stack):""))||this,a.code=r,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(a,t),a}return t}(Error),AN=function(e){po(t,e);function t(r,n){return e.call(this,xa.UNSUPPORTED_FORMATTER,r,n)||this}return t}(dd),RN=function(e){po(t,e);function t(r,n){return e.call(this,xa.INVALID_CONFIG,r,n)||this}return t}(dd),s1=function(e){po(t,e);function t(r,n){return e.call(this,xa.MISSING_DATA,r,n)||this}return t}(dd),go=function(e){po(t,e);function t(r,n,o){var a=e.call(this,xa.FORMAT_ERROR,"".concat(r,`
Locale: `).concat(n,`
`),o)||this;return a.locale=n,a}return t}(dd),Cy=function(e){po(t,e);function t(r,n,o,a){var s=e.call(this,"".concat(r,`
MessageID: `).concat(o==null?void 0:o.id,`
Default Message: `).concat(o==null?void 0:o.defaultMessage,`
Description: `).concat(o==null?void 0:o.description,`
`),n,a)||this;return s.descriptor=o,s.locale=n,s}return t}(go),xN=function(e){po(t,e);function t(r,n){var o=e.call(this,xa.MISSING_TRANSLATION,'Missing message: "'.concat(r.id,'" for locale "').concat(n,'", using ').concat(r.defaultMessage?"default message (".concat(typeof r.defaultMessage=="string"?r.defaultMessage:r.defaultMessage.map(function(a){var s;return(s=a.value)!==null&&s!==void 0?s:JSON.stringify(a)}).join(),")"):"id"," as fallback."))||this;return o.descriptor=r,o}return t}(dd);function Pa(e,t,r){return r===void 0&&(r={}),t.reduce(function(n,o){return o in e?n[o]=e[o]:o in r&&(n[o]=r[o]),n},{})}var CN=function(e){},TN=function(e){},OC={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:CN,onWarn:TN};function NC(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function ua(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}function PN(e){e===void 0&&(e=NC());var t=Intl.RelativeTimeFormat,r=Intl.ListFormat,n=Intl.DisplayNames,o=Do(function(){for(var u,f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return new((u=Intl.DateTimeFormat).bind.apply(u,Uo([void 0],f,!1)))},{cache:ua(e.dateTime),strategy:Lo.variadic}),a=Do(function(){for(var u,f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return new((u=Intl.NumberFormat).bind.apply(u,Uo([void 0],f,!1)))},{cache:ua(e.number),strategy:Lo.variadic}),s=Do(function(){for(var u,f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return new((u=Intl.PluralRules).bind.apply(u,Uo([void 0],f,!1)))},{cache:ua(e.pluralRules),strategy:Lo.variadic});return{getDateTimeFormat:o,getNumberFormat:a,getMessageFormat:Do(function(u,f,c,g){return new FC(u,f,c,or({formatters:{getNumberFormat:a,getDateTimeFormat:o,getPluralRules:s}},g||{}))},{cache:ua(e.message),strategy:Lo.variadic}),getRelativeTimeFormat:Do(function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return new(t.bind.apply(t,Uo([void 0],u,!1)))},{cache:ua(e.relativeTime),strategy:Lo.variadic}),getPluralRules:s,getListFormat:Do(function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return new(r.bind.apply(r,Uo([void 0],u,!1)))},{cache:ua(e.list),strategy:Lo.variadic}),getDisplayNames:Do(function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return new(n.bind.apply(n,Uo([void 0],u,!1)))},{cache:ua(e.displayNames),strategy:Lo.variadic})}}function Vv(e,t,r,n){var o=e&&e[t],a;if(o&&(a=o[r]),a)return a;n(new AN("No ".concat(t," format named: ").concat(r)))}function Gf(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=or({timeZone:t},e[n]),r},{})}function a1(e,t){var r=Object.keys(or(or({},e),t));return r.reduce(function(n,o){return n[o]=or(or({},e[o]||{}),t[o]||{}),n},{})}function l1(e,t){if(!t)return e;var r=FC.formats;return or(or(or({},r),e),{date:a1(Gf(r.date,t),Gf(e.date||{},t)),time:a1(Gf(r.time,t),Gf(e.time||{},t))})}var Nm=function(e,t,r,n,o){var a=e.locale,s=e.formats,u=e.messages,f=e.defaultLocale,c=e.defaultFormats,g=e.fallbackOnEmptyString,p=e.onError,m=e.timeZone,_=e.defaultRichTextElements;r===void 0&&(r={id:""});var C=r.id,R=r.defaultMessage;hC(!!C,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var I=String(C),S=u&&Object.prototype.hasOwnProperty.call(u,I)&&u[I];if(Array.isArray(S)&&S.length===1&&S[0].type===bn.literal)return S[0].value;if(!n&&S&&typeof S=="string"&&!_)return S.replace(/'\{(.*?)\}'/gi,"{$1}");if(n=or(or({},_),n||{}),s=l1(s,m),c=l1(c,m),!S){if(g===!1&&S==="")return S;if((!R||a&&a.toLowerCase()!==f.toLowerCase())&&p(new xN(r,a)),R)try{var b=t.getMessageFormat(R,f,c,o);return b.format(n)}catch(T){return p(new Cy('Error formatting default message for: "'.concat(I,'", rendering default message verbatim'),a,r,T)),typeof R=="string"?R:I}return I}try{var b=t.getMessageFormat(S,a,s,or({formatters:t},o||{}));return b.format(n)}catch(T){p(new Cy('Error formatting message: "'.concat(I,'", using ').concat(R?"default message":"id"," as fallback."),a,r,T))}if(R)try{var b=t.getMessageFormat(R,f,c,o);return b.format(n)}catch(T){p(new Cy('Error formatting the default message for: "'.concat(I,'", rendering message verbatim'),a,r,T))}return typeof S=="string"?S:typeof R=="string"?R:I},kC=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function Pp(e,t,r,n){var o=e.locale,a=e.formats,s=e.onError,u=e.timeZone;n===void 0&&(n={});var f=n.format,c=or(or({},u&&{timeZone:u}),f&&Vv(a,t,f,s)),g=Pa(n,kC,c);return t==="time"&&!g.hour&&!g.minute&&!g.second&&!g.timeStyle&&!g.dateStyle&&(g=or(or({},g),{hour:"numeric",minute:"numeric"})),r(o,g)}function IN(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],a=r[1],s=a===void 0?{}:a,u=typeof o=="string"?new Date(o||0):o;try{return Pp(e,"date",t,s).format(u)}catch(f){e.onError(new go("Error formatting date.",e.locale,f))}return String(u)}function FN(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],a=r[1],s=a===void 0?{}:a,u=typeof o=="string"?new Date(o||0):o;try{return Pp(e,"time",t,s).format(u)}catch(f){e.onError(new go("Error formatting time.",e.locale,f))}return String(u)}function ON(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],a=r[1],s=r[2],u=s===void 0?{}:s,f=e.timeZone,c=e.locale,g=e.onError,p=Pa(u,kC,f?{timeZone:f}:{});try{return t(c,p).formatRange(o,a)}catch(m){g(new go("Error formatting date time range.",e.locale,m))}return String(o)}function NN(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],a=r[1],s=a===void 0?{}:a,u=typeof o=="string"?new Date(o||0):o;try{return Pp(e,"date",t,s).formatToParts(u)}catch(f){e.onError(new go("Error formatting date.",e.locale,f))}return[]}function kN(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],a=r[1],s=a===void 0?{}:a,u=typeof o=="string"?new Date(o||0):o;try{return Pp(e,"time",t,s).formatToParts(u)}catch(f){e.onError(new go("Error formatting time.",e.locale,f))}return[]}var DN=["style","type","fallback","languageDisplay"];function LN(e,t,r,n){var o=e.locale,a=e.onError,s=Intl.DisplayNames;s||a(new $s(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,jo.MISSING_INTL_API));var u=Pa(n,DN);try{return t(o,u).of(r)}catch(f){a(new go("Error formatting display name.",o,f))}}var UN=["type","style"],u1=Date.now();function MN(e){return"".concat(u1,"_").concat(e,"_").concat(u1)}function BN(e,t,r,n){n===void 0&&(n={});var o=DC(e,t,r,n).reduce(function(a,s){var u=s.value;return typeof u!="string"?a.push(u):typeof a[a.length-1]=="string"?a[a.length-1]+=u:a.push(u),a},[]);return o.length===1?o[0]:o.length===0?"":o}function DC(e,t,r,n){var o=e.locale,a=e.onError;n===void 0&&(n={});var s=Intl.ListFormat;s||a(new $s(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,jo.MISSING_INTL_API));var u=Pa(n,UN);try{var f={},c=r.map(function(g,p){if(typeof g=="object"){var m=MN(p);return f[m]=g,m}return String(g)});return t(o,u).formatToParts(c).map(function(g){return g.type==="literal"?g:or(or({},g),{value:f[g.value]||g.value})})}catch(g){a(new go("Error formatting list.",o,g))}return r}var HN=["type"];function jN(e,t,r,n){var o=e.locale,a=e.onError;n===void 0&&(n={}),Intl.PluralRules||a(new $s(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,jo.MISSING_INTL_API));var s=Pa(n,HN);try{return t(o,s).select(r)}catch(u){a(new go("Error formatting plural.",o,u))}return"other"}var $N=["numeric","style"];function VN(e,t,r){var n=e.locale,o=e.formats,a=e.onError;r===void 0&&(r={});var s=r.format,u=!!s&&Vv(o,"relative",s,a)||{},f=Pa(r,$N,u);return t(n,f)}function KN(e,t,r,n,o){o===void 0&&(o={}),n||(n="second");var a=Intl.RelativeTimeFormat;a||e.onError(new $s(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,jo.MISSING_INTL_API));try{return VN(e,t,o).format(r,n)}catch(s){e.onError(new go("Error formatting relative time.",e.locale,s))}return String(r)}var WN=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function LC(e,t,r){var n=e.locale,o=e.formats,a=e.onError;r===void 0&&(r={});var s=r.format,u=s&&Vv(o,"number",s,a)||{},f=Pa(r,WN,u);return t(n,f)}function GN(e,t,r,n){n===void 0&&(n={});try{return LC(e,t,n).format(r)}catch(o){e.onError(new go("Error formatting number.",e.locale,o))}return String(r)}function qN(e,t,r,n){n===void 0&&(n={});try{return LC(e,t,n).formatToParts(r)}catch(o){e.onError(new go("Error formatting number.",e.locale,o))}return[]}function zN(e){var t=e?e[Object.keys(e)[0]]:void 0;return typeof t=="string"}function JN(e){e.onWarn&&e.defaultRichTextElements&&zN(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function XN(e,t){var r=PN(t),n=or(or({},OC),e),o=n.locale,a=n.defaultLocale,s=n.onError;return o?!Intl.NumberFormat.supportedLocalesOf(o).length&&s?s(new s1('Missing locale data for locale: "'.concat(o,'" in Intl.NumberFormat. Using default locale: "').concat(a,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(o).length&&s&&s(new s1('Missing locale data for locale: "'.concat(o,'" in Intl.DateTimeFormat. Using default locale: "').concat(a,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(s&&s(new RN('"locale" was not configured, using "'.concat(a,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),n.locale=n.defaultLocale||"en"),JN(n),or(or({},n),{formatters:r,formatNumber:GN.bind(null,n,r.getNumberFormat),formatNumberToParts:qN.bind(null,n,r.getNumberFormat),formatRelativeTime:KN.bind(null,n,r.getRelativeTimeFormat),formatDate:IN.bind(null,n,r.getDateTimeFormat),formatDateToParts:NN.bind(null,n,r.getDateTimeFormat),formatTime:FN.bind(null,n,r.getDateTimeFormat),formatDateTimeRange:ON.bind(null,n,r.getDateTimeFormat),formatTimeToParts:kN.bind(null,n,r.getDateTimeFormat),formatPlural:jN.bind(null,n,r.getPluralRules),formatMessage:Nm.bind(null,n,r),$t:Nm.bind(null,n,r),formatList:BN.bind(null,n,r.getListFormat),formatListToParts:DC.bind(null,n,r.getListFormat),formatDisplayName:LN.bind(null,n,r.getDisplayNames)})}function UC(e){hC(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var MC=or(or({},OC),{textComponent:un.Fragment});function QN(e){return function(t){return e(un.Children.toArray(t))}}function km(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(var a=0;a<o;a++){var s=r[a];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}var Kv=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=un.createContext(null)):un.createContext(null);Kv.Consumer;var YN=Kv.Provider,ZN=YN,ek=Kv;function Ip(){var e=un.useContext(ek);return UC(e),e}var Dm;(function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"})(Dm||(Dm={}));var Lm;(function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"})(Lm||(Lm={}));function BC(e){var t=function(r){var n=Ip(),o=r.value,a=r.children,s=$l(r,["value","children"]),u=typeof o=="string"?new Date(o||0):o,f=e==="formatDate"?n.formatDateToParts(u,s):n.formatTimeToParts(u,s);return a(f)};return t.displayName=Lm[e],t}function fd(e){var t=function(r){var n=Ip(),o=r.value,a=r.children,s=$l(r,["value","children"]),u=n[e](o,s);if(typeof a=="function")return a(u);var f=n.textComponent||un.Fragment;return un.createElement(f,null,u)};return t.displayName=Dm[e],t}function Ty(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function HC(e){return e&&Object.keys(e).reduce(function(t,r){var n=e[r];return t[r]=IC(n)?QN(n):n,t},{})}var c1=function(e,t,r,n){for(var o=[],a=4;a<arguments.length;a++)o[a-4]=arguments[a];var s=HC(n),u=Nm.apply(void 0,Uo([e,t,r,s],o,!1));return Array.isArray(u)?un.Children.toArray(u):u},d1=function(e,t){var r=e.defaultRichTextElements,n=$l(e,["defaultRichTextElements"]),o=HC(r),a=XN(or(or(or({},MC),n),{defaultRichTextElements:o}),t),s={locale:a.locale,timeZone:a.timeZone,fallbackOnEmptyString:a.fallbackOnEmptyString,formats:a.formats,defaultLocale:a.defaultLocale,defaultFormats:a.defaultFormats,messages:a.messages,onError:a.onError,defaultRichTextElements:o};return or(or({},a),{formatMessage:c1.bind(null,s,a.formatters),$t:c1.bind(null,s,a.formatters)})},tk=function(e){po(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.cache=NC(),r.state={cache:r.cache,intl:d1(Ty(r.props),r.cache),prevConfig:Ty(r.props)},r}return t.getDerivedStateFromProps=function(r,n){var o=n.prevConfig,a=n.cache,s=Ty(r);return km(o,s)?null:{intl:d1(s,a),prevConfig:s}},t.prototype.render=function(){return UC(this.state.intl),un.createElement(ZN,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=MC,t}(un.PureComponent);const rk=tk;function nk(e,t){var r=e.values,n=$l(e,["values"]),o=t.values,a=$l(t,["values"]);return km(o,r)&&km(n,a)}function jC(e){var t=Ip(),r=t.formatMessage,n=t.textComponent,o=n===void 0?un.Fragment:n,a=e.id,s=e.description,u=e.defaultMessage,f=e.values,c=e.children,g=e.tagName,p=g===void 0?o:g,m=e.ignoreTag,_={id:a,description:s,defaultMessage:u},C=r(_,f,{ignoreTag:m});return typeof c=="function"?c(Array.isArray(C)?C:[C]):p?un.createElement(p,null,un.Children.toArray(C)):un.createElement(un.Fragment,null,C)}jC.displayName="FormattedMessage";var $C=un.memo(jC,nk);$C.displayName="MemoizedFormattedMessage";const ik=$C;fd("formatDate");fd("formatTime");fd("formatNumber");fd("formatList");fd("formatDisplayName");BC("formatDate");BC("formatTime");var VC={exports:{}},Me={},Py={},Tu={},Iy={},Pu={},f1;function ok(){if(f1)return Pu;f1=1,Pu.byteLength=u,Pu.toByteArray=c,Pu.fromByteArray=m;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)e[o]=n[o],t[n.charCodeAt(o)]=o;t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;function s(_){var C=_.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=_.indexOf("=");R===-1&&(R=C);var I=R===C?0:4-R%4;return[R,I]}function u(_){var C=s(_),R=C[0],I=C[1];return(R+I)*3/4-I}function f(_,C,R){return(C+R)*3/4-R}function c(_){var C,R=s(_),I=R[0],S=R[1],b=new r(f(_,I,S)),T=0,B=S>0?I-4:I,H;for(H=0;H<B;H+=4)C=t[_.charCodeAt(H)]<<18|t[_.charCodeAt(H+1)]<<12|t[_.charCodeAt(H+2)]<<6|t[_.charCodeAt(H+3)],b[T++]=C>>16&255,b[T++]=C>>8&255,b[T++]=C&255;return S===2&&(C=t[_.charCodeAt(H)]<<2|t[_.charCodeAt(H+1)]>>4,b[T++]=C&255),S===1&&(C=t[_.charCodeAt(H)]<<10|t[_.charCodeAt(H+1)]<<4|t[_.charCodeAt(H+2)]>>2,b[T++]=C>>8&255,b[T++]=C&255),b}function g(_){return e[_>>18&63]+e[_>>12&63]+e[_>>6&63]+e[_&63]}function p(_,C,R){for(var I,S=[],b=C;b<R;b+=3)I=(_[b]<<16&16711680)+(_[b+1]<<8&65280)+(_[b+2]&255),S.push(g(I));return S.join("")}function m(_){for(var C,R=_.length,I=R%3,S=[],b=16383,T=0,B=R-I;T<B;T+=b)S.push(p(_,T,T+b>B?B:T+b));return I===1?(C=_[R-1],S.push(e[C>>2]+e[C<<4&63]+"==")):I===2&&(C=(_[R-2]<<8)+_[R-1],S.push(e[C>>10]+e[C>>4&63]+e[C<<2&63]+"=")),S.join("")}return Pu}var qf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var h1;function sk(){return h1||(h1=1,qf.read=function(e,t,r,n,o){var a,s,u=o*8-n-1,f=(1<<u)-1,c=f>>1,g=-7,p=r?o-1:0,m=r?-1:1,_=e[t+p];for(p+=m,a=_&(1<<-g)-1,_>>=-g,g+=u;g>0;a=a*256+e[t+p],p+=m,g-=8);for(s=a&(1<<-g)-1,a>>=-g,g+=n;g>0;s=s*256+e[t+p],p+=m,g-=8);if(a===0)a=1-c;else{if(a===f)return s?NaN:(_?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-c}return(_?-1:1)*s*Math.pow(2,a-n)},qf.write=function(e,t,r,n,o,a){var s,u,f,c=a*8-o-1,g=(1<<c)-1,p=g>>1,m=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:a-1,C=n?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=g):(s=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+p>=1?t+=m/f:t+=m*Math.pow(2,1-p),t*f>=2&&(s++,f/=2),s+p>=g?(u=0,s=g):s+p>=1?(u=(t*f-1)*Math.pow(2,o),s=s+p):(u=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;e[r+_]=u&255,_+=C,u/=256,o-=8);for(s=s<<o|u,c+=o;c>0;e[r+_]=s&255,_+=C,s/=256,c-=8);e[r+_-C]|=R*128}),qf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var p1;function Vs(){return p1||(p1=1,function(e){const t=ok(),r=sk(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const K=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(K,P),K.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function s(K){if(K>o)throw new RangeError('The value "'+K+'" is invalid for option "size"');const P=new Uint8Array(K);return Object.setPrototypeOf(P,u.prototype),P}function u(K,P,L){if(typeof K=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(K)}return f(K,P,L)}u.poolSize=8192;function f(K,P,L){if(typeof K=="string")return m(K,P);if(ArrayBuffer.isView(K))return C(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(Mt(K,ArrayBuffer)||K&&Mt(K.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(K,SharedArrayBuffer)||K&&Mt(K.buffer,SharedArrayBuffer)))return R(K,P,L);if(typeof K=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=K.valueOf&&K.valueOf();if(k!=null&&k!==K)return u.from(k,P,L);const ge=I(K);if(ge)return ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]=="function")return u.from(K[Symbol.toPrimitive]("string"),P,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}u.from=function(K,P,L){return f(K,P,L)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function c(K){if(typeof K!="number")throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function g(K,P,L){return c(K),K<=0?s(K):P!==void 0?typeof L=="string"?s(K).fill(P,L):s(K).fill(P):s(K)}u.alloc=function(K,P,L){return g(K,P,L)};function p(K){return c(K),s(K<0?0:S(K)|0)}u.allocUnsafe=function(K){return p(K)},u.allocUnsafeSlow=function(K){return p(K)};function m(K,P){if((typeof P!="string"||P==="")&&(P="utf8"),!u.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const L=T(K,P)|0;let k=s(L);const ge=k.write(K,P);return ge!==L&&(k=k.slice(0,ge)),k}function _(K){const P=K.length<0?0:S(K.length)|0,L=s(P);for(let k=0;k<P;k+=1)L[k]=K[k]&255;return L}function C(K){if(Mt(K,Uint8Array)){const P=new Uint8Array(K);return R(P.buffer,P.byteOffset,P.byteLength)}return _(K)}function R(K,P,L){if(P<0||K.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<P+(L||0))throw new RangeError('"length" is outside of buffer bounds');let k;return P===void 0&&L===void 0?k=new Uint8Array(K):L===void 0?k=new Uint8Array(K,P):k=new Uint8Array(K,P,L),Object.setPrototypeOf(k,u.prototype),k}function I(K){if(u.isBuffer(K)){const P=S(K.length)|0,L=s(P);return L.length===0||K.copy(L,0,0,P),L}if(K.length!==void 0)return typeof K.length!="number"||$t(K.length)?s(0):_(K);if(K.type==="Buffer"&&Array.isArray(K.data))return _(K.data)}function S(K){if(K>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return K|0}function b(K){return+K!=K&&(K=0),u.alloc(+K)}u.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==u.prototype},u.compare=function(P,L){if(Mt(P,Uint8Array)&&(P=u.from(P,P.offset,P.byteLength)),Mt(L,Uint8Array)&&(L=u.from(L,L.offset,L.byteLength)),!u.isBuffer(P)||!u.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===L)return 0;let k=P.length,ge=L.length;for(let xe=0,ae=Math.min(k,ge);xe<ae;++xe)if(P[xe]!==L[xe]){k=P[xe],ge=L[xe];break}return k<ge?-1:ge<k?1:0},u.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(P,L){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return u.alloc(0);let k;if(L===void 0)for(L=0,k=0;k<P.length;++k)L+=P[k].length;const ge=u.allocUnsafe(L);let xe=0;for(k=0;k<P.length;++k){let ae=P[k];if(Mt(ae,Uint8Array))xe+ae.length>ge.length?(u.isBuffer(ae)||(ae=u.from(ae)),ae.copy(ge,xe)):Uint8Array.prototype.set.call(ge,ae,xe);else if(u.isBuffer(ae))ae.copy(ge,xe);else throw new TypeError('"list" argument must be an Array of Buffers');xe+=ae.length}return ge};function T(K,P){if(u.isBuffer(K))return K.length;if(ArrayBuffer.isView(K)||Mt(K,ArrayBuffer))return K.byteLength;if(typeof K!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);const L=K.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&L===0)return 0;let ge=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return we(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return Xe(K).length;default:if(ge)return k?-1:we(K).length;P=(""+P).toLowerCase(),ge=!0}}u.byteLength=T;function B(K,P,L){let k=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,P>>>=0,L<=P))return"";for(K||(K="utf8");;)switch(K){case"hex":return tt(this,P,L);case"utf8":case"utf-8":return je(this,P,L);case"ascii":return Be(this,P,L);case"latin1":case"binary":return De(this,P,L);case"base64":return Ue(this,P,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,P,L);default:if(k)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function H(K,P,L){const k=K[P];K[P]=K[L],K[L]=k}u.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let L=0;L<P;L+=2)H(this,L,L+1);return this},u.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let L=0;L<P;L+=4)H(this,L,L+3),H(this,L+1,L+2);return this},u.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let L=0;L<P;L+=8)H(this,L,L+7),H(this,L+1,L+6),H(this,L+2,L+5),H(this,L+3,L+4);return this},u.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?je(this,0,P):B.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(P){if(!u.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:u.compare(this,P)===0},u.prototype.inspect=function(){let P="";const L=e.INSPECT_MAX_BYTES;return P=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(P+=" ... "),"<Buffer "+P+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(P,L,k,ge,xe){if(Mt(P,Uint8Array)&&(P=u.from(P,P.offset,P.byteLength)),!u.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(L===void 0&&(L=0),k===void 0&&(k=P?P.length:0),ge===void 0&&(ge=0),xe===void 0&&(xe=this.length),L<0||k>P.length||ge<0||xe>this.length)throw new RangeError("out of range index");if(ge>=xe&&L>=k)return 0;if(ge>=xe)return-1;if(L>=k)return 1;if(L>>>=0,k>>>=0,ge>>>=0,xe>>>=0,this===P)return 0;let ae=xe-ge,bt=k-L;const Wt=Math.min(ae,bt),Rt=this.slice(ge,xe),xt=P.slice(L,k);for(let Se=0;Se<Wt;++Se)if(Rt[Se]!==xt[Se]){ae=Rt[Se],bt=xt[Se];break}return ae<bt?-1:bt<ae?1:0};function $(K,P,L,k,ge){if(K.length===0)return-1;if(typeof L=="string"?(k=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,$t(L)&&(L=ge?0:K.length-1),L<0&&(L=K.length+L),L>=K.length){if(ge)return-1;L=K.length-1}else if(L<0)if(ge)L=0;else return-1;if(typeof P=="string"&&(P=u.from(P,k)),u.isBuffer(P))return P.length===0?-1:F(K,P,L,k,ge);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?ge?Uint8Array.prototype.indexOf.call(K,P,L):Uint8Array.prototype.lastIndexOf.call(K,P,L):F(K,[P],L,k,ge);throw new TypeError("val must be string, number or Buffer")}function F(K,P,L,k,ge){let xe=1,ae=K.length,bt=P.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(K.length<2||P.length<2)return-1;xe=2,ae/=2,bt/=2,L/=2}function Wt(xt,Se){return xe===1?xt[Se]:xt.readUInt16BE(Se*xe)}let Rt;if(ge){let xt=-1;for(Rt=L;Rt<ae;Rt++)if(Wt(K,Rt)===Wt(P,xt===-1?0:Rt-xt)){if(xt===-1&&(xt=Rt),Rt-xt+1===bt)return xt*xe}else xt!==-1&&(Rt-=Rt-xt),xt=-1}else for(L+bt>ae&&(L=ae-bt),Rt=L;Rt>=0;Rt--){let xt=!0;for(let Se=0;Se<bt;Se++)if(Wt(K,Rt+Se)!==Wt(P,Se)){xt=!1;break}if(xt)return Rt}return-1}u.prototype.includes=function(P,L,k){return this.indexOf(P,L,k)!==-1},u.prototype.indexOf=function(P,L,k){return $(this,P,L,k,!0)},u.prototype.lastIndexOf=function(P,L,k){return $(this,P,L,k,!1)};function ne(K,P,L,k){L=Number(L)||0;const ge=K.length-L;k?(k=Number(k),k>ge&&(k=ge)):k=ge;const xe=P.length;k>xe/2&&(k=xe/2);let ae;for(ae=0;ae<k;++ae){const bt=parseInt(P.substr(ae*2,2),16);if($t(bt))return ae;K[L+ae]=bt}return ae}function Y(K,P,L,k){return ft(we(P,K.length-L),K,L,k)}function M(K,P,L,k){return ft(me(P),K,L,k)}function J(K,P,L,k){return ft(Xe(P),K,L,k)}function Le(K,P,L,k){return ft($e(P,K.length-L),K,L,k)}u.prototype.write=function(P,L,k,ge){if(L===void 0)ge="utf8",k=this.length,L=0;else if(k===void 0&&typeof L=="string")ge=L,k=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(k)?(k=k>>>0,ge===void 0&&(ge="utf8")):(ge=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const xe=this.length-L;if((k===void 0||k>xe)&&(k=xe),P.length>0&&(k<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");let ae=!1;for(;;)switch(ge){case"hex":return ne(this,P,L,k);case"utf8":case"utf-8":return Y(this,P,L,k);case"ascii":case"latin1":case"binary":return M(this,P,L,k);case"base64":return J(this,P,L,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,P,L,k);default:if(ae)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),ae=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ue(K,P,L){return P===0&&L===K.length?t.fromByteArray(K):t.fromByteArray(K.slice(P,L))}function je(K,P,L){L=Math.min(K.length,L);const k=[];let ge=P;for(;ge<L;){const xe=K[ge];let ae=null,bt=xe>239?4:xe>223?3:xe>191?2:1;if(ge+bt<=L){let Wt,Rt,xt,Se;switch(bt){case 1:xe<128&&(ae=xe);break;case 2:Wt=K[ge+1],(Wt&192)===128&&(Se=(xe&31)<<6|Wt&63,Se>127&&(ae=Se));break;case 3:Wt=K[ge+1],Rt=K[ge+2],(Wt&192)===128&&(Rt&192)===128&&(Se=(xe&15)<<12|(Wt&63)<<6|Rt&63,Se>2047&&(Se<55296||Se>57343)&&(ae=Se));break;case 4:Wt=K[ge+1],Rt=K[ge+2],xt=K[ge+3],(Wt&192)===128&&(Rt&192)===128&&(xt&192)===128&&(Se=(xe&15)<<18|(Wt&63)<<12|(Rt&63)<<6|xt&63,Se>65535&&Se<1114112&&(ae=Se))}}ae===null?(ae=65533,bt=1):ae>65535&&(ae-=65536,k.push(ae>>>10&1023|55296),ae=56320|ae&1023),k.push(ae),ge+=bt}return ke(k)}const nt=4096;function ke(K){const P=K.length;if(P<=nt)return String.fromCharCode.apply(String,K);let L="",k=0;for(;k<P;)L+=String.fromCharCode.apply(String,K.slice(k,k+=nt));return L}function Be(K,P,L){let k="";L=Math.min(K.length,L);for(let ge=P;ge<L;++ge)k+=String.fromCharCode(K[ge]&127);return k}function De(K,P,L){let k="";L=Math.min(K.length,L);for(let ge=P;ge<L;++ge)k+=String.fromCharCode(K[ge]);return k}function tt(K,P,L){const k=K.length;(!P||P<0)&&(P=0),(!L||L<0||L>k)&&(L=k);let ge="";for(let xe=P;xe<L;++xe)ge+=Lr[K[xe]];return ge}function re(K,P,L){const k=K.slice(P,L);let ge="";for(let xe=0;xe<k.length-1;xe+=2)ge+=String.fromCharCode(k[xe]+k[xe+1]*256);return ge}u.prototype.slice=function(P,L){const k=this.length;P=~~P,L=L===void 0?k:~~L,P<0?(P+=k,P<0&&(P=0)):P>k&&(P=k),L<0?(L+=k,L<0&&(L=0)):L>k&&(L=k),L<P&&(L=P);const ge=this.subarray(P,L);return Object.setPrototypeOf(ge,u.prototype),ge};function Ie(K,P,L){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+P>L)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(P,L,k){P=P>>>0,L=L>>>0,k||Ie(P,L,this.length);let ge=this[P],xe=1,ae=0;for(;++ae<L&&(xe*=256);)ge+=this[P+ae]*xe;return ge},u.prototype.readUintBE=u.prototype.readUIntBE=function(P,L,k){P=P>>>0,L=L>>>0,k||Ie(P,L,this.length);let ge=this[P+--L],xe=1;for(;L>0&&(xe*=256);)ge+=this[P+--L]*xe;return ge},u.prototype.readUint8=u.prototype.readUInt8=function(P,L){return P=P>>>0,L||Ie(P,1,this.length),this[P]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(P,L){return P=P>>>0,L||Ie(P,2,this.length),this[P]|this[P+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(P,L){return P=P>>>0,L||Ie(P,2,this.length),this[P]<<8|this[P+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(P,L){return P=P>>>0,L||Ie(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(P,L){return P=P>>>0,L||Ie(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},u.prototype.readBigUInt64LE=ee(function(P){P=P>>>0,E(P,"offset");const L=this[P],k=this[P+7];(L===void 0||k===void 0)&&j(P,this.length-8);const ge=L+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,xe=this[++P]+this[++P]*2**8+this[++P]*2**16+k*2**24;return BigInt(ge)+(BigInt(xe)<<BigInt(32))}),u.prototype.readBigUInt64BE=ee(function(P){P=P>>>0,E(P,"offset");const L=this[P],k=this[P+7];(L===void 0||k===void 0)&&j(P,this.length-8);const ge=L*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],xe=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+k;return(BigInt(ge)<<BigInt(32))+BigInt(xe)}),u.prototype.readIntLE=function(P,L,k){P=P>>>0,L=L>>>0,k||Ie(P,L,this.length);let ge=this[P],xe=1,ae=0;for(;++ae<L&&(xe*=256);)ge+=this[P+ae]*xe;return xe*=128,ge>=xe&&(ge-=Math.pow(2,8*L)),ge},u.prototype.readIntBE=function(P,L,k){P=P>>>0,L=L>>>0,k||Ie(P,L,this.length);let ge=L,xe=1,ae=this[P+--ge];for(;ge>0&&(xe*=256);)ae+=this[P+--ge]*xe;return xe*=128,ae>=xe&&(ae-=Math.pow(2,8*L)),ae},u.prototype.readInt8=function(P,L){return P=P>>>0,L||Ie(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},u.prototype.readInt16LE=function(P,L){P=P>>>0,L||Ie(P,2,this.length);const k=this[P]|this[P+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(P,L){P=P>>>0,L||Ie(P,2,this.length);const k=this[P+1]|this[P]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(P,L){return P=P>>>0,L||Ie(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},u.prototype.readInt32BE=function(P,L){return P=P>>>0,L||Ie(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},u.prototype.readBigInt64LE=ee(function(P){P=P>>>0,E(P,"offset");const L=this[P],k=this[P+7];(L===void 0||k===void 0)&&j(P,this.length-8);const ge=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(k<<24);return(BigInt(ge)<<BigInt(32))+BigInt(L+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),u.prototype.readBigInt64BE=ee(function(P){P=P>>>0,E(P,"offset");const L=this[P],k=this[P+7];(L===void 0||k===void 0)&&j(P,this.length-8);const ge=(L<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(ge)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+k)}),u.prototype.readFloatLE=function(P,L){return P=P>>>0,L||Ie(P,4,this.length),r.read(this,P,!0,23,4)},u.prototype.readFloatBE=function(P,L){return P=P>>>0,L||Ie(P,4,this.length),r.read(this,P,!1,23,4)},u.prototype.readDoubleLE=function(P,L){return P=P>>>0,L||Ie(P,8,this.length),r.read(this,P,!0,52,8)},u.prototype.readDoubleBE=function(P,L){return P=P>>>0,L||Ie(P,8,this.length),r.read(this,P,!1,52,8)};function Ge(K,P,L,k,ge,xe){if(!u.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>ge||P<xe)throw new RangeError('"value" argument is out of bounds');if(L+k>K.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(P,L,k,ge){if(P=+P,L=L>>>0,k=k>>>0,!ge){const bt=Math.pow(2,8*k)-1;Ge(this,P,L,k,bt,0)}let xe=1,ae=0;for(this[L]=P&255;++ae<k&&(xe*=256);)this[L+ae]=P/xe&255;return L+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(P,L,k,ge){if(P=+P,L=L>>>0,k=k>>>0,!ge){const bt=Math.pow(2,8*k)-1;Ge(this,P,L,k,bt,0)}let xe=k-1,ae=1;for(this[L+xe]=P&255;--xe>=0&&(ae*=256);)this[L+xe]=P/ae&255;return L+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,1,255,0),this[L]=P&255,L+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,2,65535,0),this[L]=P&255,this[L+1]=P>>>8,L+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,2,65535,0),this[L]=P>>>8,this[L+1]=P&255,L+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,4,4294967295,0),this[L+3]=P>>>24,this[L+2]=P>>>16,this[L+1]=P>>>8,this[L]=P&255,L+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,4,4294967295,0),this[L]=P>>>24,this[L+1]=P>>>16,this[L+2]=P>>>8,this[L+3]=P&255,L+4};function dt(K,P,L,k,ge){N(P,k,ge,K,L,7);let xe=Number(P&BigInt(4294967295));K[L++]=xe,xe=xe>>8,K[L++]=xe,xe=xe>>8,K[L++]=xe,xe=xe>>8,K[L++]=xe;let ae=Number(P>>BigInt(32)&BigInt(4294967295));return K[L++]=ae,ae=ae>>8,K[L++]=ae,ae=ae>>8,K[L++]=ae,ae=ae>>8,K[L++]=ae,L}function Ze(K,P,L,k,ge){N(P,k,ge,K,L,7);let xe=Number(P&BigInt(4294967295));K[L+7]=xe,xe=xe>>8,K[L+6]=xe,xe=xe>>8,K[L+5]=xe,xe=xe>>8,K[L+4]=xe;let ae=Number(P>>BigInt(32)&BigInt(4294967295));return K[L+3]=ae,ae=ae>>8,K[L+2]=ae,ae=ae>>8,K[L+1]=ae,ae=ae>>8,K[L]=ae,L+8}u.prototype.writeBigUInt64LE=ee(function(P,L=0){return dt(this,P,L,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ee(function(P,L=0){return Ze(this,P,L,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(P,L,k,ge){if(P=+P,L=L>>>0,!ge){const Wt=Math.pow(2,8*k-1);Ge(this,P,L,k,Wt-1,-Wt)}let xe=0,ae=1,bt=0;for(this[L]=P&255;++xe<k&&(ae*=256);)P<0&&bt===0&&this[L+xe-1]!==0&&(bt=1),this[L+xe]=(P/ae>>0)-bt&255;return L+k},u.prototype.writeIntBE=function(P,L,k,ge){if(P=+P,L=L>>>0,!ge){const Wt=Math.pow(2,8*k-1);Ge(this,P,L,k,Wt-1,-Wt)}let xe=k-1,ae=1,bt=0;for(this[L+xe]=P&255;--xe>=0&&(ae*=256);)P<0&&bt===0&&this[L+xe+1]!==0&&(bt=1),this[L+xe]=(P/ae>>0)-bt&255;return L+k},u.prototype.writeInt8=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,1,127,-128),P<0&&(P=255+P+1),this[L]=P&255,L+1},u.prototype.writeInt16LE=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,2,32767,-32768),this[L]=P&255,this[L+1]=P>>>8,L+2},u.prototype.writeInt16BE=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,2,32767,-32768),this[L]=P>>>8,this[L+1]=P&255,L+2},u.prototype.writeInt32LE=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,4,2147483647,-2147483648),this[L]=P&255,this[L+1]=P>>>8,this[L+2]=P>>>16,this[L+3]=P>>>24,L+4},u.prototype.writeInt32BE=function(P,L,k){return P=+P,L=L>>>0,k||Ge(this,P,L,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[L]=P>>>24,this[L+1]=P>>>16,this[L+2]=P>>>8,this[L+3]=P&255,L+4},u.prototype.writeBigInt64LE=ee(function(P,L=0){return dt(this,P,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ee(function(P,L=0){return Ze(this,P,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function qe(K,P,L,k,ge,xe){if(L+k>K.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function Fe(K,P,L,k,ge){return P=+P,L=L>>>0,ge||qe(K,P,L,4),r.write(K,P,L,k,23,4),L+4}u.prototype.writeFloatLE=function(P,L,k){return Fe(this,P,L,!0,k)},u.prototype.writeFloatBE=function(P,L,k){return Fe(this,P,L,!1,k)};function lt(K,P,L,k,ge){return P=+P,L=L>>>0,ge||qe(K,P,L,8),r.write(K,P,L,k,52,8),L+8}u.prototype.writeDoubleLE=function(P,L,k){return lt(this,P,L,!0,k)},u.prototype.writeDoubleBE=function(P,L,k){return lt(this,P,L,!1,k)},u.prototype.copy=function(P,L,k,ge){if(!u.isBuffer(P))throw new TypeError("argument should be a Buffer");if(k||(k=0),!ge&&ge!==0&&(ge=this.length),L>=P.length&&(L=P.length),L||(L=0),ge>0&&ge<k&&(ge=k),ge===k||P.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),P.length-L<ge-k&&(ge=P.length-L+k);const xe=ge-k;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,k,ge):Uint8Array.prototype.set.call(P,this.subarray(k,ge),L),xe},u.prototype.fill=function(P,L,k,ge){if(typeof P=="string"){if(typeof L=="string"?(ge=L,L=0,k=this.length):typeof k=="string"&&(ge=k,k=this.length),ge!==void 0&&typeof ge!="string")throw new TypeError("encoding must be a string");if(typeof ge=="string"&&!u.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(P.length===1){const ae=P.charCodeAt(0);(ge==="utf8"&&ae<128||ge==="latin1")&&(P=ae)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(L<0||this.length<L||this.length<k)throw new RangeError("Out of range index");if(k<=L)return this;L=L>>>0,k=k===void 0?this.length:k>>>0,P||(P=0);let xe;if(typeof P=="number")for(xe=L;xe<k;++xe)this[xe]=P;else{const ae=u.isBuffer(P)?P:u.from(P,ge),bt=ae.length;if(bt===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(xe=0;xe<k-L;++xe)this[xe+L]=ae[xe%bt]}return this};const gt={};function Pt(K,P,L){gt[K]=class extends L{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${K}]`,this.stack,delete this.name}get code(){return K}set code(ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ge,writable:!0})}toString(){return`${this.name} [${K}]: ${this.message}`}}}Pt("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?`${K} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pt("ERR_INVALID_ARG_TYPE",function(K,P){return`The "${K}" argument must be of type number. Received type ${typeof P}`},TypeError),Pt("ERR_OUT_OF_RANGE",function(K,P,L){let k=`The value of "${K}" is out of range.`,ge=L;return Number.isInteger(L)&&Math.abs(L)>2**32?ge=Ft(String(L)):typeof L=="bigint"&&(ge=String(L),(L>BigInt(2)**BigInt(32)||L<-(BigInt(2)**BigInt(32)))&&(ge=Ft(ge)),ge+="n"),k+=` It must be ${P}. Received ${ge}`,k},RangeError);function Ft(K){let P="",L=K.length;const k=K[0]==="-"?1:0;for(;L>=k+4;L-=3)P=`_${K.slice(L-3,L)}${P}`;return`${K.slice(0,L)}${P}`}function Z(K,P,L){E(P,"offset"),(K[P]===void 0||K[P+L]===void 0)&&j(P,K.length-(L+1))}function N(K,P,L,k,ge,xe){if(K>L||K<P){const ae=typeof P=="bigint"?"n":"";let bt;throw xe>3?P===0||P===BigInt(0)?bt=`>= 0${ae} and < 2${ae} ** ${(xe+1)*8}${ae}`:bt=`>= -(2${ae} ** ${(xe+1)*8-1}${ae}) and < 2 ** ${(xe+1)*8-1}${ae}`:bt=`>= ${P}${ae} and <= ${L}${ae}`,new gt.ERR_OUT_OF_RANGE("value",bt,K)}Z(k,ge,xe)}function E(K,P){if(typeof K!="number")throw new gt.ERR_INVALID_ARG_TYPE(P,"number",K)}function j(K,P,L){throw Math.floor(K)!==K?(E(K,L),new gt.ERR_OUT_OF_RANGE(L||"offset","an integer",K)):P<0?new gt.ERR_BUFFER_OUT_OF_BOUNDS:new gt.ERR_OUT_OF_RANGE(L||"offset",`>= ${L?1:0} and <= ${P}`,K)}const G=/[^+/0-9A-Za-z-_]/g;function fe(K){if(K=K.split("=")[0],K=K.trim().replace(G,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function we(K,P){P=P||1/0;let L;const k=K.length;let ge=null;const xe=[];for(let ae=0;ae<k;++ae){if(L=K.charCodeAt(ae),L>55295&&L<57344){if(!ge){if(L>56319){(P-=3)>-1&&xe.push(239,191,189);continue}else if(ae+1===k){(P-=3)>-1&&xe.push(239,191,189);continue}ge=L;continue}if(L<56320){(P-=3)>-1&&xe.push(239,191,189),ge=L;continue}L=(ge-55296<<10|L-56320)+65536}else ge&&(P-=3)>-1&&xe.push(239,191,189);if(ge=null,L<128){if((P-=1)<0)break;xe.push(L)}else if(L<2048){if((P-=2)<0)break;xe.push(L>>6|192,L&63|128)}else if(L<65536){if((P-=3)<0)break;xe.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((P-=4)<0)break;xe.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return xe}function me(K){const P=[];for(let L=0;L<K.length;++L)P.push(K.charCodeAt(L)&255);return P}function $e(K,P){let L,k,ge;const xe=[];for(let ae=0;ae<K.length&&!((P-=2)<0);++ae)L=K.charCodeAt(ae),k=L>>8,ge=L%256,xe.push(ge),xe.push(k);return xe}function Xe(K){return t.toByteArray(fe(K))}function ft(K,P,L,k){let ge;for(ge=0;ge<k&&!(ge+L>=P.length||ge>=K.length);++ge)P[ge+L]=K[ge];return ge}function Mt(K,P){return K instanceof P||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===P.name}function $t(K){return K!==K}const Lr=function(){const K="0123456789abcdef",P=new Array(256);for(let L=0;L<16;++L){const k=L*16;for(let ge=0;ge<16;++ge)P[k+ge]=K[L]+K[ge]}return P}();function ee(K){return typeof BigInt>"u"?de:K}function de(){throw new Error("BigInt not supported")}}(Iy)),Iy}var Fy,g1;function ak(){if(g1)return Fy;g1=1;var{Buffer:e}=Vs(),t={},r=t.LEFT_BRACE=1,n=t.RIGHT_BRACE=2,o=t.LEFT_BRACKET=3,a=t.RIGHT_BRACKET=4,s=t.COLON=5,u=t.COMMA=6,f=t.TRUE=7,c=t.FALSE=8,g=t.NULL=9,p=t.STRING=10,m=t.NUMBER=11,_=t.START=17,C=t.STOP=18,R=t.TRUE1=33,I=t.TRUE2=34,S=t.TRUE3=35,b=t.FALSE1=49,T=t.FALSE2=50,B=t.FALSE3=51,H=t.FALSE4=52,$=t.NULL1=65,F=t.NULL2=66,ne=t.NULL3=67,Y=t.NUMBER1=81,M=t.NUMBER3=83,J=t.STRING1=97,Le=t.STRING2=98,Ue=t.STRING3=99,je=t.STRING4=100,nt=t.STRING5=101,ke=t.STRING6=102,Be=t.VALUE=113,De=t.KEY=114,tt=t.OBJECT=129,re=t.ARRAY=130,Ie="\\".charCodeAt(0),Ge="/".charCodeAt(0),dt="\b".charCodeAt(0),Ze="\f".charCodeAt(0),qe=`
`.charCodeAt(0),Fe="\r".charCodeAt(0),lt="	".charCodeAt(0),gt=64*1024;function Pt(N){return e.alloc?e.alloc(N):new e(N)}function Ft(){this.tState=_,this.value=void 0,this.string=void 0,this.stringBuffer=Pt(gt),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=Be,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:Pt(2),3:Pt(3),4:Pt(4)},this.offset=-1}Ft.toknam=function(N){for(var E=Object.keys(t),j=0,G=E.length;j<G;j++){var fe=E[j];if(t[fe]===N)return fe}return N&&"0x"+N.toString(16)};var Z=Ft.prototype;return Z.onError=function(N){throw N},Z.charError=function(N,E){this.tState=C,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(N[E]))+" at position "+E+" in state "+Ft.toknam(this.tState)))},Z.appendStringChar=function(N){this.stringBufferOffset>=gt&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=N},Z.appendStringBuf=function(N,E,j){var G=N.length;typeof E=="number"&&(typeof j=="number"?j<0?G=N.length-E+j:G=j-E:G=N.length-E),G<0&&(G=0),this.stringBufferOffset+G>gt&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),N.copy(this.stringBuffer,this.stringBufferOffset,E,j),this.stringBufferOffset+=G},Z.write=function(N){typeof N=="string"&&(N=new e(N));for(var E,j=0,G=N.length;j<G;j++)if(this.tState===_){if(E=N[j],this.offset++,E===123)this.onToken(r,"{");else if(E===125)this.onToken(n,"}");else if(E===91)this.onToken(o,"[");else if(E===93)this.onToken(a,"]");else if(E===58)this.onToken(s,":");else if(E===44)this.onToken(u,",");else if(E===116)this.tState=R;else if(E===102)this.tState=b;else if(E===110)this.tState=$;else if(E===34)this.string="",this.stringBufferOffset=0,this.tState=J;else if(E===45)this.string="-",this.tState=Y;else if(E>=48&&E<64)this.string=String.fromCharCode(E),this.tState=M;else if(!(E===32||E===9||E===10||E===13))return this.charError(N,j)}else if(this.tState===J)if(E=N[j],this.bytes_remaining>0){for(var fe=0;fe<this.bytes_remaining;fe++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+fe]=N[fe];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,j=j+fe-1}else if(this.bytes_remaining===0&&E>=128){if(E<=193||E>244)return this.onError(new Error("Invalid UTF-8 character at position "+j+" in state "+Ft.toknam(this.tState)));if(E>=194&&E<=223&&(this.bytes_in_sequence=2),E>=224&&E<=239&&(this.bytes_in_sequence=3),E>=240&&E<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+j>N.length){for(var we=0;we<=N.length-1-j;we++)this.temp_buffs[this.bytes_in_sequence][we]=N[j+we];this.bytes_remaining=j+this.bytes_in_sequence-N.length,j=N.length-1}else this.appendStringBuf(N,j,j+this.bytes_in_sequence),j=j+this.bytes_in_sequence-1}else if(E===34)this.tState=_,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(p,this.string),this.offset+=e.byteLength(this.string,"utf8")+1,this.string=void 0;else if(E===92)this.tState=Le;else if(E>=32)this.appendStringChar(E);else return this.charError(N,j);else if(this.tState===Le)if(E=N[j],E===34)this.appendStringChar(E),this.tState=J;else if(E===92)this.appendStringChar(Ie),this.tState=J;else if(E===47)this.appendStringChar(Ge),this.tState=J;else if(E===98)this.appendStringChar(dt),this.tState=J;else if(E===102)this.appendStringChar(Ze),this.tState=J;else if(E===110)this.appendStringChar(qe),this.tState=J;else if(E===114)this.appendStringChar(Fe),this.tState=J;else if(E===116)this.appendStringChar(lt),this.tState=J;else if(E===117)this.unicode="",this.tState=Ue;else return this.charError(N,j);else if(this.tState===Ue||this.tState===je||this.tState===nt||this.tState===ke)if(E=N[j],E>=48&&E<64||E>64&&E<=70||E>96&&E<=102){if(this.unicode+=String.fromCharCode(E),this.tState++===ke){var me=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&me>=56320&&me<57343+1?(this.appendStringBuf(new e(String.fromCharCode(this.highSurrogate,me))),this.highSurrogate=void 0):this.highSurrogate===void 0&&me>=55296&&me<56319+1?this.highSurrogate=me:(this.highSurrogate!==void 0&&(this.appendStringBuf(new e(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new e(String.fromCharCode(me)))),this.tState=J}}else return this.charError(N,j);else if(this.tState===Y||this.tState===M)switch(E=N[j],E){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(E),this.tState=M;break;default:this.tState=_;var $e=this.numberReviver(this.string);if($e)return $e;this.offset+=this.string.length-1,this.string=void 0,j--;break}else if(this.tState===R)if(N[j]===114)this.tState=I;else return this.charError(N,j);else if(this.tState===I)if(N[j]===117)this.tState=S;else return this.charError(N,j);else if(this.tState===S)if(N[j]===101)this.tState=_,this.onToken(f,!0),this.offset+=3;else return this.charError(N,j);else if(this.tState===b)if(N[j]===97)this.tState=T;else return this.charError(N,j);else if(this.tState===T)if(N[j]===108)this.tState=B;else return this.charError(N,j);else if(this.tState===B)if(N[j]===115)this.tState=H;else return this.charError(N,j);else if(this.tState===H)if(N[j]===101)this.tState=_,this.onToken(c,!1),this.offset+=4;else return this.charError(N,j);else if(this.tState===$)if(N[j]===117)this.tState=F;else return this.charError(N,j);else if(this.tState===F)if(N[j]===108)this.tState=ne;else return this.charError(N,j);else if(this.tState===ne)if(N[j]===108)this.tState=_,this.onToken(g,null),this.offset+=3;else return this.charError(N,j)},Z.onToken=function(N,E){},Z.parseError=function(N,E){this.tState=C,this.onError(new Error("Unexpected "+Ft.toknam(N)+(E?"("+JSON.stringify(E)+")":"")+" in state "+Ft.toknam(this.state)))},Z.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},Z.pop=function(){var N=this.value,E=this.stack.pop();this.value=E.value,this.key=E.key,this.mode=E.mode,this.emit(N),this.mode||(this.state=Be)},Z.emit=function(N){this.mode&&(this.state=u),this.onValue(N)},Z.onValue=function(N){},Z.onToken=function(N,E){if(this.state===Be)if(N===p||N===m||N===f||N===c||N===g)this.value&&(this.value[this.key]=E),this.emit(E);else if(N===r)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=De,this.mode=tt;else if(N===o)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=re,this.state=Be;else if(N===n)if(this.mode===tt)this.pop();else return this.parseError(N,E);else if(N===a)if(this.mode===re)this.pop();else return this.parseError(N,E);else return this.parseError(N,E);else if(this.state===De)if(N===p)this.key=E,this.state=s;else if(N===n)this.pop();else return this.parseError(N,E);else if(this.state===s)if(N===s)this.state=Be;else return this.parseError(N,E);else if(this.state===u)if(N===u)this.mode===re?(this.key++,this.state=Be):this.mode===tt&&(this.state=De);else if(N===a&&this.mode===re||N===n&&this.mode===tt)this.pop();else return this.parseError(N,E);else return this.parseError(N,E)},Z.numberReviver=function(N){var E=Number(N);if(isNaN(E))return this.charError(buffer,i);N.match(/[0-9]+/)==N&&E.toString()!=N?this.onToken(p,N):this.onToken(m,E)},Ft.C=t,Fy=Ft,Fy}var Oy={},Ny={},y1={},m1;function KC(){return m1||(m1=1,function(){(function(e){(function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function n(Y){return Y&&DataView.prototype.isPrototypeOf(Y)}if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(Y){return Y&&o.indexOf(Object.prototype.toString.call(Y))>-1};function s(Y){if(typeof Y!="string"&&(Y=String(Y)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Y))throw new TypeError("Invalid character in header field name");return Y.toLowerCase()}function u(Y){return typeof Y!="string"&&(Y=String(Y)),Y}function f(Y){var M={next:function(){var J=Y.shift();return{done:J===void 0,value:J}}};return r.iterable&&(M[Symbol.iterator]=function(){return M}),M}function c(Y){this.map={},Y instanceof c?Y.forEach(function(M,J){this.append(J,M)},this):Array.isArray(Y)?Y.forEach(function(M){this.append(M[0],M[1])},this):Y&&Object.getOwnPropertyNames(Y).forEach(function(M){this.append(M,Y[M])},this)}c.prototype.append=function(Y,M){Y=s(Y),M=u(M);var J=this.map[Y];this.map[Y]=J?J+", "+M:M},c.prototype.delete=function(Y){delete this.map[s(Y)]},c.prototype.get=function(Y){return Y=s(Y),this.has(Y)?this.map[Y]:null},c.prototype.has=function(Y){return this.map.hasOwnProperty(s(Y))},c.prototype.set=function(Y,M){this.map[s(Y)]=u(M)},c.prototype.forEach=function(Y,M){for(var J in this.map)this.map.hasOwnProperty(J)&&Y.call(M,this.map[J],J,this)},c.prototype.keys=function(){var Y=[];return this.forEach(function(M,J){Y.push(J)}),f(Y)},c.prototype.values=function(){var Y=[];return this.forEach(function(M){Y.push(M)}),f(Y)},c.prototype.entries=function(){var Y=[];return this.forEach(function(M,J){Y.push([J,M])}),f(Y)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function g(Y){if(Y.bodyUsed)return Promise.reject(new TypeError("Already read"));Y.bodyUsed=!0}function p(Y){return new Promise(function(M,J){Y.onload=function(){M(Y.result)},Y.onerror=function(){J(Y.error)}})}function m(Y){var M=new FileReader,J=p(M);return M.readAsArrayBuffer(Y),J}function _(Y){var M=new FileReader,J=p(M);return M.readAsText(Y),J}function C(Y){for(var M=new Uint8Array(Y),J=new Array(M.length),Le=0;Le<M.length;Le++)J[Le]=String.fromCharCode(M[Le]);return J.join("")}function R(Y){if(Y.slice)return Y.slice(0);var M=new Uint8Array(Y.byteLength);return M.set(new Uint8Array(Y)),M.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(Y){this._bodyInit=Y,Y?typeof Y=="string"?this._bodyText=Y:r.blob&&Blob.prototype.isPrototypeOf(Y)?this._bodyBlob=Y:r.formData&&FormData.prototype.isPrototypeOf(Y)?this._bodyFormData=Y:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(Y)?this._bodyText=Y.toString():r.arrayBuffer&&r.blob&&n(Y)?(this._bodyArrayBuffer=R(Y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Y)||a(Y))?this._bodyArrayBuffer=R(Y):this._bodyText=Y=Object.prototype.toString.call(Y):this._bodyText="",this.headers.get("content-type")||(typeof Y=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(Y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var Y=g(this);if(Y)return Y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var Y=g(this);if(Y)return Y;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(Y){var M=Y.toUpperCase();return S.indexOf(M)>-1?M:Y}function T(Y,M){M=M||{};var J=M.body;if(Y instanceof T){if(Y.bodyUsed)throw new TypeError("Already read");this.url=Y.url,this.credentials=Y.credentials,M.headers||(this.headers=new c(Y.headers)),this.method=Y.method,this.mode=Y.mode,this.signal=Y.signal,!J&&Y._bodyInit!=null&&(J=Y._bodyInit,Y.bodyUsed=!0)}else this.url=String(Y);if(this.credentials=M.credentials||this.credentials||"same-origin",(M.headers||!this.headers)&&(this.headers=new c(M.headers)),this.method=b(M.method||this.method||"GET"),this.mode=M.mode||this.mode||null,this.signal=M.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&J)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(J)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function B(Y){var M=new FormData;return Y.trim().split("&").forEach(function(J){if(J){var Le=J.split("="),Ue=Le.shift().replace(/\+/g," "),je=Le.join("=").replace(/\+/g," ");M.append(decodeURIComponent(Ue),decodeURIComponent(je))}}),M}function H(Y){var M=new c,J=Y.replace(/\r?\n[\t ]+/g," ");return J.split(/\r?\n/).forEach(function(Le){var Ue=Le.split(":"),je=Ue.shift().trim();if(je){var nt=Ue.join(":").trim();M.append(je,nt)}}),M}I.call(T.prototype);function $(Y,M){M||(M={}),this.type="default",this.status=M.status===void 0?200:M.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in M?M.statusText:"OK",this.headers=new c(M.headers),this.url=M.url||"",this._initBody(Y)}I.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},$.error=function(){var Y=new $(null,{status:0,statusText:""});return Y.type="error",Y};var F=[301,302,303,307,308];$.redirect=function(Y,M){if(F.indexOf(M)===-1)throw new RangeError("Invalid status code");return new $(null,{status:M,headers:{location:Y}})},t.DOMException=e.DOMException;try{new t.DOMException}catch{t.DOMException=function(M,J){this.message=M,this.name=J;var Le=Error(M);this.stack=Le.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function ne(Y,M){return new Promise(function(J,Le){var Ue=new T(Y,M);if(Ue.signal&&Ue.signal.aborted)return Le(new t.DOMException("Aborted","AbortError"));var je=new XMLHttpRequest;function nt(){je.abort()}je.onload=function(){var ke={status:je.status,statusText:je.statusText,headers:H(je.getAllResponseHeaders()||"")};ke.url="responseURL"in je?je.responseURL:ke.headers.get("X-Request-URL");var Be="response"in je?je.response:je.responseText;J(new $(Be,ke))},je.onerror=function(){Le(new TypeError("Network request failed"))},je.ontimeout=function(){Le(new TypeError("Network request failed"))},je.onabort=function(){Le(new t.DOMException("Aborted","AbortError"))},je.open(Ue.method,Ue.url,!0),Ue.credentials==="include"?je.withCredentials=!0:Ue.credentials==="omit"&&(je.withCredentials=!1),"responseType"in je&&r.blob&&(je.responseType="blob"),Ue.headers.forEach(function(ke,Be){je.setRequestHeader(Be,ke)}),Ue.signal&&(Ue.signal.addEventListener("abort",nt),je.onreadystatechange=function(){je.readyState===4&&Ue.signal.removeEventListener("abort",nt)}),je.send(typeof Ue._bodyInit>"u"?null:Ue._bodyInit)})}return ne.polyfill=!0,e.fetch||(e.fetch=ne,e.Headers=c,e.Request=T,e.Response=$),t.Headers=c,t.Request=T,t.Response=$,t.fetch=ne,Object.defineProperty(t,"__esModule",{value:!0}),t})({})})(typeof self<"u"?self:cn)}()),y1}var ky={},Jo={},v1;function lk(){if(v1)return Jo;v1=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.removeDotSegmentsOfPath=Jo.removeDotSegments=Jo.resolve=void 0;function e(o,a){a=a||"";const s=a.indexOf("#");if(s>0&&(a=a.substr(0,s)),!o.length){if(a.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${a}' for value '${o}'`);return a}if(o.startsWith("?")){const _=a.indexOf("?");return _>0&&(a=a.substr(0,_)),a+o}if(o.startsWith("#"))return a+o;if(!a.length){const _=o.indexOf(":");if(_<0)throw new Error(`Found invalid relative IRI '${o}' for a missing baseIRI`);return r(o,_)}const u=o.indexOf(":");if(u>=0)return r(o,u);const f=a.indexOf(":");if(f<0)throw new Error(`Found invalid baseIRI '${a}' for value '${o}'`);const c=a.substr(0,f+1);if(o.indexOf("//")===0)return c+r(o,u);let g;if(a.indexOf("//",f)===f+1){if(g=a.indexOf("/",f+3),g<0)return a.length>f+3?a+"/"+r(o,u):c+r(o,u)}else if(g=a.indexOf("/",f+1),g<0)return c+r(o,u);if(o.indexOf("/")===0)return a.substr(0,g)+t(o);let p=a.substr(g);const m=p.lastIndexOf("/");return m>=0&&m<p.length-1&&(p=p.substr(0,m+1),o[0]==="."&&o[1]!=="."&&o[1]!=="/"&&o[2]&&(o=o.substr(1))),o=p+o,o=t(o),a.substr(0,g)+o}Jo.resolve=e;function t(o){const a=[];let s=0;for(;s<o.length;)switch(o[s]){case"/":if(o[s+1]===".")if(o[s+2]==="."){if(!n(o[s+3])){a.push([]),s++;break}a.pop(),o[s+3]||a.push([]),s+=3}else{if(!n(o[s+2])){a.push([]),s++;break}o[s+2]||a.push([]),s+=2}else a.push([]),s++;break;case"#":case"?":a.length||a.push([]),a[a.length-1].push(o.substr(s)),s=o.length;break;default:a.length||a.push([]),a[a.length-1].push(o[s]),s++;break}return"/"+a.map(u=>u.join("")).join("/")}Jo.removeDotSegments=t;function r(o,a){let s=a+1;a>=0?o[a+1]==="/"&&o[a+2]==="/"&&(s=a+3):o[0]==="/"&&o[1]==="/"&&(s=2);const u=o.indexOf("/",s);if(u<0)return o;const f=o.substr(0,u),c=o.substr(u);return f+t(c)}Jo.removeDotSegmentsOfPath=r;function n(o){return!o||o==="#"||o==="?"||o==="/"}return Jo}var w1;function Wv(){return w1||(w1=1,function(e){var t=cn&&cn.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=cn&&cn.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(lk(),e)}(ky)),ky}var Dy={},_1;function hd(){return _1||(_1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_CODES=e.ErrorCoded=void 0;class t extends Error{constructor(n,o){super(n),this.code=o}}e.ErrorCoded=t,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(e.ERROR_CODES||(e.ERROR_CODES={}))}(Dy)),Dy}var Iu={},Ly,S1;function Gv(){if(S1)return Ly;S1=1;var e=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r=/\s|\uFEFF|\xA0/,n=/\r?\n[\x20\x09]+/g,o=/[;,"]/,a=/[;,"]|\s/,s=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,u={IDLE:1,URI:2,ATTR:4};function f(C){return C.replace(t,"")}function c(C){return r.test(C)}function g(C,R){for(;c(C[R]);)R++;return R}function p(C){return a.test(C)||!s.test(C)}function m(C,R){return Object.keys(C).length===Object.keys(R).length&&Object.keys(C).every(I=>I in R&&C[I]===R[I])}class _{constructor(R){this.refs=[],R&&this.parse(R)}rel(R){for(var I=[],S=R.toLowerCase(),b=0;b<this.refs.length;b++)this.refs[b].rel.toLowerCase()===S&&I.push(this.refs[b]);return I}get(R,I){R=R.toLowerCase();for(var S=[],b=0;b<this.refs.length;b++)this.refs[b][R]===I&&S.push(this.refs[b]);return S}set(R){return this.refs.push(R),this}setUnique(R){return this.refs.some(I=>m(I,R))||this.refs.push(R),this}has(R,I){R=R.toLowerCase();for(var S=0;S<this.refs.length;S++)if(this.refs[S][R]===I)return!0;return!1}parse(R,T){T=T||0,R=T?R.slice(T):R,R=f(R).replace(n,"");for(var S=u.IDLE,b=R.length,T=0,B=null;T<b;)if(S===u.IDLE){if(c(R[T])){T++;continue}else if(R[T]==="<"){B!=null&&(B.rel!=null?this.refs.push(..._.expandRelations(B)):this.refs.push(B));var H=R.indexOf(">",T);if(H===-1)throw new Error("Expected end of URI delimiter at offset "+T);B={uri:R.slice(T+1,H)},T=H,S=u.URI}else throw new Error('Unexpected character "'+R[T]+'" at offset '+T);T++}else if(S===u.URI)if(c(R[T])){T++;continue}else if(R[T]===";")S=u.ATTR,T++;else if(R[T]===",")S=u.IDLE,T++;else throw new Error('Unexpected character "'+R[T]+'" at offset '+T);else if(S===u.ATTR){if(R[T]===";"||c(R[T])){T++;continue}var H=R.indexOf("=",T);H===-1&&(H=R.indexOf(";",T)),H===-1&&(H=R.length);var $=f(R.slice(T,H)).toLowerCase(),F="";if(T=H+1,T=g(R,T),R[T]==='"')for(T++;T<b;){if(R[T]==='"'){T++;break}R[T]==="\\"&&T++,F+=R[T],T++}else{for(var H=T+1;!o.test(R[H])&&H<b;)H++;F=R.slice(T,H),T=H}switch(B[$]&&_.isSingleOccurenceAttr($)||($[$.length-1]==="*"?B[$]=_.parseExtendedValue(F):(F=$==="type"?F.toLowerCase():F,B[$]!=null?Array.isArray(B[$])?B[$].push(F):B[$]=[B[$],F]:B[$]=F)),R[T]){case",":S=u.IDLE;break;case";":S=u.ATTR;break}T++}else throw new Error('Unknown parser state "'+S+'"');return B!=null&&(B.rel!=null?this.refs.push(..._.expandRelations(B)):this.refs.push(B)),B=null,this}toString(){for(var R=[],I="",S=null,b=0;b<this.refs.length;b++)S=this.refs[b],I=Object.keys(this.refs[b]).reduce(function(T,B){return B==="uri"?T:T+"; "+_.formatAttribute(B,S[B])},"<"+S.uri+">"),R.push(I);return R.join(", ")}}return _.isCompatibleEncoding=function(C){return e.test(C)},_.parse=function(C,R){return new _().parse(C,R)},_.isSingleOccurenceAttr=function(C){return C==="rel"||C==="type"||C==="media"||C==="title"||C==="title*"},_.isTokenAttr=function(C){return C==="rel"||C==="type"||C==="anchor"},_.escapeQuotes=function(C){return C.replace(/"/g,'\\"')},_.expandRelations=function(C){var R=C.rel.split(" ");return R.map(function(I){var S=Object.assign({},C);return S.rel=I,S})},_.parseExtendedValue=function(C){var R=/([^']+)?(?:'([^']*)')?(.+)/.exec(C);return{language:R[2].toLowerCase(),encoding:_.isCompatibleEncoding(R[1])?null:R[1].toLowerCase(),value:_.isCompatibleEncoding(R[1])?decodeURIComponent(R[3]):R[3]}},_.formatExtendedAttribute=function(C,R){var I=(R.encoding||"utf-8").toUpperCase(),S=R.language||"en",b="";return Buffer.isBuffer(R.value)&&_.isCompatibleEncoding(I)?b=R.value.toString(I):Buffer.isBuffer(R.value)?b=R.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):b=encodeURIComponent(R.value),C+"="+I+"'"+S+"'"+b},_.formatAttribute=function(C,R){return Array.isArray(R)?R.map(I=>_.formatAttribute(C,I)).join("; "):C[C.length-1]==="*"||typeof R!="string"?_.formatExtendedAttribute(C,R):(_.isTokenAttr(C)?R=p(R)?'"'+_.escapeQuotes(R)+'"':_.escapeQuotes(R):p(R)&&(R=encodeURIComponent(R),R=R.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),R='"'+R+'"'),C+"="+R)},Ly=_,Ly}var E1;function WC(){if(E1)return Iu;E1=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.FetchDocumentLoader=void 0,KC();const e=hd(),t=Gv(),r=Wv();let n=class{constructor(a){this.fetcher=a}async load(a){const s=await(this.fetcher||fetch)(a,{headers:new Headers({accept:"application/ld+json"})});if(s.ok&&s.headers){let u=s.headers.get("Content-Type");if(u){const f=u.indexOf(";");f>0&&(u=u.substr(0,f))}if(u==="application/ld+json")return await s.json();if(s.headers.has("Link")){let f;if(s.headers.forEach((c,g)=>{if(g==="link"){const p=(0,t.parse)(c);for(const m of p.get("type","application/ld+json"))if(m.rel==="alternate"){if(f)throw new Error("Multiple JSON-LD alternate links were found on "+a);f=(0,r.resolve)(m.uri,a)}}}),f)return this.load(f)}throw new e.ErrorCoded(`Unsupported JSON-LD media type ${u}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(s.statusText||`Status code: ${s.status}`)}};return Iu.FetchDocumentLoader=n,Iu}var Fu={},Ou={},b1;function qv(){if(b1)return Ou;b1=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.Util=void 0;class e{static isCompactIri(r){return r.indexOf(":")>0&&!(r&&r[0]==="#")}static getPrefix(r,n){if(r&&r[0]==="#")return null;const o=r.indexOf(":");if(o>=0){if(r.length>o+1&&r.charAt(o+1)==="/"&&r.charAt(o+2)==="/")return null;const a=r.substr(0,o);if(a==="_")return null;if(n[a])return a}return null}static getContextValueId(r){if(r===null||typeof r=="string")return r;const n=r["@id"];return n||null}static isSimpleTermDefinitionPrefix(r,n){return!e.isPotentialKeyword(r)&&(r[0]==="_"||n.allowPrefixNonGenDelims||e.isPrefixIriEndingWithGenDelim(r))}static isPotentialKeyword(r){return typeof r=="string"&&e.KEYWORD_REGEX.test(r)}static isPrefixIriEndingWithGenDelim(r){return e.ENDS_WITH_GEN_DELIM.test(r)}static isPrefixValue(r){return r&&(typeof r=="string"||r&&typeof r=="object")}static isValidIri(r){return!!(r&&e.IRI_REGEX.test(r))}static isValidIriWeak(r){return!!r&&r[0]!==":"&&e.IRI_REGEX_WEAK.test(r)}static isValidKeyword(r){return e.VALID_KEYWORDS[r]}static isTermProtected(r,n){const o=r[n];return typeof o!="string"&&o&&o["@protected"]}static hasProtectedTerms(r){for(const n of Object.keys(r))if(e.isTermProtected(r,n))return!0;return!1}static isReservedInternalKeyword(r){return r.startsWith("@__")}}return Ou.Util=e,e.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,e.IRI_REGEX_WEAK=/(?::[^:])|\//,e.KEYWORD_REGEX=/^@[a-z]+$/i,e.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,e.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,e.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,e.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},e.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],e.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],e.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],e.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],e.CONTAINERS_1_0=["@list","@set","@index"],Ou}var A1;function GC(){if(A1)return Fu;A1=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.JsonLdContextNormalized=void 0;const e=Wv(),t=zC(),r=hd(),n=qv();let o=class{constructor(s){this.contextRaw=s}getContextRaw(){return this.contextRaw}expandTerm(s,u,f=t.defaultExpandOptions){const c=this.contextRaw[s];if(c===null||c&&c["@id"]===null)return null;let g=!0;if(c&&u){const I=n.Util.getContextValueId(c);if(I&&I!==s)if(typeof I!="string"||!n.Util.isValidIri(I)&&!n.Util.isValidKeyword(I))n.Util.isPotentialKeyword(I)||(g=!1);else return I}const p=n.Util.getPrefix(s,this.contextRaw),m=this.contextRaw["@vocab"],_=(!!m||m==="")&&m.indexOf(":")<0,C=this.contextRaw["@base"],R=n.Util.isPotentialKeyword(s);if(p){const I=this.contextRaw[p],S=n.Util.getContextValueId(I);if(S){if(typeof I=="string"||!f.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(S,f))return s}else if(S[0]!=="_"&&!R&&!I["@prefix"]&&!(s in this.contextRaw))return s;return S+s.substr(p.length+1)}}else if(u&&(m||m===""||f.allowVocabRelativeToBase&&C&&_)&&!R&&!n.Util.isCompactIri(s))if(_){if(f.allowVocabRelativeToBase)return(m||C?(0,e.resolve)(m,C):"")+s;throw new r.ErrorCoded(`Relative vocab expansion for term '${s}' with vocab '${m}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return m+s;else if(!u&&C&&!R&&!n.Util.isCompactIri(s))return(0,e.resolve)(s,C);if(g)return s;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${s}': '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(s,u){if(u&&this.contextRaw["@vocab"]&&s.startsWith(this.contextRaw["@vocab"]))return s.substr(this.contextRaw["@vocab"].length);if(!u&&this.contextRaw["@base"]&&s.startsWith(this.contextRaw["@base"]))return s.substr(this.contextRaw["@base"].length);const f={prefix:"",suffix:s};for(const c in this.contextRaw){const g=this.contextRaw[c];if(g&&!n.Util.isPotentialKeyword(c)){const p=n.Util.getContextValueId(g);if(s.startsWith(p)){const m=s.substr(p.length);if(m)m.length<f.suffix.length&&(f.prefix=c,f.suffix=m);else if(u)return c}}}return f.prefix?f.prefix+":"+f.suffix:s}};return Fu.JsonLdContextNormalized=o,Fu}var Uy,R1;function qC(){return R1||(R1=1,Uy=function e(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((r,n,o)=>{const a=o===0?"":",",s=n===void 0||typeof n=="symbol"?null:n;return r+a+e(s)},"")+"]":"{"+Object.keys(t).sort().reduce((r,n,o)=>{if(t[n]===void 0||typeof t[n]=="symbol")return r;const a=r.length===0?"":",";return r+a+e(n)+":"+e(t[n])},"")+"}"}),Uy}var x1;function zC(){return x1||(x1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultExpandOptions=e.ContextParser=void 0,KC();const t=Wv(),r=hd(),n=WC(),o=GC(),a=qv(),s=qC();class u{constructor(c){c=c||{},this.documentLoader=c.documentLoader||new n.FetchDocumentLoader,this.documentCache={},this.validateContext=!c.skipValidation,this.expandContentTypeToBase=!!c.expandContentTypeToBase,this.remoteContextsDepthLimit=c.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in c?!!c.redirectSchemaOrgHttps:!0}static validateLanguage(c,g,p){if(typeof c!="string")throw new r.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(c)}'`,p);if(!a.Util.REGEX_LANGUAGE_TAG.test(c)){if(g)throw new r.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(c)}'`,p);return!1}return!0}static validateDirection(c,g){if(typeof c!="string")throw new r.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_BASE_DIRECTION);if(!a.Util.REGEX_DIRECTION_TAG.test(c)){if(g)throw new r.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(c){for(const g of Object.keys(c)){const p=c[g];if(p&&typeof p=="object"&&p["@reverse"]&&!p["@id"]){if(typeof p["@reverse"]!="string"||a.Util.isValidKeyword(p["@reverse"]))throw new r.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${p["@reverse"]}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);p["@id"]=p["@reverse"],a.Util.isPotentialKeyword(p["@reverse"])?delete p["@reverse"]:p["@reverse"]=!0}}return c}expandPrefixedTerms(c,g){const p=c.getContextRaw();for(const m of Object.keys(p))if(a.Util.EXPAND_KEYS_BLACKLIST.indexOf(m)<0&&!a.Util.isReservedInternalKeyword(m)){const _=p[m];if(a.Util.isPotentialKeyword(m)&&a.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(m)>=0&&(m!=="@type"||typeof p[m]=="object"&&!(p[m]["@protected"]||p[m]["@container"]==="@set")))throw new r.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${m} to ${JSON.stringify(_)}`,r.ERROR_CODES.KEYWORD_REDEFINITION);if(a.Util.ALIAS_RANGE_BLACKLIST.indexOf(a.Util.getContextValueId(_))>=0)throw new r.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${m} to ${JSON.stringify(_)}`,r.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(_&&a.Util.isPotentialKeyword(a.Util.getContextValueId(_))&&_["@prefix"]===!0)throw new r.ErrorCoded(`Tried to use keyword aliases as prefix: '${m}': '${JSON.stringify(_)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);for(;a.Util.isPrefixValue(p[m]);){const C=p[m];let R=!1;if(typeof C=="string")p[m]=c.expandTerm(C,!0),R=R||C!==p[m];else{const I=C["@id"],S=C["@type"],b=!("@prefix"in C)||a.Util.isValidIri(m);if("@id"in C)I!=null&&typeof I=="string"&&(p[m]["@id"]=c.expandTerm(I,!0),R=R||I!==p[m]["@id"]);else if(!a.Util.isPotentialKeyword(m)&&b){const T=c.expandTerm(m,!0);T!==m&&(p[m]["@id"]=T,R=!0)}S&&typeof S=="string"&&S!=="@vocab"&&(!C["@container"]||!C["@container"]["@type"])&&b&&(p[m]["@type"]=c.expandTerm(S,!0),g&&S===p[m]["@type"]&&(p[m]["@type"]=c.expandTerm(S,!1)),R=R||S!==p[m]["@type"])}if(!R)break}}}normalize(c,{processingMode:g,normalizeLanguageTags:p}){if(p||g===1)for(const m of Object.keys(c))if(m==="@language"&&typeof c[m]=="string")c[m]=c[m].toLowerCase();else{const _=c[m];_&&typeof _=="object"&&typeof _["@language"]=="string"&&(_["@language"]=_["@language"].toLowerCase())}}containersToHash(c){for(const g of Object.keys(c)){const p=c[g];if(p&&typeof p=="object"){if(typeof p["@container"]=="string")p["@container"]={[p["@container"]]:!0};else if(Array.isArray(p["@container"])){const m={};for(const _ of p["@container"])m[_]=!0;p["@container"]=m}}}}applyScopedProtected(c,{processingMode:g}){if(g&&g>=1.1&&c["@protected"]){for(const p of Object.keys(c))if(!a.Util.isReservedInternalKeyword(p)&&!a.Util.isPotentialKeyword(p)&&!a.Util.isTermProtected(c,p)){const m=c[p];m&&typeof m=="object"?"@protected"in c[p]||(c[p]["@protected"]=!0):c[p]={"@id":m,"@protected":!0}}delete c["@protected"]}}validateKeywordRedefinitions(c,g,p){for(const m of Object.keys(g))if(a.Util.isTermProtected(c,m)){if(typeof g[m]=="string"){const R=a.Util.isSimpleTermDefinitionPrefix(g[m],p);g[m]={"@id":g[m]},R&&(g[m]["@prefix"]=!0,c[m]["@prefix"]=!0)}const _=s(c[m]);g[m]["@protected"]=!0;const C=s(g[m]);if(_!==C)throw new r.ErrorCoded(`Attempted to override the protected keyword ${m} from ${JSON.stringify(a.Util.getContextValueId(c[m]))} to ${JSON.stringify(a.Util.getContextValueId(g[m]))}`,r.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}}validate(c,{processingMode:g}){for(const p of Object.keys(c)){if(a.Util.isReservedInternalKeyword(p))continue;if(p==="")throw new r.ErrorCoded(`The empty term is not allowed, got: '${p}': '${JSON.stringify(c[p])}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);const m=c[p],_=typeof m;if(a.Util.isPotentialKeyword(p)){switch(p.substr(1)){case"vocab":if(m!==null&&_!=="string")throw new r.ErrorCoded(`Found an invalid @vocab IRI: ${m}`,r.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(m!==null&&_!=="string")throw new r.ErrorCoded(`Found an invalid @base IRI: ${c[p]}`,r.ERROR_CODES.INVALID_BASE_IRI);break;case"language":m!==null&&u.validateLanguage(m,!0,r.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(m!==null&&_!=="number")throw new r.ErrorCoded(`Found an invalid @version number: ${m}`,r.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":m!==null&&u.validateDirection(m,!0);break;case"propagate":if(g===1)throw new r.ErrorCoded(`Found an illegal @propagate keyword: ${m}`,r.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(m!==null&&_!=="boolean")throw new r.ErrorCoded(`Found an invalid @propagate value: ${m}`,r.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(a.Util.isValidKeyword(p)&&a.Util.isValidKeyword(a.Util.getContextValueId(m)))throw new r.ErrorCoded(`Illegal keyword alias in term value, found: '${p}': '${a.Util.getContextValueId(m)}'`,r.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(m!==null)switch(_){case"string":if(a.Util.getPrefix(m,c)===p)throw new r.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.CYCLIC_IRI_MAPPING);if(a.Util.isValidIriWeak(p)){if(m==="@type")throw new r.ErrorCoded(`IRIs can not be mapped to @type, found: '${p}': '${m}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIri(m)&&m!==new o.JsonLdContextNormalized(c).expandTerm(p))throw new r.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${p}': '${m}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!a.Util.isCompactIri(p)&&!("@id"in m)&&(m["@type"]==="@id"?!c["@base"]:!c["@vocab"]))throw new r.ErrorCoded(`Missing @id in context entry: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);for(const C of Object.keys(m)){const R=m[C];if(R)switch(C){case"@id":if(a.Util.isValidKeyword(R)&&R!=="@type"&&R!=="@id"&&R!=="@graph"&&R!=="@nest")throw new r.ErrorCoded(`Illegal keyword alias in term value, found: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIriWeak(p)){if(R==="@type")throw new r.ErrorCoded(`IRIs can not be mapped to @type, found: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIri(R)&&R!==new o.JsonLdContextNormalized(c).expandTerm(p))throw new r.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof R!="string")throw new r.ErrorCoded(`Detected non-string @id in context entry: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.getPrefix(R,c)===p)throw new r.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(m["@container"]==="@type"&&R!=="@id"&&R!=="@vocab")throw new r.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${p}': '${R}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof R!="string")throw new r.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(_)}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);if(R!=="@id"&&R!=="@vocab"&&(g===1||R!=="@json")&&(g===1||R!=="@none")&&(R[0]==="_"||!a.Util.isValidIri(R)))throw new r.ErrorCoded(`A context @type must be an absolute IRI, found: '${p}': '${R}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof R=="string"&&m["@id"]&&m["@id"]!==R)throw new r.ErrorCoded(`Found non-matching @id and @reverse term values in '${p}':'${R}' and '${m["@id"]}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in m)throw new r.ErrorCoded(`@nest is not allowed in the reverse property '${p}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(g===1&&(Object.keys(R).length>1||a.Util.CONTAINERS_1_0.indexOf(Object.keys(R)[0])<0))throw new r.ErrorCoded(`Invalid term @container for '${p}' ('${Object.keys(R)}') in 1.0, must be only one of ${a.Util.CONTAINERS_1_0.join(", ")}`,r.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const I of Object.keys(R)){if(I==="@list"&&m["@reverse"])throw new r.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${p}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(a.Util.CONTAINERS.indexOf(I)<0)throw new r.ErrorCoded(`Invalid term @container for '${p}' ('${I}'), must be one of ${a.Util.CONTAINERS.join(", ")}`,r.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":u.validateLanguage(R,!0,r.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":u.validateDirection(R,!0);break;case"@prefix":if(R!==null&&typeof R!="boolean")throw new r.ErrorCoded(`Found an invalid term @prefix boolean in: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in m)&&!a.Util.isValidIri(p))throw new r.ErrorCoded(`Invalid @prefix definition for '${p}' ('${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(g===1||!m["@container"]||!m["@container"]["@index"])throw new r.ErrorCoded(`Attempt to add illegal key to value object: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(a.Util.isPotentialKeyword(R)&&R!=="@nest")throw new r.ErrorCoded(`Found an invalid term @nest value in: '${p}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new r.ErrorCoded(`Found an invalid term value: '${p}': '${m}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(c,g,p){return typeof c=="string"||(p&&!("@base"in c)&&g.parentContext&&typeof g.parentContext=="object"&&"@base"in g.parentContext&&(c["@base"]=g.parentContext["@base"],g.parentContext["@__baseDocument"]&&(c["@__baseDocument"]=!0)),g.baseIRI&&!g.external&&("@base"in c?c["@base"]!==null&&typeof c["@base"]=="string"&&!a.Util.isValidIri(c["@base"])&&(c["@base"]=(0,t.resolve)(c["@base"],g.parentContext&&g.parentContext["@base"]||g.baseIRI)):(c["@base"]=g.baseIRI,c["@__baseDocument"]=!0))),c}normalizeContextIri(c,g){if(!a.Util.isValidIri(c))try{c=(0,t.resolve)(c,g)}catch{throw new Error(`Invalid context IRI: ${c}`)}return this.redirectSchemaOrgHttps&&c.startsWith("http://schema.org")&&(c="https://schema.org/"),c}async parseInnerContexts(c,g){for(const p of Object.keys(c)){const m=c[p];if(m&&typeof m=="object"&&"@context"in m&&m["@context"]!==null&&!g.ignoreScopedContexts){if(this.validateContext)try{const _=Object.assign({},c);_[p]=Object.assign({},_[p]),delete _[p]["@context"],await this.parse(m["@context"],Object.assign(Object.assign({},g),{external:!1,parentContext:_,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(_){throw new r.ErrorCoded(_.message,r.ERROR_CODES.INVALID_SCOPED_CONTEXT)}m["@context"]=(await this.parse(m["@context"],Object.assign(Object.assign({},g),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:c}))).getContextRaw()}}return c}async parse(c,g={}){const{baseIRI:p,parentContext:m,external:_,processingMode:C=u.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:R,ignoreProtection:I,minimalProcessing:S}=g;let b=m;const T=g.remoteContexts||{};if(Object.keys(T).length>=this.remoteContextsDepthLimit)throw new r.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(T),r.ERROR_CODES.CONTEXT_OVERFLOW);if(c==null){if(!I&&b&&a.Util.hasProtectedTerms(b))throw new r.ErrorCoded("Illegal context nullification when terms are protected",r.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new o.JsonLdContextNormalized(this.applyBaseEntry({},g,!1))}else if(typeof c=="string"){const B=this.normalizeContextIri(c,p),H=this.getOverriddenLoad(B,g);if(H)return new o.JsonLdContextNormalized(H);const $=await this.parse(await this.load(B),Object.assign(Object.assign({},g),{baseIRI:B,external:!0,remoteContexts:Object.assign(Object.assign({},T),{[B]:!0})}));return this.applyBaseEntry($.getContextRaw(),g,!0),$}else if(Array.isArray(c)){const B=[],H=await Promise.all(c.map((F,ne)=>{if(typeof F=="string"){const Y=this.normalizeContextIri(F,p);B[ne]=Y;const M=this.getOverriddenLoad(Y,g);return M||this.load(Y)}else return F}));if(S)return new o.JsonLdContextNormalized(H);const $=await H.reduce((F,ne,Y)=>F.then(M=>this.parse(ne,Object.assign(Object.assign({},g),{baseIRI:B[Y]||g.baseIRI,external:!!B[Y]||g.external,parentContext:M.getContextRaw(),remoteContexts:B[Y]?Object.assign(Object.assign({},T),{[B[Y]]:!0}):T}))),Promise.resolve(new o.JsonLdContextNormalized(b||{})));return this.applyBaseEntry($.getContextRaw(),g,!0),$}else if(typeof c=="object"){if("@context"in c)return await this.parse(c["@context"],g);c=JSON.parse(JSON.stringify(c)),b&&!S&&(b=JSON.parse(JSON.stringify(b)));let B={};if(_&&delete c["@base"],this.applyBaseEntry(c,g,!0),this.containersToHash(c),S)return new o.JsonLdContextNormalized(c);let H={};if("@import"in c)if(C>=1.1){if(typeof c["@import"]!="string")throw new r.ErrorCoded("An @import value must be a string, but got "+typeof c["@import"],r.ERROR_CODES.INVALID_IMPORT_VALUE);H=await this.loadImportContext(this.normalizeContextIri(c["@import"],p)),delete c["@import"]}else throw new r.ErrorCoded("Context importing is not supported in JSON-LD 1.0",r.ERROR_CODES.INVALID_CONTEXT_ENTRY);B=Object.assign(Object.assign(Object.assign(Object.assign({},B),typeof b=="object"?b:{}),H),c);const $=new o.JsonLdContextNormalized(B);return await this.parseInnerContexts(B,g),(B&&B["@version"]||u.DEFAULT_PROCESSING_MODE)>=1.1&&(c["@vocab"]&&typeof c["@vocab"]=="string"||c["@vocab"]==="")&&(b&&"@vocab"in b&&c["@vocab"].indexOf(":")<0?B["@vocab"]=b["@vocab"]+c["@vocab"]:(a.Util.isCompactIri(c["@vocab"])||c["@vocab"]in $.getContextRaw())&&(B["@vocab"]=$.expandTerm(c["@vocab"],!0))),this.idifyReverseTerms(B),this.expandPrefixedTerms($,this.expandContentTypeToBase),!I&&b&&C>=1.1&&this.validateKeywordRedefinitions(b,B,e.defaultExpandOptions),this.normalize(B,{processingMode:C,normalizeLanguageTags:R}),this.applyScopedProtected(B,{processingMode:C}),this.validateContext&&this.validate(B,{processingMode:C}),$}else throw new r.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${c}`,r.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(c){const g=this.documentCache[c];if(g)return typeof g=="string"?g:Array.isArray(g)?g.slice():Object.assign({},g);let p;try{p=await this.documentLoader.load(c)}catch(m){throw new r.ErrorCoded(`Failed to load remote context ${c}: ${m.message}`,r.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in p))throw new r.ErrorCoded(`Missing @context in remote context at ${c}`,r.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[c]=p["@context"]}getOverriddenLoad(c,g){if(c in(g.remoteContexts||{})){if(g.ignoreRemoteScopedContexts)return c;throw new r.ErrorCoded("Detected a cyclic context inclusion of "+c,r.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(c){const g=await this.load(c);if(typeof g!="object"||Array.isArray(g))throw new r.ErrorCoded("An imported context must be a single object: "+c,r.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in g)throw new r.ErrorCoded("An imported context can not import another context: "+c,r.ERROR_CODES.INVALID_CONTEXT_ENTRY);return this.containersToHash(g),g}}e.ContextParser=u,u.DEFAULT_PROCESSING_MODE=1.1,e.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(Ny)),Ny}var My={},C1;function uk(){return C1||(C1=1,Object.defineProperty(My,"__esModule",{value:!0})),My}var By={},T1;function ck(){return T1||(T1=1,Object.defineProperty(By,"__esModule",{value:!0})),By}var P1;function xi(){return P1||(P1=1,function(e){var t=cn&&cn.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(n,s,u)}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=cn&&cn.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(zC(),e),r(hd(),e),r(WC(),e),r(uk(),e),r(ck(),e),r(GC(),e),r(qv(),e)}(Oy)),Oy}var Hy={exports:{}},jy={exports:{}},$y,I1;function Zn(){return I1||(I1=1,$y={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Uint8Array}),$y}var Vy={exports:{}},F1;function ss(){return F1||(F1=1,function(e){const t=Vs(),r=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||t.Blob,o=typeof n<"u"?function(u){return u instanceof n}:function(u){return!1};class a extends Error{constructor(u){if(!Array.isArray(u))throw new TypeError(`Expected input to be an Array, got ${typeof u}`);let f="";for(let c=0;c<u.length;c++)f+=`    ${u[c].stack}
`;super(f),this.name="AggregateError",this.errors=u}}e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(s){let u=!1;return function(...f){u||(u=!0,s.apply(this,f))}},createDeferredPromise:function(){let s,u;return{promise:new Promise((c,g)=>{s=c,u=g}),resolve:s,reject:u}},promisify(s){return new Promise((u,f)=>{s((c,...g)=>c?f(c):u(...g))})},debuglog(){return function(){}},format(s,...u){return s.replace(/%([sdifj])/g,function(...[f,c]){const g=u.shift();return c==="f"?g.toFixed(6):c==="j"?JSON.stringify(g):c==="s"&&typeof g=="object"?`${g.constructor!==Object?g.constructor.name:""} {}`.trim():g.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof r},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:o},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Vy)),Vy.exports}var zf={},Nu={exports:{}},O1;function zv(){if(O1)return Nu.exports;O1=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Nu.exports=e,Nu.exports.AbortSignal=t,Nu.exports.default=e,Nu.exports}var Ky,N1;function Bi(){if(N1)return Ky;N1=1;const{format:e,inspect:t,AggregateError:r}=ss(),n=globalThis.AggregateError||r,o=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",f={};function c(I,S){if(!I)throw new f.ERR_INTERNAL_ASSERTION(S)}function g(I){let S="",b=I.length;const T=I[0]==="-"?1:0;for(;b>=T+4;b-=3)S=`_${I.slice(b-3,b)}${S}`;return`${I.slice(0,b)}${S}`}function p(I,S,b){if(typeof S=="function")return c(S.length<=b.length,`Code: ${I}; The provided arguments length (${b.length}) does not match the required ones (${S.length}).`),S(...b);const T=(S.match(/%[dfijoOs]/g)||[]).length;return c(T===b.length,`Code: ${I}; The provided arguments length (${b.length}) does not match the required ones (${T}).`),b.length===0?S:e(S,...b)}function m(I,S,b){b||(b=Error);class T extends b{constructor(...H){super(p(I,S,H))}toString(){return`${this.name} [${I}]: ${this.message}`}}Object.defineProperties(T.prototype,{name:{value:b.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${I}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),T.prototype.code=I,T.prototype[o]=!0,f[I]=T}function _(I){const S=u+I.name;return Object.defineProperty(I,"name",{value:S}),I}function C(I,S){if(I&&S&&I!==S){if(Array.isArray(S.errors))return S.errors.push(I),S;const b=new n([S,I],S.message);return b.code=S.code,b}return I||S}class R extends Error{constructor(S="The operation was aborted",b=void 0){if(b!==void 0&&typeof b!="object")throw new f.ERR_INVALID_ARG_TYPE("options","Object",b);super(S,b),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(I,S,b)=>{c(typeof I=="string","'name' must be a string"),Array.isArray(S)||(S=[S]);let T="The ";I.endsWith(" argument")?T+=`${I} `:T+=`"${I}" ${I.includes(".")?"property":"argument"} `,T+="must be ";const B=[],H=[],$=[];for(const ne of S)c(typeof ne=="string","All expected entries have to be of type string"),a.includes(ne)?B.push(ne.toLowerCase()):s.test(ne)?H.push(ne):(c(ne!=="object",'The value "object" should be written as "Object"'),$.push(ne));if(H.length>0){const ne=B.indexOf("object");ne!==-1&&(B.splice(B,ne,1),H.push("Object"))}if(B.length>0){switch(B.length){case 1:T+=`of type ${B[0]}`;break;case 2:T+=`one of type ${B[0]} or ${B[1]}`;break;default:{const ne=B.pop();T+=`one of type ${B.join(", ")}, or ${ne}`}}(H.length>0||$.length>0)&&(T+=" or ")}if(H.length>0){switch(H.length){case 1:T+=`an instance of ${H[0]}`;break;case 2:T+=`an instance of ${H[0]} or ${H[1]}`;break;default:{const ne=H.pop();T+=`an instance of ${H.join(", ")}, or ${ne}`}}$.length>0&&(T+=" or ")}switch($.length){case 0:break;case 1:$[0].toLowerCase()!==$[0]&&(T+="an "),T+=`${$[0]}`;break;case 2:T+=`one of ${$[0]} or ${$[1]}`;break;default:{const ne=$.pop();T+=`one of ${$.join(", ")}, or ${ne}`}}if(b==null)T+=`. Received ${b}`;else if(typeof b=="function"&&b.name)T+=`. Received function ${b.name}`;else if(typeof b=="object"){var F;if((F=b.constructor)!==null&&F!==void 0&&F.name)T+=`. Received an instance of ${b.constructor.name}`;else{const ne=t(b,{depth:-1});T+=`. Received ${ne}`}}else{let ne=t(b,{colors:!1});ne.length>25&&(ne=`${ne.slice(0,25)}...`),T+=`. Received type ${typeof b} (${ne})`}return T},TypeError),m("ERR_INVALID_ARG_VALUE",(I,S,b="is invalid")=>{let T=t(S);return T.length>128&&(T=T.slice(0,128)+"..."),`The ${I.includes(".")?"property":"argument"} '${I}' ${b}. Received ${T}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(I,S,b)=>{var T;const B=b!=null&&(T=b.constructor)!==null&&T!==void 0&&T.name?`instance of ${b.constructor.name}`:`type ${typeof b}`;return`Expected ${I} to be returned from the "${S}" function but got ${B}.`},TypeError),m("ERR_MISSING_ARGS",(...I)=>{c(I.length>0,"At least one arg needs to be specified");let S;const b=I.length;switch(I=(Array.isArray(I)?I:[I]).map(T=>`"${T}"`).join(" or "),b){case 1:S+=`The ${I[0]} argument`;break;case 2:S+=`The ${I[0]} and ${I[1]} arguments`;break;default:{const T=I.pop();S+=`The ${I.join(", ")}, and ${T} arguments`}break}return`${S} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(I,S,b)=>{c(S,'Missing "range" argument');let T;return Number.isInteger(b)&&Math.abs(b)>2**32?T=g(String(b)):typeof b=="bigint"?(T=String(b),(b>2n**32n||b<-(2n**32n))&&(T=g(T)),T+="n"):T=t(b),`The value of "${I}" is out of range. It must be ${S}. Received ${T}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Ky={AbortError:R,aggregateTwoErrors:_(C),hideStackFrames:_,codes:f},Ky}var Wy,k1;function Fp(){if(k1)return Wy;k1=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:r,ArrayPrototypeMap:n,NumberIsInteger:o,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:u,NumberParseInt:f,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:g,String:p,StringPrototypeToUpperCase:m,StringPrototypeTrim:_}=Zn(),{hideStackFrames:C,codes:{ERR_SOCKET_BAD_PORT:R,ERR_INVALID_ARG_TYPE:I,ERR_INVALID_ARG_VALUE:S,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:T}}=Bi(),{normalizeEncoding:B}=ss(),{isAsyncFunction:H,isArrayBufferView:$}=ss().types,F={};function ne(me){return me===(me|0)}function Y(me){return me===me>>>0}const M=/^[0-7]+$/,J="must be a 32-bit unsigned integer or an octal string";function Le(me,$e,Xe){if(typeof me>"u"&&(me=Xe),typeof me=="string"){if(g(M,me)===null)throw new S($e,me,J);me=f(me,8)}return nt(me,$e),me}const Ue=C((me,$e,Xe=u,ft=s)=>{if(typeof me!="number")throw new I($e,"number",me);if(!o(me))throw new b($e,"an integer",me);if(me<Xe||me>ft)throw new b($e,`>= ${Xe} && <= ${ft}`,me)}),je=C((me,$e,Xe=-2147483648,ft=2147483647)=>{if(typeof me!="number")throw new I($e,"number",me);if(!o(me))throw new b($e,"an integer",me);if(me<Xe||me>ft)throw new b($e,`>= ${Xe} && <= ${ft}`,me)}),nt=C((me,$e,Xe=!1)=>{if(typeof me!="number")throw new I($e,"number",me);if(!o(me))throw new b($e,"an integer",me);const ft=Xe?1:0,Mt=4294967295;if(me<ft||me>Mt)throw new b($e,`>= ${ft} && <= ${Mt}`,me)});function ke(me,$e){if(typeof me!="string")throw new I($e,"string",me)}function Be(me,$e,Xe=void 0,ft){if(typeof me!="number")throw new I($e,"number",me);if(Xe!=null&&me<Xe||ft!=null&&me>ft||(Xe!=null||ft!=null)&&a(me))throw new b($e,`${Xe!=null?`>= ${Xe}`:""}${Xe!=null&&ft!=null?" && ":""}${ft!=null?`<= ${ft}`:""}`,me)}const De=C((me,$e,Xe)=>{if(!t(Xe,me)){const Mt="must be one of: "+r(n(Xe,$t=>typeof $t=="string"?`'${$t}'`:p($t)),", ");throw new S($e,me,Mt)}});function tt(me,$e){if(typeof me!="boolean")throw new I($e,"boolean",me)}function re(me,$e,Xe){return me==null||!c(me,$e)?Xe:me[$e]}const Ie=C((me,$e,Xe=null)=>{const ft=re(Xe,"allowArray",!1),Mt=re(Xe,"allowFunction",!1);if(!re(Xe,"nullable",!1)&&me===null||!ft&&e(me)||typeof me!="object"&&(!Mt||typeof me!="function"))throw new I($e,"Object",me)}),Ge=C((me,$e)=>{if(me!=null&&typeof me!="object"&&typeof me!="function")throw new I($e,"a dictionary",me)}),dt=C((me,$e,Xe=0)=>{if(!e(me))throw new I($e,"Array",me);if(me.length<Xe){const ft=`must be longer than ${Xe}`;throw new S($e,me,ft)}});function Ze(me,$e){dt(me,$e);for(let Xe=0;Xe<me.length;Xe++)ke(me[Xe],`${$e}[${Xe}]`)}function qe(me,$e){dt(me,$e);for(let Xe=0;Xe<me.length;Xe++)tt(me[Xe],`${$e}[${Xe}]`)}function Fe(me,$e="signal"){if(ke(me,$e),F[me]===void 0)throw F[m(me)]!==void 0?new T(me+" (signals must use all capital letters)"):new T(me)}const lt=C((me,$e="buffer")=>{if(!$(me))throw new I($e,["Buffer","TypedArray","DataView"],me)});function gt(me,$e){const Xe=B($e),ft=me.length;if(Xe==="hex"&&ft%2!==0)throw new S("encoding",$e,`is invalid for data of length ${ft}`)}function Pt(me,$e="Port",Xe=!0){if(typeof me!="number"&&typeof me!="string"||typeof me=="string"&&_(me).length===0||+me!==+me>>>0||me>65535||me===0&&!Xe)throw new R($e,me,Xe);return me|0}const Ft=C((me,$e)=>{if(me!==void 0&&(me===null||typeof me!="object"||!("aborted"in me)))throw new I($e,"AbortSignal",me)}),Z=C((me,$e)=>{if(typeof me!="function")throw new I($e,"Function",me)}),N=C((me,$e)=>{if(typeof me!="function"||H(me))throw new I($e,"Function",me)}),E=C((me,$e)=>{if(me!==void 0)throw new I($e,"undefined",me)});function j(me,$e,Xe){if(!t(Xe,me))throw new I($e,`('${r(Xe,"|")}')`,me)}const G=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function fe(me,$e){if(typeof me>"u"||!g(G,me))throw new S($e,me,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function we(me){if(typeof me=="string")return fe(me,"hints"),me;if(e(me)){const $e=me.length;let Xe="";if($e===0)return Xe;for(let ft=0;ft<$e;ft++){const Mt=me[ft];fe(Mt,"hints"),Xe+=Mt,ft!==$e-1&&(Xe+=", ")}return Xe}throw new S("hints",me,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Wy={isInt32:ne,isUint32:Y,parseFileMode:Le,validateArray:dt,validateStringArray:Ze,validateBooleanArray:qe,validateBoolean:tt,validateBuffer:lt,validateDictionary:Ge,validateEncoding:gt,validateFunction:Z,validateInt32:je,validateInteger:Ue,validateNumber:Be,validateObject:Ie,validateOneOf:De,validatePlainFunction:N,validatePort:Pt,validateSignalName:Fe,validateString:ke,validateUint32:nt,validateUndefined:E,validateUnion:j,validateAbortSignal:Ft,validateLinkHeaderValue:we},Wy}var Jf={exports:{}},Gy={exports:{}},D1;function Ia(){if(D1)return Gy.exports;D1=1;var e=Gy.exports={},t,r;function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=n}catch{t=n}try{typeof clearTimeout=="function"?r=clearTimeout:r=o}catch{r=o}})();function a(R){if(t===setTimeout)return setTimeout(R,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(R,0);try{return t(R,0)}catch{try{return t.call(null,R,0)}catch{return t.call(this,R,0)}}}function s(R){if(r===clearTimeout)return clearTimeout(R);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(R);try{return r(R)}catch{try{return r.call(null,R)}catch{return r.call(this,R)}}}var u=[],f=!1,c,g=-1;function p(){!f||!c||(f=!1,c.length?u=c.concat(u):g=-1,u.length&&m())}function m(){if(!f){var R=a(p);f=!0;for(var I=u.length;I;){for(c=u,u=[];++g<I;)c&&c[g].run();g=-1,I=u.length}c=null,f=!1,s(R)}}e.nextTick=function(R){var I=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)I[S-1]=arguments[S];u.push(new _(R,I)),u.length===1&&!f&&a(m)};function _(R,I){this.fun=R,this.array=I}_.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function C(){}return e.on=C,e.addListener=C,e.once=C,e.off=C,e.removeListener=C,e.removeAllListeners=C,e.emit=C,e.prependListener=C,e.prependOnceListener=C,e.listeners=function(R){return[]},e.binding=function(R){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(R){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Gy.exports}var qy,L1;function us(){if(L1)return qy;L1=1;const{Symbol:e,SymbolAsyncIterator:t,SymbolIterator:r,SymbolFor:n}=Zn(),o=e("kDestroyed"),a=e("kIsErrored"),s=e("kIsReadable"),u=e("kIsDisturbed"),f=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function g(re,Ie=!1){var Ge;return!!(re&&typeof re.pipe=="function"&&typeof re.on=="function"&&(!Ie||typeof re.pause=="function"&&typeof re.resume=="function")&&(!re._writableState||((Ge=re._readableState)===null||Ge===void 0?void 0:Ge.readable)!==!1)&&(!re._writableState||re._readableState))}function p(re){var Ie;return!!(re&&typeof re.write=="function"&&typeof re.on=="function"&&(!re._readableState||((Ie=re._writableState)===null||Ie===void 0?void 0:Ie.writable)!==!1))}function m(re){return!!(re&&typeof re.pipe=="function"&&re._readableState&&typeof re.on=="function"&&typeof re.write=="function")}function _(re){return re&&(re._readableState||re._writableState||typeof re.write=="function"&&typeof re.on=="function"||typeof re.pipe=="function"&&typeof re.on=="function")}function C(re){return!!(re&&!_(re)&&typeof re.pipeThrough=="function"&&typeof re.getReader=="function"&&typeof re.cancel=="function")}function R(re){return!!(re&&!_(re)&&typeof re.getWriter=="function"&&typeof re.abort=="function")}function I(re){return!!(re&&!_(re)&&typeof re.readable=="object"&&typeof re.writable=="object")}function S(re){return C(re)||R(re)||I(re)}function b(re,Ie){return re==null?!1:Ie===!0?typeof re[t]=="function":Ie===!1?typeof re[r]=="function":typeof re[t]=="function"||typeof re[r]=="function"}function T(re){if(!_(re))return null;const Ie=re._writableState,Ge=re._readableState,dt=Ie||Ge;return!!(re.destroyed||re[o]||dt!=null&&dt.destroyed)}function B(re){if(!p(re))return null;if(re.writableEnded===!0)return!0;const Ie=re._writableState;return Ie!=null&&Ie.errored?!1:typeof(Ie==null?void 0:Ie.ended)!="boolean"?null:Ie.ended}function H(re,Ie){if(!p(re))return null;if(re.writableFinished===!0)return!0;const Ge=re._writableState;return Ge!=null&&Ge.errored?!1:typeof(Ge==null?void 0:Ge.finished)!="boolean"?null:!!(Ge.finished||Ie===!1&&Ge.ended===!0&&Ge.length===0)}function $(re){if(!g(re))return null;if(re.readableEnded===!0)return!0;const Ie=re._readableState;return!Ie||Ie.errored?!1:typeof(Ie==null?void 0:Ie.ended)!="boolean"?null:Ie.ended}function F(re,Ie){if(!g(re))return null;const Ge=re._readableState;return Ge!=null&&Ge.errored?!1:typeof(Ge==null?void 0:Ge.endEmitted)!="boolean"?null:!!(Ge.endEmitted||Ie===!1&&Ge.ended===!0&&Ge.length===0)}function ne(re){return re&&re[s]!=null?re[s]:typeof(re==null?void 0:re.readable)!="boolean"?null:T(re)?!1:g(re)&&re.readable&&!F(re)}function Y(re){return typeof(re==null?void 0:re.writable)!="boolean"?null:T(re)?!1:p(re)&&re.writable&&!B(re)}function M(re,Ie){return _(re)?T(re)?!0:!((Ie==null?void 0:Ie.readable)!==!1&&ne(re)||(Ie==null?void 0:Ie.writable)!==!1&&Y(re)):null}function J(re){var Ie,Ge;return _(re)?re.writableErrored?re.writableErrored:(Ie=(Ge=re._writableState)===null||Ge===void 0?void 0:Ge.errored)!==null&&Ie!==void 0?Ie:null:null}function Le(re){var Ie,Ge;return _(re)?re.readableErrored?re.readableErrored:(Ie=(Ge=re._readableState)===null||Ge===void 0?void 0:Ge.errored)!==null&&Ie!==void 0?Ie:null:null}function Ue(re){if(!_(re))return null;if(typeof re.closed=="boolean")return re.closed;const Ie=re._writableState,Ge=re._readableState;return typeof(Ie==null?void 0:Ie.closed)=="boolean"||typeof(Ge==null?void 0:Ge.closed)=="boolean"?(Ie==null?void 0:Ie.closed)||(Ge==null?void 0:Ge.closed):typeof re._closed=="boolean"&&je(re)?re._closed:null}function je(re){return typeof re._closed=="boolean"&&typeof re._defaultKeepAlive=="boolean"&&typeof re._removedConnection=="boolean"&&typeof re._removedContLen=="boolean"}function nt(re){return typeof re._sent100=="boolean"&&je(re)}function ke(re){var Ie;return typeof re._consuming=="boolean"&&typeof re._dumped=="boolean"&&((Ie=re.req)===null||Ie===void 0?void 0:Ie.upgradeOrConnect)===void 0}function Be(re){if(!_(re))return null;const Ie=re._writableState,Ge=re._readableState,dt=Ie||Ge;return!dt&&nt(re)||!!(dt&&dt.autoDestroy&&dt.emitClose&&dt.closed===!1)}function De(re){var Ie;return!!(re&&((Ie=re[u])!==null&&Ie!==void 0?Ie:re.readableDidRead||re.readableAborted))}function tt(re){var Ie,Ge,dt,Ze,qe,Fe,lt,gt,Pt,Ft;return!!(re&&((Ie=(Ge=(dt=(Ze=(qe=(Fe=re[a])!==null&&Fe!==void 0?Fe:re.readableErrored)!==null&&qe!==void 0?qe:re.writableErrored)!==null&&Ze!==void 0?Ze:(lt=re._readableState)===null||lt===void 0?void 0:lt.errorEmitted)!==null&&dt!==void 0?dt:(gt=re._writableState)===null||gt===void 0?void 0:gt.errorEmitted)!==null&&Ge!==void 0?Ge:(Pt=re._readableState)===null||Pt===void 0?void 0:Pt.errored)!==null&&Ie!==void 0?Ie:!((Ft=re._writableState)===null||Ft===void 0)&&Ft.errored))}return qy={kDestroyed:o,isDisturbed:De,kIsDisturbed:u,isErrored:tt,kIsErrored:a,isReadable:ne,kIsReadable:s,kIsClosedPromise:f,kControllerErrorFunction:c,isClosed:Ue,isDestroyed:T,isDuplexNodeStream:m,isFinished:M,isIterable:b,isReadableNodeStream:g,isReadableStream:C,isReadableEnded:$,isReadableFinished:F,isReadableErrored:Le,isNodeStream:_,isWebStream:S,isWritable:Y,isWritableNodeStream:p,isWritableStream:R,isWritableEnded:B,isWritableFinished:H,isWritableErrored:J,isServerRequest:ke,isServerResponse:nt,willEmitClose:Be,isTransformStream:I},qy}var U1;function Ks(){if(U1)return Jf.exports;U1=1;const e=Ia(),{AbortError:t,codes:r}=Bi(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:o}=r,{kEmptyObject:a,once:s}=ss(),{validateAbortSignal:u,validateFunction:f,validateObject:c,validateBoolean:g}=Fp(),{Promise:p,PromisePrototypeThen:m}=Zn(),{isClosed:_,isReadable:C,isReadableNodeStream:R,isReadableStream:I,isReadableFinished:S,isReadableErrored:b,isWritable:T,isWritableNodeStream:B,isWritableStream:H,isWritableFinished:$,isWritableErrored:F,isNodeStream:ne,willEmitClose:Y,kIsClosedPromise:M}=us();function J(ke){return ke.setHeader&&typeof ke.abort=="function"}const Le=()=>{};function Ue(ke,Be,De){var tt,re;if(arguments.length===2?(De=Be,Be=a):Be==null?Be=a:c(Be,"options"),f(De,"callback"),u(Be.signal,"options.signal"),De=s(De),I(ke)||H(ke))return je(ke,Be,De);if(!ne(ke))throw new n("stream",["ReadableStream","WritableStream","Stream"],ke);const Ie=(tt=Be.readable)!==null&&tt!==void 0?tt:R(ke),Ge=(re=Be.writable)!==null&&re!==void 0?re:B(ke),dt=ke._writableState,Ze=ke._readableState,qe=()=>{ke.writable||gt()};let Fe=Y(ke)&&R(ke)===Ie&&B(ke)===Ge,lt=$(ke,!1);const gt=()=>{lt=!0,ke.destroyed&&(Fe=!1),!(Fe&&(!ke.readable||Ie))&&(!Ie||Pt)&&De.call(ke)};let Pt=S(ke,!1);const Ft=()=>{Pt=!0,ke.destroyed&&(Fe=!1),!(Fe&&(!ke.writable||Ge))&&(!Ge||lt)&&De.call(ke)},Z=we=>{De.call(ke,we)};let N=_(ke);const E=()=>{N=!0;const we=F(ke)||b(ke);if(we&&typeof we!="boolean")return De.call(ke,we);if(Ie&&!Pt&&R(ke,!0)&&!S(ke,!1))return De.call(ke,new o);if(Ge&&!lt&&!$(ke,!1))return De.call(ke,new o);De.call(ke)},j=()=>{N=!0;const we=F(ke)||b(ke);if(we&&typeof we!="boolean")return De.call(ke,we);De.call(ke)},G=()=>{ke.req.on("finish",gt)};J(ke)?(ke.on("complete",gt),Fe||ke.on("abort",E),ke.req?G():ke.on("request",G)):Ge&&!dt&&(ke.on("end",qe),ke.on("close",qe)),!Fe&&typeof ke.aborted=="boolean"&&ke.on("aborted",E),ke.on("end",Ft),ke.on("finish",gt),Be.error!==!1&&ke.on("error",Z),ke.on("close",E),N?e.nextTick(E):dt!=null&&dt.errorEmitted||Ze!=null&&Ze.errorEmitted?Fe||e.nextTick(j):(!Ie&&(!Fe||C(ke))&&(lt||T(ke)===!1)||!Ge&&(!Fe||T(ke))&&(Pt||C(ke)===!1)||Ze&&ke.req&&ke.aborted)&&e.nextTick(j);const fe=()=>{De=Le,ke.removeListener("aborted",E),ke.removeListener("complete",gt),ke.removeListener("abort",E),ke.removeListener("request",G),ke.req&&ke.req.removeListener("finish",gt),ke.removeListener("end",qe),ke.removeListener("close",qe),ke.removeListener("finish",gt),ke.removeListener("end",Ft),ke.removeListener("error",Z),ke.removeListener("close",E)};if(Be.signal&&!N){const we=()=>{const me=De;fe(),me.call(ke,new t(void 0,{cause:Be.signal.reason}))};if(Be.signal.aborted)e.nextTick(we);else{const me=De;De=s((...$e)=>{Be.signal.removeEventListener("abort",we),me.apply(ke,$e)}),Be.signal.addEventListener("abort",we)}}return fe}function je(ke,Be,De){let tt=!1,re=Le;if(Be.signal)if(re=()=>{tt=!0,De.call(ke,new t(void 0,{cause:Be.signal.reason}))},Be.signal.aborted)e.nextTick(re);else{const Ge=De;De=s((...dt)=>{Be.signal.removeEventListener("abort",re),Ge.apply(ke,dt)}),Be.signal.addEventListener("abort",re)}const Ie=(...Ge)=>{tt||e.nextTick(()=>De.apply(ke,Ge))};return m(ke[M].promise,Ie,Ie),Le}function nt(ke,Be){var De;let tt=!1;return Be===null&&(Be=a),(De=Be)!==null&&De!==void 0&&De.cleanup&&(g(Be.cleanup,"cleanup"),tt=Be.cleanup),new p((re,Ie)=>{const Ge=Ue(ke,Be,dt=>{tt&&Ge(),dt?Ie(dt):re()})})}return Jf.exports=Ue,Jf.exports.finished=nt,Jf.exports}var zy,M1;function zl(){if(M1)return zy;M1=1;const e=Ia(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:r},AbortError:n}=Bi(),{Symbol:o}=Zn(),{kDestroyed:a,isDestroyed:s,isFinished:u,isServerRequest:f}=us(),c=o("kDestroy"),g=o("kConstruct");function p(M,J,Le){M&&(M.stack,J&&!J.errored&&(J.errored=M),Le&&!Le.errored&&(Le.errored=M))}function m(M,J){const Le=this._readableState,Ue=this._writableState,je=Ue||Le;return Ue!=null&&Ue.destroyed||Le!=null&&Le.destroyed?(typeof J=="function"&&J(),this):(p(M,Ue,Le),Ue&&(Ue.destroyed=!0),Le&&(Le.destroyed=!0),je.constructed?_(this,M,J):this.once(c,function(nt){_(this,t(nt,M),J)}),this)}function _(M,J,Le){let Ue=!1;function je(nt){if(Ue)return;Ue=!0;const ke=M._readableState,Be=M._writableState;p(nt,Be,ke),Be&&(Be.closed=!0),ke&&(ke.closed=!0),typeof Le=="function"&&Le(nt),nt?e.nextTick(C,M,nt):e.nextTick(R,M)}try{M._destroy(J||null,je)}catch(nt){je(nt)}}function C(M,J){I(M,J),R(M)}function R(M){const J=M._readableState,Le=M._writableState;Le&&(Le.closeEmitted=!0),J&&(J.closeEmitted=!0),(Le!=null&&Le.emitClose||J!=null&&J.emitClose)&&M.emit("close")}function I(M,J){const Le=M._readableState,Ue=M._writableState;Ue!=null&&Ue.errorEmitted||Le!=null&&Le.errorEmitted||(Ue&&(Ue.errorEmitted=!0),Le&&(Le.errorEmitted=!0),M.emit("error",J))}function S(){const M=this._readableState,J=this._writableState;M&&(M.constructed=!0,M.closed=!1,M.closeEmitted=!1,M.destroyed=!1,M.errored=null,M.errorEmitted=!1,M.reading=!1,M.ended=M.readable===!1,M.endEmitted=M.readable===!1),J&&(J.constructed=!0,J.destroyed=!1,J.closed=!1,J.closeEmitted=!1,J.errored=null,J.errorEmitted=!1,J.finalCalled=!1,J.prefinished=!1,J.ended=J.writable===!1,J.ending=J.writable===!1,J.finished=J.writable===!1)}function b(M,J,Le){const Ue=M._readableState,je=M._writableState;if(je!=null&&je.destroyed||Ue!=null&&Ue.destroyed)return this;Ue!=null&&Ue.autoDestroy||je!=null&&je.autoDestroy?M.destroy(J):J&&(J.stack,je&&!je.errored&&(je.errored=J),Ue&&!Ue.errored&&(Ue.errored=J),Le?e.nextTick(I,M,J):I(M,J))}function T(M,J){if(typeof M._construct!="function")return;const Le=M._readableState,Ue=M._writableState;Le&&(Le.constructed=!1),Ue&&(Ue.constructed=!1),M.once(g,J),!(M.listenerCount(g)>1)&&e.nextTick(B,M)}function B(M){let J=!1;function Le(Ue){if(J){b(M,Ue??new r);return}J=!0;const je=M._readableState,nt=M._writableState,ke=nt||je;je&&(je.constructed=!0),nt&&(nt.constructed=!0),ke.destroyed?M.emit(c,Ue):Ue?b(M,Ue,!0):e.nextTick(H,M)}try{M._construct(Ue=>{e.nextTick(Le,Ue)})}catch(Ue){e.nextTick(Le,Ue)}}function H(M){M.emit(g)}function $(M){return(M==null?void 0:M.setHeader)&&typeof M.abort=="function"}function F(M){M.emit("close")}function ne(M,J){M.emit("error",J),e.nextTick(F,M)}function Y(M,J){!M||s(M)||(!J&&!u(M)&&(J=new n),f(M)?(M.socket=null,M.destroy(J)):$(M)?M.abort():$(M.req)?M.req.abort():typeof M.destroy=="function"?M.destroy(J):typeof M.close=="function"?M.close():J?e.nextTick(ne,M,J):e.nextTick(F,M),M.destroyed||(M[a]=!0))}return zy={construct:T,destroyer:Y,destroy:m,undestroy:S,errorOrDestroy:b},zy}var Xf={exports:{}},B1;function pd(){if(B1)return Xf.exports;B1=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(H,$,F){return Function.prototype.apply.call(H,$,F)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:r=function(H){return Object.getOwnPropertyNames(H)};function n(B){console&&console.warn&&console.warn(B)}var o=Number.isNaN||function(H){return H!==H};function a(){a.init.call(this)}Xf.exports=a,Xf.exports.once=S,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function u(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(B){if(typeof B!="number"||B<0||o(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");s=B}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||o(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function f(B){return B._maxListeners===void 0?a.defaultMaxListeners:B._maxListeners}a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(H){for(var $=[],F=1;F<arguments.length;F++)$.push(arguments[F]);var ne=H==="error",Y=this._events;if(Y!==void 0)ne=ne&&Y.error===void 0;else if(!ne)return!1;if(ne){var M;if($.length>0&&(M=$[0]),M instanceof Error)throw M;var J=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw J.context=M,J}var Le=Y[H];if(Le===void 0)return!1;if(typeof Le=="function")t(Le,this,$);else for(var Ue=Le.length,je=C(Le,Ue),F=0;F<Ue;++F)t(je[F],this,$);return!0};function c(B,H,$,F){var ne,Y,M;if(u($),Y=B._events,Y===void 0?(Y=B._events=Object.create(null),B._eventsCount=0):(Y.newListener!==void 0&&(B.emit("newListener",H,$.listener?$.listener:$),Y=B._events),M=Y[H]),M===void 0)M=Y[H]=$,++B._eventsCount;else if(typeof M=="function"?M=Y[H]=F?[$,M]:[M,$]:F?M.unshift($):M.push($),ne=f(B),ne>0&&M.length>ne&&!M.warned){M.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=B,J.type=H,J.count=M.length,n(J)}return B}a.prototype.addListener=function(H,$){return c(this,H,$,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(H,$){return c(this,H,$,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(B,H,$){var F={fired:!1,wrapFn:void 0,target:B,type:H,listener:$},ne=g.bind(F);return ne.listener=$,F.wrapFn=ne,ne}a.prototype.once=function(H,$){return u($),this.on(H,p(this,H,$)),this},a.prototype.prependOnceListener=function(H,$){return u($),this.prependListener(H,p(this,H,$)),this},a.prototype.removeListener=function(H,$){var F,ne,Y,M,J;if(u($),ne=this._events,ne===void 0)return this;if(F=ne[H],F===void 0)return this;if(F===$||F.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete ne[H],ne.removeListener&&this.emit("removeListener",H,F.listener||$));else if(typeof F!="function"){for(Y=-1,M=F.length-1;M>=0;M--)if(F[M]===$||F[M].listener===$){J=F[M].listener,Y=M;break}if(Y<0)return this;Y===0?F.shift():R(F,Y),F.length===1&&(ne[H]=F[0]),ne.removeListener!==void 0&&this.emit("removeListener",H,J||$)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(H){var $,F,ne;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[H]),this;if(arguments.length===0){var Y=Object.keys(F),M;for(ne=0;ne<Y.length;++ne)M=Y[ne],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=F[H],typeof $=="function")this.removeListener(H,$);else if($!==void 0)for(ne=$.length-1;ne>=0;ne--)this.removeListener(H,$[ne]);return this};function m(B,H,$){var F=B._events;if(F===void 0)return[];var ne=F[H];return ne===void 0?[]:typeof ne=="function"?$?[ne.listener||ne]:[ne]:$?I(ne):C(ne,ne.length)}a.prototype.listeners=function(H){return m(this,H,!0)},a.prototype.rawListeners=function(H){return m(this,H,!1)},a.listenerCount=function(B,H){return typeof B.listenerCount=="function"?B.listenerCount(H):_.call(B,H)},a.prototype.listenerCount=_;function _(B){var H=this._events;if(H!==void 0){var $=H[B];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function C(B,H){for(var $=new Array(H),F=0;F<H;++F)$[F]=B[F];return $}function R(B,H){for(;H+1<B.length;H++)B[H]=B[H+1];B.pop()}function I(B){for(var H=new Array(B.length),$=0;$<H.length;++$)H[$]=B[$].listener||B[$];return H}function S(B,H){return new Promise(function($,F){function ne(M){B.removeListener(H,Y),F(M)}function Y(){typeof B.removeListener=="function"&&B.removeListener("error",ne),$([].slice.call(arguments))}T(B,H,Y,{once:!0}),H!=="error"&&b(B,ne,{once:!0})})}function b(B,H,$){typeof B.on=="function"&&T(B,"error",H,$)}function T(B,H,$,F){if(typeof B.on=="function")F.once?B.once(H,$):B.on(H,$);else if(typeof B.addEventListener=="function")B.addEventListener(H,function ne(Y){F.once&&B.removeEventListener(H,ne),$(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}return Xf.exports}var Jy,H1;function Jv(){if(H1)return Jy;H1=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Zn(),{EventEmitter:r}=pd();function n(a){r.call(this,a)}t(n.prototype,r.prototype),t(n,r),n.prototype.pipe=function(a,s){const u=this;function f(R){a.writable&&a.write(R)===!1&&u.pause&&u.pause()}u.on("data",f);function c(){u.readable&&u.resume&&u.resume()}a.on("drain",c),!a._isStdio&&(!s||s.end!==!1)&&(u.on("end",p),u.on("close",m));let g=!1;function p(){g||(g=!0,a.end())}function m(){g||(g=!0,typeof a.destroy=="function"&&a.destroy())}function _(R){C(),r.listenerCount(this,"error")===0&&this.emit("error",R)}o(u,"error",_),o(a,"error",_);function C(){u.removeListener("data",f),a.removeListener("drain",c),u.removeListener("end",p),u.removeListener("close",m),u.removeListener("error",_),a.removeListener("error",_),u.removeListener("end",C),u.removeListener("close",C),a.removeListener("close",C)}return u.on("end",C),u.on("close",C),a.on("close",C),a.emit("pipe",u),a};function o(a,s,u){if(typeof a.prependListener=="function")return a.prependListener(s,u);!a._events||!a._events[s]?a.on(s,u):e(a._events[s])?a._events[s].unshift(u):a._events[s]=[u,a._events[s]]}return Jy={Stream:n,prependListener:o},Jy}var Xy={exports:{}},j1;function Op(){return j1||(j1=1,function(e){const{AbortError:t,codes:r}=Bi(),{isNodeStream:n,isWebStream:o,kControllerErrorFunction:a}=us(),s=Ks(),{ERR_INVALID_ARG_TYPE:u}=r,f=(c,g)=>{if(typeof c!="object"||!("aborted"in c))throw new u(g,"AbortSignal",c)};e.exports.addAbortSignal=function(g,p){if(f(g,"signal"),!n(p)&&!o(p))throw new u("stream",["ReadableStream","WritableStream","Stream"],p);return e.exports.addAbortSignalNoValidate(g,p)},e.exports.addAbortSignalNoValidate=function(c,g){if(typeof c!="object"||!("aborted"in c))return g;const p=n(g)?()=>{g.destroy(new t(void 0,{cause:c.reason}))}:()=>{g[a](new t(void 0,{cause:c.reason}))};return c.aborted?p():(c.addEventListener("abort",p),s(g,()=>c.removeEventListener("abort",p))),g}}(Xy)),Xy.exports}var Qy,$1;function dk(){if($1)return Qy;$1=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:r,Uint8Array:n}=Zn(),{Buffer:o}=Vs(),{inspect:a}=ss();return Qy=class{constructor(){this.head=null,this.tail=null,this.length=0}push(u){const f={data:u,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length}unshift(u){const f={data:u,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length}shift(){if(this.length===0)return;const u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}clear(){this.head=this.tail=null,this.length=0}join(u){if(this.length===0)return"";let f=this.head,c=""+f.data;for(;(f=f.next)!==null;)c+=u+f.data;return c}concat(u){if(this.length===0)return o.alloc(0);const f=o.allocUnsafe(u>>>0);let c=this.head,g=0;for(;c;)r(f,c.data,g),g+=c.data.length,c=c.next;return f}consume(u,f){const c=this.head.data;if(u<c.length){const g=c.slice(0,u);return this.head.data=c.slice(u),g}return u===c.length?this.shift():f?this._getString(u):this._getBuffer(u)}first(){return this.head.data}*[t](){for(let u=this.head;u;u=u.next)yield u.data}_getString(u){let f="",c=this.head,g=0;do{const p=c.data;if(u>p.length)f+=p,u-=p.length;else{u===p.length?(f+=p,++g,c.next?this.head=c.next:this.head=this.tail=null):(f+=e(p,0,u),this.head=c,c.data=e(p,u));break}++g}while((c=c.next)!==null);return this.length-=g,f}_getBuffer(u){const f=o.allocUnsafe(u),c=u;let g=this.head,p=0;do{const m=g.data;if(u>m.length)r(f,m,c-u),u-=m.length;else{u===m.length?(r(f,m,c-u),++p,g.next?this.head=g.next:this.head=this.tail=null):(r(f,new n(m.buffer,m.byteOffset,u),c-u),this.head=g,g.data=m.slice(u));break}++p}while((g=g.next)!==null);return this.length-=p,f}[Symbol.for("nodejs.util.inspect.custom")](u,f){return a(this,{...f,depth:0,customInspect:!1})}},Qy}var Yy,V1;function Xv(){if(V1)return Yy;V1=1;const{MathFloor:e,NumberIsInteger:t}=Zn(),{ERR_INVALID_ARG_VALUE:r}=Bi().codes;function n(s,u,f){return s.highWaterMark!=null?s.highWaterMark:u?s[f]:null}function o(s){return s?16:16*1024}function a(s,u,f,c){const g=n(u,c,f);if(g!=null){if(!t(g)||g<0){const p=c?`options.${f}`:"options.highWaterMark";throw new r(p,g)}return e(g)}return o(s.objectMode)}return Yy={getHighWaterMark:a,getDefaultHighWaterMark:o},Yy}const fk={},hk=Object.freeze(Object.defineProperty({__proto__:null,default:fk},Symbol.toStringTag,{value:"Module"})),pk=rp(hk);var Zy,K1;function JC(){if(K1)return Zy;K1=1;const e=Ia(),{PromisePrototypeThen:t,SymbolAsyncIterator:r,SymbolIterator:n}=Zn(),{Buffer:o}=Vs(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:s}=Bi().codes;function u(f,c,g){let p;if(typeof c=="string"||c instanceof o)return new f({objectMode:!0,...g,read(){this.push(c),this.push(null)}});let m;if(c&&c[r])m=!0,p=c[r]();else if(c&&c[n])m=!1,p=c[n]();else throw new a("iterable",["Iterable"],c);const _=new f({objectMode:!0,highWaterMark:1,...g});let C=!1;_._read=function(){C||(C=!0,I())},_._destroy=function(S,b){t(R(S),()=>e.nextTick(b,S),T=>e.nextTick(b,T||S))};async function R(S){const b=S!=null,T=typeof p.throw=="function";if(b&&T){const{value:B,done:H}=await p.throw(S);if(await B,H)return}if(typeof p.return=="function"){const{value:B}=await p.return();await B}}async function I(){for(;;){try{const{value:S,done:b}=m?await p.next():p.next();if(b)_.push(null);else{const T=S&&typeof S.then=="function"?await S:S;if(T===null)throw C=!1,new s;if(_.push(T))continue;C=!1}}catch(S){_.destroy(S)}break}}return _}return Zy=u,Zy}var e0,W1;function Np(){if(W1)return e0;W1=1;const e=Ia(),{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:a,ObjectKeys:s,ObjectSetPrototypeOf:u,Promise:f,SafeSet:c,SymbolAsyncIterator:g,Symbol:p}=Zn();e0=re,re.ReadableState=tt;const{EventEmitter:m}=pd(),{Stream:_,prependListener:C}=Jv(),{Buffer:R}=Vs(),{addAbortSignal:I}=Op(),S=Ks();let b=ss().debuglog("stream",ee=>{b=ee});const T=dk(),B=zl(),{getHighWaterMark:H,getDefaultHighWaterMark:$}=Xv(),{aggregateTwoErrors:F,codes:{ERR_INVALID_ARG_TYPE:ne,ERR_METHOD_NOT_IMPLEMENTED:Y,ERR_OUT_OF_RANGE:M,ERR_STREAM_PUSH_AFTER_EOF:J,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Le}}=Bi(),{validateObject:Ue}=Fp(),je=p("kPaused"),{StringDecoder:nt}=pk,ke=JC();u(re.prototype,_.prototype),u(re,_);const Be=()=>{},{errorOrDestroy:De}=B;function tt(ee,de,K){typeof K!="boolean"&&(K=de instanceof as()),this.objectMode=!!(ee&&ee.objectMode),K&&(this.objectMode=this.objectMode||!!(ee&&ee.readableObjectMode)),this.highWaterMark=ee?H(this,ee,"readableHighWaterMark",K):$(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[je]=null,this.errorEmitted=!1,this.emitClose=!ee||ee.emitClose!==!1,this.autoDestroy=!ee||ee.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=ee&&ee.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,ee&&ee.encoding&&(this.decoder=new nt(ee.encoding),this.encoding=ee.encoding)}function re(ee){if(!(this instanceof re))return new re(ee);const de=this instanceof as();this._readableState=new tt(ee,this,de),ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy),typeof ee.construct=="function"&&(this._construct=ee.construct),ee.signal&&!de&&I(ee.signal,this)),_.call(this,ee),B.construct(this,()=>{this._readableState.needReadable&&Pt(this,this._readableState)})}re.prototype.destroy=B.destroy,re.prototype._undestroy=B.undestroy,re.prototype._destroy=function(ee,de){de(ee)},re.prototype[m.captureRejectionSymbol]=function(ee){this.destroy(ee)},re.prototype.push=function(ee,de){return Ie(this,ee,de,!1)},re.prototype.unshift=function(ee,de){return Ie(this,ee,de,!0)};function Ie(ee,de,K,P){b("readableAddChunk",de);const L=ee._readableState;let k;if(L.objectMode||(typeof de=="string"?(K=K||L.defaultEncoding,L.encoding!==K&&(P&&L.encoding?de=R.from(de,K).toString(L.encoding):(de=R.from(de,K),K=""))):de instanceof R?K="":_._isUint8Array(de)?(de=_._uint8ArrayToBuffer(de),K=""):de!=null&&(k=new ne("chunk",["string","Buffer","Uint8Array"],de))),k)De(ee,k);else if(de===null)L.reading=!1,Fe(ee,L);else if(L.objectMode||de&&de.length>0)if(P)if(L.endEmitted)De(ee,new Le);else{if(L.destroyed||L.errored)return!1;Ge(ee,L,de,!0)}else if(L.ended)De(ee,new J);else{if(L.destroyed||L.errored)return!1;L.reading=!1,L.decoder&&!K?(de=L.decoder.write(de),L.objectMode||de.length!==0?Ge(ee,L,de,!1):Pt(ee,L)):Ge(ee,L,de,!1)}else P||(L.reading=!1,Pt(ee,L));return!L.ended&&(L.length<L.highWaterMark||L.length===0)}function Ge(ee,de,K,P){de.flowing&&de.length===0&&!de.sync&&ee.listenerCount("data")>0?(de.multiAwaitDrain?de.awaitDrainWriters.clear():de.awaitDrainWriters=null,de.dataEmitted=!0,ee.emit("data",K)):(de.length+=de.objectMode?1:K.length,P?de.buffer.unshift(K):de.buffer.push(K),de.needReadable&&lt(ee)),Pt(ee,de)}re.prototype.isPaused=function(){const ee=this._readableState;return ee[je]===!0||ee.flowing===!1},re.prototype.setEncoding=function(ee){const de=new nt(ee);this._readableState.decoder=de,this._readableState.encoding=this._readableState.decoder.encoding;const K=this._readableState.buffer;let P="";for(const L of K)P+=de.write(L);return K.clear(),P!==""&&K.push(P),this._readableState.length=P.length,this};const dt=1073741824;function Ze(ee){if(ee>dt)throw new M("size","<= 1GiB",ee);return ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++,ee}function qe(ee,de){return ee<=0||de.length===0&&de.ended?0:de.objectMode?1:n(ee)?de.flowing&&de.length?de.buffer.first().length:de.length:ee<=de.length?ee:de.ended?de.length:0}re.prototype.read=function(ee){b("read",ee),ee===void 0?ee=NaN:r(ee)||(ee=o(ee,10));const de=this._readableState,K=ee;if(ee>de.highWaterMark&&(de.highWaterMark=Ze(ee)),ee!==0&&(de.emittedReadable=!1),ee===0&&de.needReadable&&((de.highWaterMark!==0?de.length>=de.highWaterMark:de.length>0)||de.ended))return b("read: emitReadable",de.length,de.ended),de.length===0&&de.ended?Xe(this):lt(this),null;if(ee=qe(ee,de),ee===0&&de.ended)return de.length===0&&Xe(this),null;let P=de.needReadable;if(b("need readable",P),(de.length===0||de.length-ee<de.highWaterMark)&&(P=!0,b("length less than watermark",P)),de.ended||de.reading||de.destroyed||de.errored||!de.constructed)P=!1,b("reading, ended or constructing",P);else if(P){b("do read"),de.reading=!0,de.sync=!0,de.length===0&&(de.needReadable=!0);try{this._read(de.highWaterMark)}catch(k){De(this,k)}de.sync=!1,de.reading||(ee=qe(K,de))}let L;return ee>0?L=$e(ee,de):L=null,L===null?(de.needReadable=de.length<=de.highWaterMark,ee=0):(de.length-=ee,de.multiAwaitDrain?de.awaitDrainWriters.clear():de.awaitDrainWriters=null),de.length===0&&(de.ended||(de.needReadable=!0),K!==ee&&de.ended&&Xe(this)),L!==null&&!de.errorEmitted&&!de.closeEmitted&&(de.dataEmitted=!0,this.emit("data",L)),L};function Fe(ee,de){if(b("onEofChunk"),!de.ended){if(de.decoder){const K=de.decoder.end();K&&K.length&&(de.buffer.push(K),de.length+=de.objectMode?1:K.length)}de.ended=!0,de.sync?lt(ee):(de.needReadable=!1,de.emittedReadable=!0,gt(ee))}}function lt(ee){const de=ee._readableState;b("emitReadable",de.needReadable,de.emittedReadable),de.needReadable=!1,de.emittedReadable||(b("emitReadable",de.flowing),de.emittedReadable=!0,e.nextTick(gt,ee))}function gt(ee){const de=ee._readableState;b("emitReadable_",de.destroyed,de.length,de.ended),!de.destroyed&&!de.errored&&(de.length||de.ended)&&(ee.emit("readable"),de.emittedReadable=!1),de.needReadable=!de.flowing&&!de.ended&&de.length<=de.highWaterMark,fe(ee)}function Pt(ee,de){!de.readingMore&&de.constructed&&(de.readingMore=!0,e.nextTick(Ft,ee,de))}function Ft(ee,de){for(;!de.reading&&!de.ended&&(de.length<de.highWaterMark||de.flowing&&de.length===0);){const K=de.length;if(b("maybeReadMore read 0"),ee.read(0),K===de.length)break}de.readingMore=!1}re.prototype._read=function(ee){throw new Y("_read()")},re.prototype.pipe=function(ee,de){const K=this,P=this._readableState;P.pipes.length===1&&(P.multiAwaitDrain||(P.multiAwaitDrain=!0,P.awaitDrainWriters=new c(P.awaitDrainWriters?[P.awaitDrainWriters]:[]))),P.pipes.push(ee),b("pipe count=%d opts=%j",P.pipes.length,de);const k=(!de||de.end!==!1)&&ee!==e.stdout&&ee!==e.stderr?xe:_e;P.endEmitted?e.nextTick(k):K.once("end",k),ee.on("unpipe",ge);function ge(Ke,ht){b("onunpipe"),Ke===K&&ht&&ht.hasUnpiped===!1&&(ht.hasUnpiped=!0,Wt())}function xe(){b("onend"),ee.end()}let ae,bt=!1;function Wt(){b("cleanup"),ee.removeListener("close",Ve),ee.removeListener("finish",Oe),ae&&ee.removeListener("drain",ae),ee.removeListener("error",Se),ee.removeListener("unpipe",ge),K.removeListener("end",xe),K.removeListener("end",_e),K.removeListener("data",xt),bt=!0,ae&&P.awaitDrainWriters&&(!ee._writableState||ee._writableState.needDrain)&&ae()}function Rt(){bt||(P.pipes.length===1&&P.pipes[0]===ee?(b("false write response, pause",0),P.awaitDrainWriters=ee,P.multiAwaitDrain=!1):P.pipes.length>1&&P.pipes.includes(ee)&&(b("false write response, pause",P.awaitDrainWriters.size),P.awaitDrainWriters.add(ee)),K.pause()),ae||(ae=Z(K,ee),ee.on("drain",ae))}K.on("data",xt);function xt(Ke){b("ondata");const ht=ee.write(Ke);b("dest.write",ht),ht===!1&&Rt()}function Se(Ke){if(b("onerror",Ke),_e(),ee.removeListener("error",Se),ee.listenerCount("error")===0){const ht=ee._writableState||ee._readableState;ht&&!ht.errorEmitted?De(ee,Ke):ee.emit("error",Ke)}}C(ee,"error",Se);function Ve(){ee.removeListener("finish",Oe),_e()}ee.once("close",Ve);function Oe(){b("onfinish"),ee.removeListener("close",Ve),_e()}ee.once("finish",Oe);function _e(){b("unpipe"),K.unpipe(ee)}return ee.emit("pipe",K),ee.writableNeedDrain===!0?P.flowing&&Rt():P.flowing||(b("pipe resume"),K.resume()),ee};function Z(ee,de){return function(){const P=ee._readableState;P.awaitDrainWriters===de?(b("pipeOnDrain",1),P.awaitDrainWriters=null):P.multiAwaitDrain&&(b("pipeOnDrain",P.awaitDrainWriters.size),P.awaitDrainWriters.delete(de)),(!P.awaitDrainWriters||P.awaitDrainWriters.size===0)&&ee.listenerCount("data")&&ee.resume()}}re.prototype.unpipe=function(ee){const de=this._readableState,K={hasUnpiped:!1};if(de.pipes.length===0)return this;if(!ee){const L=de.pipes;de.pipes=[],this.pause();for(let k=0;k<L.length;k++)L[k].emit("unpipe",this,{hasUnpiped:!1});return this}const P=t(de.pipes,ee);return P===-1?this:(de.pipes.splice(P,1),de.pipes.length===0&&this.pause(),ee.emit("unpipe",this,K),this)},re.prototype.on=function(ee,de){const K=_.prototype.on.call(this,ee,de),P=this._readableState;return ee==="data"?(P.readableListening=this.listenerCount("readable")>0,P.flowing!==!1&&this.resume()):ee==="readable"&&!P.endEmitted&&!P.readableListening&&(P.readableListening=P.needReadable=!0,P.flowing=!1,P.emittedReadable=!1,b("on readable",P.length,P.reading),P.length?lt(this):P.reading||e.nextTick(E,this)),K},re.prototype.addListener=re.prototype.on,re.prototype.removeListener=function(ee,de){const K=_.prototype.removeListener.call(this,ee,de);return ee==="readable"&&e.nextTick(N,this),K},re.prototype.off=re.prototype.removeListener,re.prototype.removeAllListeners=function(ee){const de=_.prototype.removeAllListeners.apply(this,arguments);return(ee==="readable"||ee===void 0)&&e.nextTick(N,this),de};function N(ee){const de=ee._readableState;de.readableListening=ee.listenerCount("readable")>0,de.resumeScheduled&&de[je]===!1?de.flowing=!0:ee.listenerCount("data")>0?ee.resume():de.readableListening||(de.flowing=null)}function E(ee){b("readable nexttick read 0"),ee.read(0)}re.prototype.resume=function(){const ee=this._readableState;return ee.flowing||(b("resume"),ee.flowing=!ee.readableListening,j(this,ee)),ee[je]=!1,this};function j(ee,de){de.resumeScheduled||(de.resumeScheduled=!0,e.nextTick(G,ee,de))}function G(ee,de){b("resume",de.reading),de.reading||ee.read(0),de.resumeScheduled=!1,ee.emit("resume"),fe(ee),de.flowing&&!de.reading&&ee.read(0)}re.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[je]=!0,this};function fe(ee){const de=ee._readableState;for(b("flow",de.flowing);de.flowing&&ee.read()!==null;);}re.prototype.wrap=function(ee){let de=!1;ee.on("data",P=>{!this.push(P)&&ee.pause&&(de=!0,ee.pause())}),ee.on("end",()=>{this.push(null)}),ee.on("error",P=>{De(this,P)}),ee.on("close",()=>{this.destroy()}),ee.on("destroy",()=>{this.destroy()}),this._read=()=>{de&&ee.resume&&(de=!1,ee.resume())};const K=s(ee);for(let P=1;P<K.length;P++){const L=K[P];this[L]===void 0&&typeof ee[L]=="function"&&(this[L]=ee[L].bind(ee))}return this},re.prototype[g]=function(){return we(this)},re.prototype.iterator=function(ee){return ee!==void 0&&Ue(ee,"options"),we(this,ee)};function we(ee,de){typeof ee.read!="function"&&(ee=re.wrap(ee,{objectMode:!0}));const K=me(ee,de);return K.stream=ee,K}async function*me(ee,de){let K=Be;function P(ge){this===ee?(K(),K=Be):K=ge}ee.on("readable",P);let L;const k=S(ee,{writable:!1},ge=>{L=ge?F(L,ge):null,K(),K=Be});try{for(;;){const ge=ee.destroyed?null:ee.read();if(ge!==null)yield ge;else{if(L)throw L;if(L===null)return;await new f(P)}}}catch(ge){throw L=F(L,ge),L}finally{(L||(de==null?void 0:de.destroyOnReturn)!==!1)&&(L===void 0||ee._readableState.autoDestroy)?B.destroyer(ee,null):(ee.off("readable",P),k())}}a(re.prototype,{readable:{__proto__:null,get(){const ee=this._readableState;return!!ee&&ee.readable!==!1&&!ee.destroyed&&!ee.errorEmitted&&!ee.endEmitted},set(ee){this._readableState&&(this._readableState.readable=!!ee)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ee){this._readableState&&(this._readableState.destroyed=ee)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(tt.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[je]!==!1},set(ee){this[je]=!!ee}}}),re._fromList=$e;function $e(ee,de){if(de.length===0)return null;let K;return de.objectMode?K=de.buffer.shift():!ee||ee>=de.length?(de.decoder?K=de.buffer.join(""):de.buffer.length===1?K=de.buffer.first():K=de.buffer.concat(de.length),de.buffer.clear()):K=de.buffer.consume(ee,de.decoder),K}function Xe(ee){const de=ee._readableState;b("endReadable",de.endEmitted),de.endEmitted||(de.ended=!0,e.nextTick(ft,de,ee))}function ft(ee,de){if(b("endReadableNT",ee.endEmitted,ee.length),!ee.errored&&!ee.closeEmitted&&!ee.endEmitted&&ee.length===0){if(ee.endEmitted=!0,de.emit("end"),de.writable&&de.allowHalfOpen===!1)e.nextTick(Mt,de);else if(ee.autoDestroy){const K=de._writableState;(!K||K.autoDestroy&&(K.finished||K.writable===!1))&&de.destroy()}}}function Mt(ee){ee.writable&&!ee.writableEnded&&!ee.destroyed&&ee.end()}re.from=function(ee,de){return ke(re,ee,de)};let $t;function Lr(){return $t===void 0&&($t={}),$t}return re.fromWeb=function(ee,de){return Lr().newStreamReadableFromReadableStream(ee,de)},re.toWeb=function(ee,de){return Lr().newReadableStreamFromStreamReadable(ee,de)},re.wrap=function(ee,de){var K,P;return new re({objectMode:(K=(P=ee.readableObjectMode)!==null&&P!==void 0?P:ee.objectMode)!==null&&K!==void 0?K:!0,...de,destroy(L,k){B.destroyer(ee,L),k(L)}}).wrap(ee)},e0}var t0,G1;function XC(){if(G1)return t0;G1=1;const e=Ia(),{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:a,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:u,Symbol:f,SymbolHasInstance:c}=Zn();t0=nt,nt.WritableState=Ue;const{EventEmitter:g}=pd(),p=Jv().Stream,{Buffer:m}=Vs(),_=zl(),{addAbortSignal:C}=Op(),{getHighWaterMark:R,getDefaultHighWaterMark:I}=Xv(),{ERR_INVALID_ARG_TYPE:S,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:H,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:F,ERR_STREAM_WRITE_AFTER_END:ne,ERR_UNKNOWN_ENCODING:Y}=Bi().codes,{errorOrDestroy:M}=_;s(nt.prototype,p.prototype),s(nt,p);function J(){}const Le=f("kOnFinished");function Ue(E,j,G){typeof G!="boolean"&&(G=j instanceof as()),this.objectMode=!!(E&&E.objectMode),G&&(this.objectMode=this.objectMode||!!(E&&E.writableObjectMode)),this.highWaterMark=E?R(this,E,"writableHighWaterMark",G):I(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const fe=!!(E&&E.decodeStrings===!1);this.decodeStrings=!fe,this.defaultEncoding=E&&E.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=re.bind(void 0,j),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,je(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!E||E.emitClose!==!1,this.autoDestroy=!E||E.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Le]=[]}function je(E){E.buffered=[],E.bufferedIndex=0,E.allBuffers=!0,E.allNoop=!0}Ue.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},o(Ue.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function nt(E){const j=this instanceof as();if(!j&&!n(nt,this))return new nt(E);this._writableState=new Ue(E,this,j),E&&(typeof E.write=="function"&&(this._write=E.write),typeof E.writev=="function"&&(this._writev=E.writev),typeof E.destroy=="function"&&(this._destroy=E.destroy),typeof E.final=="function"&&(this._final=E.final),typeof E.construct=="function"&&(this._construct=E.construct),E.signal&&C(E.signal,this)),p.call(this,E),_.construct(this,()=>{const G=this._writableState;G.writing||Ze(this,G),gt(this,G)})}o(nt,c,{__proto__:null,value:function(E){return n(this,E)?!0:this!==nt?!1:E&&E._writableState instanceof Ue}}),nt.prototype.pipe=function(){M(this,new B)};function ke(E,j,G,fe){const we=E._writableState;if(typeof G=="function")fe=G,G=we.defaultEncoding;else{if(!G)G=we.defaultEncoding;else if(G!=="buffer"&&!m.isEncoding(G))throw new Y(G);typeof fe!="function"&&(fe=J)}if(j===null)throw new F;if(!we.objectMode)if(typeof j=="string")we.decodeStrings!==!1&&(j=m.from(j,G),G="buffer");else if(j instanceof m)G="buffer";else if(p._isUint8Array(j))j=p._uint8ArrayToBuffer(j),G="buffer";else throw new S("chunk",["string","Buffer","Uint8Array"],j);let me;return we.ending?me=new ne:we.destroyed&&(me=new H("write")),me?(e.nextTick(fe,me),M(E,me,!0),me):(we.pendingcb++,Be(E,we,j,G,fe))}nt.prototype.write=function(E,j,G){return ke(this,E,j,G)===!0},nt.prototype.cork=function(){this._writableState.corked++},nt.prototype.uncork=function(){const E=this._writableState;E.corked&&(E.corked--,E.writing||Ze(this,E))},nt.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=u(j)),!m.isEncoding(j))throw new Y(j);return this._writableState.defaultEncoding=j,this};function Be(E,j,G,fe,we){const me=j.objectMode?1:G.length;j.length+=me;const $e=j.length<j.highWaterMark;return $e||(j.needDrain=!0),j.writing||j.corked||j.errored||!j.constructed?(j.buffered.push({chunk:G,encoding:fe,callback:we}),j.allBuffers&&fe!=="buffer"&&(j.allBuffers=!1),j.allNoop&&we!==J&&(j.allNoop=!1)):(j.writelen=me,j.writecb=we,j.writing=!0,j.sync=!0,E._write(G,fe,j.onwrite),j.sync=!1),$e&&!j.errored&&!j.destroyed}function De(E,j,G,fe,we,me,$e){j.writelen=fe,j.writecb=$e,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new H("write")):G?E._writev(we,j.onwrite):E._write(we,me,j.onwrite),j.sync=!1}function tt(E,j,G,fe){--j.pendingcb,fe(G),dt(j),M(E,G)}function re(E,j){const G=E._writableState,fe=G.sync,we=G.writecb;if(typeof we!="function"){M(E,new T);return}G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0,j?(j.stack,G.errored||(G.errored=j),E._readableState&&!E._readableState.errored&&(E._readableState.errored=j),fe?e.nextTick(tt,E,G,j,we):tt(E,G,j,we)):(G.buffered.length>G.bufferedIndex&&Ze(E,G),fe?G.afterWriteTickInfo!==null&&G.afterWriteTickInfo.cb===we?G.afterWriteTickInfo.count++:(G.afterWriteTickInfo={count:1,cb:we,stream:E,state:G},e.nextTick(Ie,G.afterWriteTickInfo)):Ge(E,G,1,we))}function Ie({stream:E,state:j,count:G,cb:fe}){return j.afterWriteTickInfo=null,Ge(E,j,G,fe)}function Ge(E,j,G,fe){for(!j.ending&&!E.destroyed&&j.length===0&&j.needDrain&&(j.needDrain=!1,E.emit("drain"));G-- >0;)j.pendingcb--,fe();j.destroyed&&dt(j),gt(E,j)}function dt(E){if(E.writing)return;for(let we=E.bufferedIndex;we<E.buffered.length;++we){var j;const{chunk:me,callback:$e}=E.buffered[we],Xe=E.objectMode?1:me.length;E.length-=Xe,$e((j=E.errored)!==null&&j!==void 0?j:new H("write"))}const G=E[Le].splice(0);for(let we=0;we<G.length;we++){var fe;G[we]((fe=E.errored)!==null&&fe!==void 0?fe:new H("end"))}je(E)}function Ze(E,j){if(j.corked||j.bufferProcessing||j.destroyed||!j.constructed)return;const{buffered:G,bufferedIndex:fe,objectMode:we}=j,me=G.length-fe;if(!me)return;let $e=fe;if(j.bufferProcessing=!0,me>1&&E._writev){j.pendingcb-=me-1;const Xe=j.allNoop?J:Mt=>{for(let $t=$e;$t<G.length;++$t)G[$t].callback(Mt)},ft=j.allNoop&&$e===0?G:t(G,$e);ft.allBuffers=j.allBuffers,De(E,j,!0,j.length,ft,"",Xe),je(j)}else{do{const{chunk:Xe,encoding:ft,callback:Mt}=G[$e];G[$e++]=null;const $t=we?1:Xe.length;De(E,j,!1,$t,Xe,ft,Mt)}while($e<G.length&&!j.writing);$e===G.length?je(j):$e>256?(G.splice(0,$e),j.bufferedIndex=0):j.bufferedIndex=$e}j.bufferProcessing=!1}nt.prototype._write=function(E,j,G){if(this._writev)this._writev([{chunk:E,encoding:j}],G);else throw new b("_write()")},nt.prototype._writev=null,nt.prototype.end=function(E,j,G){const fe=this._writableState;typeof E=="function"?(G=E,E=null,j=null):typeof j=="function"&&(G=j,j=null);let we;if(E!=null){const me=ke(this,E,j);me instanceof r&&(we=me)}return fe.corked&&(fe.corked=1,this.uncork()),we||(!fe.errored&&!fe.ending?(fe.ending=!0,gt(this,fe,!0),fe.ended=!0):fe.finished?we=new $("end"):fe.destroyed&&(we=new H("end"))),typeof G=="function"&&(we||fe.finished?e.nextTick(G,we):fe[Le].push(G)),this};function qe(E){return E.ending&&!E.destroyed&&E.constructed&&E.length===0&&!E.errored&&E.buffered.length===0&&!E.finished&&!E.writing&&!E.errorEmitted&&!E.closeEmitted}function Fe(E,j){let G=!1;function fe(we){if(G){M(E,we??T());return}if(G=!0,j.pendingcb--,we){const me=j[Le].splice(0);for(let $e=0;$e<me.length;$e++)me[$e](we);M(E,we,j.sync)}else qe(j)&&(j.prefinished=!0,E.emit("prefinish"),j.pendingcb++,e.nextTick(Pt,E,j))}j.sync=!0,j.pendingcb++;try{E._final(fe)}catch(we){fe(we)}j.sync=!1}function lt(E,j){!j.prefinished&&!j.finalCalled&&(typeof E._final=="function"&&!j.destroyed?(j.finalCalled=!0,Fe(E,j)):(j.prefinished=!0,E.emit("prefinish")))}function gt(E,j,G){qe(j)&&(lt(E,j),j.pendingcb===0&&(G?(j.pendingcb++,e.nextTick((fe,we)=>{qe(we)?Pt(fe,we):we.pendingcb--},E,j)):qe(j)&&(j.pendingcb++,Pt(E,j))))}function Pt(E,j){j.pendingcb--,j.finished=!0;const G=j[Le].splice(0);for(let fe=0;fe<G.length;fe++)G[fe]();if(E.emit("finish"),j.autoDestroy){const fe=E._readableState;(!fe||fe.autoDestroy&&(fe.endEmitted||fe.readable===!1))&&E.destroy()}}a(nt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(E){this._writableState&&(this._writableState.destroyed=E)}},writable:{__proto__:null,get(){const E=this._writableState;return!!E&&E.writable!==!1&&!E.destroyed&&!E.errored&&!E.ending&&!E.ended},set(E){this._writableState&&(this._writableState.writable=!!E)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const E=this._writableState;return E?!E.destroyed&&!E.ending&&E.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Ft=_.destroy;nt.prototype.destroy=function(E,j){const G=this._writableState;return!G.destroyed&&(G.bufferedIndex<G.buffered.length||G[Le].length)&&e.nextTick(dt,G),Ft.call(this,E,j),this},nt.prototype._undestroy=_.undestroy,nt.prototype._destroy=function(E,j){j(E)},nt.prototype[g.captureRejectionSymbol]=function(E){this.destroy(E)};let Z;function N(){return Z===void 0&&(Z={}),Z}return nt.fromWeb=function(E,j){return N().newStreamWritableFromWritableStream(E,j)},nt.toWeb=function(E){return N().newWritableStreamFromStreamWritable(E)},t0}var r0,q1;function gk(){if(q1)return r0;q1=1;const e=Ia(),t=Vs(),{isReadable:r,isWritable:n,isIterable:o,isNodeStream:a,isReadableNodeStream:s,isWritableNodeStream:u,isDuplexNodeStream:f}=us(),c=Ks(),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:m}}=Bi(),{destroyer:_}=zl(),C=as(),R=Np(),{createDeferredPromise:I}=ss(),S=JC(),b=globalThis.Blob||t.Blob,T=typeof b<"u"?function(M){return M instanceof b}:function(M){return!1},B=globalThis.AbortController||zv().AbortController,{FunctionPrototypeCall:H}=Zn();class $ extends C{constructor(M){super(M),(M==null?void 0:M.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(M==null?void 0:M.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}r0=function Y(M,J){if(f(M))return M;if(s(M))return ne({readable:M});if(u(M))return ne({writable:M});if(a(M))return ne({writable:!1,readable:!1});if(typeof M=="function"){const{value:Ue,write:je,final:nt,destroy:ke}=F(M);if(o(Ue))return S($,Ue,{objectMode:!0,write:je,final:nt,destroy:ke});const Be=Ue==null?void 0:Ue.then;if(typeof Be=="function"){let De;const tt=H(Be,Ue,re=>{if(re!=null)throw new m("nully","body",re)},re=>{_(De,re)});return De=new $({objectMode:!0,readable:!1,write:je,final(re){nt(async()=>{try{await tt,e.nextTick(re,null)}catch(Ie){e.nextTick(re,Ie)}})},destroy:ke})}throw new m("Iterable, AsyncIterable or AsyncFunction",J,Ue)}if(T(M))return Y(M.arrayBuffer());if(o(M))return S($,M,{objectMode:!0,writable:!1});if(typeof(M==null?void 0:M.writable)=="object"||typeof(M==null?void 0:M.readable)=="object"){const Ue=M!=null&&M.readable?s(M==null?void 0:M.readable)?M==null?void 0:M.readable:Y(M.readable):void 0,je=M!=null&&M.writable?u(M==null?void 0:M.writable)?M==null?void 0:M.writable:Y(M.writable):void 0;return ne({readable:Ue,writable:je})}const Le=M==null?void 0:M.then;if(typeof Le=="function"){let Ue;return H(Le,M,je=>{je!=null&&Ue.push(je),Ue.push(null)},je=>{_(Ue,je)}),Ue=new $({objectMode:!0,writable:!1,read(){}})}throw new p(J,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],M)};function F(Y){let{promise:M,resolve:J}=I();const Le=new B,Ue=Le.signal;return{value:Y(async function*(){for(;;){const nt=M;M=null;const{chunk:ke,done:Be,cb:De}=await nt;if(e.nextTick(De),Be)return;if(Ue.aborted)throw new g(void 0,{cause:Ue.reason});({promise:M,resolve:J}=I()),yield ke}}(),{signal:Ue}),write(nt,ke,Be){const De=J;J=null,De({chunk:nt,done:!1,cb:Be})},final(nt){const ke=J;J=null,ke({done:!0,cb:nt})},destroy(nt,ke){Le.abort(),ke(nt)}}}function ne(Y){const M=Y.readable&&typeof Y.readable.read!="function"?R.wrap(Y.readable):Y.readable,J=Y.writable;let Le=!!r(M),Ue=!!n(J),je,nt,ke,Be,De;function tt(re){const Ie=Be;Be=null,Ie?Ie(re):re&&De.destroy(re)}return De=new $({readableObjectMode:!!(M!=null&&M.readableObjectMode),writableObjectMode:!!(J!=null&&J.writableObjectMode),readable:Le,writable:Ue}),Ue&&(c(J,re=>{Ue=!1,re&&_(M,re),tt(re)}),De._write=function(re,Ie,Ge){J.write(re,Ie)?Ge():je=Ge},De._final=function(re){J.end(),nt=re},J.on("drain",function(){if(je){const re=je;je=null,re()}}),J.on("finish",function(){if(nt){const re=nt;nt=null,re()}})),Le&&(c(M,re=>{Le=!1,re&&_(M,re),tt(re)}),M.on("readable",function(){if(ke){const re=ke;ke=null,re()}}),M.on("end",function(){De.push(null)}),De._read=function(){for(;;){const re=M.read();if(re===null){ke=De._read;return}if(!De.push(re))return}}),De._destroy=function(re,Ie){!re&&Be!==null&&(re=new g),ke=null,je=null,nt=null,Be===null?Ie(re):(Be=Ie,_(J,re),_(M,re))},De}return r0}var n0,z1;function as(){if(z1)return n0;z1=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=Zn();n0=s;const o=Np(),a=XC();n(s.prototype,o.prototype),n(s,o);{const g=r(a.prototype);for(let p=0;p<g.length;p++){const m=g[p];s.prototype[m]||(s.prototype[m]=a.prototype[m])}}function s(g){if(!(this instanceof s))return new s(g);o.call(this,g),a.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(a.prototype,"writableLength")},writableFinished:{__proto__:null,...t(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});let u;function f(){return u===void 0&&(u={}),u}s.fromWeb=function(g,p){return f().newStreamDuplexFromReadableWritablePair(g,p)},s.toWeb=function(g){return f().newReadableWritablePairFromDuplex(g)};let c;return s.from=function(g){return c||(c=gk()),c(g,"body")},n0}var i0,J1;function QC(){if(J1)return i0;J1=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Zn();i0=s;const{ERR_METHOD_NOT_IMPLEMENTED:r}=Bi().codes,n=as(),{getHighWaterMark:o}=Xv();e(s.prototype,n.prototype),e(s,n);const a=t("kCallback");function s(c){if(!(this instanceof s))return new s(c);const g=c?o(this,c,"readableHighWaterMark",!0):null;g===0&&(c={...c,highWaterMark:null,readableHighWaterMark:g,writableHighWaterMark:c.writableHighWaterMark||0}),n.call(this,c),this._readableState.sync=!1,this[a]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",f)}function u(c){typeof this._flush=="function"&&!this.destroyed?this._flush((g,p)=>{if(g){c?c(g):this.destroy(g);return}p!=null&&this.push(p),this.push(null),c&&c()}):(this.push(null),c&&c())}function f(){this._final!==u&&u.call(this)}return s.prototype._final=u,s.prototype._transform=function(c,g,p){throw new r("_transform()")},s.prototype._write=function(c,g,p){const m=this._readableState,_=this._writableState,C=m.length;this._transform(c,g,(R,I)=>{if(R){p(R);return}I!=null&&this.push(I),_.ended||C===m.length||m.length<m.highWaterMark?p():this[a]=p})},s.prototype._read=function(){if(this[a]){const c=this[a];this[a]=null,c()}},i0}var o0,X1;function YC(){if(X1)return o0;X1=1;const{ObjectSetPrototypeOf:e}=Zn();o0=r;const t=QC();e(r.prototype,t.prototype),e(r,t);function r(n){if(!(this instanceof r))return new r(n);t.call(this,n)}return r.prototype._transform=function(n,o,a){a(null,n)},o0}var s0,Q1;function Qv(){if(Q1)return s0;Q1=1;const e=Ia(),{ArrayIsArray:t,Promise:r,SymbolAsyncIterator:n}=Zn(),o=Ks(),{once:a}=ss(),s=zl(),u=as(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:C}=Bi(),{validateFunction:R,validateAbortSignal:I}=Fp(),{isIterable:S,isReadable:b,isReadableNodeStream:T,isNodeStream:B,isTransformStream:H,isWebStream:$,isReadableStream:F,isReadableEnded:ne}=us(),Y=globalThis.AbortController||zv().AbortController;let M,J;function Le(Ie,Ge,dt){let Ze=!1;Ie.on("close",()=>{Ze=!0});const qe=o(Ie,{readable:Ge,writable:dt},Fe=>{Ze=!Fe});return{destroy:Fe=>{Ze||(Ze=!0,s.destroyer(Ie,Fe||new m("pipe")))},cleanup:qe}}function Ue(Ie){return R(Ie[Ie.length-1],"streams[stream.length - 1]"),Ie.pop()}function je(Ie){if(S(Ie))return Ie;if(T(Ie))return nt(Ie);throw new c("val",["Readable","Iterable","AsyncIterable"],Ie)}async function*nt(Ie){J||(J=Np()),yield*J.prototype[n].call(Ie)}async function ke(Ie,Ge,dt,{end:Ze}){let qe,Fe=null;const lt=Ft=>{if(Ft&&(qe=Ft),Fe){const Z=Fe;Fe=null,Z()}},gt=()=>new r((Ft,Z)=>{qe?Z(qe):Fe=()=>{qe?Z(qe):Ft()}});Ge.on("drain",lt);const Pt=o(Ge,{readable:!1},lt);try{Ge.writableNeedDrain&&await gt();for await(const Ft of Ie)Ge.write(Ft)||await gt();Ze&&Ge.end(),await gt(),dt()}catch(Ft){dt(qe!==Ft?f(qe,Ft):Ft)}finally{Pt(),Ge.off("drain",lt)}}async function Be(Ie,Ge,dt,{end:Ze}){H(Ge)&&(Ge=Ge.writable);const qe=Ge.getWriter();try{for await(const Fe of Ie)await qe.ready,qe.write(Fe).catch(()=>{});await qe.ready,Ze&&await qe.close(),dt()}catch(Fe){try{await qe.abort(Fe),dt(Fe)}catch(lt){dt(lt)}}}function De(...Ie){return tt(Ie,a(Ue(Ie)))}function tt(Ie,Ge,dt){if(Ie.length===1&&t(Ie[0])&&(Ie=Ie[0]),Ie.length<2)throw new p("streams");const Ze=new Y,qe=Ze.signal,Fe=dt==null?void 0:dt.signal,lt=[];I(Fe,"options.signal");function gt(){j(new C)}Fe==null||Fe.addEventListener("abort",gt);let Pt,Ft;const Z=[];let N=0;function E($e){j($e,--N===0)}function j($e,Xe){if($e&&(!Pt||Pt.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Pt=$e),!(!Pt&&!Xe)){for(;Z.length;)Z.shift()(Pt);Fe==null||Fe.removeEventListener("abort",gt),Ze.abort(),Xe&&(Pt||lt.forEach(ft=>ft()),e.nextTick(Ge,Pt,Ft))}}let G;for(let $e=0;$e<Ie.length;$e++){const Xe=Ie[$e],ft=$e<Ie.length-1,Mt=$e>0,$t=ft||(dt==null?void 0:dt.end)!==!1,Lr=$e===Ie.length-1;if(B(Xe)){let ee=function(de){de&&de.name!=="AbortError"&&de.code!=="ERR_STREAM_PREMATURE_CLOSE"&&E(de)};var me=ee;if($t){const{destroy:de,cleanup:K}=Le(Xe,ft,Mt);Z.push(de),b(Xe)&&Lr&&lt.push(K)}Xe.on("error",ee),b(Xe)&&Lr&&lt.push(()=>{Xe.removeListener("error",ee)})}if($e===0)if(typeof Xe=="function"){if(G=Xe({signal:qe}),!S(G))throw new g("Iterable, AsyncIterable or Stream","source",G)}else S(Xe)||T(Xe)||H(Xe)?G=Xe:G=u.from(Xe);else if(typeof Xe=="function"){if(H(G)){var fe;G=je((fe=G)===null||fe===void 0?void 0:fe.readable)}else G=je(G);if(G=Xe(G,{signal:qe}),ft){if(!S(G,!0))throw new g("AsyncIterable",`transform[${$e-1}]`,G)}else{var we;M||(M=YC());const ee=new M({objectMode:!0}),de=(we=G)===null||we===void 0?void 0:we.then;if(typeof de=="function")N++,de.call(G,L=>{Ft=L,L!=null&&ee.write(L),$t&&ee.end(),e.nextTick(E)},L=>{ee.destroy(L),e.nextTick(E,L)});else if(S(G,!0))N++,ke(G,ee,E,{end:$t});else if(F(G)||H(G)){const L=G.readable||G;N++,ke(L,ee,E,{end:$t})}else throw new g("AsyncIterable or Promise","destination",G);G=ee;const{destroy:K,cleanup:P}=Le(G,!1,!0);Z.push(K),Lr&&lt.push(P)}}else if(B(Xe)){if(T(G)){N+=2;const ee=re(G,Xe,E,{end:$t});b(Xe)&&Lr&&lt.push(ee)}else if(H(G)||F(G)){const ee=G.readable||G;N++,ke(ee,Xe,E,{end:$t})}else if(S(G))N++,ke(G,Xe,E,{end:$t});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],G);G=Xe}else if($(Xe)){if(T(G))N++,Be(je(G),Xe,E,{end:$t});else if(F(G)||S(G))N++,Be(G,Xe,E,{end:$t});else if(H(G))N++,Be(G.readable,Xe,E,{end:$t});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],G);G=Xe}else G=u.from(Xe)}return(qe!=null&&qe.aborted||Fe!=null&&Fe.aborted)&&e.nextTick(gt),G}function re(Ie,Ge,dt,{end:Ze}){let qe=!1;if(Ge.on("close",()=>{qe||dt(new _)}),Ie.pipe(Ge,{end:!1}),Ze){let lt=function(){qe=!0,Ge.end()};var Fe=lt;ne(Ie)?e.nextTick(lt):Ie.once("end",lt)}else dt();return o(Ie,{readable:!0,writable:!1},lt=>{const gt=Ie._readableState;lt&&lt.code==="ERR_STREAM_PREMATURE_CLOSE"&&gt&&gt.ended&&!gt.errored&&!gt.errorEmitted?Ie.once("end",dt).once("error",dt):dt(lt)}),o(Ge,{readable:!1,writable:!0},dt)}return s0={pipelineImpl:tt,pipeline:De},s0}var a0,Y1;function ZC(){if(Y1)return a0;Y1=1;const{pipeline:e}=Qv(),t=as(),{destroyer:r}=zl(),{isNodeStream:n,isReadable:o,isWritable:a,isWebStream:s,isTransformStream:u,isWritableStream:f,isReadableStream:c}=us(),{AbortError:g,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:m}}=Bi(),_=Ks();return a0=function(...R){if(R.length===0)throw new m("streams");if(R.length===1)return t.from(R[0]);const I=[...R];if(typeof R[0]=="function"&&(R[0]=t.from(R[0])),typeof R[R.length-1]=="function"){const J=R.length-1;R[J]=t.from(R[J])}for(let J=0;J<R.length;++J)if(!(!n(R[J])&&!s(R[J]))){if(J<R.length-1&&!(o(R[J])||c(R[J])||u(R[J])))throw new p(`streams[${J}]`,I[J],"must be readable");if(J>0&&!(a(R[J])||f(R[J])||u(R[J])))throw new p(`streams[${J}]`,I[J],"must be writable")}let S,b,T,B,H;function $(J){const Le=B;B=null,Le?Le(J):J?H.destroy(J):!M&&!Y&&H.destroy()}const F=R[0],ne=e(R,$),Y=!!(a(F)||f(F)||u(F)),M=!!(o(ne)||c(ne)||u(ne));if(H=new t({writableObjectMode:!!(F!=null&&F.writableObjectMode),readableObjectMode:!!(ne!=null&&ne.writableObjectMode),writable:Y,readable:M}),Y){if(n(F))H._write=function(Le,Ue,je){F.write(Le,Ue)?je():S=je},H._final=function(Le){F.end(),b=Le},F.on("drain",function(){if(S){const Le=S;S=null,Le()}});else if(s(F)){const Ue=(u(F)?F.writable:F).getWriter();H._write=async function(je,nt,ke){try{await Ue.ready,Ue.write(je).catch(()=>{}),ke()}catch(Be){ke(Be)}},H._final=async function(je){try{await Ue.ready,Ue.close().catch(()=>{}),b=je}catch(nt){je(nt)}}}const J=u(ne)?ne.readable:ne;_(J,()=>{if(b){const Le=b;b=null,Le()}})}if(M){if(n(ne))ne.on("readable",function(){if(T){const J=T;T=null,J()}}),ne.on("end",function(){H.push(null)}),H._read=function(){for(;;){const J=ne.read();if(J===null){T=H._read;return}if(!H.push(J))return}};else if(s(ne)){const Le=(u(ne)?ne.readable:ne).getReader();H._read=async function(){for(;;)try{const{value:Ue,done:je}=await Le.read();if(!H.push(Ue))return;if(je){H.push(null);return}}catch{return}}}}return H._destroy=function(J,Le){!J&&B!==null&&(J=new g),T=null,S=null,b=null,B===null?Le(J):(B=Le,n(ne)&&r(ne,J))},H},a0}var Z1;function yk(){if(Z1)return zf;Z1=1;const e=globalThis.AbortController||zv().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:r,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:o},AbortError:a}=Bi(),{validateAbortSignal:s,validateInteger:u,validateObject:f}=Fp(),c=Zn().Symbol("kWeak"),{finished:g}=Ks(),p=ZC(),{addAbortSignalNoValidate:m}=Op(),{isWritable:_,isNodeStream:C}=us(),{ArrayPrototypePush:R,MathFloor:I,Number:S,NumberIsNaN:b,Promise:T,PromiseReject:B,PromisePrototypeThen:H,Symbol:$}=Zn(),F=$("kEmpty"),ne=$("kEof");function Y(Ze,qe){if(qe!=null&&f(qe,"options"),(qe==null?void 0:qe.signal)!=null&&s(qe.signal,"options.signal"),C(Ze)&&!_(Ze))throw new t("stream",Ze,"must be writable");const Fe=p(this,Ze);return qe!=null&&qe.signal&&m(qe.signal,Fe),Fe}function M(Ze,qe){if(typeof Ze!="function")throw new r("fn",["Function","AsyncFunction"],Ze);qe!=null&&f(qe,"options"),(qe==null?void 0:qe.signal)!=null&&s(qe.signal,"options.signal");let Fe=1;return(qe==null?void 0:qe.concurrency)!=null&&(Fe=I(qe.concurrency)),u(Fe,"concurrency",1),async function*(){var gt,Pt;const Ft=new e,Z=this,N=[],E=Ft.signal,j={signal:E},G=()=>Ft.abort();qe!=null&&(gt=qe.signal)!==null&&gt!==void 0&&gt.aborted&&G(),qe==null||(Pt=qe.signal)===null||Pt===void 0||Pt.addEventListener("abort",G);let fe,we,me=!1;function $e(){me=!0}async function Xe(){try{for await(let $t of Z){var ft;if(me)return;if(E.aborted)throw new a;try{$t=Ze($t,j)}catch(Lr){$t=B(Lr)}$t!==F&&(typeof((ft=$t)===null||ft===void 0?void 0:ft.catch)=="function"&&$t.catch($e),N.push($t),fe&&(fe(),fe=null),!me&&N.length&&N.length>=Fe&&await new T(Lr=>{we=Lr}))}N.push(ne)}catch($t){const Lr=B($t);H(Lr,void 0,$e),N.push(Lr)}finally{var Mt;me=!0,fe&&(fe(),fe=null),qe==null||(Mt=qe.signal)===null||Mt===void 0||Mt.removeEventListener("abort",G)}}Xe();try{for(;;){for(;N.length>0;){const ft=await N[0];if(ft===ne)return;if(E.aborted)throw new a;ft!==F&&(yield ft),N.shift(),we&&(we(),we=null)}await new T(ft=>{fe=ft})}}finally{Ft.abort(),me=!0,we&&(we(),we=null)}}.call(this)}function J(Ze=void 0){return Ze!=null&&f(Ze,"options"),(Ze==null?void 0:Ze.signal)!=null&&s(Ze.signal,"options.signal"),async function*(){let Fe=0;for await(const gt of this){var lt;if(Ze!=null&&(lt=Ze.signal)!==null&&lt!==void 0&&lt.aborted)throw new a({cause:Ze.signal.reason});yield[Fe++,gt]}}.call(this)}async function Le(Ze,qe=void 0){for await(const Fe of ke.call(this,Ze,qe))return!0;return!1}async function Ue(Ze,qe=void 0){if(typeof Ze!="function")throw new r("fn",["Function","AsyncFunction"],Ze);return!await Le.call(this,async(...Fe)=>!await Ze(...Fe),qe)}async function je(Ze,qe){for await(const Fe of ke.call(this,Ze,qe))return Fe}async function nt(Ze,qe){if(typeof Ze!="function")throw new r("fn",["Function","AsyncFunction"],Ze);async function Fe(lt,gt){return await Ze(lt,gt),F}for await(const lt of M.call(this,Fe,qe));}function ke(Ze,qe){if(typeof Ze!="function")throw new r("fn",["Function","AsyncFunction"],Ze);async function Fe(lt,gt){return await Ze(lt,gt)?lt:F}return M.call(this,Fe,qe)}class Be extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function De(Ze,qe,Fe){var lt;if(typeof Ze!="function")throw new r("reducer",["Function","AsyncFunction"],Ze);Fe!=null&&f(Fe,"options"),(Fe==null?void 0:Fe.signal)!=null&&s(Fe.signal,"options.signal");let gt=arguments.length>1;if(Fe!=null&&(lt=Fe.signal)!==null&&lt!==void 0&&lt.aborted){const E=new a(void 0,{cause:Fe.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(E)),E}const Pt=new e,Ft=Pt.signal;if(Fe!=null&&Fe.signal){const E={once:!0,[c]:this};Fe.signal.addEventListener("abort",()=>Pt.abort(),E)}let Z=!1;try{for await(const E of this){var N;if(Z=!0,Fe!=null&&(N=Fe.signal)!==null&&N!==void 0&&N.aborted)throw new a;gt?qe=await Ze(qe,E,{signal:Ft}):(qe=E,gt=!0)}if(!Z&&!gt)throw new Be}finally{Pt.abort()}return qe}async function tt(Ze){Ze!=null&&f(Ze,"options"),(Ze==null?void 0:Ze.signal)!=null&&s(Ze.signal,"options.signal");const qe=[];for await(const lt of this){var Fe;if(Ze!=null&&(Fe=Ze.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new a(void 0,{cause:Ze.signal.reason});R(qe,lt)}return qe}function re(Ze,qe){const Fe=M.call(this,Ze,qe);return async function*(){for await(const gt of Fe)yield*gt}.call(this)}function Ie(Ze){if(Ze=S(Ze),b(Ze))return 0;if(Ze<0)throw new o("number",">= 0",Ze);return Ze}function Ge(Ze,qe=void 0){return qe!=null&&f(qe,"options"),(qe==null?void 0:qe.signal)!=null&&s(qe.signal,"options.signal"),Ze=Ie(Ze),async function*(){var lt;if(qe!=null&&(lt=qe.signal)!==null&&lt!==void 0&&lt.aborted)throw new a;for await(const Pt of this){var gt;if(qe!=null&&(gt=qe.signal)!==null&&gt!==void 0&&gt.aborted)throw new a;Ze--<=0&&(yield Pt)}}.call(this)}function dt(Ze,qe=void 0){return qe!=null&&f(qe,"options"),(qe==null?void 0:qe.signal)!=null&&s(qe.signal,"options.signal"),Ze=Ie(Ze),async function*(){var lt;if(qe!=null&&(lt=qe.signal)!==null&&lt!==void 0&&lt.aborted)throw new a;for await(const Pt of this){var gt;if(qe!=null&&(gt=qe.signal)!==null&&gt!==void 0&&gt.aborted)throw new a;if(Ze-- >0)yield Pt;else return}}.call(this)}return zf.streamReturningOperators={asIndexedPairs:J,drop:Ge,filter:ke,flatMap:re,map:M,take:dt,compose:Y},zf.promiseReturningOperators={every:Ue,forEach:nt,reduce:De,toArray:tt,some:Le,find:je},zf}var l0,eb;function mk(){if(eb)return l0;eb=1,l0=e;function e(r){if(r)return t(r)}function t(r){for(var n in e.prototype)r[n]=e.prototype[n];return r}return e.prototype.on=e.prototype.addEventListener=function(r,n){return this._callbacks=this._callbacks||{},(this._callbacks[r]=this._callbacks[r]||[]).push(n),this},e.prototype.once=function(r,n){var o=this;this._callbacks=this._callbacks||{};function a(){o.off(r,a),n.apply(this,arguments)}return a.fn=n,this.on(r,a),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(r,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks[r];if(!o)return this;if(arguments.length==1)return delete this._callbacks[r],this;for(var a,s=0;s<o.length;s++)if(a=o[s],a===n||a.fn===n){o.splice(s,1);break}return this},e.prototype.emit=function(r){this._callbacks=this._callbacks||{};var n=[].slice.call(arguments,1),o=this._callbacks[r];if(o){o=o.slice(0);for(var a=0,s=o.length;a<s;++a)o[a].apply(this,n)}return this},e.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks[r]||[]},e.prototype.hasListeners=function(r){return!!this.listeners(r).length},l0}var u0,tb;function vk(){if(tb)return u0;tb=1;var e=mk();function t(){e.call(this)}return t.prototype=new e,u0=t,t.Stream=t,t.prototype.pipe=function(r,n){var o=this;function a(m){r.writable&&r.write(m)===!1&&o.pause&&o.pause()}o.on("data",a);function s(){o.readable&&o.resume&&o.resume()}r.on("drain",s),!r._isStdio&&(!n||n.end!==!1)&&(o.on("end",f),o.on("close",c));var u=!1;function f(){u||(u=!0,r.end())}function c(){u||(u=!0,typeof r.destroy=="function"&&r.destroy())}function g(m){if(p(),!this.hasListeners("error"))throw m}o.on("error",g),r.on("error",g);function p(){o.off("data",a),r.off("drain",s),o.off("end",f),o.off("close",c),o.off("error",g),r.off("error",g),o.off("end",p),o.off("close",p),r.off("end",p),r.off("close",p)}return o.on("end",p),o.on("close",p),r.on("end",p),r.on("close",p),r.emit("pipe",o),r},u0}var c0,rb;function eT(){if(rb)return c0;rb=1;const{ArrayPrototypePop:e,Promise:t}=Zn(),{isIterable:r,isNodeStream:n,isWebStream:o}=us(),{pipelineImpl:a}=Qv(),{finished:s}=Ks();vk();function u(...f){return new t((c,g)=>{let p,m;const _=f[f.length-1];if(_&&typeof _=="object"&&!n(_)&&!r(_)&&!o(_)){const C=e(f);p=C.signal,m=C.end}a(f,(C,R)=>{C?g(C):c(R)},{signal:p,end:m})})}return c0={finished:s,pipeline:u},c0}var nb;function wk(){if(nb)return jy.exports;nb=1;const{Buffer:e}=Vs(),{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=Zn(),{promisify:{custom:o}}=ss(),{streamReturningOperators:a,promiseReturningOperators:s}=yk(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=Bi(),f=ZC(),{pipeline:c}=Qv(),{destroyer:g}=zl(),p=Ks(),m=eT(),_=us(),C=jy.exports=Jv().Stream;C.isDisturbed=_.isDisturbed,C.isErrored=_.isErrored,C.isReadable=_.isReadable,C.Readable=Np();for(const S of r(a)){let T=function(...B){if(new.target)throw u();return C.Readable.from(n(b,this,B))};var I=T;const b=a[S];t(T,"name",{__proto__:null,value:b.name}),t(T,"length",{__proto__:null,value:b.length}),t(C.Readable.prototype,S,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const S of r(s)){let T=function(...H){if(new.target)throw u();return n(b,this,H)};var I=T;const b=s[S];t(T,"name",{__proto__:null,value:b.name}),t(T,"length",{__proto__:null,value:b.length}),t(C.Readable.prototype,S,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}C.Writable=XC(),C.Duplex=as(),C.Transform=QC(),C.PassThrough=YC(),C.pipeline=c;const{addAbortSignal:R}=Op();return C.addAbortSignal=R,C.finished=p,C.destroy=g,C.compose=f,t(C,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),t(c,o,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),t(p,o,{__proto__:null,enumerable:!0,get(){return m.finished}}),C.Stream=C,C._isUint8Array=function(b){return b instanceof Uint8Array},C._uint8ArrayToBuffer=function(b){return e.from(b.buffer,b.byteOffset,b.byteLength)},jy.exports}var ib;function tT(){return ib||(ib=1,function(e){const t=wk(),r=eT(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(Hy)),Hy.exports}var ku={},Du={},d0={},Lu={},ob;function rT(){if(ob)return Lu;ob=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.BlankNode=void 0;class e{constructor(r){this.termType="BlankNode",this.value=r}equals(r){return!!r&&r.termType==="BlankNode"&&r.value===this.value}}return Lu.BlankNode=e,Lu}var Uu={},Mu={},sb;function nT(){if(sb)return Mu;sb=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(r){return!!r&&r.termType==="DefaultGraph"}}return Mu.DefaultGraph=e,e.INSTANCE=new e,Mu}var Bu={},Hu={},ab;function Yv(){if(ab)return Hu;ab=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.NamedNode=void 0;class e{constructor(r){this.termType="NamedNode",this.value=r}equals(r){return!!r&&r.termType==="NamedNode"&&r.value===this.value}}return Hu.NamedNode=e,Hu}var lb;function iT(){if(lb)return Bu;lb=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.Literal=void 0;const e=Yv();class t{constructor(n,o){this.termType="Literal",this.value=n,typeof o=="string"?(this.language=o,this.datatype=t.RDF_LANGUAGE_STRING):o?(this.language="",this.datatype=o):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&n.datatype.equals(this.datatype)}}return Bu.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Bu}var ju={},ub;function oT(){if(ub)return ju;ub=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.Quad=void 0;class e{constructor(r,n,o,a){this.termType="Quad",this.value="",this.subject=r,this.predicate=n,this.object=o,this.graph=a}equals(r){return!!r&&(r.termType==="Quad"||!r.termType)&&this.subject.equals(r.subject)&&this.predicate.equals(r.predicate)&&this.object.equals(r.object)&&this.graph.equals(r.graph)}}return ju.Quad=e,ju}var $u={},cb;function sT(){if(cb)return $u;cb=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.Variable=void 0;class e{constructor(r){this.termType="Variable",this.value=r}equals(r){return!!r&&r.termType==="Variable"&&r.value===this.value}}return $u.Variable=e,$u}var db;function _k(){if(db)return Uu;db=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.DataFactory=void 0;const e=rT(),t=nT(),r=iT(),n=Yv(),o=oT(),a=sT();let s=0;class u{constructor(c){this.blankNodeCounter=0,c=c||{},this.blankNodePrefix=c.blankNodePrefix||`df_${s++}_`}namedNode(c){return new n.NamedNode(c)}blankNode(c){return new e.BlankNode(c||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(c,g){return new r.Literal(c,g)}variable(c){return new a.Variable(c)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(c,g,p,m){return new o.Quad(c,g,p,m||this.defaultGraph())}fromTerm(c){switch(c.termType){case"NamedNode":return this.namedNode(c.value);case"BlankNode":return this.blankNode(c.value);case"Literal":return c.language?this.literal(c.value,c.language):c.datatype.equals(r.Literal.XSD_STRING)?this.literal(c.value):this.literal(c.value,this.fromTerm(c.datatype));case"Variable":return this.variable(c.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(c.subject),this.fromTerm(c.predicate),this.fromTerm(c.object),this.fromTerm(c.graph))}}fromQuad(c){return this.fromTerm(c)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Uu.DataFactory=u,Uu}var fb;function Sk(){return fb||(fb=1,function(e){var t=cn&&cn.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=cn&&cn.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(rT(),e),r(_k(),e),r(nT(),e),r(iT(),e),r(Yv(),e),r(oT(),e),r(sT(),e)}(d0)),d0}var Vu={},Ku={},hb;function Ek(){if(hb)return Ku;hb=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.ContainerHandlerIdentifier=void 0;let e=class{canCombineWithGraph(){return!0}async handle(r,n,o,a,s,u){let f;if(n.emittedStack[u+1]&&n.idStack[u+1])f=n.idStack[u+1][0];else{const p=await o.getContainerKey(a[u],a,u)!==null?await o.resourceToTerm(await n.getContext(a),a[u]):o.dataFactory.blankNode();if(!p){n.emittedStack[u]=!1;return}f=p,n.idStack[u+1]=[f]}let c=n.idStack[u];c||(c=n.idStack[u]=[]),c.some(g=>g.equals(f))||c.push(f),await n.handlePendingContainerFlushBuffers()||(n.emittedStack[u]=!1)}};return Ku.ContainerHandlerIdentifier=e,Ku}var Wu={},Gu={},pb;function kp(){if(pb)return Gu;pb=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.EntryHandlerPredicate=void 0;const e=xi(),t=Fa();let r=class aT{static async handlePredicateObject(o,a,s,u,f,c,g,p,m){const _=await a.getPropertiesDepth(s,u),C=await a.getDepthOffsetGraph(u,s),R=u-C,I=o.idStack[_];if(I&&!m)for(const S of I)if(C>=0){const T=o.idStack[R-1];if(T)for(const B of T)a.emitQuadChecked(u,S,f,c,B,g,p);else g?(a.validateReverseSubject(c),o.getUnidentifiedGraphBufferSafe(R-1).push({subject:c,predicate:f,object:S,isEmbedded:p})):o.getUnidentifiedGraphBufferSafe(R-1).push({subject:S,predicate:f,object:c,isEmbedded:p})}else{const T=await a.getGraphContainerValue(s,_);a.emitQuadChecked(u,S,f,c,T,g,p)}else if(g&&a.validateReverseSubject(c),m){if(o.rdfstar){o.idStack[u]&&o.emitError(new e.ErrorCoded(`Found an illegal @id inside an annotation: ${o.idStack[u][0].value}`,e.ERROR_CODES.INVALID_ANNOTATION));for(let T=0;T<u;T++)await a.unaliasKeyword(s[T],s,T)==="@id"&&o.emitError(new e.ErrorCoded("Found an illegal annotation inside an embedded node",e.ERROR_CODES.INVALID_ANNOTATION));const S=o.getAnnotationsBufferSafe(_),b={predicate:f,object:c,reverse:g,nestedAnnotations:[],depth:_};S.push(b);for(let T=S.length-2;T>=0;T--){const B=S[T];B.depth>_&&(b.nestedAnnotations.push(B),S.splice(T,1))}}}else o.getUnidentifiedValueBufferSafe(_).push({predicate:f,object:c,reverse:g,isEmbedded:p})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(o,a,s,u,f){const c=s[u];if(c){const g=await o.getContext(s);if(!o.jsonLiteralStack[u]&&await a.predicateToTerm(g,s[u]))return t.Util.getContextValueType(g,c)==="@json"&&(o.jsonLiteralStack[u+1]=!0),!0}return!1}async test(o,a,s,u,f){return u[f]}async handle(o,a,s,u,f,c,g){const p=u[c],m=await o.getContext(u),_=await a.predicateToTerm(m,s);if(_){const C=await a.valueToTerm(m,s,f,c,u);if(C.length)for(let R of C){let I=await a.unaliasKeywordParent(u,c);const S=t.Util.isPropertyReverse(m,p,I);let b=0;for(;I==="@reverse"||typeof I=="number";)typeof I=="number"?b++:c--,I=await a.unaliasKeywordParent(u,c-b);const T=t.Util.isPropertyInEmbeddedNode(I);a.validateReverseInEmbeddedNode(s,S,T);const B=t.Util.isPropertyInAnnotationObject(I);if(f){const H="@list"in t.Util.getContextValueContainer(m,s);if(H||f["@list"]){if((H&&!Array.isArray(f)&&!f["@list"]||f["@list"]&&!Array.isArray(f["@list"]))&&R!==a.rdfNil){const $=a.dataFactory.blankNode();o.emitQuad(c,a.dataFactory.quad($,a.rdfRest,a.rdfNil,a.getDefaultGraph())),o.emitQuad(c,a.dataFactory.quad($,a.rdfFirst,R,a.getDefaultGraph())),R=$}if(S&&!o.allowSubjectList)throw new e.ErrorCoded(`Found illegal list value in subject position at ${s}`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await aT.handlePredicateObject(o,a,u,c,_,R,S,T,B)}}}};return Gu.EntryHandlerPredicate=r,Gu}var gb;function bk(){if(gb)return Wu;gb=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.ContainerHandlerIndex=void 0;const e=xi(),t=kp(),r=Fa();let n=class{canCombineWithGraph(){return!0}async handle(a,s,u,f,c,g){if(!Array.isArray(c)){const p="@graph"in a,m=await s.getContext(f),_=f[g-1],C=r.Util.getContextValueIndex(m,_);if(C){if(e.Util.isPotentialKeyword(C))throw new e.ErrorCoded(`Keywords can not be used as @index value, got: ${C}`,e.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof C!="string")throw new e.ErrorCoded(`@index values must be strings, got: ${C}`,e.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof c!="object"){if(r.Util.getContextValueType(m,_)!=="@id")throw new e.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${c}`,e.ERROR_CODES.INVALID_VALUE_OBJECT);const S=u.resourceToTerm(m,c);S&&(s.idStack[g+1]=[S])}const I=u.createVocabOrBaseTerm(m,C);if(I){const S=await u.valueToTerm(m,C,await u.getContainerKey(f[g],f,g),g,f);if(p){const b=await u.getGraphContainerValue(f,g+1);for(const T of S)s.emitQuad(g,u.dataFactory.quad(b,I,T,u.getDefaultGraph()))}else for(const b of S)await t.EntryHandlerPredicate.handlePredicateObject(s,u,f,g+1,I,b,!1,!1,!1)}}const R=p?2:1;await s.newOnValueJob(f.slice(0,f.length-R),c,g-R,!0),await s.handlePendingContainerFlushBuffers()}s.emittedStack[g]=!1}};return Wu.ContainerHandlerIndex=n,Wu}var qu={},yb;function Ak(){if(yb)return qu;yb=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.ContainerHandlerLanguage=void 0;const e=xi();let t=class{canCombineWithGraph(){return!1}async handle(n,o,a,s,u,f){const c=await a.getContainerKey(s[f],s,f);if(Array.isArray(u))u=u.map(g=>({"@value":g,"@language":c}));else{if(typeof u!="string")throw new e.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(u)}', but expected string`,e.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);u={"@value":u,"@language":c}}await o.newOnValueJob(s.slice(0,s.length-1),u,f-1,!0),o.emittedStack[f]=!1}};return qu.ContainerHandlerLanguage=t,qu}var zu={},mb;function Rk(){if(mb)return zu;mb=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.ContainerHandlerType=void 0;const e=kp(),t=Fa();let r=class{canCombineWithGraph(){return!1}async handle(o,a,s,u,f,c){if(!Array.isArray(f)){if(typeof f=="string"){const m=await a.getContext(u),C=t.Util.getContextValueType(m,u[c-1])==="@vocab"?await s.createVocabOrBaseTerm(m,f):await s.resourceToTerm(m,f);if(C){const R={"@id":C.termType==="NamedNode"?C.value:f};await a.newOnValueJob(u.slice(0,u.length-1),R,c-1,!0),a.idStack[c+1]=[C]}}else{const m=!!a.idStack[c+1];m||delete a.idStack[c],await a.newOnValueJob(u.slice(0,u.length-1),f,c-1,!0),m||(a.idStack[c+1]=a.idStack[c])}const g=await s.getContainerKey(u[c],u,c),p=g!==null?s.createVocabOrBaseTerm(await a.getContext(u),g):null;p&&await e.EntryHandlerPredicate.handlePredicateObject(a,s,u,c+1,s.rdfType,p,!1,!1,!1),await a.handlePendingContainerFlushBuffers()}a.emittedStack[c]=!1}};return zu.ContainerHandlerType=r,zu}var vb;function lT(){if(vb)return Vu;vb=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.EntryHandlerContainer=void 0;const e=Ek(),t=bk(),r=Ak(),n=Rk(),o=Fa();let a=class vs{static isSimpleGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length===2||Object.keys(u).length===1)}static isComplexGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length>2||!("@set"in u)&&Object.keys(u).length>1)}static getContainerGraphIndex(u,f,c){let g=vs.isSimpleGraphContainer(u),p="";for(let m=f;m<c.length;m++)(!g||typeof c[m]=="number")&&(p+=":"+c[m]),!g&&typeof c[m]!="number"&&(g=!0);return p}static async getContainerHandler(u,f,c){const g={containers:{"@set":!0},depth:c,fallback:!0};let p=!1;const m=await u.getContext(f,2);for(let _=c-1;_>=0;_--)if(typeof f[_]!="number"){const C=o.Util.getContextValue(m,"@container",f[_],!1);if(C&&vs.isSimpleGraphContainer(C))return{containers:C,depth:_+1,fallback:!1};const R=o.Util.getContextValue(m,"@container",f[_-1],!1);if(R){const I="@graph"in R;for(const S in vs.CONTAINER_HANDLERS)if(R[S])return I?vs.CONTAINER_HANDLERS[S].canCombineWithGraph()?{containers:R,depth:_,fallback:!1}:g:p?g:{containers:R,depth:_,fallback:!1};return g}else{if(p)return g;p=!0}}return g}static async isBufferableContainerHandler(u,f,c){const g=await vs.getContainerHandler(u,f,c);return!g.fallback&&!("@graph"in g.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,f,c,g,p){return!!await this.test(u,f,null,c,g)}async test(u,f,c,g,p){const m=o.Util.getContextValueContainer(await u.getContext(g,2),g[p-1]);for(const _ in vs.CONTAINER_HANDLERS)if(m[_])return{containers:m,handler:vs.CONTAINER_HANDLERS[_]};return null}async handle(u,f,c,g,p,m,_){return _.handler.handle(_.containers,u,f,g,p,m)}};return Vu.EntryHandlerContainer=a,a.CONTAINER_HANDLERS={"@id":new e.ContainerHandlerIdentifier,"@index":new t.ContainerHandlerIndex,"@language":new r.ContainerHandlerLanguage,"@type":new n.ContainerHandlerType},Vu}var wb;function Fa(){if(wb)return Du;wb=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.Util=void 0;const e=xi(),t=Sk(),r=lT(),n=qC();class o{constructor(s){this.parsingContext=s.parsingContext,this.dataFactory=s.dataFactory||new t.DataFactory,this.rdfFirst=this.dataFactory.namedNode(o.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(o.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(o.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(o.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(o.RDF+"JSON")}static getContextValue(s,u,f,c){const g=s.getContextRaw()[f];if(!g)return c;const p=g[u];return p===void 0?c:p}static getContextValueContainer(s,u){return o.getContextValue(s,"@container",u,{"@set":!0})}static getContextValueType(s,u){const f=o.getContextValue(s,"@type",u,null);return f==="@none"?null:f}static getContextValueLanguage(s,u){return o.getContextValue(s,"@language",u,s.getContextRaw()["@language"]||null)}static getContextValueDirection(s,u){return o.getContextValue(s,"@direction",u,s.getContextRaw()["@direction"]||null)}static isContextValueReverse(s,u){return!!o.getContextValue(s,"@reverse",u,null)}static getContextValueIndex(s,u){return o.getContextValue(s,"@index",u,s.getContextRaw()["@index"]||null)}static isPropertyReverse(s,u,f){return f==="@reverse"!==o.isContextValueReverse(s,u)}static isPropertyInEmbeddedNode(s){return s==="@id"}static isPropertyInAnnotationObject(s){return s==="@annotation"}static isValidIri(s){return s!==null&&e.Util.isValidIri(s)}static isPrefixArray(s,u){if(s.length>u.length)return!1;for(let f=0;f<s.length;f++)if(s[f]!==u[f])return!1;return!0}async validateValueIndexes(s){if(this.parsingContext.validateValueIndexes){const u={};for(const f of s)if(f&&typeof f=="object"){const c=f["@id"],g=f["@index"];if(c&&g){const p=u[c];if(p&&p!==g)throw new e.ErrorCoded(`Conflicting @index value for ${c}`,e.ERROR_CODES.CONFLICTING_INDEXES);u[c]=g}}}}async valueToTerm(s,u,f,c,g){if(o.getContextValueType(s,u)==="@json")return[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)];const p=typeof f;switch(p){case"object":if(f==null)return[];if(Array.isArray(f))return"@list"in o.getContextValueContainer(s,u)?f.length===0?[this.rdfNil]:this.parsingContext.idStack[c+1]||[]:(await this.validateValueIndexes(f),[]);if(s=await this.getContextSelfOrPropertyScoped(s,u),"@context"in f&&(s=await this.parsingContext.parseContext(f["@context"],(await this.parsingContext.getContext(g,0)).getContextRaw())),f=await this.unaliasKeywords(f,g,c,s),"@value"in f){let m,_,C,R,I;for(u in f){const S=f[u];switch(u){case"@value":m=S;break;case"@language":_=S;break;case"@direction":C=S;break;case"@type":R=S;break;case"@index":I=S;break;case"@annotation":break;default:throw new e.ErrorCoded(`Unknown value entry '${u}' in @value: ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(R,g,c,!0,s)==="@json")return[this.dataFactory.literal(this.valueToJsonString(m),this.rdfJson)];if(m===null)return[];if(typeof m=="object")throw new e.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(m)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&I&&typeof I!="string")throw new e.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(I)}'`,e.ERROR_CODES.INVALID_INDEX_VALUE);if(_){if(typeof m!="string")throw new e.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(m)}'`,e.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!e.ContextParser.validateLanguage(_,this.parsingContext.strictValues,e.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(_=_.toLowerCase())}if(C){if(typeof m!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(m)}'`);if(!e.ContextParser.validateDirection(C,this.parsingContext.strictValues))return[]}if(_&&C&&this.parsingContext.rdfDirection){if(R)throw new e.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(c,m,_,C))}else if(_){if(R)throw new e.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(m,_)]}else if(C&&this.parsingContext.rdfDirection){if(R)throw new e.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(c,m,_,C))}else if(R){if(typeof R!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(R)}'`,e.ERROR_CODES.INVALID_TYPED_VALUE);const S=this.createVocabOrBaseTerm(s,R);if(!S)throw new e.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(R)}'`,e.ERROR_CODES.INVALID_TYPED_VALUE);if(S.termType!=="NamedNode")throw new e.ErrorCoded(`Illegal value type (${S.termType}): ${R}`,e.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(m,S)]}return await this.valueToTerm(new e.JsonLdContextNormalized({}),u,m,c,g)}else if("@set"in f){if(Object.keys(f).length>1)throw new e.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${u}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in f){if(Object.keys(f).length>1)throw new e.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${u}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const m=f["@list"];return Array.isArray(m)?m.length===0?[this.rdfNil]:this.parsingContext.idStack[c+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(g),u,m,c-1,g.slice(0,-1))}else{if("@reverse"in f&&typeof f["@reverse"]=="boolean")return[];if("@graph"in o.getContextValueContainer(await this.parsingContext.getContext(g),u)){const m=this.parsingContext.graphContainerTermStack[c+1];return m?Object.values(m):[this.dataFactory.blankNode()]}else if("@id"in f){if(Object.keys(f).length>1&&(s=await this.parsingContext.getContext(g,0)),"@context"in f&&(s=await this.parsingContext.parseContext(f["@context"],s.getContextRaw())),f["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(s,f["@id"]));{const m=f["@id"];let _;if(typeof m=="object")if(this.parsingContext.rdfstar)_=this.parsingContext.idStack[c+1][0];else throw new e.ErrorCoded(`Found illegal @id '${f}'`,e.ERROR_CODES.INVALID_ID_VALUE);else _=this.resourceToTerm(s,m);return this.nullableTermToArray(_)}}else return this.parsingContext.emittedStack[c+1]||f&&typeof f=="object"&&Object.keys(f).length===0?this.parsingContext.idStack[c+1]||(this.parsingContext.idStack[c+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(s,u),u,f,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(s,u),u,(!!f).toString(),this.dataFactory.namedNode(o.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(s,u),u,f,this.dataFactory.namedNode(f%1===0&&f<1e21?o.XSD_INTEGER:o.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${p}`)),[]}}async getContextSelfOrPropertyScoped(s,u){const f=s.getContextRaw()[u];return f&&typeof f=="object"&&"@context"in f&&(s=await this.parsingContext.parseContext(f,s.getContextRaw(),!0)),s}nullableTermToArray(s){return s?[s]:[]}predicateToTerm(s,u){const f=s.expandTerm(u,!0,this.parsingContext.getExpandOptions());if(!f)return null;if(f[0]==="_"&&f[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(f.substr(2)):null;if(o.isValidIri(f))return this.dataFactory.namedNode(f);if(f&&this.parsingContext.strictValues)this.parsingContext.emitError(new e.ErrorCoded(`Invalid predicate IRI: ${f}`,e.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(s,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const f=s.expandTerm(u,!1,this.parsingContext.getExpandOptions());if(!o.isValidIri(f))if(f&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${f}`));else return null;return this.dataFactory.namedNode(f)}createVocabOrBaseTerm(s,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const f=this.parsingContext.getExpandOptions();let c=s.expandTerm(u,!0,f);if(c===u&&(c=s.expandTerm(u,!1,f)),!o.isValidIri(c))if(c&&this.parsingContext.strictValues&&!c.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}intToString(s,u){return typeof s=="number"?Number.isFinite(s)?s%1===0&&(!u||u.value!==o.XSD_DOUBLE)?Number(s).toString():s.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):s>0?"INF":"-INF":s}stringValueToTerm(s,u,f,c,g){const p=o.getContextValueType(u,f);if(p)if(p==="@id"){if(!g)return this.resourceToTerm(u,this.intToString(c,g))}else if(p==="@vocab"){if(!g)return this.createVocabOrBaseTerm(u,this.intToString(c,g))}else g=this.dataFactory.namedNode(p);if(!g){const m=o.getContextValueLanguage(u,f),_=o.getContextValueDirection(u,f);return _&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(s,this.intToString(c,g),m,_):this.dataFactory.literal(this.intToString(c,g),m)}return this.dataFactory.literal(this.intToString(c,g),g)}createLanguageDirectionLiteral(s,u,f,c){if(this.parsingContext.rdfDirection==="i18n-datatype")return f||(f=""),this.dataFactory.literal(u,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${f}_${c}`));{const g=this.dataFactory.blankNode(),p=this.getDefaultGraph();return this.parsingContext.emitQuad(s,this.dataFactory.quad(g,this.dataFactory.namedNode(o.RDF+"value"),this.dataFactory.literal(u),p)),f&&this.parsingContext.emitQuad(s,this.dataFactory.quad(g,this.dataFactory.namedNode(o.RDF+"language"),this.dataFactory.literal(f),p)),this.parsingContext.emitQuad(s,this.dataFactory.quad(g,this.dataFactory.namedNode(o.RDF+"direction"),this.dataFactory.literal(c),p)),g}}valueToJsonString(s){return n(s)}async unaliasKeyword(s,u,f,c,g){if(Number.isInteger(s))return s;if(!c){const p=this.parsingContext.unaliasedKeywordCacheStack[f];if(p)return p}if(!e.Util.isPotentialKeyword(s)){g=g||await this.parsingContext.getContext(u);let p=g.getContextRaw()[s];p&&typeof p=="object"&&(p=p["@id"]),e.Util.isValidKeyword(p)&&(s=p)}return c?s:this.parsingContext.unaliasedKeywordCacheStack[f]=s}async unaliasKeywordParent(s,u){return await this.unaliasKeyword(u>0&&s[u-1],s,u-1)}async unaliasKeywords(s,u,f,c){const g={};for(const p in s)g[await this.unaliasKeyword(p,u,f+1,!0,c)]=s[p];return g}async isLiteral(s,u){for(let f=u;f>=0;f--){if(await this.unaliasKeyword(s[f],s,f)==="@annotation")return!1;if(this.parsingContext.literalStack[f]||this.parsingContext.jsonLiteralStack[f])return!0}return!1}async getDepthOffsetGraph(s,u){for(let f=s-1;f>0;f--)if(await this.unaliasKeyword(u[f],u,f)==="@graph"){const c=(await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,u,f)).containers;return r.EntryHandlerContainer.isComplexGraphContainer(c)?-1:s-f-1}return-1}validateReverseSubject(s){if(s.termType==="Literal")throw new e.ErrorCoded(`Found illegal literal in subject position: ${s.value}`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(s,u){let f=this.getDefaultGraph();const{containers:c,depth:g}=await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,s,u);if("@graph"in c){const p=r.EntryHandlerContainer.getContainerGraphIndex(c,g,s),m=this.parsingContext.graphContainerTermStack[g];if(f=m?m[p]:null,!f){let _=null;if("@id"in c){const C=await this.getContainerKey(s[g],s,g);C!==null&&(_=await this.resourceToTerm(await this.parsingContext.getContext(s),C))}_||(_=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[g]||(this.parsingContext.graphContainerTermStack[g]={}),f=this.parsingContext.graphContainerTermStack[g][p]=_}}return f}async getPropertiesDepth(s,u){let f=u;for(let c=u-1;c>0;c--)if(typeof s[c]!="number"){const g=await this.unaliasKeyword(s[c],s,c);if(g==="@reverse")return c;if(g==="@nest")f=c;else return f}return f}async getContainerKey(s,u,f){const c=await this.unaliasKeyword(s,u,f);return c==="@none"?null:c}validateReverseInEmbeddedNode(s,u,f){if(f&&u&&!this.parsingContext.rdfstarReverseInEmbedded)throw new e.ErrorCoded(`Illegal reverse property in embedded node in ${s}`,e.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(s,u,f,c,g,p,m){let _;if(p?(this.validateReverseSubject(c),_=this.dataFactory.quad(c,f,u,g)):_=this.dataFactory.quad(u,f,c,g),m){if(_.graph.termType!=="DefaultGraph"&&(_=this.dataFactory.quad(_.subject,_.predicate,_.object)),this.parsingContext.idStack[s-1])throw new e.ErrorCoded("Illegal multiple properties in an embedded node",e.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[s-1]=[_]}else this.parsingContext.emitQuad(s,_);const C=this.parsingContext.annotationsBuffer[s];if(C){for(const R of C)this.emitAnnotation(s,_,R);delete this.parsingContext.annotationsBuffer[s]}}emitAnnotation(s,u,f){let c;f.reverse?(this.validateReverseSubject(f.object),c=this.dataFactory.quad(f.object,f.predicate,u)):c=this.dataFactory.quad(u,f.predicate,f.object),this.parsingContext.emitQuad(s,c);for(const g of f.nestedAnnotations)this.emitAnnotation(s,c,g)}}return Du.Util=o,o.XSD="http://www.w3.org/2001/XMLSchema#",o.XSD_BOOLEAN=o.XSD+"boolean",o.XSD_INTEGER=o.XSD+"integer",o.XSD_DOUBLE=o.XSD+"double",o.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Du}var _b;function xk(){if(_b)return ku;_b=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.EntryHandlerArrayValue=void 0;const e=Fa(),t=xi();let r=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,a,s,u,f){return this.test(o,a,null,s,u)}async test(o,a,s,u,f){return typeof u[f]=="number"}async handle(o,a,s,u,f,c){let g=await a.unaliasKeywordParent(u,c);if(g==="@list"){let p=null,m=0;for(let _=c-2;_>0;_--){const C=u[_];if(typeof C=="string"||typeof C=="number"){m=_,p=C;break}}if(p!==null){const _=await a.valueToTerm(await o.getContext(u),p,f,c,u);for(const C of _)await this.handleListElement(o,a,C,f,c,u.slice(0,m),m);_.length===0&&await this.handleListElement(o,a,null,f,c,u.slice(0,m),m)}}else if(g==="@set")await o.newOnValueJob(u.slice(0,-2),f,c-2,!1);else if(g!==void 0&&g!=="@type"){for(let m=c-1;m>0;m--)if(typeof u[m]!="number"){g=await a.unaliasKeyword(u[m],u,m);break}const p=await o.getContext(u.slice(0,-1));if("@list"in e.Util.getContextValueContainer(p,g)){o.emittedStack[c+1]=!0;const m=await a.valueToTerm(await o.getContext(u),g,f,c,u);for(const _ of m)await this.handleListElement(o,a,_,f,c,u.slice(0,-1),c-1);m.length===0&&await this.handleListElement(o,a,null,f,c,u.slice(0,-1),c-1)}else o.shiftStack(c,1),await o.newOnValueJob(u.slice(0,-1),f,c-1,!1),o.contextTree.removeContext(u.slice(0,-1))}}async handleListElement(o,a,s,u,f,c,g){let p=o.listPointerStack[f];if(u!==null&&(await a.unaliasKeywords(u,c,f))["@value"]!==null){if(!p||!p.value){const m=a.dataFactory.blankNode();p={value:m,listRootDepth:g,listId:m}}else{const m=a.dataFactory.blankNode();o.emitQuad(f,a.dataFactory.quad(p.value,a.rdfRest,m,a.getDefaultGraph())),p.value=m}s&&o.emitQuad(f,a.dataFactory.quad(p.value,a.rdfFirst,s,a.getDefaultGraph()))}else p||(p={listRootDepth:g,listId:a.rdfNil});o.listPointerStack[f]=p,o.rdfstar&&o.annotationsBuffer[f]&&o.emitError(new t.ErrorCoded("Found an illegal annotation inside a list",t.ERROR_CODES.INVALID_ANNOTATION))}};return ku.EntryHandlerArrayValue=r,ku}var Ju={},Sb;function Ck(){if(Sb)return Ju;Sb=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.EntryHandlerInvalidFallback=void 0;let e=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(r,n,o,a,s){return!1}async test(r,n,o,a,s){return!0}async handle(r,n,o,a,s,u){r.emittedStack[u]=!1}};return Ju.EntryHandlerInvalidFallback=e,Ju}var Xu={},Qu={},Eb;function Ws(){if(Eb)return Qu;Eb=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.EntryHandlerKeyword=void 0;let e=class{constructor(r){this.keyword=r}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(r,n,o,a,s){return!1}async test(r,n,o,a,s){return o===this.keyword}};return Qu.EntryHandlerKeyword=e,Qu}var bb;function Tk(){if(bb)return Xu;bb=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.EntryHandlerKeywordContext=void 0;const e=xi(),t=Ws();let r=class extends t.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(o,a,s,u,f,c){o.streamingProfile&&(o.processingStack[c]||o.processingType[c]||o.idStack[c]!==void 0)&&o.emitError(new e.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",e.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const g=o.getContext(u),p=o.parseContext(f,(await g).getContextRaw());o.contextTree.setContext(u.slice(0,-1),p),o.emitContext(f),await o.validateContext(await p)}};return Xu.EntryHandlerKeywordContext=r,Xu}var Yu={},Ab;function Pk(){if(Ab)return Yu;Ab=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.EntryHandlerKeywordGraph=void 0;const e=Ws();let t=class extends e.EntryHandlerKeyword{constructor(){super("@graph")}async handle(n,o,a,s,u,f){n.graphStack[f+1]=!0}};return Yu.EntryHandlerKeywordGraph=t,Yu}var Zu={},Rb;function Ik(){if(Rb)return Zu;Rb=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.EntryHandlerKeywordId=void 0;const e=xi(),t=Ws();let r=class extends t.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(o,a,s,u,f,c){if(typeof f!="string"){if(o.rdfstar&&typeof f=="object"){const p=Object.keys(f);p.length===1&&p[0]==="@id"&&o.emitError(new e.ErrorCoded(`Invalid embedded node without property with @id ${f["@id"]}`,e.ERROR_CODES.INVALID_EMBEDDED_NODE))}else o.emitError(new e.ErrorCoded(`Found illegal @id '${f}'`,e.ERROR_CODES.INVALID_ID_VALUE));return}const g=await a.getPropertiesDepth(u,c);if(o.idStack[g]!==void 0&&(o.idStack[g][0].listHead?o.emitError(new e.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${u[c-1]}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):o.emitError(new e.ErrorCoded(`Found duplicate @ids '${o.idStack[g][0].value}' and '${f}'`,e.ERROR_CODES.COLLIDING_KEYWORDS))),o.rdfstar&&o.annotationsBuffer[c])for(const p of o.annotationsBuffer[c])p.depth===c&&o.emitError(new e.ErrorCoded(`Found an illegal @id inside an annotation: ${f}`,e.ERROR_CODES.INVALID_ANNOTATION));o.idStack[g]=a.nullableTermToArray(await a.resourceToTerm(await o.getContext(u),f))}};return Zu.EntryHandlerKeywordId=r,Zu}var ec={},xb;function Fk(){if(xb)return ec;xb=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.EntryHandlerKeywordIncluded=void 0;const e=xi(),t=Ws();let r=class extends t.EntryHandlerKeyword{constructor(){super("@included")}async handle(o,a,s,u,f,c){typeof f!="object"&&o.emitError(new e.ErrorCoded(`Found illegal @included '${f}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE));const g=await a.unaliasKeywords(f,u,c,await o.getContext(u));"@value"in g&&o.emitError(new e.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in g&&o.emitError(new e.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE)),o.emittedStack[c]=!1}};return ec.EntryHandlerKeywordIncluded=r,ec}var tc={},Cb;function Ok(){if(Cb)return tc;Cb=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.EntryHandlerKeywordNest=void 0;const e=xi(),t=Ws();let r=class extends t.EntryHandlerKeyword{constructor(){super("@nest")}async handle(o,a,s,u,f,c){typeof f!="object"&&o.emitError(new e.ErrorCoded(`Found invalid @nest entry for '${s}': '${f}'`,e.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await a.unaliasKeywords(f,u,c,await o.getContext(u))&&o.emitError(new e.ErrorCoded(`Found an invalid @value node for '${s}'`,e.ERROR_CODES.INVALID_NEST_VALUE)),o.emittedStack[c]=!1}};return tc.EntryHandlerKeywordNest=r,tc}var rc={},Tb;function Nk(){if(Tb)return rc;Tb=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.EntryHandlerKeywordType=void 0;const e=xi(),t=Fa(),r=kp(),n=Ws();let o=class extends n.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(s,u,f,c,g,p){const m=c[p],_=await s.getContext(c),C=u.rdfType,R=await u.unaliasKeywordParent(c,p),I=t.Util.isPropertyReverse(_,m,R),S=t.Util.isPropertyInEmbeddedNode(R);u.validateReverseInEmbeddedNode(f,I,S);const b=t.Util.isPropertyInAnnotationObject(R),T=Array.isArray(g)?g:[g];for(const $ of T){typeof $!="string"&&s.emitError(new e.ErrorCoded(`Found illegal @type '${$}'`,e.ERROR_CODES.INVALID_TYPE_VALUE));const F=u.createVocabOrBaseTerm(_,$);F&&await r.EntryHandlerPredicate.handlePredicateObject(s,u,c,p,C,F,I,S,b)}let B=Promise.resolve(_),H=!1;for(const $ of T.sort()){const F=t.Util.getContextValue(_,"@context",$,null);F&&(H=!0,B=B.then(ne=>s.parseContext(F,ne.getContextRaw())))}s.streamingProfile&&(H||!s.streamingProfileAllowOutOfOrderPlainType)&&(s.processingStack[p]||s.idStack[p])&&s.emitError(new e.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",e.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),H&&(B=B.then($=>("@propagate"in $.getContextRaw()||($.getContextRaw()["@propagate"]=!1),$.getContextRaw()["@propagate"]===!1&&($.getContextRaw()["@__propagateFallback"]=_.getContextRaw()),$)),s.contextTree.setContext(c.slice(0,c.length-1),B)),s.processingType[p]=!0}};return rc.EntryHandlerKeywordType=o,rc}var nc={},Pb;function kk(){if(Pb)return nc;Pb=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.EntryHandlerKeywordUnknownFallback=void 0;const e=xi();let t=class uT{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(n,o,a,s,u){const f=await o.unaliasKeyword(a[s],a,s);return e.Util.isPotentialKeyword(f)?!(!u&&f==="@list"):!1}async test(n,o,a,s,u){return e.Util.isPotentialKeyword(a)}async handle(n,o,a,s,u,f){const c=uT.VALID_KEYWORDS_TYPES[a];c!==void 0?c&&typeof u!==c.type&&n.emitError(new e.ErrorCoded(`Invalid value type for '${a}' with value '${u}'`,c.errorCode)):n.strictValues&&n.emitError(new Error(`Unknown keyword '${a}' with value '${u}'`)),n.emittedStack[f]=!1}};return nc.EntryHandlerKeywordUnknownFallback=t,t.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:e.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:e.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},nc}var ic={},Ib;function Dk(){if(Ib)return ic;Ib=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.EntryHandlerKeywordValue=void 0;const e=Ws();let t=class extends e.EntryHandlerKeyword{constructor(){super("@value")}async validate(n,o,a,s,u){const f=a[s];return f&&!n.literalStack[s]&&await this.test(n,o,f,a,s)&&(n.literalStack[s]=!0),super.validate(n,o,a,s,u)}async test(n,o,a,s,u){return await o.unaliasKeyword(s[u],s.slice(0,s.length-1),u-1,!0)==="@value"}async handle(n,o,a,s,u,f){n.literalStack[f]=!0,delete n.unidentifiedValuesBuffer[f],delete n.unidentifiedGraphsBuffer[f],n.emittedStack[f]=!1}};return ic.EntryHandlerKeywordValue=t,ic}var oc={},sc={},Fb;function Lk(){if(Fb)return sc;Fb=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.ContextTree=void 0;let e=class cT{constructor(){this.subTrees={}}getContext(r){if(r.length>0){const[n,...o]=r,a=this.subTrees[n];if(a){const s=a.getContext(o);if(s)return s.then(({context:u,depth:f})=>({context:u,depth:f+1}))}}return this.context?this.context.then(n=>({context:n,depth:0})):null}setContext(r,n){if(r.length===0)this.context=n;else{const[o,...a]=r;let s=this.subTrees[o];s||(s=this.subTrees[o]=new cT),s.setContext(a,n)}}removeContext(r){this.setContext(r,null)}};return sc.ContextTree=e,sc}var Ob;function Uk(){if(Ob)return oc;Ob=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.ParsingContext=void 0;const e=xi(),t=hd(),r=Lk(),n=fT();let o=class dT{constructor(s){this.contextParser=new e.ContextParser({documentLoader:s.documentLoader,skipValidation:s.skipContextValidation}),this.streamingProfile=!!s.streamingProfile,this.baseIRI=s.baseIRI,this.produceGeneralizedRdf=!!s.produceGeneralizedRdf,this.allowSubjectList=!!s.allowSubjectList,this.processingMode=s.processingMode||n.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!s.strictValues,this.validateValueIndexes=!!s.validateValueIndexes,this.defaultGraph=s.defaultGraph,this.rdfDirection=s.rdfDirection,this.normalizeLanguageTags=s.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=s.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=s.rdfstar!==!1,this.rdfstarReverseInEmbedded=s.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new r.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=s.parser,s.context?(this.rootContext=this.parseContext(s.context),this.rootContext.then(u=>this.validateContext(u))):this.rootContext=Promise.resolve(new e.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(s,u,f){return this.contextParser.parse(s,{baseIRI:this.baseIRI,ignoreProtection:f,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:u,processingMode:this.activeProcessingMode})}validateContext(s){const u=s.getContextRaw()["@version"];if(u){if(this.activeProcessingMode&&u>this.activeProcessingMode)throw new t.ErrorCoded(`Unsupported JSON-LD version '${u}' under active processing mode ${this.activeProcessingMode}.`,t.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&u<this.activeProcessingMode)throw new t.ErrorCoded(`Invalid JSON-LD version ${u} under active processing mode ${this.activeProcessingMode}.`,t.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=u}}async getContext(s,u=1){const f=s;for(;typeof s[s.length-1]=="number";)s=s.slice(0,s.length-1);u&&(s=s.slice(0,-u));const c=await this.getContextPropagationAware(s);let p=c.context.getContextRaw();for(let m=c.depth;m<f.length-u;m++){const _=f[m],C=p[_];if(C&&typeof C=="object"&&"@context"in C){const R=(await this.parseContext(C,p,!0)).getContextRaw(),I=!(_ in R)||R[_]["@context"]["@propagate"];(I!==!1||m===f.length-1-u)&&(p=R,delete p["@propagate"],p[_]=Object.assign({},p[_]),"@id"in C&&(p[_]["@id"]=C["@id"]),delete p[_]["@context"],I!==!1&&this.contextTree.setContext(f.slice(0,m+u),Promise.resolve(new e.JsonLdContextNormalized(p))))}}return new e.JsonLdContextNormalized(p)}async getContextPropagationAware(s){const u=s.length;let f=null,c;do{c=!1,f&&"@__propagateFallback"in f.context.getContextRaw()?f.context=new e.JsonLdContextNormalized(f.context.getContextRaw()["@__propagateFallback"]):(f&&(s=s.slice(0,f.depth-1)),f=await this.contextTree.getContext(s)||{context:await this.rootContext,depth:0});const g=s[s.length-1];if(g in f.context.getContextRaw()){const p=f.context.getContextRaw()[g];p&&typeof p=="object"&&"@context"in p&&(c=!0)}}while(f.depth>0&&f.context.getContextRaw()["@propagate"]===!1&&f.depth!==u&&!c);return f.depth===0&&f.context.getContextRaw()["@propagate"]===!1&&f.depth!==u&&(f.context=new e.JsonLdContextNormalized({})),f}async newOnValueJob(s,u,f,c){await this.parser.newOnValueJob(s,u,f,c)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const s of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(s.depth,s.keys),this.parser.flushStacks(s.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(s,u){s===1&&(this.topLevelProperties=!0),this.parser.push(u)}emitError(s){this.parser.emit("error",s)}emitContext(s){this.parser.emit("context",s)}getUnidentifiedValueBufferSafe(s){let u=this.unidentifiedValuesBuffer[s];return u||(u=[],this.unidentifiedValuesBuffer[s]=u),u}getUnidentifiedGraphBufferSafe(s){let u=this.unidentifiedGraphsBuffer[s];return u||(u=[],this.unidentifiedGraphsBuffer[s]=u),u}getAnnotationsBufferSafe(s){let u=this.annotationsBuffer[s];return u||(u=[],this.annotationsBuffer[s]=u),u}getExpandOptions(){return dT.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(s,u){const f=this.idStack[s+u];if(f&&(this.idStack[s]=f,this.emittedStack[s]=!0,delete this.idStack[s+u]),this.pendingContainerFlushBuffers.length)for(const c of this.pendingContainerFlushBuffers)c.depth>=s+u&&(c.depth-=u,c.keys.splice(s,u));this.unidentifiedValuesBuffer[s+u]&&(this.unidentifiedValuesBuffer[s]=this.unidentifiedValuesBuffer[s+u],delete this.unidentifiedValuesBuffer[s+u]),this.annotationsBuffer[s+u-1]&&(this.annotationsBuffer[s-1]||(this.annotationsBuffer[s-1]=[]),this.annotationsBuffer[s-1]=[...this.annotationsBuffer[s-1],...this.annotationsBuffer[s+u-1]],delete this.annotationsBuffer[s+u-1])}};return oc.ParsingContext=o,o.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},oc}var ac={},Nb;function Mk(){if(Nb)return ac;Nb=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.EntryHandlerKeywordAnnotation=void 0;const e=Ws(),t=xi();let r=class extends e.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(o,a,s,u,f,c){(typeof f=="string"||typeof f=="object"&&f["@value"])&&o.emitError(new t.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(f)}`,t.ERROR_CODES.INVALID_ANNOTATION))}};return ac.EntryHandlerKeywordAnnotation=r,ac}var kb;function fT(){if(kb)return Tu;kb=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.JsonLdParser=void 0;const e=ak(),t=xi(),r=tT(),n=xk(),o=lT(),a=Ck(),s=kp(),u=Tk(),f=Pk(),c=Ik(),g=Fk(),p=Ok(),m=Nk(),_=kk(),C=Dk(),R=Uk(),I=Fa(),S=Gv(),b=Mk();let T=class yl extends r.Transform{constructor(H){super({readableObjectMode:!0}),H=H||{},this.options=H,this.parsingContext=new R.ParsingContext(Object.assign({parser:this},H)),this.util=new I.Util({dataFactory:H.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new e,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(H,$,F,ne){let Y;if($!=="application/ld+json"){if($!=="application/json"&&!$.endsWith("+json"))throw new t.ErrorCoded(`Unsupported JSON-LD media type ${$}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(F&&F.has("Link")&&F.forEach((J,Le)=>{if(Le==="link"){const Ue=(0,S.parse)(J);for(const je of Ue.get("rel","http://www.w3.org/ns/json-ld#context")){if(Y)throw new t.ErrorCoded("Multiple JSON-LD context link headers were found on "+H,t.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);Y=je.uri}}}),!Y&&!(ne!=null&&ne.ignoreMissingContextLinkHeader))throw new t.ErrorCoded(`Missing context link header for media type ${$} on ${H}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let M;if(F&&F.has("Content-Type")){const J=F.get("Content-Type"),Le=/; *profile=([^"]*)/.exec(J);Le&&Le[1]==="http://www.w3.org/ns/json-ld#streaming"&&(M=!0)}return new yl(Object.assign({baseIRI:H,context:Y,streamingProfile:M},ne||{}))}import(H){if("pipe"in H){H.on("error",F=>$.emit("error",F));const $=H.pipe(new yl(this.options));return $}else{const $=new r.PassThrough({readableObjectMode:!0});H.on("error",ne=>F.emit("error",ne)),H.on("data",ne=>$.push(ne)),H.on("end",()=>$.push(null));const F=$.pipe(new yl(this.options));return F}}_transform(H,$,F){this.jsonParser.write(H),this.lastOnValueJob.then(()=>F(),ne=>F(ne))}async newOnValueJob(H,$,F,ne){let Y=!0;if(ne&&F<this.lastDepth){const je=this.parsingContext.listPointerStack[this.lastDepth];je&&(je.value&&this.push(this.util.dataFactory.quad(je.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),je.listId.listHead=!0,this.parsingContext.idStack[je.listRootDepth+1]=[je.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await o.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),Y=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const M=await this.util.unaliasKeyword(H[F],H,F),J=await this.util.unaliasKeywordParent(H,F);this.parsingContext.emittedStack[F]=!0;let Le=!0;t.Util.isValidKeyword(M)&&J==="@reverse"&&M!=="@context"&&this.emit("error",new t.ErrorCoded(`Found the @id '${$}' inside an @reverse property`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let Ue=!1;this.parsingContext.validationStack.length>1&&(Ue=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let je=Math.max(1,this.parsingContext.validationStack.length-1);je<H.length-1;je++){const nt=this.parsingContext.validationStack[je]||(this.parsingContext.validationStack[je]=await this.validateKey(H.slice(0,je+1),je,Ue));if(nt.valid)!Ue&&nt.property&&(Ue=!0);else{this.parsingContext.emittedStack[F]=!1,Le=!1;break}}if(await this.util.isLiteral(H,F)&&(Le=!1),Le)for(const je of yl.ENTRY_HANDLERS){const nt=await je.test(this.parsingContext,this.util,M,H,F);if(nt){await je.handle(this.parsingContext,this.util,M,H,$,F,nt),je.isStackProcessor()&&(this.parsingContext.processingStack[F]=!0);break}}F===0&&Array.isArray($)&&await this.util.validateValueIndexes($),Y&&F<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=F,this.lastKeys=H,this.parsingContext.unaliasedKeywordCacheStack.splice(F-1)}flushStacks(H){this.parsingContext.processingStack.splice(H,1),this.parsingContext.processingType.splice(H,1),this.parsingContext.emittedStack.splice(H,1),this.parsingContext.idStack.splice(H,1),this.parsingContext.graphStack.splice(H+1,1),this.parsingContext.graphContainerTermStack.splice(H,1),this.parsingContext.jsonLiteralStack.splice(H,1),this.parsingContext.validationStack.splice(H-1,2),this.parsingContext.literalStack.splice(H,this.parsingContext.literalStack.length-H),this.parsingContext.annotationsBuffer.splice(H,1)}async flushBuffer(H,$){let F=this.parsingContext.idStack[H];!!F||(F=this.parsingContext.idStack[H]=[this.util.dataFactory.blankNode()]);const Y=this.parsingContext.unidentifiedValuesBuffer[H];if(Y){for(const Le of F){const Ue=await this.util.getDepthOffsetGraph(H,$),je=this.parsingContext.graphStack[H]||Ue>=0?this.parsingContext.idStack[H-Ue-1]:[await this.util.getGraphContainerValue($,H)];if(je)for(const nt of je){this.parsingContext.emittedStack[H]=!0;for(const ke of Y)this.util.emitQuadChecked(H,Le,ke.predicate,ke.object,nt,ke.reverse,ke.isEmbedded)}else{const nt=this.parsingContext.getUnidentifiedGraphBufferSafe(H-await this.util.getDepthOffsetGraph(H,$)-1);for(const ke of Y)ke.reverse?nt.push({object:Le,predicate:ke.predicate,subject:ke.object,isEmbedded:ke.isEmbedded}):nt.push({object:ke.object,predicate:ke.predicate,subject:Le,isEmbedded:ke.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(H,1),this.parsingContext.literalStack.splice(H,1),this.parsingContext.jsonLiteralStack.splice(H,1)}const M=this.parsingContext.unidentifiedGraphsBuffer[H];if(M){for(const Le of F){const Ue=H===1&&Le.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():Le;this.parsingContext.emittedStack[H]=!0;for(const je of M)this.parsingContext.emitQuad(H,this.util.dataFactory.quad(je.subject,je.predicate,je.object,Ue))}this.parsingContext.unidentifiedGraphsBuffer.splice(H,1)}const J=this.parsingContext.annotationsBuffer[H];if(J){J.length>0&&H===1&&this.parsingContext.emitError(new t.ErrorCoded("Annotations can not be made on top-level nodes",t.ERROR_CODES.INVALID_ANNOTATION));const Le=this.parsingContext.getAnnotationsBufferSafe(H-1);for(const Ue of J)Le.push(Ue);delete this.parsingContext.annotationsBuffer[H]}}async validateKey(H,$,F){for(const ne of yl.ENTRY_HANDLERS)if(await ne.validate(this.parsingContext,this.util,H,$,F))return{valid:!0,property:F||ne.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=H=>{const $=this.jsonParser.stack.length,F=new Array($+1).fill(0).map((ne,Y)=>Y===$?this.jsonParser.key:this.jsonParser.stack[Y].key);if(!this.isParsingContextInner($)){const ne=()=>this.newOnValueJob(F,H,$,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(F.slice(0,-1)))if(F[$]==="@context"){let Y=this.contextJobs[$];Y||(Y=this.contextJobs[$]=[]),Y.push(ne)}else F[$]==="@type"||typeof F[$]=="number"&&F[$-1]==="@type"?this.typeJobs.push({job:ne,keys:F.slice(0,F.length-1)}):this.contextAwaitingJobs.push({job:ne,keys:F});else this.lastOnValueJob=this.lastOnValueJob.then(ne);!this.parsingContext.streamingProfile&&$===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=H=>{this.emit("error",H)}}isParsingContextInner(H){for(let $=H;$>0;$--)if(this.jsonParser.stack[$-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const H of this.contextJobs)if(H)for(const $ of H)await $();this.parsingContext.unaliasedKeywordCacheStack.splice(0);for(const H of this.contextAwaitingJobs){if(this.typeJobs.length>0){const $=[],F=[];for(let M=0;M<this.typeJobs.length;M++){const J=this.typeJobs[M];I.Util.isPrefixArray(J.keys,H.keys)&&($.push(J),F.push(M))}const ne=$.sort((M,J)=>M.keys.length-J.keys.length);for(const M of ne)await M.job();const Y=F.sort().reverse();for(const M of Y)this.typeJobs.splice(M,1)}await H.job()}}};return Tu.JsonLdParser=T,T.DEFAULT_PROCESSING_MODE="1.1",T.ENTRY_HANDLERS=[new n.EntryHandlerArrayValue,new u.EntryHandlerKeywordContext,new c.EntryHandlerKeywordId,new g.EntryHandlerKeywordIncluded,new f.EntryHandlerKeywordGraph,new p.EntryHandlerKeywordNest,new m.EntryHandlerKeywordType,new C.EntryHandlerKeywordValue,new b.EntryHandlerKeywordAnnotation,new o.EntryHandlerContainer,new _.EntryHandlerKeywordUnknownFallback,new s.EntryHandlerPredicate,new a.EntryHandlerInvalidFallback],Tu}var Db;function Bk(){return Db||(Db=1,function(e){var t=cn&&cn.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(n,s,u)}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=cn&&cn.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(fT(),e)}(Py)),Py}var gs={},Lb;function Oa(){if(Lb)return gs;Lb=1,Object.defineProperty(gs,"__esModule",{value:!0});var e=globalThis.fetch;const{fetch:t,Response:r,Request:n,Headers:o}=globalThis;return gs.Headers=o,gs.Request=n,gs.Response=r,gs.default=e,gs.fetch=t,gs}const lc="http://www.w3.org/1999/02/22-rdf-syntax-ns#",uc="http://www.w3.org/2001/XMLSchema#",f0="http://www.w3.org/2000/10/swap/",pi={xsd:{decimal:`${uc}decimal`,boolean:`${uc}boolean`,double:`${uc}double`,integer:`${uc}integer`,string:`${uc}string`},rdf:{type:`${lc}type`,nil:`${lc}nil`,first:`${lc}first`,rest:`${lc}rest`,langString:`${lc}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${f0}reify#forSome`,forAll:`${f0}reify#forAll`},log:{implies:`${f0}log#implies`}};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Ub;var Hk=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:cn):e=>(Ub||(Ub=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const jk=JA(Hk),{xsd:Qf}=pi,$k=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Mb={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Vk=/[\x00-\x20<>\\"\{\}\|\^\`]/,Kk={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Wk=/$0^/;class Zv{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode){this._n3Mode=!1;for(const r in this)!(r in Kk)&&this[r]instanceof RegExp&&(this[r]=Wk)}else this._n3Mode=t.n3!==!1;this._comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,r){let n=this._input,o=n.length;for(;;){let u,f;for(;u=this._newline.exec(n);)this._comments&&(f=this._comment.exec(u[0]))&&a("comment",f[1],"",this._line,u[0].length),n=n.substr(u[0].length,n.length),o=n.length,this._line++;if(!u&&(u=this._whitespace.exec(n))&&(n=n.substr(u[0].length,n.length)),this._endOfFile.test(n))return r&&(this._comments&&(f=this._comment.exec(n))&&a("comment",f[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const c=this._line,g=n[0];let p="",m="",_="",C=null,R=0,I=!1;switch(g){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){I=!0;break}}else{this._n3Mode&&(R=1,p="^");break}case"<":if(C=this._unescapedIri.exec(n))p="IRI",m=C[1];else if(C=this._iri.exec(n)){if(m=this._unescape(C[1]),m===null||Vk.test(m))return s(this);p="IRI"}else n.length>1&&n[1]==="<"?(p="<<",R=2):this._n3Mode&&n.length>1&&n[1]==="="&&(p="inverse",R=2,m=">");break;case">":n.length>1&&n[1]===">"&&(p=">>",R=2);break;case"_":((C=this._blank.exec(n))||r&&(C=this._blank.exec(`${n} `)))&&(p="blank",_="_",m=C[1]);break;case'"':if(C=this._simpleQuotedString.exec(n))m=C[1];else if({value:m,matchLength:R}=this._parseLiteral(n),m===null)return s(this);(C!==null||R!==0)&&(p="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(C=this._simpleApostropheString.exec(n))m=C[1];else if({value:m,matchLength:R}=this._parseLiteral(n),m===null)return s(this);(C!==null||R!==0)&&(p="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(C=this._variable.exec(n))&&(p="var",m=C[0]);break;case"@":this._previousMarker==="literal"&&(C=this._langcode.exec(n))?(p="langcode",m=C[1]):(C=this._keyword.exec(n))&&(p=C[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){p=".",R=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(C=this._number.exec(n)||r&&(C=this._number.exec(`${n} `)))&&(p="literal",m=C[0],_=typeof C[1]=="string"?Qf.double:typeof C[2]=="string"?Qf.decimal:Qf.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(C=this._sparqlKeyword.exec(n))?p=C[0].toUpperCase():I=!0;break;case"f":case"t":(C=this._boolean.exec(n))?(p="literal",m=C[0],_=Qf.boolean):I=!0;break;case"a":(C=this._shortPredicates.exec(n))?(p="abbreviation",m="a"):I=!0;break;case"=":this._n3Mode&&n.length>1&&(p="abbreviation",n[1]!==">"?(R=1,m="="):(R=2,m=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(R=1,p=g);break;default:I=!0}if(I&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(C=this._prefix.exec(n))?(p="prefix",m=C[1]||""):((C=this._prefixed.exec(n))||r&&(C=this._prefixed.exec(`${n} `)))&&(p="prefixed",_=C[1]||"",m=this._unescape(C[2]))),this._previousMarker==="^^")switch(p){case"prefixed":p="type";break;case"IRI":p="typeIRI";break;default:p=""}if(!p)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?s(this):this._input=n;const S=R||C[0].length,b=a(p,m,_,c,S);this.previousToken=b,this._previousMarker=p,n=n.substr(S,n.length)}function a(u,f,c,g,p){const m=n?o-n.length:o,_=m+p,C={type:u,value:f,prefix:c,line:g,start:m,end:_};return t(null,C),C}function s(u){t(u._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(t){let r=!1;const n=t.replace($k,(o,a,s,u)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let f=Number.parseInt(s,16);return f<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((f-=65536)>>10),56320+(f&1023))}return u in Mb?Mb[u]:(r=!0,"")});return r?null:n}_parseLiteral(t){if(t.length>=3){const r=t.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let o=Math.max(this._literalClosingPos,n);for(;(o=t.indexOf(r,o))>0;){let a=0;for(;t[o-a-1]==="\\";)a++;if(a%2===0){const s=t.substring(n,o),u=s.split(/\r\n|\r|\n/).length-1,f=o+n;if(n===1&&u!==0||n===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(s),matchLength:f}}o++}this._literalClosingPos=t.length-n+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;const r=new Error(`Unexpected "${t}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(t){return t.startsWith("\uFEFF")?t.substr(1):t}tokenize(t,r){if(this._line=1,typeof t=="string")if(this._input=this._readStartingBom(t),typeof r=="function")jk(()=>this._tokenizeToEnd(r,!0));else{const n=[];let o;if(this._tokenizeToEnd((a,s)=>a?o=a:n.push(s),!0),o)throw o;return n}else this._pendingBuffer=null,typeof t.setEncoding=="function"&&t.setEncoding("utf8"),t.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),t.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),t.on("error",r)}}function Gk(e){return!!e&&e.termType==="NamedNode"}function qk(e){return!!e&&e.termType==="BlankNode"}function zk(e){return!!e&&e.termType==="Literal"}function Jk(e){return!!e&&e.termType==="Variable"}function Dp(e){return!!e&&e.termType==="DefaultGraph"}function Xk(e){return Dp(e.graph)}function Qk(e,t){return hT({"":e.value||e},t)("")}function hT(e,t){const r=Object.create(null);for(const o in e)n(o,e[o]);t=t||Jl;function n(o,a){if(typeof a=="string"){const s=Object.create(null);r[o]=u=>s[u]||(s[u]=t.namedNode(a+u))}else if(!(o in r))throw new Error(`Unknown prefix: ${o}`);return r[o]}return n}const pT=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:Xk,isBlankNode:qk,isDefaultGraph:Dp,isLiteral:zk,isNamedNode:Gk,isVariable:Jk,prefix:Qk,prefixes:hT},Symbol.toStringTag,{value:"Module"})),{rdf:Yk,xsd:pa}=pi;let gd,Zk=0;const gT=/^"(.*".*)(?="[^"]*$)/,eD=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,Um={namedNode:tD,blankNode:rD,variable:iD,literal:nD,defaultGraph:oD,quad:Bb,triple:Bb},Jl=Um;class yo{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof yo?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Lp extends yo{get termType(){return"NamedNode"}}class Ds extends yo{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const t=this.id;let r=t.lastIndexOf('"')+1;return r<t.length&&t[r++]==="@"?t.substr(r).toLowerCase():""}get datatype(){return new Lp(this.datatypeString)}get datatypeString(){const t=this.id,r=t.lastIndexOf('"')+1,n=r<t.length?t[r]:"";return n==="^"?t.substr(r+2):n!=="@"?pa.string:Yk.langString}equals(t){return t instanceof Ds?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class ew extends yo{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class tw extends yo{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class rw extends yo{constructor(){return super(""),gd||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}}gd=new rw;function Ro(e,t){if(t=t||Um,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===Um)return new Ds(e);if(e[e.length-1]==='"')return t.literal(e.substr(1,e.length-2));const r=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,r-1),e[r+1]==="@"?e.substr(r+2):t.namedNode(e.substr(r+3)));case"<":const n=eD.exec(e);return t.quad(Ro(Yf(n[1]),t),Ro(Yf(n[2]),t),Ro(Yf(n[3]),t),n[4]&&Ro(Yf(n[4]),t));default:return t.namedNode(e)}}function on(e){if(typeof e=="string")return e;if(e instanceof yo&&e.termType!=="Quad")return e.id;if(!e)return gd.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==pa.string?`^^${e.datatype.value}`:""}`;case"Quad":return`<<${h0(on(e.subject))} ${h0(on(e.predicate))} ${h0(on(e.object))}${Dp(e.graph)?"":` ${on(e.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${e.termType}`)}}class id extends yo{constructor(t,r,n,o){super(""),this._subject=t,this._predicate=r,this._object=n,this._graph=o||gd}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}}function h0(e){return e.replace(gT,(t,r)=>`"${r.replace(/"/g,'""')}`)}function Yf(e){return e.replace(gT,(t,r)=>`"${r.replace(/""/g,'"')}`)}function tD(e){return new Lp(e)}function rD(e){return new ew(e||`n3-${Zk++}`)}function nD(e,t){if(typeof t=="string")return new Ds(`"${e}"@${t.toLowerCase()}`);let r=t?t.value:"";return r===""&&(typeof e=="boolean"?r=pa.boolean:typeof e=="number"&&(Number.isFinite(e)?r=Number.isInteger(e)?pa.integer:pa.double:(r=pa.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),r===""||r===pa.string?new Ds(`"${e}"`):new Ds(`"${e}"^^${r}`)}function iD(e){return new tw(e)}function oD(){return gd}function Bb(e,t,r,n){return new id(e,t,r,n)}let Hb=0;class Up{constructor(t){this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&yT(this,t.factory);const r=typeof t.format=="string"?t.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),o=/trig/.test(r),a=/triple/.test(r),s=/quad/.test(r),u=this._n3Mode=/n3/.test(r),f=a||s;(this._supportsNamedGraphs=!(n||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||o||a||u),this._supportsRDFStar=r===""||/star|\*$/.test(r),f&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix=typeof t.blankNodePrefix!="string"?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new Zv({lineMode:f,n3:u}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){Hb=0}_setBase(t){if(!t)this._base="",this._basePath="";else{const r=t.indexOf("#");r>=0&&(t=t.substr(0,r)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}}_saveContext(t,r,n,o,a){const s=this._n3Mode;this._contextStack.push({type:t,subject:n,predicate:o,object:a,graph:r,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,r){const n=this._contextStack.pop();if(!n||n.type!==t)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(t){switch(t.type){case"eof":return this._graph!==null?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,r){let n;switch(t.type){case"IRI":case"typeIRI":const o=this._resolveIRI(t.value);if(o===null)return this._error("Invalid IRI",t);n=this._namedNode(o);break;case"type":case"prefixed":const a=this._prefixes[t.prefix];if(a===void 0)return this._error(`Undefined prefix "${t.prefix}:"`,t);n=this._namedNode(a+t.value);break;case"blank":n=this._blankNode(this._prefixes[t.prefix]+t.value);break;case"var":n=this._variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(t.prefix.length===0)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._literal(t.value,this._namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if((this._subject=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){const r=t.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,t):(this._subject=null,r==="]"?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if((this._predicate=this._readEntity(t))===void 0)return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(t.prefix.length===0)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._literal(t.value,this._namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if((this._object=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return t.type==="{"?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return t.type!=="{"?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return t.type==="]"?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if(t.type!=="]")return this._readBlankNodePunctuation(t);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",t),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let r=null,n=null,o=this._readListItem;const a=this._subject,s=this._contextStack,u=s[s.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),o=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(o=this._readPredicate,this._subject===this.RDF_NIL)return o}else if(o=this._getContextEndReader(),this._object===this.RDF_NIL)return o;n=this.RDF_NIL;break;case"literal":t.prefix.length===0?(this._literalValue=t.value,o=this._readListItemDataTypeOrLang):(r=this._literal(t.value,this._namedNode(t.prefix)),o=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if((r=this._readEntity(t))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),a===null?u.predicate===null?u.subject=n:u.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(t.type==="IRI"||t.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return o}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let r=this._literal(this._literalValue);switch(t.type){case"type":case"typeIRI":const n=this._readEntity(t);if(n===void 0)return;r=this._literal(this._literalValue,n),t=null;break;case"langcode":r=this._literal(this._literalValue,t.value),t=null;break}return{token:t,literal:r}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,r){const n=this._completeLiteral(t);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(t){return t.type!=="}"?this._readPunctuation(t):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let r,n=this._graph;const o=this._subject,a=this._inversePredicate;switch(t.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,a&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(t))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(o!==null){const s=this._predicate,u=this._object;a?this._emit(u,s,o,n):this._emit(o,s,u,n)}return r}_readBlankNodePunctuation(t){let r;switch(t.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(t){return t.type!=="."?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return t.type!=="prefix"?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if(t.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);const r=this._readEntity(t);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(t){const r=t.type==="IRI"&&this._resolveIRI(t.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return t.type!=="]"?this._error("Invalid graph label",t):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):t.type!=="."?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let r;switch(t.type){case"IRI":case"prefixed":if((r=this._readEntity(t,!0))!==void 0)break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return t.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const o=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,o,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let r,n;const o=this._blankNode();if((n=this._readEntity(t))!==void 0)return this._predicate===null?(r=this._subject,this._subject=o):(r=this._object,this._object=o),this._emit(r,n,o,this._graph),this._readPath}_readBackwardPath(t){const r=this._blankNode();let n,o;if((n=this._readEntity(t))!==void 0)return this._predicate===null?(o=this._subject,this._subject=r):(o=this._object,this._object=r),this._emit(r,n,o,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return t.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(t))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(t.type!==">>")return this._error(`Expected >> but got ${t.type}`,t);const r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,r,n,o){this._callback(null,this._quad(t,r,n,o||this.DEFAULTGRAPH))}_error(t,r){const n=new Error(`${t} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=p0}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return(t[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;const r=t.length;let n="",o=-1,a=-1,s=0,u="/";for(;o<r;){switch(u){case":":if(a<0&&t[++o]==="/"&&t[++o]==="/")for(;(a=o+1)<r&&t[a]!=="/";)o=a;break;case"?":case"#":o=r;break;case"/":if(t[o+1]===".")switch(u=t[++o+1],u){case"/":n+=t.substring(s,o-1),s=o+1;break;case void 0:case"?":case"#":return n+t.substring(s,o)+t.substr(o+1);case".":if(u=t[++o+1],u===void 0||u==="/"||u==="?"||u==="#"){if(n+=t.substring(s,o-2),(s=n.lastIndexOf("/"))>=a&&(n=n.substr(0,s)),u!=="/")return`${n}/${t.substr(o+1)}`;s=o+1}}}u=t[++o]}return n+t.substring(s)}parse(t,r,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Hb++}_`,this._prefixCallback=n||p0,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const o=[];let a;if(this._callback=(s,u)=>{s?a=s:u&&o.push(u)},this._lexer.tokenize(t).every(s=>this._readCallback=this._readCallback(s)),a)throw a;return o}this._callback=r,this._lexer.tokenize(t,(o,a)=>{o!==null?(this._callback(o),this._callback=p0):this._readCallback&&(this._readCallback=this._readCallback(a))})}}function p0(){}function yT(e,t){const r=t.namedNode;e._namedNode=r,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=r(pi.rdf.first),e.RDF_REST=r(pi.rdf.rest),e.RDF_NIL=r(pi.rdf.nil),e.N3_FORALL=r(pi.r.forAll),e.N3_FORSOME=r(pi.r.forSome),e.ABBREVIATIONS={a:r(pi.rdf.type),"=":r(pi.owl.sameAs),">":r(pi.log.implies)},e.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}yT(Up.prototype,Jl);const cc=Jl.defaultGraph(),{rdf:sD,xsd:pl}=pi,jb=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,$b=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,aD={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class dc extends yo{equals(){return!1}}class nw{constructor(t,r){if(this._prefixRegex=/$0^/,t&&typeof t.write!="function"&&(r=t,t=null),r=r||{},this._lists=r.lists,t)this._outputStream=t,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(o,a,s){n+=o,s&&s()},end:o=>{o&&o(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=cc,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${Kb(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return cc.equals(this._graph)}_write(t,r){this._outputStream.write(t,"utf8",r)}_writeQuad(t,r,n,o,a){try{o.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(cc.equals(o)?"":`${this._encodeIriOrBlank(o)} {
`)),this._graph=o,this._subject=null),t.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(s){a&&a(s)}}_writeQuadLine(t,r,n,o,a){delete this._prefixMatch,this._write(this.quadToString(t,r,n,o),a)}quadToString(t,r,n,o){return`${this._encodeSubject(t)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${o&&o.value?` ${this._encodeIriOrBlank(o)} .
`:` .
`}`}quadsToString(t){return t.map(r=>this.quadToString(r.subject,r.predicate,r.object,r.graph)).join("")}_encodeSubject(t){return t.termType==="Quad"?this._encodeQuad(t):this._encodeIriOrBlank(t)}_encodeIriOrBlank(t){if(t.termType!=="NamedNode")return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let r=t.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),jb.test(r)&&(r=r.replace($b,Vb));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(t){let r=t.value;if(jb.test(r)&&(r=r.replace($b,Vb)),t.language)return`"${r}"@${t.language}`;if(this._lineMode){if(t.datatype.value===pl.string)return`"${r}"`}else switch(t.datatype.value){case pl.string:return`"${r}"`;case pl.boolean:if(r==="true"||r==="false")return r;break;case pl.integer:if(/^[+-]?\d+$/.test(r))return r;break;case pl.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case pl.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(t.datatype)}`}_encodePredicate(t){return t.value===sD.type?"a":this._encodeIriOrBlank(t)}_encodeObject(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}_encodeQuad({subject:t,predicate:r,object:n,graph:o}){return`<<${this._encodeSubject(t)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${Dp(o)?"":` ${this._encodeIriOrBlank(o)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(t,r,n,o,a){n===void 0?this._writeQuad(t.subject,t.predicate,t.object,t.graph,r):typeof o=="function"?this._writeQuad(t,r,n,cc,o):this._writeQuad(t,r,n,o||cc,a)}addQuads(t){for(let r=0;r<t.length;r++)this.addQuad(t[r])}addPrefix(t,r,n){const o={};o[t]=r,this.addPrefixes(o,n)}addPrefixes(t,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let o in t){let a=t[o];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=o+=":",this._write(`@prefix ${o} <${a}>.
`)}if(n){let o="",a="";for(const s in this._prefixIRIs)o+=o?`|${s}`:s,a+=(a?"|":"")+this._prefixIRIs[s];o=Kb(o),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${o})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(t,r){let n=t,o,a;switch(t===void 0?n=[]:t.termType?n=[{predicate:t,object:r}]:"length"in t||(n=[t]),a=n.length){case 0:return new dc("[]");case 1:if(o=n[0],!(o.object instanceof dc))return new dc(`[ ${this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)} ]`);default:let s="[";for(let u=0;u<a;u++)o=n[u],o.predicate.equals(t)?s+=`, ${this._encodeObject(o.object)}`:(s+=`${(u?`;
  `:`
  `)+this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)}`,t=o.predicate);return new dc(`${s}
]`)}}list(t){const r=t&&t.length||0,n=new Array(r);for(let o=0;o<r;o++)n[o]=this._encodeObject(t[o]);return new dc(`(${n.join(" ")})`)}end(t){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=t&&((n,o)=>{r=null,t(n,o)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function Vb(e){let t=aD[e];return t===void 0&&(e.length===1?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function Kb(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var Mp=tT();class iw{constructor(t,r){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!r&&t&&!t[0]&&(r=t,t=null),r=r||{},this._factory=r.factory||Jl,t&&this.addQuads(t)}get size(){let t=this._size;if(t!==null)return t;t=0;const r=this._graphs;let n,o;for(const a in r)for(const s in n=r[a].subjects)for(const u in o=n[s])t+=Object.keys(o[u]).length;return this._size=t}_addToIndex(t,r,n,o){const a=t[r]||(t[r]={}),s=a[n]||(a[n]={}),u=o in s;return u||(s[o]=null),!u}_removeFromIndex(t,r,n,o){const a=t[r],s=a[n];delete s[o];for(const u in s)return;delete a[n];for(const u in a)return;delete t[r]}*_findInIndex(t,r,n,o,a,s,u,f){let c,g,p;const m=this._entities,_=Ro(f,this._factory),C={subject:null,predicate:null,object:null};r&&((c=t,t={})[r]=c[r]);for(const R in t)if(g=t[R]){C[a]=Ro(m[R],this._factory),n&&((c=g,g={})[n]=c[n]);for(const I in g)if(p=g[I]){C[s]=Ro(m[I],this._factory);const S=o?o in p?[o]:[]:Object.keys(p);for(let b=0;b<S.length;b++)C[u]=Ro(m[S[b]],this._factory),yield this._factory.quad(C.subject,C.predicate,C.object,_)}}}_loop(t,r){for(const n in t)r(n)}_loopByKey0(t,r,n){let o,a;if(o=t[r])for(a in o)n(a)}_loopByKey1(t,r,n){let o,a;for(o in t)a=t[o],a[r]&&n(o)}_loopBy2Keys(t,r,n,o){let a,s,u;if((a=t[r])&&(s=a[n]))for(u in s)o(u)}_countInIndex(t,r,n,o){let a=0,s,u,f;r&&((s=t,t={})[r]=s[r]);for(const c in t)if(u=t[c]){n&&((s=u,u={})[n]=s[n]);for(const g in u)(f=u[g])&&(o?o in f&&a++:a+=Object.keys(f).length)}return a}_getGraphs(t){if(!Ki(t))return this._graphs;const r={};return r[t]=this._graphs[t],r}_uniqueEntities(t){const r=Object.create(null);return n=>{n in r||(r[n]=!0,t(Ro(this._entities[n],this._factory)))}}add(t){return this.addQuad(t),this}addQuad(t,r,n,o){r||(o=t.graph,n=t.object,r=t.predicate,t=t.subject),t=on(t),r=on(r),n=on(n),o=on(o);let a=this._graphs[o];a||(a=this._graphs[o]={subjects:{},predicates:{},objects:{}},Object.freeze(a));const s=this._ids,u=this._entities;t=s[t]||(s[u[++this._id]=t]=this._id),r=s[r]||(s[u[++this._id]=r]=this._id),n=s[n]||(s[u[++this._id]=n]=this._id);const f=this._addToIndex(a.subjects,t,r,n);return this._addToIndex(a.predicates,r,n,t),this._addToIndex(a.objects,n,t,r),this._size=null,f}addQuads(t){for(let r=0;r<t.length;r++)this.addQuad(t[r])}delete(t){return this.removeQuad(t),this}has(t,r,n,o){return t&&t.subject&&({subject:t,predicate:r,object:n,graph:o}=t),!this.readQuads(t,r,n,o).next().done}import(t){return t.on("data",r=>{this.addQuad(r)}),t}removeQuad(t,r,n,o){r||(o=t.graph,n=t.object,r=t.predicate,t=t.subject),t=on(t),r=on(r),n=on(n),o=on(o);const a=this._ids,s=this._graphs;let u,f,c;if(!(t=a[t])||!(r=a[r])||!(n=a[n])||!(u=s[o])||!(f=u.subjects[t])||!(c=f[r])||!(n in c))return!1;this._removeFromIndex(u.subjects,t,r,n),this._removeFromIndex(u.predicates,r,n,t),this._removeFromIndex(u.objects,n,t,r),this._size!==null&&this._size--;for(t in u.subjects)return!0;return delete s[o],!0}removeQuads(t){for(let r=0;r<t.length;r++)this.removeQuad(t[r])}remove(t){return t.on("data",r=>{this.removeQuad(r)}),t}removeMatches(t,r,n,o){const a=new Mp.Readable({objectMode:!0});return a._read=()=>{for(const s of this.readQuads(t,r,n,o))a.push(s);a.push(null)},this.remove(a)}deleteGraph(t){return this.removeMatches(null,null,null,t)}getQuads(t,r,n,o){return[...this.readQuads(t,r,n,o)]}*readQuads(t,r,n,o){t=t&&on(t),r=r&&on(r),n=n&&on(n),o=o&&on(o);const a=this._getGraphs(o),s=this._ids;let u,f,c,g;if(!(Ki(t)&&!(f=s[t])||Ki(r)&&!(c=s[r])||Ki(n)&&!(g=s[n])))for(const p in a)(u=a[p])&&(f?g?yield*this._findInIndex(u.objects,g,f,c,"object","subject","predicate",p):yield*this._findInIndex(u.subjects,f,c,null,"subject","predicate","object",p):c?yield*this._findInIndex(u.predicates,c,g,null,"predicate","object","subject",p):g?yield*this._findInIndex(u.objects,g,null,null,"object","subject","predicate",p):yield*this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",p))}match(t,r,n,o){return new ow(this,t,r,n,o)}countQuads(t,r,n,o){t=t&&on(t),r=r&&on(r),n=n&&on(n),o=o&&on(o);const a=this._getGraphs(o),s=this._ids;let u=0,f,c,g,p;if(Ki(t)&&!(c=s[t])||Ki(r)&&!(g=s[r])||Ki(n)&&!(p=s[n]))return 0;for(const m in a)(f=a[m])&&(t?n?u+=this._countInIndex(f.objects,p,c,g):u+=this._countInIndex(f.subjects,c,g,p):r?u+=this._countInIndex(f.predicates,g,p,c):u+=this._countInIndex(f.objects,p,c,g));return u}forEach(t,r,n,o,a){this.some(s=>(t(s),!1),r,n,o,a)}every(t,r,n,o,a){let s=!1;const u=!this.some(f=>(s=!0,!t(f)),r,n,o,a);return s&&u}some(t,r,n,o,a){for(const s of this.readQuads(r,n,o,a))if(t(s))return!0;return!1}getSubjects(t,r,n){const o=[];return this.forSubjects(a=>{o.push(a)},t,r,n),o}forSubjects(t,r,n,o){r=r&&on(r),n=n&&on(n),o=o&&on(o);const a=this._ids,s=this._getGraphs(o);let u,f,c;if(t=this._uniqueEntities(t),!(Ki(r)&&!(f=a[r])||Ki(n)&&!(c=a[n])))for(o in s)(u=s[o])&&(f?c?this._loopBy2Keys(u.predicates,f,c,t):this._loopByKey1(u.subjects,f,t):c?this._loopByKey0(u.objects,c,t):this._loop(u.subjects,t))}getPredicates(t,r,n){const o=[];return this.forPredicates(a=>{o.push(a)},t,r,n),o}forPredicates(t,r,n,o){r=r&&on(r),n=n&&on(n),o=o&&on(o);const a=this._ids,s=this._getGraphs(o);let u,f,c;if(t=this._uniqueEntities(t),!(Ki(r)&&!(f=a[r])||Ki(n)&&!(c=a[n])))for(o in s)(u=s[o])&&(f?c?this._loopBy2Keys(u.objects,c,f,t):this._loopByKey0(u.subjects,f,t):c?this._loopByKey1(u.predicates,c,t):this._loop(u.predicates,t))}getObjects(t,r,n){const o=[];return this.forObjects(a=>{o.push(a)},t,r,n),o}forObjects(t,r,n,o){r=r&&on(r),n=n&&on(n),o=o&&on(o);const a=this._ids,s=this._getGraphs(o);let u,f,c;if(t=this._uniqueEntities(t),!(Ki(r)&&!(f=a[r])||Ki(n)&&!(c=a[n])))for(o in s)(u=s[o])&&(f?c?this._loopBy2Keys(u.subjects,f,c,t):this._loopByKey1(u.objects,f,t):c?this._loopByKey0(u.predicates,c,t):this._loop(u.objects,t))}getGraphs(t,r,n){const o=[];return this.forGraphs(a=>{o.push(a)},t,r,n),o}forGraphs(t,r,n,o){for(const a in this._graphs)this.some(s=>(t(s.graph),!0),r,n,o,a)}createBlankNode(t){let r,n;if(t)for(r=t=`_:${t}`,n=1;this._ids[r];)r=t+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}extractLists({remove:t=!1,ignoreErrors:r=!1}={}){const n={},o=r?()=>!0:(u,f)=>{throw new Error(`${u.value} ${f}`)},a=this.getQuads(null,pi.rdf.rest,pi.rdf.nil,null),s=t?[...a]:[];return a.forEach(u=>{const f=[];let c=!1,g,p;const m=u.graph;let _=u.subject;for(;_&&!c;){const C=this.getQuads(null,null,_,null),R=this.getQuads(_,null,null,null);let I,S=null,b=null,T=null;for(let B=0;B<R.length&&!c;B++)I=R[B],I.graph.equals(m)?g?c=o(_,"has non-list arcs out"):I.predicate.value===pi.rdf.first?S?c=o(_,"has multiple rdf:first arcs"):s.push(S=I):I.predicate.value===pi.rdf.rest?b?c=o(_,"has multiple rdf:rest arcs"):s.push(b=I):C.length?c=o(_,"can't be subject and object"):(g=I,p="subject"):c=o(_,"not confined to single graph");for(let B=0;B<C.length&&!c;++B)I=C[B],g?c=o(_,"can't have coreferences"):I.predicate.value===pi.rdf.rest?T?c=o(_,"has incoming rdf:rest arcs"):T=I:(g=I,p="object");S?f.unshift(S.object):c=o(_,"has no list head"),_=T&&T.subject}c?t=!1:g&&(n[g[p].value]=f)}),t&&this.removeQuads(s),n}*[Symbol.iterator](){yield*this.readQuads()}}function Ki(e){return typeof e=="string"||e instanceof String}class ow extends Mp.Readable{constructor(t,r,n,o,a){super({objectMode:!0}),Object.assign(this,{n3Store:t,subject:r,predicate:n,object:o,graph:a})}get filtered(){if(!this._filtered){const{n3Store:t,graph:r,object:n,predicate:o,subject:a}=this,s=this._filtered=new iw({factory:t._factory});for(const u of t.readQuads(a,o,n,r))s.addQuad(u)}return this._filtered}get size(){return this.filtered.size}_read(){for(const t of this)this.push(t);this.push(null)}add(t){return this.filtered.add(t)}delete(t){return this.filtered.delete(t)}has(t){return this.filtered.has(t)}match(t,r,n,o){return new ow(this.filtered,t,r,n,o)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class mT extends Mp.Transform{constructor(t){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new Up(t);let n,o;r.parse({on:(a,s)=>{switch(a){case"data":n=s;break;case"end":o=s;break}}},(a,s)=>{a&&this.emit("error",a)||s&&this.push(s)},(a,s)=>{this.emit("prefix",a,s)}),this._transform=(a,s,u)=>{n(a),u()},this._flush=a=>{o(),a()}}import(t){return t.on("data",r=>{this.write(r)}),t.on("end",()=>{this.end()}),t.on("error",r=>{this.emit("error",r)}),this}}class vT extends Mp.Transform{constructor(t){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new nw({write:(n,o,a)=>{this.push(n),a&&a()},end:n=>{this.push(null),n&&n()}},t);this._transform=(n,o,a)=>{r.addQuad(n,a)},this._flush=n=>{r.end(n)}}import(t){return t.on("data",r=>{this.write(r)}),t.on("end",()=>{this.end()}),t.on("error",r=>{this.emit("error",r)}),t.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}}const lD={Lexer:Zv,Parser:Up,Writer:nw,Store:iw,StreamParser:mT,StreamWriter:vT,Util:pT,DataFactory:Jl,Term:yo,NamedNode:Lp,Literal:Ds,BlankNode:ew,Variable:tw,DefaultGraph:rw,Quad:id,Triple:id,termFromId:Ro,termToId:on},uD=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:ew,DataFactory:Jl,DefaultGraph:rw,Lexer:Zv,Literal:Ds,NamedNode:Lp,Parser:Up,Quad:id,Store:iw,StreamParser:mT,StreamWriter:vT,Term:yo,Triple:id,Util:pT,Variable:tw,Writer:nw,default:lD,termFromId:Ro,termToId:on},Symbol.toStringTag,{value:"Module"})),cD=rp(uD);var g0,Wb;function dD(){if(Wb)return g0;Wb=1;class e{constructor(r){this.value=r||"b"+ ++e.nextId}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="BlankNode",e.nextId=0,g0=e,g0}var y0,Gb;function wT(){if(Gb)return y0;Gb=1;class e{equals(r){return!!r&&r.termType===this.termType}}return e.prototype.termType="DefaultGraph",e.prototype.value="",y0=e,y0}var m0,qb;function fD(){if(qb)return m0;qb=1;function e(t){if(!t)return null;if(t.termType==="BlankNode")return this.blankNode(t.value);if(t.termType==="DefaultGraph")return this.defaultGraph();if(t.termType==="Literal")return this.literal(t.value,t.language||this.namedNode(t.datatype.value));if(t.termType==="NamedNode")return this.namedNode(t.value);if(t.termType==="Quad"){const r=this.fromTerm(t.subject),n=this.fromTerm(t.predicate),o=this.fromTerm(t.object),a=this.fromTerm(t.graph);return this.quad(r,n,o,a)}if(t.termType==="Variable")return this.variable(t.value);throw new Error(`unknown termType ${t.termType}`)}return m0=e,m0}var v0,zb;function _T(){if(zb)return v0;zb=1;class e{constructor(r){this.value=r}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="NamedNode",v0=e,v0}var w0,Jb;function hD(){if(Jb)return w0;Jb=1;const e=_T();class t{constructor(n,o,a){this.value=n,this.datatype=t.stringDatatype,this.language="",o?(this.language=o,this.datatype=t.langStringDatatype):a&&(this.datatype=a)}equals(n){return!!n&&n.termType===this.termType&&n.value===this.value&&n.language===this.language&&n.datatype.equals(this.datatype)}}return t.prototype.termType="Literal",t.langStringDatatype=new e("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.stringDatatype=new e("http://www.w3.org/2001/XMLSchema#string"),w0=t,w0}var _0,Xb;function pD(){if(Xb)return _0;Xb=1;const e=wT();class t{constructor(n,o,a,s){this.subject=n,this.predicate=o,this.object=a,s?this.graph=s:this.graph=new e}equals(n){return!!n&&(n.termType==="Quad"||!n.termType)&&n.subject.equals(this.subject)&&n.predicate.equals(this.predicate)&&n.object.equals(this.object)&&n.graph.equals(this.graph)}}return t.prototype.termType="Quad",t.prototype.value="",_0=t,_0}var S0,Qb;function gD(){if(Qb)return S0;Qb=1;class e{constructor(r){this.value=r}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="Variable",S0=e,S0}var E0,Yb;function yD(){if(Yb)return E0;Yb=1;const e=dD(),t=wT(),r=fD(),n=hD(),o=_T(),a=pD(),s=gD();function u(S){return new o(S)}function f(S){return new e(S)}function c(S,b){return typeof b=="string"?b.indexOf(":")===-1?new n(S,b):new n(S,null,I.namedNode(b)):new n(S,null,b)}function g(S){return new s(S)}function p(){return I.defaultGraphInstance}function m(S,b,T){return I.quad(S,b,T)}function _(S,b,T,B){return new a(S,b,T,B||I.defaultGraphInstance)}function C(S){return r.call(I,S)}function R(S){return r.call(I,S)}const I={namedNode:u,blankNode:f,literal:c,variable:g,defaultGraph:p,triple:m,quad:_,fromTerm:C,fromQuad:R,defaultGraphInstance:new t};return E0=I,E0}var b0,Zb;function ST(){return Zb||(Zb=1,b0=yD()),b0}var A0,eA;function mD(){if(eA)return A0;eA=1;function e(s){return typeof s=="string"||s instanceof String}const t="http://www.w3.org/2001/XMLSchema#string";function r(s){if(typeof s=="string")return s;if(!s)return"";if(typeof s.id<"u"&&s.termType!=="Quad")return s.id;let u,f,c,g;switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return`_:${s.value}`;case"Variable":return`?${s.value}`;case"DefaultGraph":return"";case"Literal":return s.language?`"${s.value}"@${s.language}`:`"${s.value}"${s.datatype&&s.datatype.value!==t?`^^${s.datatype.value}`:""}`;case"Quad":return u=o(r(s.subject)),f=o(r(s.predicate)),c=o(r(s.object)),g=s.graph.termType==="DefaultGraph"?"":` ${r(s.graph)}`,`<<${u} ${f} ${c}${g}>>`;default:throw new Error(`Unexpected termType: ${s.termType}`)}}const n=/^"(.*".*)(?="[^"]*$)/;function o(s){return s.replace(n,(u,f)=>`"${f.replace(/"/g,'""')}`)}class a{constructor(u){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,u)for(const f of u)this.add(f)}get size(){let u=this._size;if(u!==null)return u;u=0;const f=this._graphs;let c,g;for(const p in f)for(const m in c=f[p].subjects)for(const _ in g=c[m])u+=Object.keys(g[_]).length;return this._size=u,this._size}add(u){let f=r(u.subject),c=r(u.predicate),g=r(u.object);const p=r(u.graph);let m=this._graphs[p];m||(m=this._graphs[p]={subjects:{},predicates:{},objects:{}},Object.freeze(m));const _=this._ids,C=this._entities;return f=_[f]||(_[C[++this._id]=f]=this._id),c=_[c]||(_[C[++this._id]=c]=this._id),g=_[g]||(_[C[++this._id]=g]=this._id),this._addToIndex(m.subjects,f,c,g),this._addToIndex(m.predicates,c,g,f),this._addToIndex(m.objects,g,f,c),this._setQuad(f,c,g,p,u),this._size=null,this}delete(u){let f=r(u.subject),c=r(u.predicate),g=r(u.object);const p=r(u.graph),m=this._ids,_=this._graphs;let C,R,I;if(!(f=m[f])||!(c=m[c])||!(g=m[g])||!(C=_[p])||!(R=C.subjects[f])||!(I=R[c])||!(g in I))return this;this._removeFromIndex(C.subjects,f,c,g),this._removeFromIndex(C.predicates,c,g,f),this._removeFromIndex(C.objects,g,f,c),this._size!==null&&this._size--,this._deleteQuad(f,c,g,p);for(f in C.subjects)return this;return delete _[p],this}has(u){const f=r(u.subject),c=r(u.predicate),g=r(u.object),p=r(u.graph),m=this._graphs[p];if(!m)return!1;const _=this._ids;let C,R,I;return e(f)&&!(C=_[f])||e(c)&&!(R=_[c])||e(g)&&!(I=_[g])?!1:this._countInIndex(m.objects,I,C,R)===1}match(u,f,c,g){return this._createDataset(this._match(u,f,c,g))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(u,f,c,g){const p=u[f]||(u[f]={}),m=p[c]||(p[c]={}),_=g in m;return _||(m[g]=null),!_}_removeFromIndex(u,f,c,g){const p=u[f],m=p[c];delete m[g];for(const _ in m)return;delete p[c];for(const _ in p)return;delete u[f]}_findInIndex(u,f,c,g,p,m,_,C,R,I){let S,b,T;f&&((S=u,u={})[f]=S[f]);for(const B in u)if(b=u[B],b){c&&((S=b,b={})[c]=S[c]);for(const H in b)if(T=b[H],T){const $=g?g in T?[g]:[]:Object.keys(T);for(let F=0;F<$.length;F++){const ne={[p]:B,[m]:H,[_]:$[F]},Y=this._getQuad(ne.subject,ne.predicate,ne.object,C);if(I)I.push(Y);else if(R(Y))return!0}}}return I}_countInIndex(u,f,c,g){let p=0,m,_,C;f&&((m=u,u={})[f]=m[f]);for(const R in u)if(_=u[R],_){c&&((m=_,_={})[c]=m[c]);for(const I in _)C=_[I],C&&(g?g in C&&p++:p+=Object.keys(C).length)}return p}_getGraphs(u){return e(u)?{[u]:this._graphs[u]}:this._graphs}_match(u,f,c,g){u=u&&r(u),f=f&&r(f),c=c&&r(c),g=g&&r(g);const p=[],m=this._getGraphs(g),_=this._ids;let C,R,I,S;if(e(u)&&!(R=_[u])||e(f)&&!(I=_[f])||e(c)&&!(S=_[c]))return p;for(const b in m)C=m[b],C&&(R?S?this._findInIndex(C.objects,S,R,I,"object","subject","predicate",b,null,p):this._findInIndex(C.subjects,R,I,null,"subject","predicate","object",b,null,p):I?this._findInIndex(C.predicates,I,S,null,"predicate","object","subject",b,null,p):S?this._findInIndex(C.objects,S,null,null,"object","subject","predicate",b,null,p):this._findInIndex(C.subjects,null,null,null,"subject","predicate","object",b,null,p));return p}_getQuad(u,f,c,g){return this._quads.get(this._toId(u,f,c,g))}_setQuad(u,f,c,g,p){this._quads.set(this._toId(u,f,c,g),p)}_deleteQuad(u,f,c,g){this._quads.delete(this._toId(u,f,c,g))}_createDataset(u){return new this.constructor(u)}_toId(u,f,c,g){return`${u}:${f}:${c}:${g}`}}return A0=a,A0}var R0,tA;function vD(){if(tA)return R0;tA=1;const e=ST(),t=mD();function r(n){return new t(n)}return R0=Object.assign({dataset:r},e),R0}var x0={},fc={},Zf={},rA;function ET(){if(rA)return Zf;rA=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.default=r;let e;const t=new Uint8Array(16);function r(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return Zf}var gl={},hc={},pc={},nA;function wD(){if(nA)return pc;nA=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return pc.default=e,pc}var iA;function Bp(){if(iA)return hc;iA=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.default=void 0;var e=t(wD());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){return typeof o=="string"&&e.default.test(o)}var n=r;return hc.default=n,hc}var oA;function Hp(){if(oA)return gl;oA=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.default=void 0,gl.unsafeStringify=n;var e=t(Bp());function t(s){return s&&s.__esModule?s:{default:s}}const r=[];for(let s=0;s<256;++s)r.push((s+256).toString(16).slice(1));function n(s,u=0){return(r[s[u+0]]+r[s[u+1]]+r[s[u+2]]+r[s[u+3]]+"-"+r[s[u+4]]+r[s[u+5]]+"-"+r[s[u+6]]+r[s[u+7]]+"-"+r[s[u+8]]+r[s[u+9]]+"-"+r[s[u+10]]+r[s[u+11]]+r[s[u+12]]+r[s[u+13]]+r[s[u+14]]+r[s[u+15]]).toLowerCase()}function o(s,u=0){const f=n(s,u);if(!(0,e.default)(f))throw TypeError("Stringified UUID is invalid");return f}var a=o;return gl.default=a,gl}var sA;function _D(){if(sA)return fc;sA=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.default=void 0;var e=r(ET()),t=Hp();function r(c){return c&&c.__esModule?c:{default:c}}let n,o,a=0,s=0;function u(c,g,p){let m=g&&p||0;const _=g||new Array(16);c=c||{};let C=c.node||n,R=c.clockseq!==void 0?c.clockseq:o;if(C==null||R==null){const H=c.random||(c.rng||e.default)();C==null&&(C=n=[H[0]|1,H[1],H[2],H[3],H[4],H[5]]),R==null&&(R=o=(H[6]<<8|H[7])&16383)}let I=c.msecs!==void 0?c.msecs:Date.now(),S=c.nsecs!==void 0?c.nsecs:s+1;const b=I-a+(S-s)/1e4;if(b<0&&c.clockseq===void 0&&(R=R+1&16383),(b<0||I>a)&&c.nsecs===void 0&&(S=0),S>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=I,s=S,o=R,I+=122192928e5;const T=((I&268435455)*1e4+S)%4294967296;_[m++]=T>>>24&255,_[m++]=T>>>16&255,_[m++]=T>>>8&255,_[m++]=T&255;const B=I/4294967296*1e4&268435455;_[m++]=B>>>8&255,_[m++]=B&255,_[m++]=B>>>24&15|16,_[m++]=B>>>16&255,_[m++]=R>>>8|128,_[m++]=R&255;for(let H=0;H<6;++H)_[m+H]=C[H];return g||(0,t.unsafeStringify)(_)}var f=u;return fc.default=f,fc}var gc={},ys={},yc={},aA;function bT(){if(aA)return yc;aA=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.default=void 0;var e=t(Bp());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");let a;const s=new Uint8Array(16);return s[0]=(a=parseInt(o.slice(0,8),16))>>>24,s[1]=a>>>16&255,s[2]=a>>>8&255,s[3]=a&255,s[4]=(a=parseInt(o.slice(9,13),16))>>>8,s[5]=a&255,s[6]=(a=parseInt(o.slice(14,18),16))>>>8,s[7]=a&255,s[8]=(a=parseInt(o.slice(19,23),16))>>>8,s[9]=a&255,s[10]=(a=parseInt(o.slice(24,36),16))/1099511627776&255,s[11]=a/4294967296&255,s[12]=a>>>24&255,s[13]=a>>>16&255,s[14]=a>>>8&255,s[15]=a&255,s}var n=r;return yc.default=n,yc}var lA;function AT(){if(lA)return ys;lA=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.URL=ys.DNS=void 0,ys.default=s;var e=Hp(),t=r(bT());function r(u){return u&&u.__esModule?u:{default:u}}function n(u){u=unescape(encodeURIComponent(u));const f=[];for(let c=0;c<u.length;++c)f.push(u.charCodeAt(c));return f}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ys.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ys.URL=a;function s(u,f,c){function g(p,m,_,C){var R;if(typeof p=="string"&&(p=n(p)),typeof m=="string"&&(m=(0,t.default)(m)),((R=m)===null||R===void 0?void 0:R.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let I=new Uint8Array(16+p.length);if(I.set(m),I.set(p,m.length),I=c(I),I[6]=I[6]&15|f,I[8]=I[8]&63|128,_){C=C||0;for(let S=0;S<16;++S)_[C+S]=I[S];return _}return(0,e.unsafeStringify)(I)}try{g.name=u}catch{}return g.DNS=o,g.URL=a,g}return ys}var mc={},uA;function SD(){if(uA)return mc;uA=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.default=void 0;function e(_){if(typeof _=="string"){const C=unescape(encodeURIComponent(_));_=new Uint8Array(C.length);for(let R=0;R<C.length;++R)_[R]=C.charCodeAt(R)}return t(n(o(_),_.length*8))}function t(_){const C=[],R=_.length*32,I="0123456789abcdef";for(let S=0;S<R;S+=8){const b=_[S>>5]>>>S%32&255,T=parseInt(I.charAt(b>>>4&15)+I.charAt(b&15),16);C.push(T)}return C}function r(_){return(_+64>>>9<<4)+14+1}function n(_,C){_[C>>5]|=128<<C%32,_[r(C)-1]=C;let R=1732584193,I=-271733879,S=-1732584194,b=271733878;for(let T=0;T<_.length;T+=16){const B=R,H=I,$=S,F=b;R=f(R,I,S,b,_[T],7,-680876936),b=f(b,R,I,S,_[T+1],12,-389564586),S=f(S,b,R,I,_[T+2],17,606105819),I=f(I,S,b,R,_[T+3],22,-1044525330),R=f(R,I,S,b,_[T+4],7,-176418897),b=f(b,R,I,S,_[T+5],12,1200080426),S=f(S,b,R,I,_[T+6],17,-1473231341),I=f(I,S,b,R,_[T+7],22,-45705983),R=f(R,I,S,b,_[T+8],7,1770035416),b=f(b,R,I,S,_[T+9],12,-1958414417),S=f(S,b,R,I,_[T+10],17,-42063),I=f(I,S,b,R,_[T+11],22,-1990404162),R=f(R,I,S,b,_[T+12],7,1804603682),b=f(b,R,I,S,_[T+13],12,-40341101),S=f(S,b,R,I,_[T+14],17,-1502002290),I=f(I,S,b,R,_[T+15],22,1236535329),R=c(R,I,S,b,_[T+1],5,-165796510),b=c(b,R,I,S,_[T+6],9,-1069501632),S=c(S,b,R,I,_[T+11],14,643717713),I=c(I,S,b,R,_[T],20,-373897302),R=c(R,I,S,b,_[T+5],5,-701558691),b=c(b,R,I,S,_[T+10],9,38016083),S=c(S,b,R,I,_[T+15],14,-660478335),I=c(I,S,b,R,_[T+4],20,-405537848),R=c(R,I,S,b,_[T+9],5,568446438),b=c(b,R,I,S,_[T+14],9,-1019803690),S=c(S,b,R,I,_[T+3],14,-187363961),I=c(I,S,b,R,_[T+8],20,1163531501),R=c(R,I,S,b,_[T+13],5,-1444681467),b=c(b,R,I,S,_[T+2],9,-51403784),S=c(S,b,R,I,_[T+7],14,1735328473),I=c(I,S,b,R,_[T+12],20,-1926607734),R=g(R,I,S,b,_[T+5],4,-378558),b=g(b,R,I,S,_[T+8],11,-2022574463),S=g(S,b,R,I,_[T+11],16,1839030562),I=g(I,S,b,R,_[T+14],23,-35309556),R=g(R,I,S,b,_[T+1],4,-1530992060),b=g(b,R,I,S,_[T+4],11,1272893353),S=g(S,b,R,I,_[T+7],16,-155497632),I=g(I,S,b,R,_[T+10],23,-1094730640),R=g(R,I,S,b,_[T+13],4,681279174),b=g(b,R,I,S,_[T],11,-358537222),S=g(S,b,R,I,_[T+3],16,-722521979),I=g(I,S,b,R,_[T+6],23,76029189),R=g(R,I,S,b,_[T+9],4,-640364487),b=g(b,R,I,S,_[T+12],11,-421815835),S=g(S,b,R,I,_[T+15],16,530742520),I=g(I,S,b,R,_[T+2],23,-995338651),R=p(R,I,S,b,_[T],6,-198630844),b=p(b,R,I,S,_[T+7],10,1126891415),S=p(S,b,R,I,_[T+14],15,-1416354905),I=p(I,S,b,R,_[T+5],21,-57434055),R=p(R,I,S,b,_[T+12],6,1700485571),b=p(b,R,I,S,_[T+3],10,-1894986606),S=p(S,b,R,I,_[T+10],15,-1051523),I=p(I,S,b,R,_[T+1],21,-2054922799),R=p(R,I,S,b,_[T+8],6,1873313359),b=p(b,R,I,S,_[T+15],10,-30611744),S=p(S,b,R,I,_[T+6],15,-1560198380),I=p(I,S,b,R,_[T+13],21,1309151649),R=p(R,I,S,b,_[T+4],6,-145523070),b=p(b,R,I,S,_[T+11],10,-1120210379),S=p(S,b,R,I,_[T+2],15,718787259),I=p(I,S,b,R,_[T+9],21,-343485551),R=a(R,B),I=a(I,H),S=a(S,$),b=a(b,F)}return[R,I,S,b]}function o(_){if(_.length===0)return[];const C=_.length*8,R=new Uint32Array(r(C));for(let I=0;I<C;I+=8)R[I>>5]|=(_[I/8]&255)<<I%32;return R}function a(_,C){const R=(_&65535)+(C&65535);return(_>>16)+(C>>16)+(R>>16)<<16|R&65535}function s(_,C){return _<<C|_>>>32-C}function u(_,C,R,I,S,b){return a(s(a(a(C,_),a(I,b)),S),R)}function f(_,C,R,I,S,b,T){return u(C&R|~C&I,_,C,S,b,T)}function c(_,C,R,I,S,b,T){return u(C&I|R&~I,_,C,S,b,T)}function g(_,C,R,I,S,b,T){return u(C^R^I,_,C,S,b,T)}function p(_,C,R,I,S,b,T){return u(R^(C|~I),_,C,S,b,T)}var m=e;return mc.default=m,mc}var cA;function ED(){if(cA)return gc;cA=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.default=void 0;var e=r(AT()),t=r(SD());function r(a){return a&&a.__esModule?a:{default:a}}var o=(0,e.default)("v3",48,t.default);return gc.default=o,gc}var vc={},wc={},dA;function bD(){if(dA)return wc;dA=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return wc.default=t,wc}var fA;function AD(){if(fA)return vc;fA=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.default=void 0;var e=n(bD()),t=n(ET()),r=Hp();function n(s){return s&&s.__esModule?s:{default:s}}function o(s,u,f){if(e.default.randomUUID&&!u&&!s)return e.default.randomUUID();s=s||{};const c=s.random||(s.rng||t.default)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,u){f=f||0;for(let g=0;g<16;++g)u[f+g]=c[g];return u}return(0,r.unsafeStringify)(c)}var a=o;return vc.default=a,vc}var _c={},Sc={},hA;function RD(){if(hA)return Sc;hA=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.default=void 0;function e(o,a,s,u){switch(o){case 0:return a&s^~a&u;case 1:return a^s^u;case 2:return a&s^a&u^s&u;case 3:return a^s^u}}function t(o,a){return o<<a|o>>>32-a}function r(o){const a=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const g=unescape(encodeURIComponent(o));o=[];for(let p=0;p<g.length;++p)o.push(g.charCodeAt(p))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const u=o.length/4+2,f=Math.ceil(u/16),c=new Array(f);for(let g=0;g<f;++g){const p=new Uint32Array(16);for(let m=0;m<16;++m)p[m]=o[g*64+m*4]<<24|o[g*64+m*4+1]<<16|o[g*64+m*4+2]<<8|o[g*64+m*4+3];c[g]=p}c[f-1][14]=(o.length-1)*8/Math.pow(2,32),c[f-1][14]=Math.floor(c[f-1][14]),c[f-1][15]=(o.length-1)*8&4294967295;for(let g=0;g<f;++g){const p=new Uint32Array(80);for(let S=0;S<16;++S)p[S]=c[g][S];for(let S=16;S<80;++S)p[S]=t(p[S-3]^p[S-8]^p[S-14]^p[S-16],1);let m=s[0],_=s[1],C=s[2],R=s[3],I=s[4];for(let S=0;S<80;++S){const b=Math.floor(S/20),T=t(m,5)+e(b,_,C,R)+I+a[b]+p[S]>>>0;I=R,R=C,C=t(_,30)>>>0,_=m,m=T}s[0]=s[0]+m>>>0,s[1]=s[1]+_>>>0,s[2]=s[2]+C>>>0,s[3]=s[3]+R>>>0,s[4]=s[4]+I>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,s[0]&255,s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,s[1]&255,s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,s[2]&255,s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,s[3]&255,s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,s[4]&255]}var n=r;return Sc.default=n,Sc}var pA;function xD(){if(pA)return _c;pA=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.default=void 0;var e=r(AT()),t=r(RD());function r(a){return a&&a.__esModule?a:{default:a}}var o=(0,e.default)("v5",80,t.default);return _c.default=o,_c}var Ec={},gA;function CD(){if(gA)return Ec;gA=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Ec.default=e,Ec}var bc={},yA;function TD(){if(yA)return bc;yA=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.default=void 0;var e=t(Bp());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var n=r;return bc.default=n,bc}var mA;function jp(){return mA||(mA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return s.default}});var t=g(_D()),r=g(ED()),n=g(AD()),o=g(xD()),a=g(CD()),s=g(TD()),u=g(Bp()),f=g(Hp()),c=g(bT());function g(p){return p&&p.__esModule?p:{default:p}}}(x0)),x0}var vA;function RT(){if(vA)return Me;vA=1;var e=Bk(),t=xi(),r=Oa(),n=Gv(),o=cD,a=ST(),s=vD(),u=jp();function f(l){const d=l;return typeof d=="object"&&typeof d.internal_resourceInfo=="object"}function c(l){const d=l;return typeof d=="object"&&typeof d.internal_resourceInfo=="object"&&typeof d.internal_resourceInfo.linkedResources=="object"}function g(l){const d=l;return typeof d.internal_changeLog=="object"&&Array.isArray(d.internal_changeLog.additions)&&Array.isArray(d.internal_changeLog.deletions)}class p extends Error{}function m(l){return typeof l=="string"?l:l.value}const _=r.fetch.bind(globalThis);function C(l){var d,v,x,D,V;const z=(v=(d=l.headers.get("Content-Type"))===null||d===void 0?void 0:d.split(";"))!==null&&v!==void 0?v:[],se=z.length>0&&["text/turtle","application/ld+json"].includes(z[0]),Te={sourceIri:l.url,isRawData:!se,contentLocation:(x=l.headers.get("Content-Location"))!==null&&x!==void 0?x:void 0,contentType:(D=l.headers.get("Content-Type"))!==null&&D!==void 0?D:void 0,linkedResources:{},location:(V=l.headers.get("Location"))!==null&&V!==void 0?V:void 0},Ce=l.headers.get("Link");if(Ce){const ct=n.parse(Ce),vt=ct.get("rel","acl");vt.length===1&&(Te.aclUrl=new URL(vt[0].uri,Te.sourceIri).href),Te.linkedResources=ct.refs.reduce((Nt,yr)=>{var Hr,Nr;return(Hr=Nt[Nr=yr.rel])!==null&&Hr!==void 0||(Nt[Nr]=[]),Nt[yr.rel].push(new URL(yr.uri,Te.sourceIri).href),Nt},Te.linkedResources)}const Ne=l.headers.get("WAC-Allow");return Ne&&(Te.permissions=R(Ne)),Te}function R(l){function d(x){const D=x.split(" ");return D.includes("write")?{read:D.includes("read"),append:!0,write:!0,control:D.includes("control")}:{read:D.includes("read"),append:D.includes("append"),write:!1,control:D.includes("control")}}function v(x,D){const V=x.split(",").map(se=>se.split("=")).filter(se=>se.length===2&&se[0].trim()===D);if(V.length!==1)return"";const z=V[0][1].trim();return z.charAt(0)!=='"'||z.charAt(z.length-1)!=='"'?"":z.substring(1,z.length-1)}return{user:d(v(l,"user")),public:d(v(l,"public"))}}function I(l){let d;return typeof l.slice=="function"?d=Object.assign(l.slice(),{...l}):d={...l},d}function S(l){return!l.ok}function b(l){return l.status===401||l.status===403}const T={Authorization:"http://www.w3.org/ns/auth/acl#Authorization",AuthenticatedAgent:"http://www.w3.org/ns/auth/acl#AuthenticatedAgent",accessTo:"http://www.w3.org/ns/auth/acl#accessTo",agent:"http://www.w3.org/ns/auth/acl#agent",agentGroup:"http://www.w3.org/ns/auth/acl#agentGroup",agentClass:"http://www.w3.org/ns/auth/acl#agentClass",default:"http://www.w3.org/ns/auth/acl#default",defaultForNew:"http://www.w3.org/ns/auth/acl#defaultForNew",mode:"http://www.w3.org/ns/auth/acl#mode",origin:"http://www.w3.org/ns/auth/acl#origin"},B={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},H={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},$={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"},F={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",memberAccessControl:"http://www.w3.org/ns/solid/acp#memberAccessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},ne={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},Y={publicKey:"https://w3id.org/security#publicKey"},M={storage:"http://www.w3.org/ns/pim/space#storage"},J={fetch:_};async function Le(l,d={...J,ignoreAuthenticationErrors:!1}){var v;const D=await{...J,...d}.fetch(l,{method:"HEAD"});return Ue(D,{ignoreAuthenticationErrors:(v=d.ignoreAuthenticationErrors)!==null&&v!==void 0?v:!1})}function Ue(l,d={ignoreAuthenticationErrors:!1}){if(S(l)&&(!b(l)||!d.ignoreAuthenticationErrors))throw new dt(`Fetching the metadata of the Resource at [${l.url}] failed: [${l.status}] [${l.statusText}].`,l);return{internal_resourceInfo:C(l)}}function je(l){return(f(l)?Be(l):m(l)).endsWith("/")}function nt(l){return l.internal_resourceInfo.isRawData}function ke(l){var d;return(d=l.internal_resourceInfo.contentType)!==null&&d!==void 0?d:null}function Be(l){return f(l)?l.internal_resourceInfo.sourceIri:null}const De=Be;function tt(l){var d;if(!c(l))return null;const v=(d=Ie(l)["http://www.w3.org/ns/solid/terms#podOwner"])!==null&&d!==void 0?d:[];return v.length===1?v[0]:null}function re(l,d){const v=tt(d);return typeof v!="string"?null:v===l}function Ie(l){return l.internal_resourceInfo.linkedResources}function Ge(l){var d,v,x,D,V,z,se;if(typeof l.internal_resourceInfo.permissions=="object")return{user:{read:l.internal_resourceInfo.permissions.user.read,append:l.internal_resourceInfo.permissions.user.append,write:l.internal_resourceInfo.permissions.user.write},public:{read:l.internal_resourceInfo.permissions.public.read,append:l.internal_resourceInfo.permissions.public.append,write:l.internal_resourceInfo.permissions.public.write}};const Te=Ie(l);return{user:{read:(v=(d=Te[F.allow])===null||d===void 0?void 0:d.includes(F.Read))!==null&&v!==void 0?v:!1,append:(V=((x=Te[F.allow])===null||x===void 0?void 0:x.includes(F.Append))||((D=Te[F.allow])===null||D===void 0?void 0:D.includes(F.Write)))!==null&&V!==void 0?V:!1,write:(se=(z=Te[F.allow])===null||z===void 0?void 0:z.includes(F.Write))!==null&&se!==void 0?se:!1}}}class dt extends p{get statusCode(){return this.response.status}get statusText(){return this.response.statusText}constructor(d,v){super(d),this.response=v}}const Ze=()=>{const l=[],d=[],v=[];return{onQuad:x=>{l.push(x)},onError:x=>{v.push(x)},onComplete:x=>{d.push(x)},parse:async(x,D)=>new Promise(V=>{const z=new e.JsonLdParser({baseIRI:Be(D),documentLoader:new t.FetchDocumentLoader(_)});let se=!1;function Te(){se||(se=!0,d.forEach(Ce=>Ce()),V())}z.on("end",Te),z.on("error",Ce=>{v.forEach(Ne=>Ne(Ce)),Te()}),l.forEach(Ce=>z.on("data",Ce)),z.write(x),z.end()})}};s.dataset;const qe="https://inrupt.com/.well-known/sdk-local-node/",{freeze:Fe}=Object;function lt(l){return l.substring(0,qe.length)===qe}function gt(l){return l.substring(qe.length)}function Pt(l){return`${qe}${l}`}function Ft(l){return typeof l=="string"&&l.substring(0,2)==="_:"}function Z(l){return l.substring(2)}function N(l){return`_:${l.value}`}const E={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function j(l){return l?"true":"false"}function G(l){return l==="true"||l==="1"?!0:l==="false"||l==="0"?!1:null}function fe(l){let d,v;if(l.millisecond&&(l.millisecond<10?d=`00${l.millisecond}`:l.millisecond<100?d=`0${l.millisecond}`:d=l.millisecond),typeof l.timezoneHourOffset=="number"){const x=Math.abs(l.timezoneHourOffset)<10?`0${Math.abs(l.timezoneHourOffset)}`:Math.abs(l.timezoneHourOffset);v=l.timezoneHourOffset>=0?`+${x}`:`-${x}`,l.timezoneMinuteOffset?v=`${v}:${l.timezoneMinuteOffset<10?`0${l.timezoneMinuteOffset}`:l.timezoneMinuteOffset}`:v+=":00"}return`${l.hour<10?`0${l.hour}`:l.hour}:${l.minute<10?`0${l.minute}`:l.minute}:${l.second<10?`0${l.second}`:l.second}${l.millisecond?`.${d}`:""}${v||""}`}function we(l){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(l))return null;const[v,x]=Mt(l),[D,V,z]=v.split(":");let se=Number.parseInt(D,10),Te=Number.parseInt(V,10);const[Ce,Ne]=z.split("."),ct=Number.parseInt(Ce,10),vt=Ne?Number.parseInt(Ne,10):void 0;Te>=60&&(se+=1,Te-=60);const Nt={hour:se,minute:Te,second:ct};if(typeof vt=="number"&&(Nt.millisecond=vt),typeof x=="string"){const[yr,Hr]=$t(x);if(typeof yr!="number"||yr>24||typeof Hr!="number"||Hr>59)return null;Nt.timezoneHourOffset=yr,Nt.timezoneMinuteOffset=Hr}return Nt}function me(l){return l.toISOString()}function $e(l){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(l))return null;const[v,x]=l.split("T"),[D,V]=v.charAt(0)==="-"?[-1,v.substring(1)]:[1,v],[z,se,Te]=V.split("-"),Ce=Number.parseInt(z,10)*D,Ne=Number.parseInt(se,10)-1,ct=Number.parseInt(Te,10),[vt,Nt]=Mt(x),[yr,Hr]=typeof Nt=="string"?$t(Nt):[0,0],[Nr,oo,hn]=vt.split(":"),ir=Number.parseInt(Nr,10)+yr,_i=Number.parseInt(oo,10)+Hr,[Vn,Pi]=hn.split("."),qo=Number.parseInt(Vn,10),aa=Pi?Number.parseInt(Pi,10):0,zo=new Date(Date.UTC(Ce,Ne,ct,ir,_i,qo,aa));return Ce>=0&&Ce<100&&zo.setUTCFullYear(zo.getUTCFullYear()-1900),zo}function Xe(l){const d=l.getFullYear(),v=l.getMonth()+1,x=l.getDate(),[D,V]=Mt(l.toISOString());return`${d}-${String(v).padStart(2,"0")}-${String(x).padStart(2,"0")}${V}`}function ft(l){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(l))return null;const v=l,[x,D]=v.charAt(0)==="-"?[-1,v.substring(1)]:[1,v],[V,z,se]=D.split("-"),Te=se.length>2?se.substring(0,2):se,Ce=Number.parseInt(V,10)*x,Ne=Number.parseInt(z,10)-1,ct=Number.parseInt(Te,10),vt=12,Nt=new Date(Date.UTC(Ce,Ne,ct,vt));return Ce>=0&&Ce<100&&Nt.setUTCFullYear(Nt.getUTCFullYear()-1900),Nt}function Mt(l){if(l.endsWith("Z"))return[l.substring(0,l.length-1),"Z"];const d=l.split("+"),v=l.split("-");return d.length===1&&v.length===1?[d[0],void 0]:d.length>v.length?[d[0],`+${d[1]}`]:[v[0],`-${v[1]}`]}function $t(l){if(l==="Z")return[0,0];const d=l.charAt(0)==="+"?1:-1,[v,x]=l.substring(1).split(":"),D=Number.parseInt(v,10),V=Number.parseInt(x,10);return[D*d,V*d]}function Lr(l){return l.toString()}function ee(l){const d=Number.parseFloat(l);return Number.isNaN(d)?null:d}function de(l){return l.toString()}function K(l){const d=Number.parseInt(l,10);return Number.isNaN(d)?null:d}function P(l){return l.toLowerCase()}function L(l){return ge(l)&&l.termType==="NamedNode"}function k(l){return ge(l)&&l.termType==="Literal"}function ge(l){return l!==null&&typeof l=="object"&&typeof l.termType=="string"&&typeof l.value=="string"&&typeof l.equals=="function"}function xe(l){return L(l)&&lt(l.value)}function ae(l){const d=m(l);if(typeof URL!="function")return!0;try{const v=new URL(d);return!0}catch{return!1}}function bt(l,d){return Rt.namedNode(Wt(gt(l.value),d))}function Wt(l,d){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const v=new URL(d);return v.hash=l,v.href}const Rt=a;function xt(l,d,v={}){var x;if(!["NamedNode","DefaultGraph"].includes(d.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.graph.termType}] as their Graph node.`);const V=d.graph.termType==="DefaultGraph"?"default":d.graph.value,z=(x=l.graphs[V])!==null&&x!==void 0?x:{};return Fe({...l,graphs:Fe({...l.graphs,[V]:Se(z,d,v)})})}function Se(l,d,v){var x;if(!["NamedNode","BlankNode"].includes(d.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.subject.termType}] as their Subject node.`);const V=d.subject.termType==="BlankNode"?`_:${d.subject.value}`:d.subject.value,z=(x=l[V])!==null&&x!==void 0?x:{type:"Subject",url:V,predicates:{}};return Fe({...l,[V]:Ve(z,d,v)})}function Ve(l,d,v){return Fe({...l,predicates:Oe(l.predicates,d,v)})}function Oe(l,d,v){var x;if(!["NamedNode"].includes(d.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.predicate.termType}] as their Predicate node.`);const V=d.predicate.value,z=(x=l[V])!==null&&x!==void 0?x:{};return Fe({...l,[V]:_e(z,d,v)})}function _e(l,d,v){var x,D,V,z,se,Te,Ce,Ne;if(d.object.termType==="NamedNode"){const ct=Fe([...(x=l.namedNodes)!==null&&x!==void 0?x:[],d.object.value]);return Fe({...l,namedNodes:ct})}if(d.object.termType==="Literal"){if(d.object.datatype.value===E.langString){const Nt=d.object.language.toLowerCase(),yr=Fe([...(V=(D=l.langStrings)===null||D===void 0?void 0:D[Nt])!==null&&V!==void 0?V:[],d.object.value]),Hr=Fe({...(z=l.langStrings)!==null&&z!==void 0?z:{},[Nt]:yr});return Fe({...l,langStrings:Hr})}const ct=Fe([...(Te=(se=l.literals)===null||se===void 0?void 0:se[d.object.datatype.value])!==null&&Te!==void 0?Te:[],d.object.value]),vt=Fe({...(Ce=l.literals)!==null&&Ce!==void 0?Ce:{},[d.object.datatype.value]:ct});return Fe({...l,literals:vt})}if(d.object.termType==="BlankNode"){const ct=Ke(d.object,v),vt=Fe([...(Ne=l.blankNodes)!==null&&Ne!==void 0?Ne:[],ct]);return Fe({...l,blankNodes:vt})}throw new Error(`Objects of type [${d.object.termType}] are not supported.`)}function Ke(l,d){var v,x;if(((v=d.chainBlankNodes)!==null&&v!==void 0?v:[]).find(Ce=>Ce.equals(l))===void 0)return N(l);const z=((x=d.otherQuads)!==null&&x!==void 0?x:[]).filter(Ce=>Ce.subject.equals(l)),se=z.filter(Ce=>!Ht(Ce.object)).reduce((Ce,Ne)=>{var ct;if(!["NamedNode"].includes(Ne.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${Ne.predicate.termType}] as their Predicate node.`);const Nt=(ct=Ce[Ne.predicate.value])!==null&&ct!==void 0?ct:{};return Fe({...Ce,[Ne.predicate.value]:_e(Nt,Ne,d)})},{});return z.filter(Ce=>Ht(Ce.object)).reduce((Ce,Ne)=>{var ct,vt;if(!["NamedNode"].includes(Ne.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${Ne.predicate.termType}] as their Predicate node.`);const yr=(ct=Ce[Ne.predicate.value])!==null&&ct!==void 0?ct:{},Hr=(vt=yr.blankNodes)!==null&&vt!==void 0?vt:[];return Fe({...Ce,[Ne.predicate.value]:{...yr,blankNodes:[...Hr,Ke(Ne.object,d)]}})},se)}function ht(l){const d=l.map(z=>z.subject).filter(Ht),v=l.map(z=>z.object).filter(Ht);function x(z){return z.every(se=>z.every(Te=>se.equals(Te)))}const D=[];return v.forEach(z=>{D.push(...yt(z,l))}),d.concat(v).filter(z=>{if(D.some(Te=>Te.equals(z)))return!1;const se=l.filter(Te=>Te.object.equals(z)).map(Te=>Te.subject);return se.length>0&&x(se)})}function ut(l,d={}){var v;const x=[],D=(v=d.dataFactory)!==null&&v!==void 0?v:a;return Object.keys(l.graphs).forEach(V=>{const z=l.graphs[V],se=V==="default"?D.defaultGraph():D.namedNode(V);Object.keys(z).forEach(Te=>{const{predicates:Ce}=z[Te],Ne=Ft(Te)?D.blankNode(Z(Te)):D.namedNode(Te);x.push(...ot(Ce,Ne,se,d))})}),x}function ot(l,d,v,x={}){var D;const V=[],z=(D=x.dataFactory)!==null&&D!==void 0?D:a;return Object.keys(l).forEach(se=>{var Te,Ce,Ne,ct;const vt=z.namedNode(se),Nt=(Te=l[se].langStrings)!==null&&Te!==void 0?Te:{},yr=(Ce=l[se].namedNodes)!==null&&Ce!==void 0?Ce:[],Hr=(Ne=l[se].literals)!==null&&Ne!==void 0?Ne:{},Nr=(ct=l[se].blankNodes)!==null&&ct!==void 0?ct:[];Object.keys(Hr).forEach(ir=>{const _i=z.namedNode(ir);Hr[ir].forEach(Pi=>{const qo=z.literal(Pi,_i);V.push(z.quad(d,vt,qo,v))})}),Object.keys(Nt).forEach(ir=>{Nt[ir].forEach(Vn=>{const Pi=z.literal(Vn,ir);V.push(z.quad(d,vt,Pi,v))})}),yr.forEach(ir=>{const _i=z.namedNode(ir);V.push(z.quad(d,vt,_i,v))}),Nr.forEach(ir=>{if(Ft(ir)){const _i=z.blankNode(Z(ir));V.push(z.quad(d,vt,_i,v))}else{const _i=z.blankNode(),Vn=z.quad(d,vt,_i,v),Pi=ot(ir,_i,v);V.push(Vn),V.push(...Pi)}})}),V}function yt(l,d,v=[]){if(v.find(se=>se.equals(l))!==void 0)return v;const x=d.filter(se=>se.subject.equals(l)&&Ht(se.object)).map(se=>se.object);if(x.length===0)return[];const D=[...v,l],V=x.map(se=>yt(se,d,D)),z=[];for(const se of V)z.push(...se);return z}function Ht(l){return l.termType==="BlankNode"}const Qt=()=>{const l=[],d=[],v=[];return{onQuad:x=>{l.push(x)},onError:x=>{v.push(x)},onComplete:x=>{d.push(x)},parse:async(x,D)=>{(await zt(Be(D))).parse(x,(z,se)=>{z?v.forEach(Te=>Te(z)):se?l.forEach(Te=>Te(se)):d.forEach(Te=>Te())})}}};async function zt(l){return new o.Parser({format:"text/turtle",baseIRI:l})}async function Yt(l,d){const v="text/turtle",x=new o.Writer({format:v,prefixes:d==null?void 0:d.prefixes}),D=l.map(se=>Rt.quad(se.subject,se.predicate,se.object,void 0));return x.addQuads(D),await new Promise((se,Te)=>{x.end((Ce,Ne)=>{Ce?Te(Ce):se(Ne)})})}const fr={acl:"http://www.w3.org/ns/auth/acl#",acp:"http://www.w3.org/ns/solid/acp#",cc:"http://creativecommons.org/ns#",cert:"http://www.w3.org/ns/auth/cert#",csvw:"http://www.w3.org/ns/csvw#",current:"#",dc:"http://purl.org/dc/terms/",dcam:"http://purl.org/dc/dcam/",dcat:"http://www.w3.org/ns/dcat#",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",posixstat:"http://www.w3.org/ns/posix/stat#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",shacl:"http://www.w3.org/ns/shacl#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",solid:"http://www.w3.org/ns/solid/terms#",swapdoc:"http://www.w3.org/2000/10/swap/pim/doc#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",ws:"http://www.w3.org/ns/pim/space#",xsd:"http://www.w3.org/2001/XMLSchema#"},Zt=s.dataset;function Ot(l){const d={graphs:{default:{}},type:"Dataset"},v=Array.from(l),x=ht(v);return v.filter(V=>x.every(z=>!z.equals(V.subject))).reduce((V,z)=>xt(V,z,{otherQuads:v,chainBlankNodes:x}),d)}function mr(l,d={}){var v,x;return((x=(v=d.datasetFactory)===null||v===void 0?void 0:v.dataset)!==null&&x!==void 0?x:Zt)(ut(l,d))}async function wt(l,d){const{prefixes:v=fr,thing:x}={...d},D=new o.Writer({format:"application/turtle",prefixes:v}),V=x?new o.NamedNode(x):void 0;for(const z of mr(l).match(V))D.addQuad(z);return new Promise((z,se)=>{D.end((Te,Ce)=>{Te?se(Te):z(Ce)})})}var It=Object.freeze({__proto__:null,getJsonLdParser:Ze,getTurtleParser:Qt,solidDatasetAsTurtle:wt});const Gt={fetch:_},Lt=["Slug","If-None-Match","Content-Type"];function Sr(l){return Lt.some(d=>l[d]!==void 0)}async function sr(l,d=Gt){const v={...Gt,...d},x=m(l),D=await v.fetch(x,v.init);if(S(D))throw new dt(`Fetching the File failed: [${D.status}] [${D.statusText}] ${await D.text()}.`,D);const V=C(D),z=await D.blob();return Object.assign(z,{internal_resourceInfo:V})}async function jr(l,d=Gt){const v={...Gt,...d},x=f(l)?m(De(l)):m(l),D=await v.fetch(x,{...v.init,method:"DELETE"});if(S(D))throw new dt(`Deleting the file at [${x}] failed: [${D.status}] [${D.statusText}] ${await D.text()}.`,D)}async function nr(l,d,v=Gt){const x=m(l),D=await Br(x,d,"POST",v);if(S(D))throw new dt(`Saving the file in [${l}] failed: [${D.status}] [${D.statusText}] ${await D.text()}.`,D);const V=D.headers.get("Location");if(V===null)throw new Error("Could not determine the location of the newly saved file.");const z=new URL(V,new URL(x).origin).href,se=I(d),Te={internal_resourceInfo:{isRawData:!0,sourceIri:z,contentType:vr(d,v.contentType)}};return Object.assign(se,Te)}async function Kt(l,d,v=Gt){const x=m(l),D=await Br(x,d,"PUT",v);if(S(D))throw new dt(`Overwriting the file at [${x}] failed: [${D.status}] [${D.statusText}] ${await D.text()}.`,D);const V=I(d),z=C(D);return z.sourceIri=x,z.isRawData=!0,Object.assign(V,{internal_resourceInfo:z})}function Bt(l){return Array.isArray(l)}function Kr(l){return typeof l.forEach=="function"}function Mr(l){if(typeof l>"u")return{};let d={};return Bt(l)?l.forEach(([v,x])=>{d[v]=x}):Kr(l)?l.forEach((v,x)=>{d[x]=v}):d=l,d}async function Br(l,d,v,x){var D,V;const z={...Gt,...x},se=Mr((V=(D=z.init)===null||D===void 0?void 0:D.headers)!==null&&V!==void 0?V:{});if(Sr(se))throw new Error(`No reserved header (${Lt.join(", ")}) should be set in the optional RequestInit.`);z.slug!==void 0&&(se.Slug=z.slug),se["Content-Type"]=vr(d,x.contentType);const Te=m(l);return z.fetch(Te,{...z.init,headers:se,method:v,body:d})}function vr(l,d){if(typeof d=="string")return d;const v=typeof l=="object"&&l!==null&&"type"in l&&typeof l.type=="string"&&l.type.length>0?l.type:void 0;return v??"application/octet-stream"}function Cr(l){var d,v,x,D,V,z,se,Te;if(L(l))return`<${l.value}> (URL)`;if(k(l)){if(!L(l.datatype))return`[${l.value}] (RDF/JS Literal of unknown type)`;let Ce;switch(l.datatype.value){case E.boolean:return Ce=(v=(d=G(l.value))===null||d===void 0?void 0:d.valueOf())!==null&&v!==void 0?v:`Invalid data: \`${l.value}\``,`${Ce} (boolean)`;case E.dateTime:return Ce=(D=(x=$e(l.value))===null||x===void 0?void 0:x.toUTCString())!==null&&D!==void 0?D:`Invalid data: \`${l.value}\``,`${Ce} (datetime)`;case E.decimal:return Ce=(z=(V=ee(l.value))===null||V===void 0?void 0:V.toString())!==null&&z!==void 0?z:`Invalid data: \`${l.value}\``,`${Ce} (decimal)`;case E.integer:return Ce=(Te=(se=K(l.value))===null||se===void 0?void 0:se.toString())!==null&&Te!==void 0?Te:`Invalid data: \`${l.value}\``,`${Ce} (integer)`;case E.langString:return`"${l.value}" (${l.language} string)`;case E.string:return`"${l.value}" (string)`;default:return`[${l.value}] (RDF/JS Literal of type: \`${l.datatype.value}\`)`}}return l.termType==="BlankNode"?`[${l.value}] (RDF/JS BlankNode)`:l.termType==="Quad"?"??? (nested RDF* Quad)":l.termType==="Variable"?`?${l.value} (RDF/JS Variable)`:l}function Ct(l){if(!mn(l))throw new mo(l)}function sn(l,d){const v=g(l)?l.internal_changeLog:{additions:[],deletions:[]},[x,D]=d.filter(V=>!Sn(V)).reduce(([V,z],se)=>typeof z.find(Ce=>Ce.equals(se))<"u"?[V,z.filter(Ce=>!Ce.equals(se))]:[V.concat(se),z],[v.additions,v.deletions]);return Fe({...l,internal_changeLog:{additions:x,deletions:D}})}function Wr(l,d){const v=g(l)?l.internal_changeLog:{additions:[],deletions:[]},[x,D]=d.filter(V=>!Sn(V)).reduce(([V,z],se)=>typeof V.find(Ce=>Ce.equals(se))<"u"?[V.filter(Ce=>!Ce.equals(se)),z]:[V,z.concat(se)],[v.additions,v.deletions]);return Fe({...l,internal_changeLog:{additions:x,deletions:D}})}function Ir(l){return g(l)?l:Fe({...l,internal_changeLog:{additions:[],deletions:[]}})}function Sn(l){return l.subject.termType==="BlankNode"||l.object.termType==="BlankNode"}function Gn(l){return Object.keys(l.predicates).filter(d=>pt(l,d)!==null)}function qn(l,d){var v,x,D;if(Ct(l),!ae(d))throw new an(d);const V=m(d),z=(D=(x=(v=l.predicates[V])===null||v===void 0?void 0:v.namedNodes)===null||x===void 0?void 0:x[0])!==null&&D!==void 0?D:null;return z===null?null:lt(z)?`#${gt(z)}`:z}const tn=qn;function rn(l,d){var v,x,D;if(Ct(l),!ae(d))throw new an(d);const V=m(d);return(D=(x=(v=l.predicates[V])===null||v===void 0?void 0:v.namedNodes)===null||x===void 0?void 0:x.map(z=>lt(z)?`#${gt(z)}`:z))!==null&&D!==void 0?D:[]}const h=rn;function y(l,d){Ct(l);const v=kt(l,d,E.boolean);return v===null?null:G(v)}function w(l,d){return Ct(l),Jt(l,d,E.boolean).map(G).filter(x=>x!==null)}function A(l,d){Ct(l);const v=kt(l,d,E.dateTime);return v===null?null:$e(v)}function U(l,d){return Ct(l),Jt(l,d,E.dateTime).map($e).filter(x=>x!==null)}function W(l,d){Ct(l);const v=kt(l,d,E.date);return v===null?null:ft(v)}function Q(l,d){return Ct(l),Jt(l,d,E.date).map(ft).filter(x=>x!==null)}function ue(l,d){Ct(l);const v=kt(l,d,E.time);return v===null?null:we(v)}function oe(l,d){return Ct(l),Jt(l,d,E.time).map(we).filter(x=>x!==null)}function ce(l,d){Ct(l);const v=kt(l,d,E.decimal);return v===null?null:ee(v)}function he(l,d){return Ct(l),Jt(l,d,E.decimal).map(x=>ee(x)).filter(x=>x!==null)}function ye(l,d){Ct(l);const v=kt(l,d,E.integer);return v===null?null:K(v)}function be(l,d){return Ct(l),Jt(l,d,E.integer).map(x=>K(x)).filter(x=>x!==null)}function Pe(l,d){return He(l,d,"en")}function He(l,d,v){var x,D;if(Ct(l),!ae(d))throw new an(d);const V=m(d),z=(D=(x=l.predicates[V])===null||x===void 0?void 0:x.langStrings)!==null&&D!==void 0?D:{},Te=Object.keys(z).find(Ce=>Ce.toLowerCase()===v.toLowerCase()&&Array.isArray(z[Ce])&&z[Ce].length>0);return typeof Te=="string"?z[Te][0]:null}function ze(l,d){return Qe(l,d,"en")}function Qe(l,d,v){var x,D;if(Ct(l),!ae(d))throw new an(d);const V=m(d),z=(D=(x=l.predicates[V])===null||x===void 0?void 0:x.langStrings)!==null&&D!==void 0?D:{},Te=Object.keys(z).find(Ce=>Ce.toLowerCase()===v.toLowerCase()&&Array.isArray(z[Ce])&&z[Ce].length>0);return typeof Te=="string"?[...z[Te]]:[]}function te(l,d){var v,x;if(Ct(l),!ae(d))throw new an(d);const D=m(d),V=(x=(v=l.predicates[D])===null||v===void 0?void 0:v.langStrings)!==null&&x!==void 0?x:{};return new Map(Object.entries(V).map(([z,se])=>[z,[...se]]))}function pe(l,d){return Ct(l),kt(l,d,E.string)}function ve(l,d){return Ct(l),Jt(l,d,E.string)}function Ee(l,d){const v=tn(l,d);return v===null?null:Rt.namedNode(v)}function We(l,d){return h(l,d).map(x=>Rt.namedNode(x))}function Ye(l,d){var v,x,D,V;if(Ct(l),!ae(d))throw new an(d);const z=m(d),se=(x=(v=l.predicates[z])===null||v===void 0?void 0:v.langStrings)!==null&&x!==void 0?x:{},Te=Object.keys(se);if(Te.length>0){const ct=Te.find(vt=>Array.isArray(se[vt])&&se[vt].length>0);if(typeof ct=="string")return Rt.literal(se[ct][0],ct)}const Ce=(V=(D=l.predicates[z])===null||D===void 0?void 0:D.literals)!==null&&V!==void 0?V:{},Ne=Object.keys(Ce);if(Ne.length>0){const ct=Ne.find(vt=>Array.isArray(Ce[vt])&&Ce[vt].length>0);if(typeof ct=="string")return Rt.literal(Ce[ct][0],Rt.namedNode(ct))}return null}function Vt(l,d){var v,x,D,V;if(Ct(l),!ae(d))throw new an(d);const z=m(d);let se=[];const Te=(x=(v=l.predicates[z])===null||v===void 0?void 0:v.langStrings)!==null&&x!==void 0?x:{},Ce=Object.keys(Te);for(const vt of Ce){const yr=Te[vt].map(Hr=>Rt.literal(Hr,vt));se=se.concat(yr)}const Ne=(V=(D=l.predicates[z])===null||D===void 0?void 0:D.literals)!==null&&V!==void 0?V:{},ct=Object.keys(Ne);for(const vt of ct){const Nt=Ne[vt],yr=Rt.namedNode(vt),Hr=Nt.map(Nr=>Rt.literal(Nr,yr));se=se.concat(Hr)}return se}function pt(l,d){var v,x;Ct(l);const D=Ee(l,d);if(D!==null)return D;const V=Ye(l,d);if(V!==null)return V;const z=m(d),se=(x=(v=l.predicates[z])===null||v===void 0?void 0:v.blankNodes)!==null&&x!==void 0?x:[];if(se.length>0){const Te=Ft(se[0])?Z(se[0]):void 0;return Rt.blankNode(Te)}return null}function Tr(l,d){var v,x;Ct(l);const D=We(l,d),V=Vt(l,d),z=m(d),Te=((x=(v=l.predicates[z])===null||v===void 0?void 0:v.blankNodes)!==null&&x!==void 0?x:[]).map(Ne=>{const ct=Ft(Ne)?Z(Ne):void 0;return Rt.blankNode(ct)});return D.concat(V).concat(Te)}function kt(l,d,v){var x,D,V,z;if(!ae(d))throw new an(d);const se=m(d);return(z=(V=(D=(x=l.predicates[se])===null||x===void 0?void 0:x.literals)===null||D===void 0?void 0:D[v])===null||V===void 0?void 0:V[0])!==null&&z!==void 0?z:null}function Jt(l,d,v){var x,D,V;if(!ae(d))throw new an(d);const z=m(d);return[...(V=(D=(x=l.predicates[z])===null||x===void 0?void 0:x.literals)===null||D===void 0?void 0:D[v])!==null&&V!==void 0?V:[]]}function qt(l,d,v={}){var x;if(!ae(d))throw new vo(d);const D=typeof v.scope<"u"?m(v.scope):"default",V=(x=l.graphs[D])!==null&&x!==void 0?x:{},z=m(d),se=lt(z)&&c(l)?Wt(gt(z),Be(l)):z,Te=V[se];return typeof Te>"u"?null:Te}function Ur(l,d={acceptBlankNodes:!1}){var v;const x=typeof d.scope<"u"?m(d.scope):"default",D=(v=l.graphs[x])!==null&&v!==void 0?v:{};return Object.values(D).filter(V=>!Ft(V.url)||d.acceptBlankNodes)}function _r(l,d){var v;const x=vn(d)&&c(l)?Wt(gt(d.url),Be(l)):d.url,D=l.graphs.default,V=Fe({...D,[x]:Fe({...d,url:x})}),z=Fe({...l.graphs,default:V}),se=Rt.namedNode(x),Te=(v=l.graphs.default[x])===null||v===void 0?void 0:v.predicates,Ce=typeof Te<"u"?ot(Te,se,Rt.defaultGraph()):[],Ne=ot(d.predicates,se,Rt.defaultGraph());return sn(Wr(Fe({...l,graphs:z}),Ce),Ne)}function pn(l,d){var v;let x;L(d)?x=d.value:typeof d=="string"?x=lt(d)&&c(l)?Wt(gt(d),Be(l)):d:vn(d)?x=d.url:x=ar(d);const V={...l.graphs.default};delete V[x];const z=Fe({...l.graphs,default:Fe(V)}),se=Rt.namedNode(x),Te=(v=l.graphs.default[x])===null||v===void 0?void 0:v.predicates,Ce=typeof Te<"u"?ot(Te,se,Rt.defaultGraph()):[];return Wr(Fe({...l,graphs:z}),Ce)}function kr(l={}){var d;if(typeof l.url<"u"){const{url:V}=l;if(!ae(V))throw new vo(V);return Fe({type:"Subject",predicates:Fe({}),url:V})}const v=(d=l.name)!==null&&d!==void 0?d:Gs(),x=Pt(v);return Fe({type:"Subject",predicates:Fe({}),url:x})}function mn(l){return typeof l=="object"&&l!==null&&typeof l.type=="string"&&l.type==="Subject"}function $r(l,d){if(vn(l)){if(typeof d>"u")throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return Wt(gt(l.url),d)}return l.url}const ar=$r;function Rn(l){let d="";vn(l)?d+=`## Thing (no URL yet  identifier: \`#${gt(l.url)}\`)
`:d+=`## Thing: ${l.url}
`;const v=Object.keys(l.predicates);if(v.length===0)d+=`
<empty>
`;else for(const x of v){d+=`
Property: ${x}
`;const D=Tr(l,x);d+=D.reduce((V,z)=>`${V}- ${Cr(z)}
`,"")}return d}function vn(l){return lt(l.url)}class mo extends p{constructor(d){const v=`Expected a Thing, but received: [${d}].`;super(v),this.receivedValue=d}}class an extends p{constructor(d){const v=L(d)?d.value:d,x=`Expected a valid URL to identify a property, but received: [${v}].`;super(x),this.receivedProperty=v}}class Hi extends p{constructor(d){const v=L(d)?d.value:d,x=`Expected a valid URL value, but received: [${v}].`;super(x),this.receivedValue=v}}class vo extends p{constructor(d){const v=L(d)?d.value:d,x=`Expected a valid URL to identify a Thing, but received: [${v}].`;super(x),this.receivedValue=v}}const Gs=()=>u.v4();function Ti(l){const d=new URL(l);return d.hash="",d.href}function Mn(){return Fe({type:"Dataset",graphs:{default:{}}})}async function oi(l,d={}){if(S(l))throw new dt(`Fetching the SolidDataset at [${l.url}] failed: [${l.status}] [${l.statusText}] ${await l.text()}.`,l);const v=Ue(l),x={"text/turtle":Qt(),...d.parsers},D=ke(v);if(D===null)throw new Error(`Could not determine the content type of the Resource at [${Be(v)}].`);const V=D.split(";")[0],z=x[V];if(typeof z>"u")throw new Error(`The Resource at [${Be(v)}] has a MIME type of [${V}], but the only parsers available are for the following MIME types: [${Object.keys(x).join(", ")}].`);const se=await l.text();return new Promise((Ce,Ne)=>{let ct=Fe({graphs:Fe({default:Fe({})}),type:"Dataset"});const vt=[],Nt=[];z.onError(yr=>{Ne(new Error(`Encountered an error parsing the Resource at [${Be(v)}] with content type [${D}]: ${yr}`))}),z.onQuad(yr=>{Nt.push(yr),yr.subject.termType==="BlankNode"||yr.object.termType==="BlankNode"?vt.push(yr):ct=xt(ct,yr)}),z.onComplete(async()=>{const Hr=vt.length<=20?ht(vt):[];ct=vt.filter(hn=>Hr.every(ir=>!ir.equals(hn.subject))).reduce((hn,ir)=>xt(hn,ir,{otherQuads:Nt,chainBlankNodes:Hr}),ct);const oo=Fe({...ct,...v});Ce(oo)}),z.parse(se,v)})}async function Dn(l,d=J){var v;l=m(l);const x={...J,...d},D=Object.keys((v=d.parsers)!==null&&v!==void 0?v:{}),V=D.length>0?D.join(", "):"text/turtle",z=await x.fetch(l,{headers:{Accept:V}});if(S(z))throw new dt(`Fetching the Resource at [${l}] failed: [${z.status}] [${z.statusText}] ${await z.text()}.`,z);return await oi(z,d)}async function Vo(l){const d=l.internal_changeLog.deletions.length>0?`DELETE DATA {${(await Yt(l.internal_changeLog.deletions.map(St))).trim()}};`:"",v=l.internal_changeLog.additions.length>0?`INSERT DATA {${(await Yt(l.internal_changeLog.additions.map(St))).trim()}};`:"";return{method:"PATCH",body:`${d} ${v}`,headers:{"Content-Type":"application/sparql-update"}}}async function cs(l,d){return{method:"PUT",body:await Yt(ut(l).map(St),d),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${H.Resource}>; rel="type"`}}}async function ji(l,d,v=J){l=m(l);const x={...J,...v},D=Ir(d),V=ie(D,l)?await Vo(D):await cs(D,v),z=await x.fetch(l,V);if(S(z)){const Ne=ie(D,l)?`The changes that were sent to the Pod are listed below.

${it(D)}`:`The SolidDataset that was sent to the Pod is listed below.

${Je(D)}`;throw new dt(`Storing the Resource at [${l}] failed: [${z.status}] [${z.statusText}] ${await z.text()}.

${Ne}`,z)}const se={...C(z),isRawData:!1},Te=Fe({...d,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:se});return Et(Te)}async function O(l,d=J){const v={...J,...d},x=f(l)?m(Be(l)):m(l),D=await v.fetch(x,{method:"DELETE"});if(S(D))throw new dt(`Deleting the SolidDataset at [${x}] failed: [${D.status}] [${D.statusText}] ${await D.text()}.`,D)}async function q(l,d=J){var v;l=m(l),l=l.endsWith("/")?l:`${l}/`;const x={...J,...d},D=await x.fetch(l,{method:"PUT",body:x.initialContent?await Yt(ut(x.initialContent).map(St)):void 0,headers:{Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:`<${H.BasicContainer}>; rel="type"`}});if(S(D)){const se=x.initialContent===void 0?"empty":"non-empty";throw new dt(`Creating the ${se} Container at [${l}] failed: [${D.status}] [${D.statusText}] ${await D.text()}.`,D)}const V=C(D);return Fe({...(v=d.initialContent)!==null&&v!==void 0?v:Mn(),internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:V})}function X(l,d){return Ti(l.internal_resourceInfo.sourceIri)===Ti(d)}function ie(l,d){return g(l)&&f(l)&&typeof l.internal_resourceInfo.sourceIri=="string"&&X(l,d)}async function Ae(l,d,v=J){const x={...J,...v};l=m(l);const D=await Yt(ut(d).map(St)),V={"Content-Type":"text/turtle",Link:`<${H.Resource}>; rel="type"`};v.slugSuggestion&&(V.slug=v.slugSuggestion);const z=await x.fetch(l,{method:"POST",body:D,headers:V});if(S(z))throw new dt(`Storing the Resource in the Container at [${l}] failed: [${z.status}] [${z.statusText}] ${await z.text()}.

The SolidDataset that was sent to the Pod is listed below.

${Je(d)}`,z);const se=C(z);if(!se.location)throw new Error("Could not determine the location of the newly saved SolidDataset.");let Te;try{Te=new URL(se.location).href}catch{Te=new URL(se.location,z.url).href}const Ne=Fe({...d,...{internal_resourceInfo:{isRawData:!1,sourceIri:Te}}});return Et(Ne)}async function le(l,d=J){l=m(l);const v={...J,...d},x={"Content-Type":"text/turtle",Link:`<${H.BasicContainer}>; rel="type"`};d.slugSuggestion&&(x.slug=d.slugSuggestion);const D=await v.fetch(l,{method:"POST",headers:x});if(S(D))throw new dt(`Creating an empty Container in the Container at [${l}] failed: [${D.status}] [${D.statusText}] ${await D.text()}.`,D);const V=C(D);if(!V.location)throw new Error("Could not determine the location of the newly created Container.");try{const z=new URL(V.location).toString();return Fe({...Mn(),internal_resourceInfo:{...V,sourceIri:z}})}catch{}return Fe({...Mn(),internal_resourceInfo:{...V,sourceIri:new URL(V.location,D.url).href}})}async function Re(l,d=J){const v=f(l)?m(Be(l)):m(l);if(!je(l))throw new Error(`You're trying to delete the Container at [${v}], but Container URLs should end in a \`/\`. Are you sure this is a Container?`);const D=await{...J,...d}.fetch(v,{method:"DELETE"});if(S(D))throw new dt(`Deleting the Container at [${v}] failed: [${D.status}] [${D.statusText}] ${await D.text()}.`,D)}function et(l){const d=qt(l,Be(l));return d!==null?h(d,H.contains):[]}function Je(l){let d="";f(l)?d+=`# SolidDataset: ${Be(l)}
`:d+=`# SolidDataset (no URL yet)
`;const v=Ur(l);return v.length===0?d+=`
<empty>
`:v.forEach(x=>{d+=`
${Rn(x)}`,g(l)&&(d+=`
${mt(l,x)}
`)}),d}function it(l){if(!f(l))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!g(l)||l.internal_changeLog.additions.length===0&&l.internal_changeLog.deletions.length===0)return`## Changes compared to ${Be(l)}

This SolidDataset has not been modified since it was fetched from ${Be(l)}.
`;let d=`## Changes compared to ${Be(l)}
`;const v=_t(l);return Object.keys(v).forEach(x=>{d+=`
### Thing: ${x}
`;const D=v[x];Object.keys(D).forEach(V=>{d+=`
Property: ${V}
`;const{deleted:z}=D[V],{added:se}=D[V];z.length>0&&(d+=`- Removed:
`,d+=z.reduce((Te,Ce)=>`${Te}  - ${Cr(Ce)}
`,"")),se.length>0&&(d+=`- Added:
`,d+=se.reduce((Te,Ce)=>`${Te}  - ${Cr(Ce)}
`,""))})}),d}function _t(l){const d=Object.create(null);return l.internal_changeLog.deletions.forEach(v=>{var x,D,V;const z=xe(v.subject)?bt(v.subject,Be(l)):v.subject;if(!L(z)||!L(v.predicate))return;const se=m(z),Te=m(v.predicate);(x=d[se])!==null&&x!==void 0||(d[se]=Object.create(null)),(D=(V=d[se])[Te])!==null&&D!==void 0||(V[Te]={added:[],deleted:[]}),d[se][Te].deleted.push(v.object)}),l.internal_changeLog.additions.forEach(v=>{var x,D,V;const z=xe(v.subject)?bt(v.subject,Be(l)):v.subject;if(!L(z)||!L(v.predicate))return;const se=m(z),Te=m(v.predicate);(x=d[se])!==null&&x!==void 0||(d[se]=Object.create(null)),(D=(V=d[se])[Te])!==null&&D!==void 0||(V[Te]={added:[],deleted:[]}),d[se][Te].added.push(v.object)}),d}function mt(l,d){const v=Rt.namedNode(d.url),x=l.internal_changeLog.additions.reduce((se,Te)=>Te.subject.equals(v)?se+1:se,0),D=l.internal_changeLog.deletions.reduce((se,Te)=>Te.subject.equals(v)?se+1:se,0),V=x===1?"1 new value added":`${x} new values added`,z=D===1?"1 value removed":`${D} values removed`;return`(${V} / ${z})`}function St(l){const d=L(l.subject)?at(l.subject):l.subject,v=L(l.object)?at(l.object):l.object;return Rt.quad(d,l.predicate,v,l.graph)}function at(l){return lt(l.value)?Rt.namedNode(`#${gt(l.value)}`):l}function Et(l){const d=Be(l),v=l.graphs.default,D=Object.keys(v).reduce((z,se)=>{const Te=Ut(z[se],d),Ce=lt(se)?`${d}#${gt(se)}`:se,Ne={...z};return delete Ne[se],Ne[Ce]=Te,Fe(Ne)},v),V=Fe({...l.graphs,default:D});return Fe({...l,graphs:V})}function Ut(l,d){const x=Object.keys(l.predicates).reduce((D,V)=>{var z;const se=(z=D[V].namedNodes)!==null&&z!==void 0?z:[];if(se.every(Ne=>!lt(Ne)))return D;const Te=Fe(se.map(Ne=>lt(Ne)?`${d}#${gt(Ne)}`:Ne)),Ce=Fe({...D[V],namedNodes:Te});return Fe({...D,[V]:Ce})},l.predicates);return Fe({...l,predicates:x,url:lt(l.url)?`${d}#${gt(l.url)}`:l.url})}async function jt(l,d=J){const v=m(l);try{const se=new URL("/.well-known/solid",new URL(v).origin).href;return await Dn(se,{fetch:_})}catch{}const x=await Le(v,{fetch:d.fetch,ignoreAuthenticationErrors:!0}),V=Ie(x)[M.storage],z=(V==null?void 0:V.length)===1?V[0]:null;if(z!==null){const se=new URL(".well-known/solid",z.endsWith("/")?z:`${z}/`).href;return Dn(se,{...d,parsers:{"application/ld+json":Ze()}})}throw new Error("Could not determine storage root or well-known solid resource.")}function er(l){return{...Mn(),internal_resourceInfo:{sourceIri:m(l),isRawData:!1,contentType:"text/turtle",linkedResources:{}}}}function Rr(l){const d=m(l);if(!d.endsWith("/"))throw new Error("A Container's URL should end in a slash. Please update your tests.");return er(d)}function rr(l,d){const v=new Blob;return Object.assign(v,{internal_resourceInfo:{sourceIri:m(l),isRawData:!0,contentType:d==null?void 0:d.contentType,linkedResources:{}}})}function Tt(l,d=404,v="Not Found"){const x=new r.Response(void 0,{status:d,statusText:v});return new dt(`Fetching the Resource at [${l}] failed: [${x.status}] [${x.statusText}].`,x)}const hr=(l,d,v)=>{var x,D;if(Ct(l),!ae(d))throw new an(d);if(!mn(v)&&!ae(v))throw new Hi(v);const V=m(d),z=(x=l.predicates[V])!==null&&x!==void 0?x:{},se=(D=z.namedNodes)!==null&&D!==void 0?D:[];let Te;L(v)?Te=v.value:typeof v=="string"?Te=v:vn(v)?Te=v.url:Te=ar(v);const Ce=Fe(se.concat(m(Te))),Ne=Fe({...z,namedNodes:Ce}),ct=Fe({...l.predicates,[V]:Ne});return Fe({...l,predicates:ct})},rt=hr,pr=(l,d,v)=>(Ct(l),xn(l,d,j(v),E.boolean)),Fr=(l,d,v)=>(Ct(l),xn(l,d,me(v),E.dateTime)),lr=(l,d,v)=>(Ct(l),xn(l,d,Xe(v),E.date)),dr=(l,d,v)=>(Ct(l),xn(l,d,fe(v),E.time)),Vr=(l,d,v)=>(Ct(l),xn(l,d,Lr(v),E.decimal)),wr=(l,d,v)=>(Ct(l),xn(l,d,de(v),E.integer));function Gr(l,d,v){return Pr(l,d,v,"en")}function Pr(l,d,v,x){var D,V,z;if(Ct(l),!ae(d))throw new an(d);const se=m(d),Te=P(x),Ce=(D=l.predicates[se])!==null&&D!==void 0?D:{},Ne=(V=Ce.langStrings)!==null&&V!==void 0?V:{},ct=(z=Ne[Te])!==null&&z!==void 0?z:[],vt=Fe(ct.concat(v)),Nt=Fe({...Ne,[Te]:vt}),yr=Fe({...Ce,langStrings:Nt}),Hr=Fe({...l.predicates,[se]:yr});return Fe({...l,predicates:Hr})}const Qr=(l,d,v)=>(Ct(l),xn(l,d,v,E.string));function tr(l,d,v){return hr(l,d,v.value)}function Or(l,d,v){if(Ct(l),!ae(d))throw new an(d);return v.datatype.value===E.langString?Pr(l,d,v.value,v.language):xn(l,d,v.value,v.datatype.value)}function wn(l,d,v){var x,D;if(v.termType==="NamedNode")return tr(l,d,v);if(v.termType==="Literal")return Or(l,d,v);if(v.termType==="BlankNode"){if(Ct(l),!ae(d))throw new an(d);const V=m(d),z=(x=l.predicates[V])!==null&&x!==void 0?x:{},se=(D=z.blankNodes)!==null&&D!==void 0?D:[],Te=Fe(se.concat(N(v))),Ce=Fe({...z,blankNodes:Te}),Ne=Fe({...l.predicates,[V]:Ce});return Fe({...l,predicates:Ne})}throw new Error(`Term type [${v.termType}] is not supported by @inrupt/solid-client.`)}function xn(l,d,v,x){var D,V,z;if(Ct(l),!ae(d))throw new an(d);const se=m(d),Te=(D=l.predicates[se])!==null&&D!==void 0?D:{},Ce=(V=Te.literals)!==null&&V!==void 0?V:{},Ne=(z=Ce[x])!==null&&z!==void 0?z:[],ct=Fe(Ne.concat(v)),vt=Fe({...Ce,[x]:ct}),Nt=Fe({...Te,literals:vt}),yr=Fe({...l.predicates,[se]:Nt});return Fe({...l,predicates:yr})}function Dt(l,d){if(Ct(l),!ae(d))throw new an(d);const v=m(d),x={...l.predicates};return delete x[v],Fe({...l,predicates:Fe(x)})}const ln=(l,d,v)=>{var x,D,V;if(Ct(l),!ae(d))throw new an(d);const z=m(d);if(!mn(v)&&!ae(v))throw new Hi(v);const se=mn(v)?ar(v):m(v),Te=Fe((V=(D=(x=l.predicates[z])===null||x===void 0?void 0:x.namedNodes)===null||D===void 0?void 0:D.filter(ct=>ct.toLowerCase()!==se.toLowerCase()))!==null&&V!==void 0?V:[]),Ce=Fe({...l.predicates[z],namedNodes:Te}),Ne=Fe({...l.predicates,[z]:Ce});return Fe({...l,predicates:Ne})},gr=ln,ei=(l,d,v)=>(Ct(l),to(l,d,E.boolean,x=>G(x)===v)),Bn=(l,d,v)=>(Ct(l),to(l,d,E.dateTime,x=>{var D;return((D=$e(x))===null||D===void 0?void 0:D.getTime())===v.getTime()})),wo=(l,d,v)=>(Ct(l),to(l,d,E.date,function(x){const D=ft(x);return D?D.getFullYear()===v.getFullYear()&&D.getMonth()===v.getMonth()&&D.getUTCDate()===v.getUTCDate():!1})),eo=(l,d,v)=>(Ct(l),to(l,d,E.time,function(x){const D=we(x);return D?D.hour===v.hour&&D.minute===v.minute&&D.second===v.second&&D.millisecond===v.millisecond&&D.timezoneHourOffset===v.timezoneHourOffset&&D.timezoneMinuteOffset===v.timezoneMinuteOffset:!1})),Ql=(l,d,v)=>(Ct(l),to(l,d,E.decimal,x=>ee(x)===v)),Na=(l,d,v)=>(Ct(l),to(l,d,E.integer,x=>K(x)===v));function zp(l,d,v){return Po(l,d,v,"en")}function Po(l,d,v,x){var D,V;if(Ct(l),!ae(d))throw new an(d);const z=m(d),se=(V=(D=l.predicates[z])===null||D===void 0?void 0:D.langStrings)!==null&&V!==void 0?V:{},Te=Object.keys(se).find(yr=>P(yr)===P(x)&&Array.isArray(se[yr])&&se[yr].length>0);if(typeof Te!="string")return l;const Ce=se[Te],Ne=Fe(Ce.filter(yr=>yr!==v)),ct=Fe({...se,[Te]:Ne}),vt=Fe({...l.predicates[z],langStrings:ct}),Nt=Fe({...l.predicates,[z]:vt});return Fe({...l,predicates:Nt})}const Yl=(l,d,v)=>(Ct(l),to(l,d,E.string,x=>x===v));function Zl(l,d,v){return ln(l,d,v.value)}function qs(l,d,v){var x,D,V;if(Ct(l),!ae(d))throw new an(d);const z=v.datatype.value;if(z===E.langString)return Po(l,d,v.value,v.language);const se=m(d),Te=(x=l.predicates[se])!==null&&x!==void 0?x:{},Ce=(D=Te.literals)!==null&&D!==void 0?D:{},Ne=(V=Ce[z])!==null&&V!==void 0?V:[],ct=Fe(Ne.filter(Nr=>Nr!==v.value)),vt=Fe({...Ce,[z]:ct}),Nt=Fe({...Te,literals:vt}),yr=Fe({...l.predicates,[se]:Nt});return Fe({...l,predicates:yr})}function to(l,d,v,x){var D,V,z;if(!ae(d))throw new an(d);const se=m(d),Te=(D=l.predicates[se])!==null&&D!==void 0?D:{},Ce=(V=Te.literals)!==null&&V!==void 0?V:{},Ne=(z=Ce[v])!==null&&z!==void 0?z:[],ct=Fe(Ne.filter(Nr=>!x(Nr))),vt=Fe({...Ce,[v]:ct}),Nt=Fe({...Te,literals:vt}),yr=Fe({...l.predicates,[se]:Nt});return Fe({...l,predicates:yr})}const ro=(l,d,v)=>{if(Ct(l),!ae(d))throw new an(d);if(!mn(v)&&!ae(v))throw new Hi(v);return hr(Dt(l,d),d,v)},gn=ro,vd=(l,d,v)=>(Ct(l),pr(Dt(l,d),d,v)),wd=(l,d,v)=>(Ct(l),Fr(Dt(l,d),d,v)),vi=(l,d,v)=>(Ct(l),lr(Dt(l,d),d,v)),ka=(l,d,v)=>(Ct(l),dr(Dt(l,d),d,v)),_d=(l,d,v)=>(Ct(l),Vr(Dt(l,d),d,v)),zs=(l,d,v)=>(Ct(l),wr(Dt(l,d),d,v));function Cn(l,d,v,x){return Ct(l),Pr(Dt(l,d),d,v,x)}const eu=(l,d,v)=>(Ct(l),Qr(Dt(l,d),d,v));function Sd(l,d,v){return Ct(l),tr(Dt(l,d),d,v)}function Ed(l,d,v){return Ct(l),Or(Dt(l,d),d,v)}function Js(l,d,v){if(Ct(l),!ae(d))throw new an(d);return wn(Dt(l,d),d,v)}function wi(l=kr()){let d=mn(l)?l:kr(l);function v(z){return(se,Te)=>(d=z(d,se,Te),V)}function x(z){return(se,Te)=>(d=z(d,se,Te),V)}function D(z){return(se,Te)=>(d=z(d,se,Te),V)}const V={build:()=>d,addUrl:v(hr),addIri:v(rt),addBoolean:v(pr),addDatetime:v(Fr),addDate:v(lr),addTime:v(dr),addDecimal:v(Vr),addInteger:v(wr),addStringNoLocale:v(Qr),addStringEnglish:(z,se)=>(d=Pr(d,z,se,"en"),V),addStringWithLocale:(z,se,Te)=>(d=Pr(d,z,se,Te),V),addNamedNode:v(tr),addLiteral:v(Or),addTerm:v(wn),setUrl:x(ro),setIri:x(gn),setBoolean:x(vd),setDatetime:x(wd),setDate:x(vi),setTime:x(ka),setDecimal:x(_d),setInteger:x(zs),setStringNoLocale:x(eu),setStringEnglish:(z,se)=>(d=Cn(d,z,se,"en"),V),setStringWithLocale:(z,se,Te)=>(d=Cn(d,z,se,Te),V),setNamedNode:x(Sd),setLiteral:x(Ed),setTerm:x(Js),removeAll:z=>(d=Dt(d,z),V),removeUrl:D(ln),removeIri:D(gr),removeBoolean:D(ei),removeDatetime:D(Bn),removeDate:D(wo),removeTime:D(eo),removeDecimal:D(Ql),removeInteger:D(Na),removeStringNoLocale:D(Yl),removeStringEnglish:(z,se)=>wi(Po(d,z,se,"en")),removeStringWithLocale:(z,se,Te)=>wi(Po(d,z,se,Te)),removeNamedNode:D(Zl),removeLiteral:D(qs)};return V}function bd(l){const d=m(l);return{type:"Subject",predicates:{},url:d}}function ww(l){const d=Ie(l).type;return Array.isArray(d)&&d.includes(F.AccessControlResource)}async function Io(l,d=J){if(!Pn(l))return{resourceAcl:null,fallbackAcl:null};try{const v=await _w(l,d);return v===null?{resourceAcl:null,fallbackAcl:await Sw(l,d)}:{resourceAcl:v,fallbackAcl:null}}catch(v){if(v instanceof Jp)return{resourceAcl:null,fallbackAcl:null};throw v}}async function _w(l,d=J){if(!Pn(l))return null;try{const v=await Dn(l.internal_resourceInfo.aclUrl,d);if(ww(v))throw new Jp(l,v);return Fe({...v,internal_accessTo:Be(l)})}catch(v){if(v instanceof Jp)throw v;return null}}async function Sw(l,d=J){const v=new URL(Be(l)),x=v.pathname;if(x==="/")return null;const D=Ew(x),V=new URL(D,v.origin).href,z=await Le(V,d);if(!Pn(z))return null;const se=await _w(z,d);return se===null?Sw(z,d):se}function Ew(l){const d=l.substring(l.length-1)==="/"?l.substring(0,l.length-1):l;return`${l.substring(0,d.lastIndexOf("/"))}/`}function no(l){return Ur(l).filter(_P)}function _P(l){return h(l,B.type).includes(T.Authorization)}function tu(l,d){return l.filter(v=>SP(v,d))}function SP(l,d){return h(l,T.accessTo).includes(d)}function Da(l,d){return l.filter(v=>EP(v,d))}function EP(l,d){return h(l,T.default).includes(d)||h(l,T.defaultForNew).includes(d)}function Xs(l){const d=h(l,T.mode);return d.includes(Zr.write)?{read:d.includes(Zr.read),append:!0,write:!0,control:d.includes(Zr.control)}:{read:d.includes(Zr.read),append:d.includes(Zr.append),write:!1,control:d.includes(Zr.control)}}function Qs(l){return l.reduce((d,v)=>d.write||v.write?{read:d.read||v.read,append:!0,write:!0,control:d.control||v.control}:{read:d.read||v.read,append:d.append||v.append,write:!1,control:d.control||v.control},{read:!1,append:!1,write:!1,control:!1})}function bP(l){return no(l).filter(AP).reduce(pn,l)}function AP(l){return ot(l.predicates,Rt.namedNode(l.url),Rt.defaultGraph()).some(d=>!RP(d))?!1:tn(l,T.accessTo)===null&&tn(l,T.default)===null&&tn(l,T.defaultForNew)===null||tn(l,T.mode)===null||tn(l,T.agent)===null&&tn(l,T.agentGroup)===null&&tn(l,T.agentClass)===null}function RP(l){const{predicate:d}=l,{object:v}=l;return!!(d.equals(Rt.namedNode(B.type))&&v.equals(Rt.namedNode(T.Authorization))||d.equals(Rt.namedNode(T.accessTo))||d.equals(Rt.namedNode(T.default))||d.equals(Rt.namedNode(T.defaultForNew))||d.equals(Rt.namedNode(T.mode))&&Object.values(Zr).some(x=>v.equals(Rt.namedNode(x)))||d.equals(Rt.namedNode(T.agent))||d.equals(Rt.namedNode(T.agentGroup))||d.equals(Rt.namedNode(T.agentClass))||d.equals(Rt.namedNode(T.origin)))}const Zr={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function bw(l,d,v){return l.filter(x=>h(x,v).includes(d))}function Aw(l,d){const v={};return l.forEach(x=>{const D=h(x,d),V=Xs(x);D.forEach(z=>{v[z]=typeof v[z]>"u"?V:Qs([v[z],V])})}),v}function Rw(l){let d=kr();return d=gn(d,B.type,T.Authorization),l.read&&(d=rt(d,T.mode,Zr.read)),l.append&&!l.write&&(d=rt(d,T.mode,Zr.append)),l.write&&(d=rt(d,T.mode,Zr.write)),l.control&&(d=rt(d,T.mode,Zr.control)),d}function xP(l){let d=kr();d=gn(d,B.type,T.Authorization);function v(x,D,V){return h(x,V).reduce((z,se)=>rt(z,V,se),D)}return d=v(l,d,T.accessTo),d=v(l,d,T.default),d=v(l,d,T.defaultForNew),d=v(l,d,T.agent),d=v(l,d,T.agentGroup),d=v(l,d,T.agentClass),d=v(l,d,T.origin),d=v(l,d,T.mode),d}function $i(l,d){return Object.assign(I(l),{internal_acl:d})}const CP=[T.agent,T.agentClass,T.agentGroup,T.origin];function TP(l,d,v,x,D){if(!h(l,v).includes(d)){const se=Rw({read:!1,append:!1,write:!1,control:!1});return[l,se]}const V=gr(l,v,d);let z=xP(l);return z=gr(z,D==="resource"?T.accessTo:T.default,x),D==="default"&&(z=gr(z,T.defaultForNew,x)),z=gn(z,v,d),CP.filter(se=>se!==v).forEach(se=>{z=Dt(z,se)}),[V,z]}function La(l,d,v,x,D){let V=l;Ur(l).forEach(Te=>{const[Ce,Ne]=TP(Te,D,v,l.internal_accessTo,x);V=_r(V,Ce),V=_r(V,Ne)});let z=Rw(d);z=gn(z,x==="resource"?T.accessTo:T.default,l.internal_accessTo),z=gn(z,v,D);const se=_r(V,z);return bP(se)}function xw(l,d){return $i(l,{resourceAcl:d,fallbackAcl:null})}function PP(l){return l.internal_acl.resourceAcl}class Jp extends Error{constructor(d,v){super(`[${De(d)}] is governed by Access Control Policies in [${De(v)}] rather than by Web Access Control.`)}}function IP(l){return typeof l.internal_acl=="object"}function ds(l){return l.internal_acl.resourceAcl!==null&&Be(l)===l.internal_acl.resourceAcl.internal_accessTo&&l.internal_resourceInfo.aclUrl===Be(l.internal_acl.resourceAcl)}async function FP(l,d=J){const v=await Dn(l,d),x=await Io(v,d);return $i(v,x)}async function OP(l,d=J){const v=await sr(l,d),x=await Io(v,d);return $i(v,x)}async function NP(l,d=J){const v=await Le(l,d),x=await Io(v,d);return $i(v,x)}function ru(l){return ds(l)?l.internal_acl.resourceAcl:null}function fs(l){return l.internal_acl.fallbackAcl!==null}function Xp(l){return fs(l)?l.internal_acl.fallbackAcl:null}function Ad(l){return Fe({...Mn(),internal_accessTo:Be(l),internal_resourceInfo:{sourceIri:l.internal_resourceInfo.aclUrl,isRawData:!1,linkedResources:{}}})}function Cw(l){const d=Ad(l),v=no(l.internal_acl.fallbackAcl);return Da(v,l.internal_acl.fallbackAcl.internal_accessTo).map(z=>(z=Dt(z,T.default),z=Dt(z,T.defaultForNew),z=gn(z,T.accessTo,Be(l)),z=gn(z,T.default,Be(l)),z)).reduce(_r,d)}async function Tw(l,d,v=J){if(!Pn(l))throw new Error(`Could not determine the location of the ACL for the Resource at [${Be(l)}]; possibly the current user does not have Control access to that Resource. Try calling \`hasAccessibleAcl()\` before calling \`saveAclFor()\`.`);return{...await ji(l.internal_resourceInfo.aclUrl,d,v),internal_accessTo:Be(l)}}async function kP(l,d=J){const x=await{...J,...d}.fetch(l.internal_resourceInfo.aclUrl,{method:"DELETE"});if(!x.ok)throw new Error(`Deleting the ACL of the Resource at [${Be(l)}] failed: [${x.status}] [${x.statusText}].`);return Object.assign(I(l),{acl:{resourceAcl:null}})}function Pn(l){return typeof l.internal_resourceInfo.aclUrl=="string"}function Qp(l,d){return ds(l)?Iw(l.internal_acl.resourceAcl,d):fs(l)?Nw(l.internal_acl.fallbackAcl,d):null}function Pw(l){if(ds(l)){const d=ru(l);return Fw(d)}if(fs(l)){const d=Xp(l);return kw(d)}return null}function Iw(l,d){const v=no(l),x=tu(v,l.internal_accessTo),V=Dw(x,d).map(Xs);return Qs(V)}function Fw(l){const d=no(l),v=tu(d,l.internal_accessTo),x=Lw(v);return Uw(x)}function Ow(l,d,v){return La(l,v,T.agent,"resource",d)}function Nw(l,d){const v=no(l),x=Da(v,l.internal_accessTo),V=Dw(x,d).map(Xs);return Qs(V)}function kw(l){const d=no(l),v=Da(d,l.internal_accessTo),x=Lw(v);return Uw(x)}function DP(l,d,v){return La(l,v,T.agent,"default",d)}function Dw(l,d){return bw(l,d,T.agent)}function Lw(l){return l.filter(LP)}function LP(l){return tn(l,T.agent)!==null}function Uw(l){return Aw(l,T.agent)}function Yp(l,d){return ds(l)?Bw(l.internal_acl.resourceAcl,d):fs(l)?jw(l.internal_acl.fallbackAcl,d):null}function Mw(l){if(ds(l)){const d=ru(l);return Hw(d)}if(fs(l)){const d=Xp(l);return $w(d)}return null}function Bw(l,d){const v=no(l),x=tu(v,l.internal_accessTo),V=Vw(x,d).map(Xs);return Qs(V)}function Hw(l){const d=no(l),v=tu(d,l.internal_accessTo);return Kw(v)}function jw(l,d){const v=no(l),x=Da(v,l.internal_accessTo),V=Vw(x,d).map(Xs);return Qs(V)}function $w(l){const d=no(l),v=Da(d,l.internal_accessTo);return Kw(v)}function Vw(l,d){return bw(l,d,T.agentGroup)}function Kw(l){return Aw(l,T.agentGroup)}function Ww(l,d,v){return La(l,v,T.agentGroup,"resource",d)}function UP(l,d,v){return La(l,v,T.agentGroup,"default",d)}function Zp(l){return ds(l)?Gw(l.internal_acl.resourceAcl):fs(l)?qw(l.internal_acl.fallbackAcl):null}function Gw(l){const d=no(l),v=tu(d,l.internal_accessTo),D=Jw(v,$.Agent).map(Xs);return Qs(D)}function qw(l){const d=no(l),v=Da(d,l.internal_accessTo),D=Jw(v,$.Agent).map(Xs);return Qs(D)}function zw(l,d){return La(l,d,T.agentClass,"resource",$.Agent)}function MP(l,d){return La(l,d,T.agentClass,"default",$.Agent)}function Jw(l,d){return l.filter(v=>BP(v,d))}function BP(l,d){return h(l,T.agentClass).includes(d)}function HP(l,d){return Object.assign(I(l),{internal_resourceInfo:{...l.internal_resourceInfo,aclUrl:d}})}function jP(l){var d;const v=(d=l.internal_resourceInfo.aclUrl)!==null&&d!==void 0?d:"https://your.pod/mock-acl.ttl",x=Object.assign(I(l),{internal_resourceInfo:{...l.internal_resourceInfo,aclUrl:v}}),D=Ad(x);return $i(x,{resourceAcl:D,fallbackAcl:null})}function $P(l){const d=Ew(De(l)),v=`${d}.acl`,x=HP(Rr(d),v),D=Ad(x);return $i(I(l),{resourceAcl:null,fallbackAcl:D})}function Xw(l,d){const v=qt(l,d);if(v===null)throw new Error(`Profile document [${Be(l)}] does not include WebID [${d}]`);return v}function VP(l,d,v){return _r(l,gn(Xw(l,d),Y.publicKey,v))}function Qw(l,d){return qn(Xw(l,d),Y.publicKey)}const KP=l=>typeof l.keys<"u";async function Yw(l,d,v=J){const D=await{...J,...v}.fetch(d);if(!D.ok)throw new Error(`Fetching [${d}] returned an error: ${D.status} ${D.statusText}`);try{const V=await D.json();if(!KP(V))throw new Error(`[${d}] does not dereference to a valid JWKS: ${JSON.stringify(V)}`);return{keys:[...V.keys,l]}}catch(V){throw new Error(`Parsing the document at [${d}] failed: ${V}`)}}async function WP(l,d,v=J){const x=await Dn(d,{fetch:v.fetch});if(x===null)throw new Error(`The profile document associated with WebID [${d}] could not be retrieved.`);const D=Qw(x,d);if(D===null)throw new Error(`No key set is declared for the property [${Y.publicKey}] in the profile of [${d}]`);const V=await Yw(l,D,v);return Kt(D,new Blob([JSON.stringify(V)]),{contentType:"application/json",fetch:v.fetch})}function Zw(l,d){const v=qt(d,l),x=Ur(d).filter(D=>h(D,$.primaryTopic).length>0).map(ar).concat(v?h(v,$.isPrimaryTopicOf):[]).filter(D=>D!==De(d));return Array.from(new Set(x))}async function e_(l,d=J){var v,x;const D=(v=d.fetch)!==null&&v!==void 0?v:_,V=(x=d.webIdProfile)!==null&&x!==void 0?x:await Dn(l,{fetch:_}),z=(await Promise.allSettled(Zw(l,V).map(se=>Dn(se,{fetch:D})))).filter(se=>se.status==="fulfilled").map(se=>se.value);return{webIdProfile:V,altProfileAll:z}}async function GP(l,d=J){const v=await e_(l,d);return t_(v,l)}function t_(l,d){const v=new Set;return[l.webIdProfile,...l.altProfileAll].forEach(x=>{const D=qt(x,d);D!==null&&h(D,M.storage).forEach(V=>v.add(V))}),Array.from(v)}async function qP(l){return Dn(l,{fetch:_})}function br(l){if(!In(l))throw new Error(`An Access Control Resource for [${Be(l)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return l.internal_acp.acr}function si(l,d){return Object.assign(I(l),{internal_acp:{...l.internal_acp,acr:d}})}function r_(l){let d=kr(l);return d=gn(d,B.type,F.AccessControl),d}function zP(l,d,v){const x=br(l),D=qt(x,d,v);return D===null||!h(D,B.type).includes(F.AccessControl)?null:D}function Ko(l,d){const v=br(l),x=Ur(v,d),D=x.filter(z=>h(z,B.type).includes(F.AccessControl)),V=x.filter(z=>h(z,F.accessControl).length>0).map(z=>{const se=h(z,F.accessControl)[0];return kr({url:se})});return D.concat(V)}function Ys(l,d){const v=br(l),x=_r(v,d);return si(l,x)}function n_(l,d){return rt(l,F.apply,d)}function i_(l){return h(l,F.apply)}function o_(l,d){return gr(l,F.apply,d)}function s_(l){return Dt(l,F.apply)}function a_(l,d){return rt(l,F.applyMembers,d)}function eg(l){return h(l,F.applyMembers)}function JP(l,d){return gr(l,F.applyMembers,d)}function l_(l){return Dt(l,F.applyMembers)}function u_(l){const d=Ko(l);return d.length===0?r_():d[0]}function Zs(l){return c(l)&&Array.isArray(l.internal_resourceInfo.linkedResources[F.accessControl])&&l.internal_resourceInfo.linkedResources[F.accessControl].length===1}function nu(l,d){var v;const x=br(l),D=Be(x);let V=(v=qt(x,D))!==null&&v!==void 0?v:kr({url:D});V=rt(V,F.access,d);const z=_r(x,V);return si(l,z)}function Rd(l,d){var v;const x=br(l),D=Be(x);let V=(v=qt(x,D))!==null&&v!==void 0?v:kr({url:D});V=rt(V,F.accessMembers,d);const z=_r(x,V);return si(l,z)}function Fo(l){const d=br(l),v=Be(d),x=qt(d,v);return x===null?[]:h(x,F.access)}function Ua(l){const d=br(l),v=Be(d),x=qt(d,v);return x===null?[]:h(x,F.accessMembers)}function ea(l,d){const v=br(l),x=Be(v),D=qt(v,x);if(D===null)return l;const V=gr(D,F.access,d),z=_r(v,V);return si(l,z)}function xd(l,d){const v=br(l),x=Be(v),D=qt(v,x);if(D===null)return l;const V=gr(D,F.accessMembers,d),z=_r(v,V);return si(l,z)}function Ma(l){const d=br(l),v=Be(d),x=qt(d,v);if(x===null)return l;const D=Dt(x,F.access),V=_r(d,D);return si(l,V)}function Ba(l){const d=br(l),v=Be(d),x=qt(d,v);if(x===null)return l;const D=Dt(x,F.accessMembers),V=_r(d,D);return si(l,V)}function Cd(l,d){const v=u_(l),x=n_(v,d);return Ys(l,x)}function tg(l,d){const v=u_(l),x=a_(v,d);return Ys(l,x)}function Wo(l){const v=Ko(l).map(D=>i_(D)),x=new Set;return v.forEach(D=>{D.forEach(V=>x.add(V))}),Array.from(x)}function iu(l){const v=Ko(l).map(D=>eg(D)),x=new Set;return v.forEach(D=>{D.forEach(V=>x.add(V))}),Array.from(x)}function Ha(l,d){return Ko(l).map(V=>o_(V,d)).reduce(Ys,l)}function rg(l,d){return Ko(l).map(V=>JP(V,d)).reduce(Ys,l)}function ou(l){return Ko(l).map(D=>s_(D)).reduce(Ys,l)}function su(l){return Ko(l).map(D=>l_(D)).reduce(Ys,l)}function ng(l){let d=`# Access controls for ${Be(l)}
`;const v=Wo(l),x=iu(l),D=Fo(l),V=Ua(l);return v.length===0&&x.length===0&&D.length===0&&V.length===0&&(d+=`
<no policies specified yet>
`),v.length>0&&(d+=`
The following policies apply to this resource:
- `,d+=`${v.join(`
- `)}
`),D.length>0&&(d+=`
The following policies apply to the access control resource for this resource:
- `,d+=`${D.join(`
- `)}
`),x.length>0&&(d+=`
The following policies apply to the children of this resource:
- `,d+=`${x.join(`
- `)}
`),V.length>0&&(d+=`
The following policies apply to the access control resources for children of this resource:
- `,d+=`${V.join(`
- `)}
`),d}const zn="http://www.w3.org/ns/solid/acp#",Er={AccessControl:zn.concat("AccessControl"),AccessControlResource:zn.concat("AccessControlResource"),AuthenticatedAgent:zn.concat("AuthenticatedAgent"),CreatorAgent:zn.concat("CreatorAgent"),Matcher:zn.concat("Matcher"),Policy:zn.concat("Policy"),PublicAgent:zn.concat("PublicAgent"),access:zn.concat("access"),accessControl:zn.concat("accessControl"),agent:zn.concat("agent"),allOf:zn.concat("allOf"),allow:zn.concat("allow"),anyOf:zn.concat("anyOf"),apply:zn.concat("apply"),client:zn.concat("client"),deny:zn.concat("deny"),memberAccessControl:zn.concat("memberAccessControl"),noneOf:zn.concat("noneOf"),vc:zn.concat("vc")},Td="http://www.w3.org/ns/auth/acl#",ja={Append:Td.concat("Append"),Control:Td.concat("Control"),Read:Td.concat("Read"),Write:Td.concat("Write")},XP="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function au(l){const d=br(l),v=Be(d);return qt(d,v)}const $a="defaultAccessControl",lu="defaultAcrAccessControl",ig="defaultMemberAccessControl",og="defaultMemberAcrAccessControl";function sg(l,d){const v=br(l);return Be(v).concat("#").concat(d)}function _o(l,d){const v=br(l),x=sg(l,d),D=qt(v,x);return D===null||typeof D>"u"?kr({url:x}):D}function Pd(l,d){const v=h(l,d);return{read:v.includes(ja.Read),append:v.includes(ja.Append),write:v.includes(ja.Write),controlRead:!1,controlWrite:!1}}function QP(l,d){return Object.assign(I(l),{internal_acp:{acr:d}})}function c_(l,d,v){let x=Dt(l,v);return(d.read||d.controlRead)&&(x=rt(x,v,ja.Read)),d.append&&(x=rt(x,v,ja.Append)),(d.write||d.controlWrite)&&(x=rt(x,v,ja.Write)),x}const d_="defaultVcPolicy",f_="defaultVcMatcher";function YP(l,d,v,x){var D;let V=qt(l,d);V===null&&(V=wi({url:d}).addIri(B.type,Er.Policy).addIri(Er.anyOf,v).build());const z=(D=qt(l,v))!==null&&D!==void 0?D:wi({url:v}).addIri(B.type,Er.Matcher).addIri(Er.vc,XP).build(),se=Pd(V,Er.allow);return V=c_(V,{...se,...x},Er.allow),{matcher:z,policy:V}}function h_(l,d,v={inherit:!1}){var x;let D=br(l);const V=`${De(D)}#${d_}`,z=`${De(D)}#${f_}`,{policy:se,matcher:Te}=YP(D,V,z,d);let Ce=_o(l,"defaultAccessControl");h(Ce,Er.apply).includes(ar(se))||(Ce=rt(Ce,Er.apply,se));let Ne=_o(l,"defaultMemberAccessControl"),ct=(x=au(l))!==null&&x!==void 0?x:kr({url:De(D)});return h(ct,Er.accessControl).includes(ar(Ce))||(ct=rt(ct,Er.accessControl,Ce)),D=[ct,Ce,se,Te].reduce(_r,D),v.inherit&&(h(Ne,Er.apply).includes(ar(se))||(Ne=rt(Ne,Er.apply,se)),h(ct,Er.memberAccessControl).includes(ar(Ne))||(ct=rt(ct,Er.memberAccessControl,Ne)),D=[ct,Ne].reduce(_r,D)),QP(l,D)}const ag={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},lg=(l,d,v)=>h(l,d).includes(ar(v));function p_(l){const d=br(l),v=_o(l,"defaultAccessControl"),x=au(l);if(x===null||!lg(x,Er.accessControl,v))return ag;const D=`${De(d)}#${d_}`,V=qt(d,D);if(V===null||!lg(v,Er.apply,V))return ag;const z=`${De(d)}#${f_}`,se=qt(d,z);return se===null||!lg(V,Er.anyOf,se)?ag:Pd(V,Er.allow)}async function Va(l,d=J){const v=m(l),x={...J,...d},D=await Dn(v,x),V=await ta(D,x);return{...D,...V}}async function Ka(l,d=J){const v=m(l),x={...J,...d},D=await sr(v,x),V=await ta(D,x);return Object.assign(D,V)}async function Jn(l,d=J){const v=m(l),x={...J,...d},D=await Le(v,x),V=await ta(D,x);return{...D,...V}}async function Wa(l,d=J){const v=m(l),x={...J,...d},D=await Dn(v,x);if(Pn(D)){const z=await Io(D,x);return $i(D,z)}const V=await ta(D,x);return{...D,...V}}async function Ga(l,d=J){const v=m(l),x={...J,...d},D=await sr(v,x);if(Pn(D)){const z=await Io(D,x);return $i(D,z)}const V=await ta(D,x);return Object.assign(D,V)}async function qa(l,d=J){const v=m(l),x={...J,...d},D=await Le(v,x);if(Pn(D)){const z=await Io(D,x);return $i(D,z)}const V=await ta(D,x);return{...D,...V}}async function Vi(l,d=J){const v=br(l),x={...J,...d},D=await ji(Be(v),v,x);return si(l,D)}function In(l){return typeof l.internal_acp=="object"&&l.internal_acp!==null&&typeof l.internal_acp.acr=="object"&&l.internal_acp.acr!==null}async function ta(l,d){let v;if(Zs(l)){const{linkedResources:z}=l.internal_resourceInfo;[v]=z[F.accessControl]}else if(Pn(l)){let z;try{z=await Le(l.internal_resourceInfo.aclUrl,d)}catch{}z&&ww(z)&&(v=Be(z))}if(typeof v!="string")return{internal_acp:{acr:null}};let x;try{x=await Dn(v,d)}catch{return{internal_acp:{acr:null}}}return{internal_acp:{acr:{...x,accessTo:Be(l)}}}}function za(l){const d=Wo(l).map(Ti).concat(iu(l).map(Ti)).concat(Fo(l).map(Ti)).concat(Ua(l).map(Ti));return Array.from(new Set(d))}async function Id(l,d=J){const v=m(l),x={...J,...d},D=await Le(v,x);return In(await ta(D,x))}function ug(l){return c(l)?[F.accessControl,"acl"].map(v=>{if(Array.isArray(l.internal_resourceInfo.linkedResources[v])&&l.internal_resourceInfo.linkedResources[v].length===1)return l.internal_resourceInfo.linkedResources[v][0]}).find(v=>v!==void 0):void 0}function cg(l){return h(l,B.type).includes(F.Rule)}function Fd(l,d){return rt(l,F.allOf,d)}function Od(l,d){return gr(l,F.allOf,d)}function Nd(l,d){return gn(l,F.allOf,d)}function ra(l){return h(l,F.allOf)}function kd(l,d){return rt(l,F.anyOf,d)}function Dd(l,d){return gr(l,F.anyOf,d)}function Ld(l,d){return gn(l,F.anyOf,d)}function na(l){return h(l,F.anyOf)}function Ud(l,d){return rt(l,F.noneOf,d)}function Md(l,d){return gr(l,F.noneOf,d)}function Bd(l,d){return gn(l,F.noneOf,d)}function Go(l){return h(l,F.noneOf)}function Hd(l){const d=m(l);let v=kr({url:d});return v=ro(v,B.type,F.Rule),v}function jd(l,d){const v=br(l),x=new URL(Be(v));x.hash=`#${d}`;let D=kr({url:x.href});return D=ro(D,B.type,F.Rule),D}function $d(l,d){const v=qt(l,d);return v===null||qn(v,B.type)!==F.Rule?null:v}function dg(l,d){const v=br(l),x=Be(v),D=new URL(x);D.hash=`#${d}`;const V=qt(v,D.href);return V===null||!cg(V)?null:V}function Vd(l){return Ur(l).filter(cg)}function g_(l){const d=br(l);return Ur(d).filter(cg)}function Kd(l,d){return pn(l,d)}function y_(l,d){const v=br(l);let x;if(typeof d=="string")if(ae(d))x=d;else{const se=new URL(Be(v));se.hash=`#${d}`,x=se.href}else L(d)?x=m(d):x=$r(d);const D=dg(l,new URL(x).hash.substring(1));if(D===null)return l;const V=pn(v,D);return si(l,V)}function Wd(l,d){return _r(l,d)}function Ja(l,d){const v=br(l),x=_r(v,d);return si(l,x)}function uu(l){return h(l,F.agent).filter(d=>d!==F.PublicAgent&&d!==F.AuthenticatedAgent&&d!==F.CreatorAgent)}function Gd(l,d){const v=Xa(l),x=Qa(l),D=Ya(l);let V=gn(l,F.agent,d);return v&&(V=Yd(V)),x&&(V=Zd(V)),D&&(V=ef(V)),V}function qd(l,d){return rt(l,F.agent,d)}function zd(l,d){return gr(l,F.agent,d)}function cu(l){return h(l,F.group)}function Jd(l,d){return gn(l,F.group,d)}function Xd(l,d){return rt(l,F.group,d)}function Qd(l,d){return gr(l,F.group,d)}function Xa(l){return h(l,F.agent).filter(d=>d===F.PublicAgent).length>0}function Yd(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return rt(l,F.agent,F.PublicAgent)}function fg(l){return gr(l,F.agent,F.PublicAgent)}function Qa(l){return h(l,F.agent).filter(d=>d===F.AuthenticatedAgent).length>0}function Zd(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return rt(l,F.agent,F.AuthenticatedAgent)}function hg(l){return gr(l,F.agent,F.AuthenticatedAgent)}function Ya(l){return h(l,F.agent).filter(d=>d===F.CreatorAgent).length>0}function ef(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return rt(l,F.agent,F.CreatorAgent)}function pg(l){return gr(l,F.agent,F.CreatorAgent)}function gg(l){return h(l,F.client).filter(d=>d!==ne.PublicOidcClient)}function m_(l,d){const v=tf(l);let x=gn(l,F.client,d);return v&&(x=yg(x)),x}function v_(l,d){return rt(l,F.client,d)}function w_(l,d){return gr(l,F.client,d)}function tf(l){return h(l,F.client).filter(d=>d===ne.PublicOidcClient).length>0}function yg(l){return rt(l,F.client,ne.PublicOidcClient)}function __(l){return gr(l,F.client,ne.PublicOidcClient)}function rf(l){let d=`## Rule: ${$r(l)}

`,v="";Xa(l)&&(v+=`- Everyone
`),Qa(l)&&(v+=`- All authenticated agents
`),Ya(l)&&(v+=`- The creator of this resource
`),tf(l)&&(v+=`- Users of any client application
`);const x=uu(l);x.length>0&&(v+=`- The following agents:
  - `,v+=`${x.join(`
  - `)}
`);const D=cu(l);D.length>0&&(v+=`- Members of the following groups:
  - `,v+=`${D.join(`
  - `)}
`);const V=gg(l);return V.length>0&&(v+=`- Users of the following client applications:
  - `,v+=`${V.join(`
  - `)}
`),d+=v.length>0?`This rule applies to:
${v}`:`<empty>
`,d}function Za(l){return h(l,B.type).includes(F.Policy)}function el(l){const d=m(l);let v=kr({url:d});return v=ro(v,B.type,F.Policy),v}function tl(l,d){const v=qt(l,d);return v===null||!Za(v)?null:v}function rl(l){return Ur(l).filter(x=>!vn(x)&&Za(x))}function nl(l,d){return pn(l,d)}function il(l,d){return _r(l,d)}function nf(l,d){let v=Dt(l,F.allow);return d.read===!0&&(v=rt(v,F.allow,Zr.read)),d.append===!0&&(v=rt(v,F.allow,Zr.append)),d.write===!0&&(v=rt(v,F.allow,Zr.write)),v}function ol(l,d){let v=Dt(l,F.allow);return d.read===!0&&(v=rt(v,F.allow,F.Read)),d.append===!0&&(v=rt(v,F.allow,F.Append)),d.write===!0&&(v=rt(v,F.allow,F.Write)),v}function of(l){const d=h(l,F.allow);return{read:d.includes(Zr.read),append:d.includes(Zr.append),write:d.includes(Zr.write)}}function ia(l){const d=h(l,F.allow);return{read:d.includes(F.Read),append:d.includes(F.Append),write:d.includes(F.Write)}}function S_(l,d){let v=Dt(l,F.deny);return d.read===!0&&(v=rt(v,F.deny,Zr.read)),d.append===!0&&(v=rt(v,F.deny,Zr.append)),d.write===!0&&(v=rt(v,F.deny,Zr.write)),v}function sf(l,d){let v=Dt(l,F.deny);return d.read===!0&&(v=rt(v,F.deny,F.Read)),d.append===!0&&(v=rt(v,F.deny,F.Append)),d.write===!0&&(v=rt(v,F.deny,F.Write)),v}function af(l){const d=h(l,F.deny);return{read:d.includes(Zr.read),append:d.includes(Zr.append),write:d.includes(Zr.write)}}function oa(l){const d=h(l,F.deny);return{read:d.includes(F.Read),append:d.includes(F.Append),write:d.includes(F.Write)}}function Oo(l,d){const v=br(l),x=new URL(Be(v));x.hash=`#${d}`;let D=kr({url:x.href});return D=ro(D,B.type,F.Policy),D}function du(l,d){const v=br(l),x=Be(v),D=new URL(x);D.hash=`#${d}`;const V=qt(v,D.href);return!Wo(l).includes(D.href)||V===null||!Za(V)?null:V}function fu(l,d){const v=br(l),x=Be(v),D=new URL(x);D.hash=`#${d}`;const V=qt(v,D.href);return!Fo(l).includes(D.href)||V===null||!Za(V)?null:V}function lf(l){const d=br(l);return Wo(l).map(V=>qt(d,V)).filter(V=>V!==null&&Za(V))}function uf(l){const d=br(l);return Fo(l).map(V=>qt(d,V)).filter(V=>V!==null&&Za(V))}function cf(l,d){const v=br(l);let x=d;if(typeof x=="string"&&ae(x)===!1){const Te=new URL(Be(v));Te.hash=`#${d}`,x=Te.href}let D;if(typeof x=="string"?D=x:L(x)?D=m(x):D=$r(x,Be(v)),du(l,new URL(D).hash.substring(1))===null)return l;const z=pn(v,x),se=si(l,z);return Ha(se,D)}function df(l,d){const v=br(l);let x=d;if(typeof x=="string"&&ae(x)===!1){const Te=new URL(Be(v));Te.hash=`#${d}`,x=Te.href}let D;if(typeof x=="string"?D=x:L(x)?D=m(x):D=$r(x,Be(v)),fu(l,new URL(D).hash.substring(1))===null)return l;const z=pn(v,x),se=si(l,z);return ea(se,D)}function sl(l,d){const v=br(l),x=_r(v,d),D=si(l,x),V=$r(d,Be(v));return Cd(D,V)}function al(l,d){const v=br(l),x=_r(v,d),D=si(l,x),V=$r(d,Be(v));return nu(D,V)}function ff(l){function d(Te,Ce){return Ce?"denied":Te?"allowed":"unspecified"}const v=ia(l),x=oa(l);let D=`## Policy: ${$r(l)}

`;D+=`- Read: ${d(v.read,x.read)}
`,D+=`- Append: ${d(v.append,x.append)}
`,D+=`- Write: ${d(v.write,x.write)}
`;const V=ra(l),z=na(l),se=Go(l);return V.length===0&&z.length===0&&se.length===0&&(D+=`
<no rules specified yet>
`),V.length>0&&(D+=`
All of these rules should match:
`,D+=`- ${V.join(`
- `)}
`),z.length>0&&(D+=`
At least one of these rules should match:
`,D+=`- ${z.join(`
- `)}
`),se.length>0&&(D+=`
None of these rules should match:
`,D+=`- ${se.join(`
- `)}
`),D}function sa(l){const d=new URL("access-control-resource",l).href;return{...er(d),accessTo:l}}function ll(l,d=sa(Be(l))){return Object.assign(I(l),{internal_acp:{acr:d,aprs:{}}})}const ZP={getFileWithAccessDatasets:Ga,getFileWithAcr:Ka,getReferencedPolicyUrlAll:za,getResourceInfoWithAccessDatasets:qa,getResourceInfoWithAcr:Jn,getSolidDatasetWithAccessDatasets:Wa,getSolidDatasetWithAcr:Va,hasAccessibleAcr:In,saveAcrFor:Vi},e2={acrAsMarkdown:ng,addAcrPolicyUrl:nu,addMemberAcrPolicyUrl:Rd,addMemberPolicyUrl:tg,addPolicyUrl:Cd,getAcrPolicyUrlAll:Fo,getMemberAcrPolicyUrlAll:Ua,getMemberPolicyUrlAll:iu,getPolicyUrlAll:Wo,hasLinkedAcr:Zs,removeAcrPolicyUrl:ea,removeAcrPolicyUrlAll:Ma,removeMemberAcrPolicyUrl:xd,removeMemberAcrPolicyUrlAll:Ba,removeMemberPolicyUrl:rg,removeMemberPolicyUrlAll:su,removePolicyUrl:Ha,removePolicyUrlAll:ou},t2={createPolicy:el,getAllowModes:ia,getDenyModes:oa,getPolicy:tl,getPolicyAll:rl,policyAsMarkdown:ff,removePolicy:nl,setAllowModes:ol,setDenyModes:sf,setPolicy:il},r2={addAgent:qd,addForbiddenRuleUrl:Ud,addGroup:Xd,addOptionalRuleUrl:kd,addRequiredRuleUrl:Fd,createRule:Hd,getAgentAll:uu,getForbiddenRuleUrlAll:Go,getGroupAll:cu,getOptionalRuleUrlAll:na,getRequiredRuleUrlAll:ra,getRule:$d,getRuleAll:Vd,hasAuthenticated:Qa,hasCreator:Ya,hasPublic:Xa,removeAgent:zd,removeForbiddenRuleUrl:Md,removeGroup:Qd,removeOptionalRuleUrl:Dd,removeRequiredRuleUrl:Od,removeRule:Kd,ruleAsMarkdown:rf,setAgent:Gd,setForbiddenRuleUrl:Bd,setGroup:Jd,setOptionalRuleUrl:Ld,setRequiredRuleUrl:Nd,setRule:Wd},n2={addMockAcrTo:ll,mockAcrFor:sa};function E_(l,d){return d?Yd(l):fg(l)}function b_(l,d){return d?Zd(l):hg(l)}function A_(l,d){return d?ef(l):pg(l)}const i2={...ZP,...e2,...t2,...r2,...n2,...{getForbiddenRuleurlAll:Go,setPublic:E_,setAuthenticated:b_,setCreator:A_}},o2={...{getFileWithAccessDatasets:Ga,getFileWithAcr:Ka,getReferencedPolicyUrlAll:za,getResourceInfoWithAccessDatasets:qa,getResourceInfoWithAcr:Jn,getSolidDatasetWithAccessDatasets:Wa,getSolidDatasetWithAcr:Va,hasAccessibleAcr:In,saveAcrFor:Vi},...{createPolicy:el,getAllowModes:ia,getDenyModes:oa,getPolicy:tl,getPolicyAll:rl,policyAsMarkdown:ff,removePolicy:nl,setAllowModes:ol,setDenyModes:sf,setPolicy:il},...{addAgent:qd,addForbiddenRuleUrl:Ud,addGroup:Xd,addOptionalRuleUrl:kd,addRequiredRuleUrl:Fd,createRule:Hd,getAgentAll:uu,getForbiddenRuleUrlAll:Go,getGroupAll:cu,getOptionalRuleUrlAll:na,getRequiredRuleUrlAll:ra,getRule:$d,getRuleAll:Vd,hasAuthenticated:Qa,hasCreator:Ya,hasPublic:Xa,removeAgent:zd,removeForbiddenRuleUrl:Md,removeGroup:Qd,removeOptionalRuleUrl:Dd,removeRequiredRuleUrl:Od,removeRule:Kd,ruleAsMarkdown:rf,setAgent:Gd,setForbiddenRuleUrl:Bd,setGroup:Jd,setOptionalRuleUrl:Ld,setRequiredRuleUrl:Nd,setRule:Wd},...{addMockAcrTo:ll,mockAcrFor:sa},...{hasLinkedAcr:Zs,addAcrPolicyUrl:nu,addMemberAcrPolicyUrl:Rd,getAcrPolicyUrlAll:Fo,getMemberAcrPolicyUrlAll:Ua,removeAcrPolicyUrl:ea,removeAcrPolicyUrlAll:Ma,removeMemberAcrPolicyUrl:xd,removeMemberAcrPolicyUrlAll:Ba},...{createControl:r_,getControl:zP,getAllControl:Ko,getControlAll:Ko,setControl:Ys,removeControl:s2,addPolicyUrl:n_,getPolicyUrlAll:i_,removePolicyUrl:o_,removePolicyUrlAll:s_,addMemberPolicyUrl:a_,getMemberPolicyUrlAll:eg,removeMemberPolicyUrl:eg,removeMemberPolicyUrlAll:l_,getForbiddenRuleurlAll:Go,setPublic:E_,setAuthenticated:b_,setCreator:A_}};function s2(l,d){const v=br(l),x=pn(v,d);return si(l,x)}const a2={...{getFileWithAccessDatasets:Ga,getFileWithAcr:Ka,getLinkedAcrUrl:ug,getReferencedPolicyUrlAll:za,getResourceInfoWithAccessDatasets:qa,getResourceInfoWithAcr:Jn,getSolidDatasetWithAccessDatasets:Wa,getSolidDatasetWithAcr:Va,hasAccessibleAcr:In,saveAcrFor:Vi,isAcpControlled:Id},...{acrAsMarkdown:ng,addAcrPolicyUrl:nu,addMemberAcrPolicyUrl:Rd,addMemberPolicyUrl:tg,addPolicyUrl:Cd,getAcrPolicyUrlAll:Fo,getMemberAcrPolicyUrlAll:Ua,getMemberPolicyUrlAll:iu,getPolicyUrlAll:Wo,hasLinkedAcr:Zs,removeAcrPolicyUrl:ea,removeAcrPolicyUrlAll:Ma,removeMemberAcrPolicyUrl:xd,removeMemberAcrPolicyUrlAll:Ba,removeMemberPolicyUrl:rg,removeMemberPolicyUrlAll:su,removePolicyUrl:Ha,removePolicyUrlAll:ou},...{createPolicy:el,getAllowModes:ia,getDenyModes:oa,getPolicy:tl,getPolicyAll:rl,policyAsMarkdown:ff,removePolicy:nl,setAllowModes:ol,setDenyModes:sf,setPolicy:il,createResourcePolicyFor:Oo,getResourceAcrPolicy:fu,getResourceAcrPolicyAll:uf,getResourcePolicy:du,getResourcePolicyAll:lf,removeResourceAcrPolicy:df,removeResourcePolicy:cf,setResourceAcrPolicy:al,setResourcePolicy:sl},...{addAgent:qd,addGroup:Xd,createRule:Hd,getAgentAll:uu,getGroupAll:cu,getRule:$d,getRuleAll:Vd,removeAgent:zd,removeGroup:Qd,removeRule:Kd,ruleAsMarkdown:rf,setAgent:Gd,setGroup:Jd,setRule:Wd,addClient:v_,getClientAll:gg,hasAnyClient:tf,removeClient:w_,setAnyClient:yg,setClient:m_,removeAnyClient:__,hasAuthenticated:Qa,hasCreator:Ya,hasPublic:Xa,setAuthenticated:Zd,setCreator:ef,setPublic:Yd,removeAuthenticated:hg,removeCreator:pg,removePublic:fg,getAnyOfRuleUrlAll:na,addAnyOfRuleUrl:kd,removeAnyOfRuleUrl:Dd,setAnyOfRuleUrl:Ld,getAllOfRuleUrlAll:ra,addAllOfRuleUrl:Fd,removeAllOfRuleUrl:Od,setAllOfRuleUrl:Nd,getNoneOfRuleUrlAll:Go,addNoneOfRuleUrl:Ud,removeNoneOfRuleUrl:Md,setNoneOfRuleUrl:Bd,createResourceRuleFor:jd,getResourceRule:dg,getResourceRuleAll:g_,removeResourceRule:y_,setResourceRule:Ja},...{addMockAcrTo:ll,mockAcrFor:sa}};function io(l,d){return Object.assign(I(l),{internal_acp:{...l.internal_acp,acr:_r(l.internal_acp.acr,d)}})}function R_(l){return l.includes("Member")?Er.memberAccessControl:Er.accessControl}function hf(l,d){const v=sg(l,d),x=br(l);let D=au(l);return(D===null||typeof D>"u")&&(D=kr({url:Be(x)})),h(D,R_(d)).includes(v)?l:(D=wi(D).addUrl(R_(d),v).build(),io(l,D))}function mg(l,d){const v=hf(l,lu),x=_o(v,lu);return io(v,wi(x).addUrl(Er.access,d).build())}function x_(l,d){const v=hf(l,og),x=_o(v,og);return io(v,wi(x).addUrl(Er.access,d).build())}function C_(l,d){const v=hf(l,ig),x=_o(v,ig);return io(v,wi(x).addUrl(Er.apply,d).build())}function vg(l,d){const v=hf(l,$a),x=_o(v,$a);return io(v,wi(x).addUrl(Er.apply,d).build())}function T_(l){const d=au(l);return d===null?[]:h(d,Er.accessControl)}function pf(l,d,v){const x=br(l);return Array.from(new Set(d.map(D=>{const V=qt(x,D);return V!==null?h(V,v):[]}).reduce((D,V)=>D.concat(V),[])))}function wg(l){return pf(l,T_(l),Er.access)}function P_(l){const d=au(l);return d===null?[]:h(d,Er.memberAccessControl)}function I_(l){return pf(l,P_(l),Er.access)}function F_(l){return pf(l,P_(l),Er.apply)}function _g(l){return pf(l,T_(l),Er.apply)}function O_(l,d){const v=_o(l,lu);return io(l,gr(v,Er.access,d))}function N_(l,d){const v=_o(l,og);return io(l,gr(v,Er.access,d))}function k_(l,d){const v=_o(l,ig);return io(l,gr(v,Er.apply,d))}function D_(l,d){const v=_o(l,$a);return io(l,gr(v,Er.apply,d))}function L_(l,d){return io(l,d)}function gf(l){return h(l,B.type).includes(F.Matcher)}function U_(l,d){return rt(l,F.allOf,d)}function M_(l,d){return gr(l,F.allOf,d)}function B_(l,d){return gn(l,F.allOf,d)}function yf(l){return h(l,F.allOf)}function H_(l,d){return rt(l,F.anyOf,d)}function j_(l,d){return gr(l,F.anyOf,d)}function $_(l,d){return gn(l,F.anyOf,d)}function mf(l){return h(l,F.anyOf)}function V_(l,d){return rt(l,F.noneOf,d)}function K_(l,d){return gr(l,F.noneOf,d)}function W_(l,d){return gn(l,F.noneOf,d)}function vf(l){return h(l,F.noneOf)}function G_(l){const d=m(l);let v=kr({url:d});return v=ro(v,B.type,F.Matcher),v}function wf(l,d){const v=br(l),x=new URL(Be(v));x.hash=`#${d}`;let D=kr({url:x.href});return D=ro(D,B.type,F.Matcher),D}function q_(l,d){const v=qt(l,d);return v===null||!gf(v)?null:v}function Sg(l,d){const v=br(l),x=Be(v),D=new URL(x);D.hash=`#${d}`;const V=qt(v,D.href);return V===null||!gf(V)?null:V}function z_(l){return Ur(l).filter(gf)}function J_(l){const d=br(l);return Ur(d).filter(gf)}function X_(l,d){return pn(l,d)}function Q_(l,d){const v=br(l);let x;if(typeof d=="string")if(ae(d))x=d;else{const se=new URL(Be(v));se.hash=`#${d}`,x=se.href}else L(d)?x=m(d):x=$r(d);const D=Sg(l,new URL(x).hash.substring(1));if(D===null)return l;const V=pn(v,D);return si(l,V)}function Y_(l,d){return _r(l,d)}function ul(l,d){const v=br(l),x=_r(v,d);return si(l,x)}function Z_(l){return h(l,F.agent).filter(d=>d!==F.PublicAgent&&d!==F.AuthenticatedAgent&&d!==F.CreatorAgent)}function eS(l,d){const v=Ag(l),x=xg(l),D=Tg(l);let V=gn(l,F.agent,d);return v&&(V=Rg(V)),x&&(V=Cg(V)),D&&(V=Pg(V)),V}function Eg(l,d){return rt(l,F.agent,d)}function bg(l,d){return gr(l,F.agent,d)}function Ag(l){return h(l,F.agent).filter(d=>d===F.PublicAgent).length>0}function Rg(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return rt(l,F.agent,F.PublicAgent)}function tS(l){return gr(l,F.agent,F.PublicAgent)}function xg(l){return h(l,F.agent).filter(d=>d===F.AuthenticatedAgent).length>0}function Cg(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return rt(l,F.agent,F.AuthenticatedAgent)}function rS(l){return gr(l,F.agent,F.AuthenticatedAgent)}function Tg(l){return h(l,F.agent).filter(d=>d===F.CreatorAgent).length>0}function Pg(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return rt(l,F.agent,F.CreatorAgent)}function nS(l){return gr(l,F.agent,F.CreatorAgent)}function iS(l){return h(l,F.client).filter(d=>d!==ne.PublicOidcClient).concat(ve(l,F.client))}function l2(l,d){const v=aS(l);let x=gn(l,F.client,d);return v&&(x=lS(x)),x}function oS(l,d){return ae(d)?rt(l,F.client,d):Qr(l,F.client,d)}function sS(l,d){return ae(d)?gr(l,F.client,d):Yl(l,F.client,d)}function aS(l){return h(l,F.client).filter(d=>d===ne.PublicOidcClient).length>0}function lS(l){return rt(l,F.client,ne.PublicOidcClient)}function u2(l){return gr(l,F.client,ne.PublicOidcClient)}const c2={...{getFileWithAccessDatasets:Ga,getFileWithAcr:Ka,getReferencedPolicyUrlAll:za,getResourceInfoWithAccessDatasets:qa,getResourceInfoWithAcr:Jn,getSolidDatasetWithAccessDatasets:Wa,getSolidDatasetWithAcr:Va,hasAccessibleAcr:In,saveAcrFor:Vi,isAcpControlled:Id,getVcAccess:p_,setVcAccess:h_},...{addAcrPolicyUrl:mg,addMemberAcrPolicyUrl:x_,addMemberPolicyUrl:C_,addPolicyUrl:vg,getAcrPolicyUrlAll:wg,getMemberAcrPolicyUrlAll:I_,getMemberPolicyUrlAll:F_,getPolicyUrlAll:_g,hasLinkedAcr:Zs,removeAcrPolicyUrl:O_,removeAcrPolicyUrlAll:Ma,removeMemberAcrPolicyUrl:N_,removeMemberAcrPolicyUrlAll:Ba,removeMemberPolicyUrl:k_,removeMemberPolicyUrlAll:su,removePolicyUrl:D_,removePolicyUrlAll:ou},...{createPolicy:el,getAllowModes:of,getDenyModes:af,getPolicy:tl,getPolicyAll:rl,removePolicy:nl,setAllowModes:nf,setDenyModes:S_,setPolicy:il,createResourcePolicyFor:Oo,getResourceAcrPolicy:fu,getResourceAcrPolicyAll:uf,getResourcePolicy:du,getResourcePolicyAll:lf,removeResourceAcrPolicy:df,removeResourcePolicy:cf,setResourcePolicy:L_},...{addAgent:Eg,createMatcher:G_,getAgentAll:Z_,getMatcher:q_,getMatcherAll:z_,removeAgent:bg,removeMatcher:X_,setAgent:eS,setMatcher:Y_,addClient:oS,getClientAll:iS,hasAnyClient:aS,removeClient:sS,setAnyClient:lS,setClient:l2,removeAnyClient:u2,hasAuthenticated:xg,hasCreator:Tg,hasPublic:Ag,setAuthenticated:Cg,setCreator:Pg,setPublic:Rg,removeAuthenticated:rS,removeCreator:nS,removePublic:tS,getAnyOfMatcherUrlAll:mf,addAnyOfMatcherUrl:H_,removeAnyOfMatcherUrl:j_,setAnyOfMatcherUrl:$_,getAllOfMatcherUrlAll:yf,addAllOfMatcherUrl:U_,removeAllOfMatcherUrl:M_,setAllOfMatcherUrl:B_,getNoneOfMatcherUrlAll:vf,addNoneOfMatcherUrl:V_,removeNoneOfMatcherUrl:K_,setNoneOfMatcherUrl:W_,createResourceMatcherFor:wf,getResourceMatcher:Sg,getResourceMatcherAll:J_,removeResourceMatcher:Q_,setResourceMatcher:ul},...{addMockAcrTo:ll,mockAcrFor:sa}},Ig=[F.agent,F.group];function cl(l,d,v){if(l.inaccessibleUrls.length>0)return null;const x=l.acrPolicies.filter(Ne=>_f(Ne,d,v,l)),D=l.policies.filter(Ne=>_f(Ne,d,v,l)),V={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},z=x.reduce((Ne,ct)=>{const vt={...Ne},Nt=ia(ct);return Nt.read&&(vt.controlRead=!0),Nt.write&&(vt.controlWrite=!0),vt},V),se=D.reduce((Ne,ct)=>{const vt={...Ne},Nt=ia(ct);return Nt.read&&(vt.read=!0),Nt.append&&(vt.append=!0),Nt.write&&(vt.write=!0),vt},z),Te=x.reduce((Ne,ct)=>{const vt={...Ne},Nt=oa(ct);return Nt.read===!0&&(vt.controlRead=!1),Nt.write===!0&&(vt.controlWrite=!1),vt},se);return D.reduce((Ne,ct)=>{const vt={...Ne},Nt=oa(ct);return Nt.read===!0&&(vt.read=!1),Nt.append===!0&&(vt.append=!1),Nt.write===!0&&(vt.write=!1),vt},Te)}function d2(l,d){return cl(l,F.agent,d)}function f2(l,d){return cl(l,F.group,d)}function h2(l){return cl(l,F.agent,F.PublicAgent)}function _f(l,d,v,x){const D=h(l,F.allow),V=h(l,F.deny);if(D.length+V.length===0)return!1;const z=ra(l).map(Ce=>x.rules.find(Ne=>ar(Ne)===Ce)),se=na(l).map(Ce=>x.rules.find(Ne=>ar(Ne)===Ce)),Te=Go(l).map(Ce=>x.rules.find(Ne=>ar(Ne)===Ce));return z.every(Ce=>cS(Ce,d,v))&&(se.length===0||se.some(Ce=>cS(Ce,d,v)))&&Te.length===0}function uS(l,d){const v=h(l,F.allow),x=h(l,F.deny);return d.read===!0&&x.includes(F.Read)||d.read===!1&&v.includes(F.Read)&&!x.includes(F.Read)||d.append===!0&&x.includes(F.Append)||d.append===!1&&v.includes(F.Append)&&!x.includes(F.Append)||d.write===!0&&x.includes(F.Write)||d.write===!1&&v.includes(F.Write)&&!x.includes(F.Write)}function cS(l,d,v){let x=!0;return Ig.forEach(D=>{x&&(x=tn(l,D)===null)}),x||h(l,d).includes(v)}function p2(l,d){const v=new Set;return l.rules.forEach(x=>{h(x,d).filter(D=>![F.PublicAgent,F.CreatorAgent,F.AuthenticatedAgent].includes(D)||d!==F.agent).forEach(D=>v.add(D))}),v}function dS(l,d){if(l.inaccessibleUrls.length>0)return null;const v={};return p2(l,d).forEach(D=>{const V=cl(l,d,D);v[D]=V}),v}function g2(l){return dS(l,F.group)}function y2(l){return dS(l,F.agent)}function Fg(l,d,v,x,D){var V,z,se,Te,Ce;if(!In(l)||d.inaccessibleUrls.length>0)return null;const Ne=cl(d,v,x);if(Ne===null)return null;const ct=d.acrPolicies.filter(ur=>_f(ur,v,x,d)),vt=d.policies.filter(ur=>_f(ur,v,x,d)),Nt=ct.filter(ur=>uS(ur,{read:D.controlRead,write:D.controlWrite})),yr=vt.filter(ur=>uS(ur,{read:D.read,append:D.append,write:D.write})),Hr=Nt.filter(ur=>fS(ur,v,x,d)),Nr=yr.filter(ur=>fS(ur,v,x,d)),oo={...d,acrPolicies:d.acrPolicies.filter(ur=>!Hr.includes(ur)),policies:d.policies.filter(ur=>!Nr.includes(ur))},hn=cl(oo,v,x);if(hn===null)return null;let ir=l;Hr.forEach(ur=>{const[nn,la]=hS(ur,l,d,v,x);ir=al(ir,nn),ir=la.reduce(Ja,ir)}),Nr.forEach(ur=>{const[nn,la]=hS(ur,l,d,v,x);ir=sl(ir,nn),ir=la.reduce(Ja,ir)});const _i=`rule_${encodeURIComponent(`${v}_${x}`)}`;let Vn=jd(l,_i);Vn=gn(Vn,v,x);const Pi=(V=D.controlRead)!==null&&V!==void 0?V:Ne.controlRead,qo=(z=D.controlWrite)!==null&&z!==void 0?z:Ne.controlWrite;let aa=Hr;if(Pi!==hn.controlRead||qo!==hn.controlWrite){const ur=u.v4();let nn=Oo(l,ur);nn=ol(nn,{read:Pi===!0,append:!1,write:qo===!0}),nn=rt(nn,F.allOf,Vn),ir=al(ir,nn),ir=Ja(ir,Vn),aa=Nt}const zo=(se=D.read)!==null&&se!==void 0?se:Ne.read,mu=(Te=D.append)!==null&&Te!==void 0?Te:Ne.append,vu=(Ce=D.write)!==null&&Ce!==void 0?Ce:Ne.write;let wu=Nr;if(zo!==hn.read||mu!==hn.append||vu!==hn.write){const ur=u.v4();let nn=Oo(l,ur);nn=ol(nn,{read:zo===!0,append:mu===!0,write:vu===!0}),nn=rt(nn,F.allOf,Vn),ir=sl(ir,nn),ir=Ja(ir,Vn),wu=yr}return aa.forEach(ur=>{ir=ea(ir,ar(ur))}),wu.forEach(ur=>{ir=Ha(ir,ar(ur))}),ir}function m2(l,d,v,x){return Fg(l,d,F.agent,v,x)}function v2(l,d,v,x){return Fg(l,d,F.group,v,x)}function w2(l,d,v){return Fg(l,d,F.agent,F.PublicAgent,v)}function fS(l,d,v,x){const V=h(l,F.allOf).map(Ne=>x.rules.find(ct=>ar(ct)===Ne)).some(Ne=>Og(Ne,d,v)),se=h(l,F.anyOf).map(Ne=>x.rules.find(ct=>ar(ct)===Ne)).some(Ne=>Og(Ne,d,v)),Ce=h(l,F.noneOf).map(Ne=>x.rules.find(ct=>ar(ct)===Ne)).some(Ne=>Og(Ne,d,v));return V||se||Ce}function Og(l,d,v){const x=[];return Ig.forEach(D=>{const V=h(l,D).filter(z=>z!==v||D!==d);x.push(...V)}),x.length>0}function hS(l,d,v,x,D){const V=u.v4(),z=Ng(h(l,F.allOf),d,v,V,x,D),se=Ng(h(l,F.anyOf),d,v,V,x,D),Te=Ng(h(l,F.noneOf),d,v,V,x,D);let Ce=Oo(d,encodeURI(ar(l))+V);return h(l,F.allow).forEach(Ne=>{Ce=rt(Ce,F.allow,Ne)}),h(l,F.deny).forEach(Ne=>{Ce=rt(Ce,F.deny,Ne)}),z.forEach(Ne=>{Ce=rt(Ce,F.allOf,Ne)}),se.forEach(Ne=>{Ce=rt(Ce,F.anyOf,Ne)}),Te.forEach(Ne=>{Ce=rt(Ce,F.noneOf,Ne)}),[Ce,z.concat(se).concat(Te)]}function Ng(l,d,v,x,D,V){return l.map(z=>{const se=v.rules.find(Ne=>ar(Ne)===z);if(typeof se>"u")return null;let Te=jd(d,encodeURI(ar(se))+x),Ce=!1;return Ig.forEach(Ne=>{h(se,Ne).forEach(ct=>{Ne===D&&ct===V||(Ce=!0,Te=rt(Te,Ne,ct))})}),Ce?Te:null}).filter(Sf)}function Sf(l){return l!==null}async function hs(l,d=J){const v=Fo(l),x=Wo(l),D=pS(v).concat(pS(x)),V=await gS(D,d),z=Dg(v,V).filter(Sf),se=Dg(x,V).filter(Sf),Te=new Set;z.forEach(Nr=>{yS(Nr).forEach(hn=>{Te.add(hn)})}),se.forEach(Nr=>{yS(Nr).forEach(hn=>{Te.add(hn)})});const Ce=Array.from(Te),ct=Ce.map(Nr=>kg(Nr)).filter(Nr=>!D.includes(Nr)),vt=await gS(ct,d),Nt={...V,...vt},yr=Dg(Ce,Nt).filter(Sf);return{inaccessibleUrls:Object.keys(Nt).filter(Nr=>Nt[Nr]===null),acrPolicies:z,policies:se,rules:yr}}function kg(l){const d=new URL(l);return d.hash="",d.href}function pS(l){const d=[];return l.forEach(v=>{const x=kg(v);d.includes(x)||d.push(x)}),d}async function gS(l,d){const v=Array.from(new Set(l)),x={};return await Promise.all(v.map(async D=>{try{const V=await Dn(D,d);x[D]=V}catch{x[D]=null}})),x}function Dg(l,d){return l.map(v=>{const x=kg(v),D=d[x];return D?qt(D,v):null})}function yS(l){return ra(l).concat(na(l)).concat(Go(l))}function mS(l,d){var v,x,D,V;if(l.controlRead!==l.controlWrite)throw new Error("For Pods using Web Access Control, controlRead and controlWrite must be equal.");return{read:(v=l.read)!==null&&v!==void 0?v:d.read,append:(x=l.append)!==null&&x!==void 0?x:d.append,write:(D=l.write)!==null&&D!==void 0?D:d.write,control:(V=l.controlRead)!==null&&V!==void 0?V:d.control}}function Lg(l){return{read:l.read,write:l.write,append:l.append,controlRead:l.control,controlWrite:l.control}}async function vS(l,d,v,x){const D=await Io(l,x),V=v($i(l,D),d);return V===null?null:Lg(V)}async function _2(l,d,v){const x=await Io(l,v),D=d($i(l,x));return D===null?null:Lg(D)}async function wS(l,d,v){const x=await Io(l,v),D=d($i(l,x));if(D===null)return null;const V={};for(const[z,se]of Object.entries(D))V[z]=Lg(se);return V}function dl(l,d,v=J){return vS(l,d,Qp,v)}function _S(l,d,v=J){return vS(l,d,Yp,v)}function fl(l,d=J){return _2(l,Zp,d)}function Ug(l,d=J){return wS(l,Pw,d)}function S2(l,d=J){return wS(l,Mw,d)}async function SS(l,d){if(!Pn(l))return null;const v=await Io(l,d),x=$i(l,v);let D;if(ds(x))D=PP(x);else if(fs(x))D=Cw(x);else return null;return xw(x,D)}async function ES(l,d,v){let x=null;try{return x=await Tw(l,d,v),xw(l,x)}catch{return null}}async function E2(l,d,v,x,D){const V=await SS(l,D);if(V===null)return null;const z=ru(V),se=v(V),Te=mS(d,se),Ce=x(z,Te);return ES(V,Ce,D)}async function bS(l,d,v,x,D,V){const z=await SS(l,V);if(z===null)return null;const se=x(z,d),Te=ru(z),Ce=mS(v,se),Ne=D(Te,d,Ce);return ES(z,Ne,V)}async function Mg(l,d,v,x=J){return bS(l,d,v,Qp,Ow,x)}async function b2(l,d,v,x=J){return bS(l,d,v,Yp,Ww,x)}async function Bg(l,d,v=J){return E2(l,d,Zp,zw,v)}var A2=Object.freeze({__proto__:null,getAccessFor:Hg,getAccessForAll:jg,getAgentAccess:Ef,getAgentAccessAll:Kg,getGroupAccess:bf,getGroupAccessAll:Wg,getPublicAccess:Af,setAccessFor:$g,setAgentAccess:Vg,setGroupAccess:Gg,setPublicAccess:qg});async function Hg(l,d,v=J,x=J){if(d==="agent"){if(typeof v!="string")throw new Error("When reading Agent-specific access, the given agent cannot be left undefined.");return Ef(l,v,x)}if(d==="group"){if(typeof v!="string")throw new Error("When reading Group-specific access, the given group cannot be left undefined.");return bf(l,v,x)}if(d==="public"){if(typeof v=="string")throw new Error(`When reading public access, no actor type should be specified (here [${v}]).`);return Af(l,v)}return null}async function jg(l,d,v=J){return d==="agent"?Kg(l,v):d==="group"?Wg(l,v):null}async function $g(l,d,v,x=J,D=J){if(d==="agent"){if(typeof x!="string")throw new Error("When writing Agent-specific access, the given agent cannot be left undefined.");return Vg(l,x,v,D)}if(d==="group"){if(typeof x!="string")throw new Error("When writing Group-specific access, the given group cannot be left undefined.");return Gg(l,x,v,D)}if(d==="public"){if(typeof x=="string")throw new Error(`When writing public access, no actor type should be specified (here [${x}]).`);return qg(l,v,x)}return null}async function Ef(l,d,v=J){const x=await Jn(l,v);if(In(x)){const D=await hs(x,v);return d2(D,d)}return Pn(x)?dl(x,d,v):null}async function Vg(l,d,v,x=J){const D=await Jn(l,x);if(In(D)){const V=await hs(D,x),z=m2(D,V,d,v);if(z)try{return await Vi(z,x),await Ef(l,d,x)}catch{return null}return null}if(Pn(D)){if(v.controlRead!==v.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${De(D)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Mg(D,d,v,x),dl(D,d,x)}return null}async function Kg(l,d=J){const v=await Jn(l,d);if(In(v)){const x=await hs(v,d);return y2(x)}return Pn(v)?Ug(v,d):null}async function bf(l,d,v=J){const x=await Jn(l,v);if(In(x)){const D=await hs(x,v);return f2(D,d)}return Pn(x)?_S(x,d,v):null}async function Wg(l,d=J){const v=await Jn(l,d);if(In(v)){const x=await hs(v,d);return g2(x)}return Pn(v)?S2(v,d):null}async function Gg(l,d,v,x=J){const D=await Jn(l,x);if(In(D)){const V=await hs(D,x),z=v2(D,V,d,v);if(z)try{return await Vi(z,x),await bf(l,d,x)}catch{return null}return null}if(Pn(D)){if(v.controlRead!==v.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${De(D)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await b2(D,d,v,x),_S(D,d,x)}return null}async function Af(l,d=J){const v=await Jn(l,d);if(In(v)){const x=await hs(v,d);return h2(x)}return Pn(v)?fl(v,d):null}async function qg(l,d,v=J){const x=await Jn(l,v);if(In(x)){const D=await hs(x,v),V=w2(x,D,d);if(V)try{return await Vi(V,v),await Af(l,v)}catch{return null}return null}if(Pn(x)){if(d.controlRead!==d.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${De(x)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Bg(x,d,v),fl(x,v)}return null}var R2=Object.freeze({__proto__:null,getAccessFor:Hg,getAccessForAll:jg,getAgentAccess:Ef,getAgentAccessAll:Kg,getGroupAccess:bf,getGroupAccessAll:Wg,getPublicAccess:Af,setAccessFor:$g,setAgentAccess:Vg,setGroupAccess:Gg,setPublicAccess:qg});const AS=[F.agent];function hu(l,d,v){if(l.inaccessibleUrls.length>0)return null;const x=l.acrPolicies.filter(Ne=>Rf(Ne,d,v,l)),D=l.policies.filter(Ne=>Rf(Ne,d,v,l)),V={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},z=x.reduce((Ne,ct)=>{const vt={...Ne},Nt=of(ct);return Nt.read&&(vt.controlRead=!0),Nt.write&&(vt.controlWrite=!0),vt},V),se=D.reduce((Ne,ct)=>{const vt={...Ne},Nt=of(ct);return Nt.read&&(vt.read=!0),Nt.append&&(vt.append=!0),Nt.write&&(vt.write=!0),vt},z),Te=x.reduce((Ne,ct)=>{const vt={...Ne},Nt=af(ct);return Nt.read===!0&&(vt.controlRead=!1),Nt.write===!0&&(vt.controlWrite=!1),vt},se);return D.reduce((Ne,ct)=>{const vt={...Ne},Nt=af(ct);return Nt.read===!0&&(vt.read=!1),Nt.append===!0&&(vt.append=!1),Nt.write===!0&&(vt.write=!1),vt},Te)}function x2(l,d){return hu(l,F.agent,d)}function C2(l){return hu(l,F.agent,F.PublicAgent)}function Rf(l,d,v,x){const D=h(l,F.allow),V=h(l,F.deny);if(D.length+V.length===0)return!1;const z=yf(l).map(Ce=>x.matchers.find(Ne=>ar(Ne)===Ce)),se=mf(l).map(Ce=>x.matchers.find(Ne=>ar(Ne)===Ce)),Te=vf(l).map(Ce=>x.matchers.find(Ne=>ar(Ne)===Ce));return z.every(Ce=>xS(Ce,d,v))&&(se.length===0||se.some(Ce=>xS(Ce,d,v)))&&z.length+se.length>0&&Te.length===0}function RS(l,d){const v=h(l,F.allow),x=h(l,F.deny);return d.read===!0&&x.includes(Zr.read)||d.read===!1&&v.includes(Zr.read)&&!x.includes(Zr.read)||d.append===!0&&x.includes(Zr.append)||d.append===!1&&v.includes(Zr.append)&&!x.includes(Zr.append)||d.write===!0&&x.includes(Zr.write)||d.write===!1&&v.includes(Zr.write)&&!x.includes(Zr.write)}function xS(l,d,v){return h(l,d).includes(v)}function T2(l,d){const v=new Set;return l.matchers.forEach(x=>{h(x,d).filter(D=>![F.PublicAgent,F.CreatorAgent,F.AuthenticatedAgent].includes(D)||d!==F.agent).forEach(D=>v.add(D))}),v}function P2(l,d){if(l.inaccessibleUrls.length>0)return null;const v={};return T2(l,d).forEach(D=>{const V=hu(l,d,D);v[D]=V}),v}function I2(l){return P2(l,F.agent)}function CS(l,d,v,x,D){var V,z,se,Te,Ce;if(!In(l)||d.inaccessibleUrls.length>0)return null;const Ne=hu(d,v,x);if(Ne===null)return null;const ct=d.acrPolicies.filter(ur=>Rf(ur,v,x,d)),vt=d.policies.filter(ur=>Rf(ur,v,x,d)),Nt=ct.filter(ur=>RS(ur,{read:D.controlRead,write:D.controlWrite})),yr=vt.filter(ur=>RS(ur,{read:D.read,append:D.append,write:D.write})),Hr=Nt.filter(ur=>TS(ur,v,x,d)),Nr=yr.filter(ur=>TS(ur,v,x,d)),oo={...d,acrPolicies:d.acrPolicies.filter(ur=>!Hr.includes(ur)),policies:d.policies.filter(ur=>!Nr.includes(ur))},hn=hu(oo,v,x);if(hn===null)return null;let ir=l;Hr.forEach(ur=>{const[nn,la]=PS(ur,l,d,v,x);ir=al(ir,nn),ir=la.reduce(ul,ir)}),Nr.forEach(ur=>{const[nn,la]=PS(ur,l,d,v,x);ir=sl(ir,nn),ir=la.reduce(ul,ir)});const _i=`matcher_${encodeURIComponent(`${v}_${x}`)}`;let Vn=wf(l,_i);Vn=gn(Vn,v,x);const Pi=(V=D.controlRead)!==null&&V!==void 0?V:Ne.controlRead,qo=(z=D.controlWrite)!==null&&z!==void 0?z:Ne.controlWrite;let aa=Hr;if(Pi!==hn.controlRead||qo!==hn.controlWrite){const ur=u.v4();let nn=Oo(l,ur);nn=nf(nn,{read:Pi===!0,append:!1,write:qo===!0}),nn=rt(nn,F.allOf,Vn),ir=al(ir,nn),ir=ul(ir,Vn),aa=Nt}const zo=(se=D.read)!==null&&se!==void 0?se:Ne.read,mu=(Te=D.append)!==null&&Te!==void 0?Te:Ne.append,vu=(Ce=D.write)!==null&&Ce!==void 0?Ce:Ne.write;let wu=Nr;if(zo!==hn.read||mu!==hn.append||vu!==hn.write){const ur=u.v4();let nn=Oo(l,ur);nn=nf(nn,{read:zo===!0,append:mu===!0,write:vu===!0}),nn=rt(nn,F.allOf,Vn),ir=sl(ir,nn),ir=ul(ir,Vn),wu=yr}return aa.forEach(ur=>{ir=ea(ir,ar(ur))}),wu.forEach(ur=>{ir=Ha(ir,ar(ur))}),ir}function F2(l,d,v,x){return CS(l,d,F.agent,v,x)}function O2(l,d,v){return CS(l,d,F.agent,F.PublicAgent,v)}function TS(l,d,v,x){const V=h(l,F.allOf).map(Ne=>x.matchers.find(ct=>ar(ct)===Ne)).some(Ne=>zg(Ne,d,v)),se=h(l,F.anyOf).map(Ne=>x.matchers.find(ct=>ar(ct)===Ne)).some(Ne=>zg(Ne,d,v)),Ce=h(l,F.noneOf).map(Ne=>x.matchers.find(ct=>ar(ct)===Ne)).some(Ne=>zg(Ne,d,v));return V||se||Ce}function zg(l,d,v){const x=[];return AS.forEach(D=>{const V=h(l,D).filter(z=>z!==v||D!==d);x.push(...V)}),x.length>0}function PS(l,d,v,x,D){const V=u.v4(),z=Jg(h(l,F.allOf),d,v,V,x,D),se=Jg(h(l,F.anyOf),d,v,V,x,D),Te=Jg(h(l,F.noneOf),d,v,V,x,D);let Ce=Oo(d,encodeURI(ar(l))+V);return h(l,F.allow).forEach(Ne=>{Ce=rt(Ce,F.allow,Ne)}),h(l,F.deny).forEach(Ne=>{Ce=rt(Ce,F.deny,Ne)}),z.forEach(Ne=>{Ce=rt(Ce,F.allOf,Ne)}),se.forEach(Ne=>{Ce=rt(Ce,F.anyOf,Ne)}),Te.forEach(Ne=>{Ce=rt(Ce,F.noneOf,Ne)}),[Ce,z.concat(se).concat(Te)]}function Jg(l,d,v,x,D,V){return l.map(z=>{const se=v.matchers.find(Ne=>ar(Ne)===z);if(typeof se>"u")return null;let Te=wf(d,encodeURI(ar(se))+x),Ce=!1;return AS.forEach(Ne=>{h(se,Ne).forEach(ct=>{Ne===D&&ct===V||(Ce=!0,Te=rt(Te,Ne,ct))})}),Ce?Te:null}).filter(xf)}function xf(l){return l!==null}async function pu(l,d=J){const v=Fo(l),x=Wo(l),D=IS(v).concat(IS(x)),V=await FS(D,d),z=Qg(v,V).filter(xf),se=Qg(x,V).filter(xf),Te=new Set;z.forEach(Nr=>{OS(Nr).forEach(hn=>{Te.add(hn)})}),se.forEach(Nr=>{OS(Nr).forEach(hn=>{Te.add(hn)})});const Ce=Array.from(Te),ct=Ce.map(Nr=>Xg(Nr)).filter(Nr=>!D.includes(Nr)),vt=await FS(ct,d),Nt={...V,...vt},yr=Qg(Ce,Nt).filter(xf);return{inaccessibleUrls:Object.keys(Nt).filter(Nr=>Nt[Nr]===null),acrPolicies:z,policies:se,matchers:yr}}function Xg(l){const d=new URL(l);return d.hash="",d.href}function IS(l){const d=[];return l.forEach(v=>{const x=Xg(v);d.includes(x)||d.push(x)}),d}async function FS(l,d){const v=Array.from(new Set(l)),x={};return await Promise.all(v.map(async D=>{try{const V=await Dn(D,d);x[D]=V}catch{x[D]=null}})),x}function Qg(l,d){return l.map(v=>{const x=Xg(v),D=d[x];return D?qt(D,v):null})}function OS(l){return yf(l).concat(mf(l)).concat(vf(l))}async function NS(l,d,v=J){const x=await Jn(l,v);if(In(x)){const D=await pu(x,v);return x2(D,d)}return Pn(x)?dl(x,d,v):null}async function N2(l,d,v,x=J){const D=await Jn(l,x);if(In(D)){const V=await pu(D,x),z=F2(D,V,d,v);if(z)try{return await Vi(z,x),await NS(l,d,x)}catch{return null}return null}if(Pn(D)){if(v.controlRead!==v.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${De(D)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Mg(D,d,v,x),dl(D,d,x)}return null}async function k2(l,d=J){const v=await Jn(l,d);if(In(v)){const x=await pu(v,d);return I2(x)}return Pn(v)?Ug(v,d):null}async function kS(l,d=J){const v=await Jn(l,d);if(In(v)){const x=await pu(v,d);return C2(x)}return Pn(v)?fl(v,d):null}async function D2(l,d,v=J){const x=await Jn(l,v);if(In(x)){const D=await pu(x,v),V=O2(x,D,d);if(V)try{return await Vi(V,v),await kS(l,v)}catch{return null}return null}if(Pn(x)){if(d.controlRead!==d.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${De(x)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Bg(x,d,v),fl(x,v)}return null}var L2=Object.freeze({__proto__:null,getAccessFor:Hg,getAccessForAll:jg,getAgentAccess:NS,getAgentAccessAll:k2,getPublicAccess:kS,setAccessFor:$g,setAgentAccess:N2,setPublicAccess:D2});async function DS(l,d){return typeof l.internal_resourceInfo.aclUrl=="string"?Le(l.internal_resourceInfo.aclUrl,d):null}function U2(l){return Pd(l,Er.allow)}function M2(l){return Pd(l,Er.deny)}function LS(l,d,v){const x=rn(d,Er.allOf).map(Ce=>qt(br(l),Ce)).filter(Ce=>Ce!==null),D=x.every(Ce=>rn(Ce,Er.agent).includes(v)),V=rn(d,Er.anyOf).map(Ce=>qt(br(l),Ce)).filter(Ce=>Ce!==null),z=V.some(Ce=>rn(Ce,Er.agent).includes(v)),se=rn(d,Er.noneOf).map(Ce=>qt(br(l),Ce)).filter(Ce=>Ce!==null),Te=se.some(Ce=>rn(Ce,Er.agent).includes(v));return x.length+V.length>0&&(x.length===0||D)&&(V.length===0||z)&&(se.length===0||!Te)}function US(l,d,v){const x=U2(l),D=M2(l);return v==="control"?{read:d.read,append:d.append,write:d.write,controlRead:(d.controlRead||x.read)&&!D.read,controlWrite:(d.controlWrite||x.write)&&!D.write}:{read:(d.read||x.read)&&!D.read,append:(d.append||x.append)&&!D.append,write:(d.write||x.write)&&!D.write,controlRead:d.controlRead,controlWrite:d.controlWrite}}async function Cf(l,d){let v={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1};return _g(l).map(V=>qt(br(l),V)).filter(V=>V!==null).forEach(V=>{LS(l,V,d)&&(v=US(V,v,"resource"))}),wg(l).map(V=>qt(br(l),V)).filter(V=>V!==null).forEach(V=>{LS(l,V,d)&&(v=US(V,v,"control"))}),v}function B2(l){const d=l.internal_resourceInfo.linkedResources[Er.accessControl];return Array.isArray(d)&&d.length===1?d[0]:null}async function H2(l,d){const v=B2(l);if(v!==null)return v;const x=await DS(l,d);if(x===null)return null;const D=Ie(x).type;return Array.isArray(D)&&D.includes(Er.AccessControlResource)?Be(x):null}async function gu(l,d){const v=await H2(l,d);if(v===null)return null;let x;try{x=await Dn(v,d)}catch{return null}return{...l,internal_acp:{acr:{...x,accessTo:Be(l)}}}}async function MS(l,d,v){const x=await Le(l,v),D=await gu(x,v);return D===null?dl(x,d,v):Cf(D,d)}function j2(l){return Array.from(new Set(Ur(br(l)).map(d=>rn(d,Er.agent)).reduce((d,v)=>d.concat(v),[])))}async function $2(l){return(await Promise.all(j2(l).map(async d=>({[d]:await Cf(l,d)})))).reduce((d,v)=>({...d,...v}),{})}async function V2(l,d){const v=await Le(l,d),x=await gu(v,d);return x===null?Ug(v,d):$2(x)}async function K2(l){return Cf(l,Er.PublicAgent)}async function BS(l,d){const v=await Le(l,d),x=await gu(v,d);return x===null?fl(v,d):K2(x)}function Yg(l,d,v){return sg(l,d).concat("AgentMatcher").concat(v.charAt(0).toUpperCase()+v.slice(1)).concat("Policy")}function W2(l,d,v){const x=Yg(l,d,v);return x.includes("Acr")?mg(l,x):vg(l,x)}function HS(l,d,v){return Yg(l,d,v).concat("Matcher")}const jS=Er.anyOf;function G2(l,d,v){const x=Yg(l,d,v),D=HS(l,d,v);let V=qt(br(l),x);return V||(l=W2(l,d,v),V=kr({url:x}),V=c_(V,{[v]:!0},Er.allow)),h(V,jS).includes(D)?l:(V=wi(V).addUrl(jS,D).build(),io(l,V))}function yu(l,d,v,x,D){var V;const z=HS(l,v,x),se=G2(l,v,x),Te=(V=qt(br(se),z))!==null&&V!==void 0?V:kr({url:z});return io(se,D==="add"?Eg(Te,d):bg(Te,d))}async function $S(l,d,v){const x=await Cf(l,d);return typeof v.read=="boolean"&&x.read!==v.read&&(l=yu(l,d,$a,"read",v.read?"add":"remove")),typeof v.append=="boolean"&&x.append!==v.append&&(l=yu(l,d,$a,"append",v.append?"add":"remove")),typeof v.write=="boolean"&&x.write!==v.write&&(l=yu(l,d,$a,"write",v.write?"add":"remove")),typeof v.controlRead=="boolean"&&x.controlRead!==v.controlRead&&(l=yu(l,d,lu,"controlRead",v.controlRead?"add":"remove")),typeof v.controlWrite=="boolean"&&x.controlWrite!==v.controlWrite&&(l=yu(l,d,lu,"controlWrite",v.controlWrite?"add":"remove")),l}async function q2(l,d,v,x){const D=await Le(l,x),V=await gu(D,x);if(V===null)return await Mg(D,d,v,x),dl(D,d,x);try{return await Vi(await $S(V,d,v),x),await MS(l,d,x)}catch{return null}}async function z2(l,d){return $S(l,Er.PublicAgent,d)}async function J2(l,d,v){const x=await Le(l,v),D=await gu(x,v);if(D===null)return await Bg(x,d,v),fl(x,v);try{return await Vi(await z2(D,d),v),await BS(l,v)}catch{return null}}var X2=Object.freeze({__proto__:null,getAclServerResourceInfo:DS,getAgentAccess:MS,getAgentAccessAll:V2,getPublicAccess:BS,setAgentAccess:q2,setPublicAccess:J2}),Q2=Object.freeze({__proto__:null,acrAsMarkdown:ng,addAcrPolicyUrl:nu,addAgent:qd,addAllOfRuleUrl:Fd,addAnyOfRuleUrl:kd,addClient:v_,addGroup:Xd,addMemberAcrPolicyUrl:Rd,addMemberPolicyUrl:tg,addMockAcrTo:ll,addNoneOfRuleUrl:Ud,addPolicyUrl:Cd,createPolicy:el,createResourcePolicyFor:Oo,createResourceRuleFor:jd,createRule:Hd,getAcrPolicyUrlAll:Fo,getAgentAll:uu,getAllOfRuleUrlAll:ra,getAllowModes:ia,getAnyOfRuleUrlAll:na,getClientAll:gg,getDenyModes:oa,getFileWithAccessDatasets:Ga,getFileWithAcr:Ka,getGroupAll:cu,getLinkedAcrUrl:ug,getMemberAcrPolicyUrlAll:Ua,getMemberPolicyUrlAll:iu,getNoneOfRuleUrlAll:Go,getPolicy:tl,getPolicyAll:rl,getPolicyUrlAll:Wo,getReferencedPolicyUrlAll:za,getResourceAcrPolicy:fu,getResourceAcrPolicyAll:uf,getResourceInfoWithAccessDatasets:qa,getResourceInfoWithAcr:Jn,getResourcePolicy:du,getResourcePolicyAll:lf,getResourceRule:dg,getResourceRuleAll:g_,getRule:$d,getRuleAll:Vd,getSolidDatasetWithAccessDatasets:Wa,getSolidDatasetWithAcr:Va,hasAccessibleAcr:In,hasAnyClient:tf,hasAuthenticated:Qa,hasCreator:Ya,hasLinkedAcr:Zs,hasPublic:Xa,isAcpControlled:Id,mockAcrFor:sa,policyAsMarkdown:ff,removeAcrPolicyUrl:ea,removeAcrPolicyUrlAll:Ma,removeAgent:zd,removeAllOfRuleUrl:Od,removeAnyClient:__,removeAnyOfRuleUrl:Dd,removeAuthenticated:hg,removeClient:w_,removeCreator:pg,removeGroup:Qd,removeMemberAcrPolicyUrl:xd,removeMemberAcrPolicyUrlAll:Ba,removeMemberPolicyUrl:rg,removeMemberPolicyUrlAll:su,removeNoneOfRuleUrl:Md,removePolicy:nl,removePolicyUrl:Ha,removePolicyUrlAll:ou,removePublic:fg,removeResourceAcrPolicy:df,removeResourcePolicy:cf,removeResourceRule:y_,removeRule:Kd,ruleAsMarkdown:rf,saveAcrFor:Vi,setAgent:Gd,setAllOfRuleUrl:Nd,setAllowModes:ol,setAnyClient:yg,setAnyOfRuleUrl:Ld,setAuthenticated:Zd,setClient:m_,setCreator:ef,setDenyModes:sf,setGroup:Jd,setNoneOfRuleUrl:Bd,setPolicy:il,setPublic:Yd,setResourceAcrPolicy:al,setResourcePolicy:sl,setResourceRule:Ja,setRule:Wd}),Y2=Object.freeze({__proto__:null,addAcrPolicyUrl:mg,addAgent:Eg,addAllOfMatcherUrl:U_,addAnyOfMatcherUrl:H_,addClient:oS,addMemberAcrPolicyUrl:x_,addMemberPolicyUrl:C_,addMockAcrTo:ll,addNoneOfMatcherUrl:V_,addPolicyUrl:vg,createMatcher:G_,createPolicy:el,createResourceMatcherFor:wf,createResourcePolicyFor:Oo,getAcrPolicyUrlAll:wg,getAgentAll:Z_,getAllOfMatcherUrlAll:yf,getAllowModes:of,getAnyOfMatcherUrlAll:mf,getClientAll:iS,getDenyModes:af,getFileWithAccessDatasets:Ga,getFileWithAcr:Ka,getLinkedAcrUrl:ug,getMatcher:q_,getMatcherAll:z_,getMemberAcrPolicyUrlAll:I_,getMemberPolicyUrlAll:F_,getNoneOfMatcherUrlAll:vf,getPolicy:tl,getPolicyAll:rl,getPolicyUrlAll:_g,getReferencedPolicyUrlAll:za,getResourceAcrPolicy:fu,getResourceAcrPolicyAll:uf,getResourceInfoWithAccessDatasets:qa,getResourceInfoWithAcr:Jn,getResourceMatcher:Sg,getResourceMatcherAll:J_,getResourcePolicy:du,getResourcePolicyAll:lf,getSolidDatasetWithAccessDatasets:Wa,getSolidDatasetWithAcr:Va,getVcAccess:p_,hasAccessibleAcr:In,hasAuthenticated:xg,hasCreator:Tg,hasLinkedAcr:Zs,hasPublic:Ag,isAcpControlled:Id,mockAcrFor:sa,removeAcrPolicyUrl:O_,removeAcrPolicyUrlAll:Ma,removeAgent:bg,removeAllOfMatcherUrl:M_,removeAnyOfMatcherUrl:j_,removeAuthenticated:rS,removeClient:sS,removeCreator:nS,removeMatcher:X_,removeMemberAcrPolicyUrl:N_,removeMemberAcrPolicyUrlAll:Ba,removeMemberPolicyUrl:k_,removeMemberPolicyUrlAll:su,removeNoneOfMatcherUrl:K_,removePolicy:nl,removePolicyUrl:D_,removePolicyUrlAll:ou,removePublic:tS,removeResourceAcrPolicy:df,removeResourceMatcher:Q_,removeResourcePolicy:cf,saveAcrFor:Vi,setAgent:eS,setAllOfMatcherUrl:B_,setAllowModes:nf,setAnyOfMatcherUrl:$_,setAuthenticated:Cg,setCreator:Pg,setDenyModes:S_,setMatcher:Y_,setNoneOfMatcherUrl:W_,setPolicy:il,setPublic:Rg,setResourceMatcher:ul,setResourcePolicy:L_,setVcAccess:h_});const{getJsonLdParser:Z2,getTurtleParser:eI,solidDatasetAsTurtle:tI}=It;return Me.FetchError=dt,Me.SolidClientError=p,Me.ThingExpectedError=mo,Me.access=A2,Me.access_v1=R2,Me.access_v2=L2,Me.acp_ess_1=Q2,Me.acp_ess_2=Y2,Me.acp_v1=o2,Me.acp_v2=i2,Me.acp_v3=a2,Me.acp_v4=c2,Me.addBoolean=pr,Me.addDate=lr,Me.addDatetime=Fr,Me.addDecimal=Vr,Me.addInteger=wr,Me.addIri=rt,Me.addJwkToJwks=Yw,Me.addLiteral=Or,Me.addMockFallbackAclTo=$P,Me.addMockResourceAclTo=jP,Me.addNamedNode=tr,Me.addPublicKeyToProfileJwks=WP,Me.addStringEnglish=Gr,Me.addStringNoLocale=Qr,Me.addStringWithLocale=Pr,Me.addTerm=wn,Me.addTime=dr,Me.addUrl=hr,Me.asIri=ar,Me.asUrl=$r,Me.buildThing=wi,Me.changeLogAsMarkdown=it,Me.createAcl=Ad,Me.createAclFromFallbackAcl=Cw,Me.createContainerAt=q,Me.createContainerInContainer=le,Me.createSolidDataset=Mn,Me.createThing=kr,Me.deleteAclFor=kP,Me.deleteContainer=Re,Me.deleteFile=jr,Me.deleteSolidDataset=O,Me.fromRdfJsDataset=Ot,Me.getAgentAccess=Qp,Me.getAgentAccessAll=Pw,Me.getAgentDefaultAccess=Nw,Me.getAgentDefaultAccessAll=kw,Me.getAgentResourceAccess=Iw,Me.getAgentResourceAccessAll=Fw,Me.getAltProfileUrlAllFrom=Zw,Me.getBoolean=y,Me.getBooleanAll=w,Me.getContainedResourceUrlAll=et,Me.getContentType=ke,Me.getDate=W,Me.getDateAll=Q,Me.getDatetime=A,Me.getDatetimeAll=U,Me.getDecimal=ce,Me.getDecimalAll=he,Me.getEffectiveAccess=Ge,Me.getFallbackAcl=Xp,Me.getFile=sr,Me.getFileWithAcl=OP,Me.getGroupAccess=Yp,Me.getGroupAccessAll=Mw,Me.getGroupDefaultAccess=jw,Me.getGroupDefaultAccessAll=$w,Me.getGroupResourceAccess=Bw,Me.getGroupResourceAccessAll=Hw,Me.getInteger=ye,Me.getIntegerAll=be,Me.getIri=tn,Me.getIriAll=h,Me.getJsonLdParser=Z2,Me.getLinkedResourceUrlAll=Ie,Me.getLiteral=Ye,Me.getLiteralAll=Vt,Me.getNamedNode=Ee,Me.getNamedNodeAll=We,Me.getPodOwner=tt,Me.getPodUrlAll=GP,Me.getPodUrlAllFrom=t_,Me.getProfileAll=e_,Me.getProfileJwksIri=Qw,Me.getPropertyAll=Gn,Me.getPublicAccess=Zp,Me.getPublicDefaultAccess=qw,Me.getPublicResourceAccess=Gw,Me.getResourceAcl=ru,Me.getResourceInfo=Le,Me.getResourceInfoWithAcl=NP,Me.getSolidDataset=Dn,Me.getSolidDatasetWithAcl=FP,Me.getSourceIri=De,Me.getSourceUrl=Be,Me.getStringByLocaleAll=te,Me.getStringEnglish=Pe,Me.getStringEnglishAll=ze,Me.getStringNoLocale=pe,Me.getStringNoLocaleAll=ve,Me.getStringWithLocale=He,Me.getStringWithLocaleAll=Qe,Me.getTerm=pt,Me.getTermAll=Tr,Me.getThing=qt,Me.getThingAll=Ur,Me.getTime=ue,Me.getTimeAll=oe,Me.getTurtleParser=eI,Me.getUrl=qn,Me.getUrlAll=rn,Me.getWebIdDataset=qP,Me.getWellKnownSolid=jt,Me.hasAccessibleAcl=Pn,Me.hasAcl=IP,Me.hasFallbackAcl=fs,Me.hasResourceAcl=ds,Me.hasResourceInfo=f,Me.hasServerResourceInfo=c,Me.isContainer=je,Me.isPodOwner=re,Me.isRawData=nt,Me.isThing=mn,Me.isThingLocal=vn,Me.mockContainerFrom=Rr,Me.mockFetchError=Tt,Me.mockFileFrom=rr,Me.mockSolidDatasetFrom=er,Me.mockThingFrom=bd,Me.overwriteFile=Kt,Me.removeAll=Dt,Me.removeBoolean=ei,Me.removeDate=wo,Me.removeDatetime=Bn,Me.removeDecimal=Ql,Me.removeInteger=Na,Me.removeIri=gr,Me.removeLiteral=qs,Me.removeNamedNode=Zl,Me.removeStringEnglish=zp,Me.removeStringNoLocale=Yl,Me.removeStringWithLocale=Po,Me.removeThing=pn,Me.removeTime=eo,Me.removeUrl=ln,Me.responseToResourceInfo=Ue,Me.responseToSolidDataset=oi,Me.saveAclFor=Tw,Me.saveFileInContainer=nr,Me.saveSolidDatasetAt=ji,Me.saveSolidDatasetInContainer=Ae,Me.setAgentDefaultAccess=DP,Me.setAgentResourceAccess=Ow,Me.setBoolean=vd,Me.setDate=vi,Me.setDatetime=wd,Me.setDecimal=_d,Me.setGroupDefaultAccess=UP,Me.setGroupResourceAccess=Ww,Me.setInteger=zs,Me.setIri=gn,Me.setLiteral=Ed,Me.setNamedNode=Sd,Me.setProfileJwks=VP,Me.setPublicDefaultAccess=MP,Me.setPublicResourceAccess=zw,Me.setStringNoLocale=eu,Me.setStringWithLocale=Cn,Me.setTerm=Js,Me.setThing=_r,Me.setTime=ka,Me.setUrl=ro,Me.solidDatasetAsMarkdown=Je,Me.solidDatasetAsTurtle=tI,Me.thingAsMarkdown=Rn,Me.toRdfJsDataset=mr,Me.universalAccess=X2,Me}var C0={},ca={},en={};const Dr=crypto,Mi=e=>e instanceof CryptoKey,xT=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await Dr.subtle.digest(r,t))},$n=new TextEncoder,ho=new TextDecoder,Xh=2**32;function $o(...e){const t=e.reduce((o,{length:a})=>o+a,0),r=new Uint8Array(t);let n=0;return e.forEach(o=>{r.set(o,n),n+=o.length}),r}function PD(e,t){return $o($n.encode(e),new Uint8Array([0]),t)}function Mm(e,t,r){if(t<0||t>=Xh)throw new RangeError(`value must be >= 0 and <= ${Xh-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],r)}function CT(e){const t=Math.floor(e/Xh),r=e%Xh,n=new Uint8Array(8);return Mm(n,t,0),Mm(n,r,4),n}function sw(e){const t=new Uint8Array(4);return Mm(t,e),t}function T0(e){return $o(sw(e.length),e)}async function ID(e,t,r){const n=Math.ceil((t>>3)/32),o=new Uint8Array(n*32);for(let a=0;a<n;a++){const s=new Uint8Array(4+e.length+r.length);s.set(sw(a+1)),s.set(e,4),s.set(r,4+e.length),o.set(await xT("sha256",s),a*32)}return o.slice(0,t>>3)}const aw=e=>{let t=e;typeof t=="string"&&(t=$n.encode(t));const r=32768,n=[];for(let o=0;o<t.length;o+=r)n.push(String.fromCharCode.apply(null,t.subarray(o,o+r)));return btoa(n.join(""))},Kn=e=>aw(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),TT=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},Qn=e=>{let t=e;t instanceof Uint8Array&&(t=ho.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return TT(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class di extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}class Ii extends di{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}}class Bm extends di{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}}class Qh extends di{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Xr extends di{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class od extends di{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class cr extends di{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class yn extends di{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Fi extends di{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class PT extends di{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class $p extends di{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class lw extends di{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class IT extends di{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class FT extends di{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class uw extends di{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const FD=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:Qh,JOSEError:di,JOSENotSupported:Xr,JWEDecryptionFailed:od,JWEInvalid:cr,JWKInvalid:PT,JWKSInvalid:$p,JWKSMultipleMatchingKeys:IT,JWKSNoMatchingKey:lw,JWKSTimeout:FT,JWSInvalid:yn,JWSSignatureVerificationFailed:uw,JWTClaimValidationFailed:Ii,JWTExpired:Bm,JWTInvalid:Fi},Symbol.toStringTag,{value:"Module"})),Vp=Dr.getRandomValues.bind(Dr);function OT(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Xr(`Unsupported JWE Algorithm: ${e}`)}}const NT=e=>Vp(new Uint8Array(OT(e)>>3)),kT=(e,t)=>{if(t.length<<3!==OT(e))throw new cr("Invalid Initialization Vector length")},Yh=(e,t)=>{const r=e.byteLength<<3;if(r!==t)throw new cr(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)},OD=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const r=e.length;let n=0,o=-1;for(;++o<r;)n|=e[o]^t[o];return n===0};function li(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function xs(e,t){return e.name===t}function Ah(e){return parseInt(e.name.slice(4),10)}function ND(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function DT(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function kD(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!xs(e.algorithm,"HMAC"))throw li("HMAC");const n=parseInt(t.slice(2),10);if(Ah(e.algorithm.hash)!==n)throw li(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!xs(e.algorithm,"RSASSA-PKCS1-v1_5"))throw li("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(Ah(e.algorithm.hash)!==n)throw li(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!xs(e.algorithm,"RSA-PSS"))throw li("RSA-PSS");const n=parseInt(t.slice(2),10);if(Ah(e.algorithm.hash)!==n)throw li(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw li("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!xs(e.algorithm,"ECDSA"))throw li("ECDSA");const n=ND(t);if(e.algorithm.namedCurve!==n)throw li(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}DT(e,r)}function Ms(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!xs(e.algorithm,"AES-GCM"))throw li("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw li(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!xs(e.algorithm,"AES-KW"))throw li("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw li(n,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw li("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!xs(e.algorithm,"PBKDF2"))throw li("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!xs(e.algorithm,"RSA-OAEP"))throw li("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(Ah(e.algorithm.hash)!==n)throw li(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}DT(e,r)}function LT(e,t,...r){if(r.length>2){const n=r.pop();e+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const mi=(e,...t)=>LT("Key must be ",e,...t);function UT(e,t,...r){return LT(`Key for the ${e} algorithm must be `,t,...r)}const MT=e=>Mi(e),Un=["CryptoKey"];async function DD(e,t,r,n,o,a){if(!(t instanceof Uint8Array))throw new TypeError(mi(t,"Uint8Array"));const s=parseInt(e.slice(1,4),10),u=await Dr.subtle.importKey("raw",t.subarray(s>>3),"AES-CBC",!1,["decrypt"]),f=await Dr.subtle.importKey("raw",t.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),c=$o(a,n,r,CT(a.length<<3)),g=new Uint8Array((await Dr.subtle.sign("HMAC",f,c)).slice(0,s>>3));let p;try{p=OD(o,g)}catch{}if(!p)throw new od;let m;try{m=new Uint8Array(await Dr.subtle.decrypt({iv:n,name:"AES-CBC"},u,r))}catch{}if(!m)throw new od;return m}async function LD(e,t,r,n,o,a){let s;t instanceof Uint8Array?s=await Dr.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(Ms(t,e,"decrypt"),s=t);try{return new Uint8Array(await Dr.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},s,$o(r,o)))}catch{throw new od}}const BT=async(e,t,r,n,o,a)=>{if(!Mi(t)&&!(t instanceof Uint8Array))throw new TypeError(mi(t,...Un,"Uint8Array"));switch(kT(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&Yh(t,parseInt(e.slice(-3),10)),DD(e,t,r,n,o,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&Yh(t,parseInt(e.slice(1,4),10)),LD(e,t,r,n,o,a);default:throw new Xr("Unsupported JWE Content Encryption Algorithm")}},UD=async()=>{throw new Xr('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},MD=async()=>{throw new Xr('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},yd=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const n of t){const o=Object.keys(n);if(!r||r.size===0){r=new Set(o);continue}for(const a of o){if(r.has(a))return!1;r.add(a)}}return!0};function BD(e){return typeof e=="object"&&e!==null}function ni(e){if(!BD(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const Kp=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function HT(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function jT(e,t,r){if(Mi(e))return Ms(e,t,r),e;if(e instanceof Uint8Array)return Dr.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw new TypeError(mi(e,...Un,"Uint8Array"))}const Hm=async(e,t,r)=>{const n=await jT(t,e,"wrapKey");HT(n,e);const o=await Dr.subtle.importKey("raw",r,...Kp);return new Uint8Array(await Dr.subtle.wrapKey("raw",o,n,"AES-KW"))},jm=async(e,t,r)=>{const n=await jT(t,e,"unwrapKey");HT(n,e);const o=await Dr.subtle.unwrapKey("raw",r,n,"AES-KW",...Kp);return new Uint8Array(await Dr.subtle.exportKey("raw",o))};async function $T(e,t,r,n,o=new Uint8Array(0),a=new Uint8Array(0)){if(!Mi(e))throw new TypeError(mi(e,...Un));if(Ms(e,"ECDH"),!Mi(t))throw new TypeError(mi(t,...Un));Ms(t,"ECDH","deriveBits");const s=$o(T0($n.encode(r)),T0(o),T0(a),sw(n));let u;e.algorithm.name==="X25519"?u=256:e.algorithm.name==="X448"?u=448:u=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const f=new Uint8Array(await Dr.subtle.deriveBits({name:e.algorithm.name,public:e},t,u));return ID(f,n,s)}async function HD(e){if(!Mi(e))throw new TypeError(mi(e,...Un));return Dr.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function VT(e){if(!Mi(e))throw new TypeError(mi(e,...Un));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function jD(e){if(!(e instanceof Uint8Array)||e.length<8)throw new cr("PBES2 Salt Input must be 8 or more octets")}function $D(e,t){if(e instanceof Uint8Array)return Dr.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(Mi(e))return Ms(e,t,"deriveBits","deriveKey"),e;throw new TypeError(mi(e,...Un,"Uint8Array"))}async function KT(e,t,r,n){jD(e);const o=PD(t,e),a=parseInt(t.slice(13,16),10),s={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:o},u={length:a,name:"AES-KW"},f=await $D(n,t);if(f.usages.includes("deriveBits"))return new Uint8Array(await Dr.subtle.deriveBits(s,f,a));if(f.usages.includes("deriveKey"))return Dr.subtle.deriveKey(s,f,u,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const VD=async(e,t,r,n=2048,o=Vp(new Uint8Array(16)))=>{const a=await KT(o,e,n,t);return{encryptedKey:await Hm(e.slice(-6),a,r),p2c:n,p2s:Kn(o)}},KD=async(e,t,r,n,o)=>{const a=await KT(o,e,n,t);return jm(e.slice(-6),a,r)};function Zh(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Xr(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const Wp=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},WD=async(e,t,r)=>{if(!Mi(t))throw new TypeError(mi(t,...Un));if(Ms(t,e,"encrypt","wrapKey"),Wp(e,t),t.usages.includes("encrypt"))return new Uint8Array(await Dr.subtle.encrypt(Zh(e),t,r));if(t.usages.includes("wrapKey")){const n=await Dr.subtle.importKey("raw",r,...Kp);return new Uint8Array(await Dr.subtle.wrapKey("raw",n,t,Zh(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},GD=async(e,t,r)=>{if(!Mi(t))throw new TypeError(mi(t,...Un));if(Ms(t,e,"decrypt","unwrapKey"),Wp(e,t),t.usages.includes("decrypt"))return new Uint8Array(await Dr.subtle.decrypt(Zh(e),t,r));if(t.usages.includes("unwrapKey")){const n=await Dr.subtle.unwrapKey("raw",r,t,Zh(e),...Kp);return new Uint8Array(await Dr.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function cw(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Xr(`Unsupported JWE Algorithm: ${e}`)}}const ga=e=>Vp(new Uint8Array(cw(e)>>3)),WT=(e,t)=>{const r=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${r}
-----END ${t}-----`},GT=async(e,t,r)=>{if(!Mi(r))throw new TypeError(mi(r,...Un));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==e)throw new TypeError(`key is not a ${e} key`);return WT(aw(new Uint8Array(await Dr.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},qD=e=>GT("public","spki",e),zD=e=>GT("private","pkcs8",e),ws=(e,t,r=0)=>{r===0&&(t.unshift(t.length),t.unshift(6));let n=e.indexOf(t[0],r);if(n===-1)return!1;const o=e.subarray(n,n+t.length);return o.length!==t.length?!1:o.every((a,s)=>a===t[s])||ws(e,t,n+1)},wA=e=>{switch(!0){case ws(e,[42,134,72,206,61,3,1,7]):return"P-256";case ws(e,[43,129,4,0,34]):return"P-384";case ws(e,[43,129,4,0,35]):return"P-521";case ws(e,[43,101,110]):return"X25519";case ws(e,[43,101,111]):return"X448";case ws(e,[43,101,112]):return"Ed25519";case ws(e,[43,101,113]):return"Ed448";default:throw new Xr("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},qT=async(e,t,r,n,o)=>{var a;let s,u;const f=new Uint8Array(atob(r.replace(e,"")).split("").map(g=>g.charCodeAt(0))),c=t==="spki";switch(n){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},u=c?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},u=c?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},u=c?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":s={name:"ECDSA",namedCurve:"P-256"},u=c?["verify"]:["sign"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},u=c?["verify"]:["sign"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},u=c?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const g=wA(f);s=g.startsWith("P-")?{name:"ECDH",namedCurve:g}:{name:g},u=c?[]:["deriveBits"];break}case"EdDSA":s={name:wA(f)},u=c?["verify"]:["sign"];break;default:throw new Xr('Invalid or unsupported "alg" (Algorithm) value')}return Dr.subtle.importKey(t,f,s,(a=o==null?void 0:o.extractable)!==null&&a!==void 0?a:!1,u)},JD=(e,t,r)=>qT(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r),zT=(e,t,r)=>qT(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r);function _A(e){let t=[],r=0;for(;r<e.length;){let n=JT(e.subarray(r));t.push(n),r+=n.byteLength}return t}function JT(e){let t=0,r=e[0]&31;if(t++,r===31){for(r=0;e[t]>=128;)r=r*128+e[t]-128,t++;r=r*128+e[t]-128,t++}let n=0;if(e[t]<128)n=e[t],t++;else if(n===128){for(n=0;e[t+n]!==0||e[t+n+1]!==0;){if(n>e.byteLength)throw new TypeError("invalid indefinite form length");n++}const a=t+n+2;return{byteLength:a,contents:e.subarray(t,t+n),raw:e.subarray(0,a)}}else{let a=e[t]&127;t++,n=0;for(let s=0;s<a;s++)n=n*256+e[t],t++}const o=t+n;return{byteLength:o,contents:e.subarray(t,o),raw:e.subarray(0,o)}}function XD(e){const t=_A(_A(JT(e).contents)[0].contents);return aw(t[t[0].raw[0]===160?6:5].raw)}function QD(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=TT(t);return WT(XD(r),"PUBLIC KEY")}const YD=(e,t,r)=>{let n;try{n=QD(e)}catch(o){throw new TypeError("failed to parse the X.509 certificate",{cause:o})}return zT(n,t,r)};function ZD(e){let t,r;switch(e.kty){case"oct":{switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new Xr(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},r=["deriveBits"];break;default:throw new Xr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Xr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new Xr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new Xr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Xr('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const eL=async e=>{var t,r;if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:n,keyUsages:o}=ZD(e),a=[n,(t=e.ext)!==null&&t!==void 0?t:!1,(r=e.key_ops)!==null&&r!==void 0?r:o];if(n.name==="PBKDF2")return Dr.subtle.importKey("raw",Qn(e.k),...a);const s={...e};return delete s.alg,delete s.use,Dr.subtle.importKey("jwk",s,...a)},SA=eL;async function tL(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return zT(e,t,r)}async function rL(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return YD(e,t,r)}async function nL(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return JD(e,t,r)}async function Gp(e,t,r){var n;if(!ni(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return r??(r=e.ext!==!0),r?SA({...e,alg:t,ext:(n=e.ext)!==null&&n!==void 0?n:!1}):Qn(e.k);case"RSA":if(e.oth!==void 0)throw new Xr('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return SA({...e,alg:t});default:throw new Xr('Unsupported "kty" (Key Type) Parameter value')}}const iL=(e,t)=>{if(!(t instanceof Uint8Array)){if(!MT(t))throw new TypeError(UT(e,t,...Un,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${Un.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},oL=(e,t,r)=>{if(!MT(t))throw new TypeError(UT(e,t,...Un));if(t.type==="secret")throw new TypeError(`${Un.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${Un.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${Un.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${Un.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${Un.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},qp=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?iL(e,t):oL(e,t,r)};async function sL(e,t,r,n,o){if(!(r instanceof Uint8Array))throw new TypeError(mi(r,"Uint8Array"));const a=parseInt(e.slice(1,4),10),s=await Dr.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),u=await Dr.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),f=new Uint8Array(await Dr.subtle.encrypt({iv:n,name:"AES-CBC"},s,t)),c=$o(o,n,f,CT(o.length<<3)),g=new Uint8Array((await Dr.subtle.sign("HMAC",u,c)).slice(0,a>>3));return{ciphertext:f,tag:g}}async function aL(e,t,r,n,o){let a;r instanceof Uint8Array?a=await Dr.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(Ms(r,e,"encrypt"),a=r);const s=new Uint8Array(await Dr.subtle.encrypt({additionalData:o,iv:n,name:"AES-GCM",tagLength:128},a,t)),u=s.slice(-16);return{ciphertext:s.slice(0,-16),tag:u}}const $m=async(e,t,r,n,o)=>{if(!Mi(r)&&!(r instanceof Uint8Array))throw new TypeError(mi(r,...Un,"Uint8Array"));switch(kT(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Yh(r,parseInt(e.slice(-3),10)),sL(e,t,r,n,o);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Yh(r,parseInt(e.slice(1,4),10)),aL(e,t,r,n,o);default:throw new Xr("Unsupported JWE Content Encryption Algorithm")}};async function lL(e,t,r,n){const o=e.slice(0,7);n||(n=NT(o));const{ciphertext:a,tag:s}=await $m(o,r,t,n,new Uint8Array(0));return{encryptedKey:a,iv:Kn(n),tag:Kn(s)}}async function uL(e,t,r,n,o){const a=e.slice(0,7);return BT(a,t,r,n,o,new Uint8Array(0))}async function cL(e,t,r,n,o){switch(qp(e,t,"decrypt"),e){case"dir":{if(r!==void 0)throw new cr("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(r!==void 0)throw new cr("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ni(n.epk))throw new cr('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!VT(t))throw new Xr("ECDH with the provided key is not allowed or not supported by your javascript runtime");const a=await Gp(n.epk,e);let s,u;if(n.apu!==void 0){if(typeof n.apu!="string")throw new cr('JOSE Header "apu" (Agreement PartyUInfo) invalid');s=Qn(n.apu)}if(n.apv!==void 0){if(typeof n.apv!="string")throw new cr('JOSE Header "apv" (Agreement PartyVInfo) invalid');u=Qn(n.apv)}const f=await $T(a,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?cw(n.enc):parseInt(e.slice(-5,-2),10),s,u);if(e==="ECDH-ES")return f;if(r===void 0)throw new cr("JWE Encrypted Key missing");return jm(e.slice(-6),f,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new cr("JWE Encrypted Key missing");return GD(e,t,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new cr("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new cr('JOSE Header "p2c" (PBES2 Count) missing or invalid');const a=(o==null?void 0:o.maxPBES2Count)||1e4;if(n.p2c>a)throw new cr('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new cr('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return KD(e,t,r,n.p2c,Qn(n.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new cr("JWE Encrypted Key missing");return jm(e,t,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new cr("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new cr('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new cr('JOSE Header "tag" (Authentication Tag) missing or invalid');const a=Qn(n.iv),s=Qn(n.tag);return uL(e,t,r,a,s)}default:throw new Xr('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function md(e,t,r,n,o){if(o.crit!==void 0&&n.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(s=>typeof s!="string"||s.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;r!==void 0?a=new Map([...Object.entries(r),...t.entries()]):a=t;for(const s of n.crit){if(!a.has(s))throw new Xr(`Extension Header Parameter "${s}" is not recognized`);if(o[s]===void 0)throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&n[s]===void 0)throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(n.crit)}const Vm=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function dw(e,t,r){var n;if(!ni(e))throw new cr("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new cr("JOSE Header missing");if(typeof e.iv!="string")throw new cr("JWE Initialization Vector missing or incorrect type");if(typeof e.ciphertext!="string")throw new cr("JWE Ciphertext missing or incorrect type");if(typeof e.tag!="string")throw new cr("JWE Authentication Tag missing or incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new cr("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new cr("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new cr("JWE AAD incorrect type");if(e.header!==void 0&&!ni(e.header))throw new cr("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!ni(e.unprotected))throw new cr("JWE Per-Recipient Unprotected Header incorrect type");let o;if(e.protected)try{const T=Qn(e.protected);o=JSON.parse(ho.decode(T))}catch{throw new cr("JWE Protected Header is invalid")}if(!yd(o,e.header,e.unprotected))throw new cr("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...o,...e.header,...e.unprotected};if(md(cr,new Map,r==null?void 0:r.crit,o,a),a.zip!==void 0){if(!o||!o.zip)throw new cr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(a.zip!=="DEF")throw new Xr('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:s,enc:u}=a;if(typeof s!="string"||!s)throw new cr("missing JWE Algorithm (alg) in JWE Header");if(typeof u!="string"||!u)throw new cr("missing JWE Encryption Algorithm (enc) in JWE Header");const f=r&&Vm("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&Vm("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(f&&!f.has(s))throw new Qh('"alg" (Algorithm) Header Parameter not allowed');if(c&&!c.has(u))throw new Qh('"enc" (Encryption Algorithm) Header Parameter not allowed');let g;e.encrypted_key!==void 0&&(g=Qn(e.encrypted_key));let p=!1;typeof t=="function"&&(t=await t(o,e),p=!0);let m;try{m=await cL(s,t,g,a,r)}catch(T){if(T instanceof TypeError||T instanceof cr||T instanceof Xr)throw T;m=ga(u)}const _=Qn(e.iv),C=Qn(e.tag),R=$n.encode((n=e.protected)!==null&&n!==void 0?n:"");let I;e.aad!==void 0?I=$o(R,$n.encode("."),$n.encode(e.aad)):I=R;let S=await BT(u,m,Qn(e.ciphertext),_,C,I);a.zip==="DEF"&&(S=await((r==null?void 0:r.inflateRaw)||UD)(S));const b={plaintext:S};return e.protected!==void 0&&(b.protectedHeader=o),e.aad!==void 0&&(b.additionalAuthenticatedData=Qn(e.aad)),e.unprotected!==void 0&&(b.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(b.unprotectedHeader=e.header),p?{...b,key:t}:b}async function XT(e,t,r){if(e instanceof Uint8Array&&(e=ho.decode(e)),typeof e!="string")throw new cr("Compact JWE must be a string or Uint8Array");const{0:n,1:o,2:a,3:s,4:u,length:f}=e.split(".");if(f!==5)throw new cr("Invalid Compact JWE");const c=await dw({ciphertext:s,iv:a||void 0,protected:n||void 0,tag:u||void 0,encrypted_key:o||void 0},t,r),g={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return typeof t=="function"?{...g,key:c.key}:g}async function dL(e,t,r){if(!ni(e))throw new cr("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(ni))throw new cr("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new cr("JWE Recipients has no members");for(const n of e.recipients)try{return await dw({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new od}const fL=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:Kn(e)};if(!Mi(e))throw new TypeError(mi(e,...Un,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:o,...a}=await Dr.subtle.exportKey("jwk",e);return a},hL=fL;async function pL(e){return qD(e)}async function gL(e){return zD(e)}async function QT(e){return hL(e)}async function YT(e,t,r,n,o={}){let a,s,u;switch(qp(e,r,"encrypt"),e){case"dir":{u=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!VT(r))throw new Xr("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:f,apv:c}=o;let{epk:g}=o;g||(g=(await HD(r)).privateKey);const{x:p,y:m,crv:_,kty:C}=await QT(g),R=await $T(r,g,e==="ECDH-ES"?t:e,e==="ECDH-ES"?cw(t):parseInt(e.slice(-5,-2),10),f,c);if(s={epk:{x:p,crv:_,kty:C}},C==="EC"&&(s.epk.y=m),f&&(s.apu=Kn(f)),c&&(s.apv=Kn(c)),e==="ECDH-ES"){u=R;break}u=n||ga(t);const I=e.slice(-6);a=await Hm(I,R,u);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{u=n||ga(t),a=await WD(e,r,u);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{u=n||ga(t);const{p2c:f,p2s:c}=o;({encryptedKey:a,...s}=await VD(e,r,u,f,c));break}case"A128KW":case"A192KW":case"A256KW":{u=n||ga(t),a=await Hm(e,r,u);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{u=n||ga(t);const{iv:f}=o;({encryptedKey:a,...s}=await lL(e,r,u,f));break}default:throw new Xr('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:u,encryptedKey:a,parameters:s}}const ZT=Symbol();class ep{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new cr("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!yd(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new cr("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(md(cr,new Map,r==null?void 0:r.crit,this._protectedHeader,n),n.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new cr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(n.zip!=="DEF")throw new Xr('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:o,enc:a}=n;if(typeof o!="string"||!o)throw new cr('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof a!="string"||!a)throw new cr('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let s;if(o==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(o==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let u;{let C;({cek:u,encryptedKey:s,parameters:C}=await YT(o,a,t,this._cek,this._keyManagementParameters)),C&&(r&&ZT in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...C}:this.setUnprotectedHeader(C):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...C}:this.setProtectedHeader(C))}this._iv||(this._iv=NT(a));let f,c,g;this._protectedHeader?c=$n.encode(Kn(JSON.stringify(this._protectedHeader))):c=$n.encode(""),this._aad?(g=Kn(this._aad),f=$o(c,$n.encode("."),$n.encode(g))):f=c;let p,m;if(n.zip==="DEF"){const C=await((r==null?void 0:r.deflateRaw)||MD)(this._plaintext);({ciphertext:p,tag:m}=await $m(a,C,u,this._iv,f))}else({ciphertext:p,tag:m}=await $m(a,this._plaintext,u,this._iv,f));const _={ciphertext:Kn(p),iv:Kn(this._iv),tag:Kn(m)};return s&&(_.encrypted_key=Kn(s)),g&&(_.aad=g),this._protectedHeader&&(_.protected=ho.decode(c)),this._sharedUnprotectedHeader&&(_.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(_.header=this._unprotectedHeader),_}}class yL{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}class mL{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){const n=new yL(this,t,{crit:r==null?void 0:r.crit});return this._recipients.push(n),n}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(t){var r,n,o;if(!this._recipients.length)throw new cr("at least one recipient must be added");if(t={deflateRaw:t==null?void 0:t.deflateRaw},this._recipients.length===1){const[f]=this._recipients,c=await new ep(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(f.unprotectedHeader).encrypt(f.key,{...f.options,...t});let g={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(g.aad=c.aad),c.protected&&(g.protected=c.protected),c.unprotected&&(g.unprotected=c.unprotected),c.encrypted_key&&(g.recipients[0].encrypted_key=c.encrypted_key),c.header&&(g.recipients[0].header=c.header),g}let a;for(let f=0;f<this._recipients.length;f++){const c=this._recipients[f];if(!yd(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new cr("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const g={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:p}=g;if(typeof p!="string"||!p)throw new cr('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(p==="dir"||p==="ECDH-ES")throw new cr('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof g.enc!="string"||!g.enc)throw new cr('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!a)a=g.enc;else if(a!==g.enc)throw new cr('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(md(cr,new Map,c.options.crit,this._protectedHeader,g),g.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new cr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const s=ga(a);let u={ciphertext:"",iv:"",recipients:[],tag:""};for(let f=0;f<this._recipients.length;f++){const c=this._recipients[f],g={};u.recipients.push(g);const m={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+f:void 0;if(f===0){const R=await new ep(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(s).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:m}).encrypt(c.key,{...c.options,...t,[ZT]:!0});u.ciphertext=R.ciphertext,u.iv=R.iv,u.tag=R.tag,R.aad&&(u.aad=R.aad),R.protected&&(u.protected=R.protected),R.unprotected&&(u.unprotected=R.unprotected),g.encrypted_key=R.encrypted_key,R.header&&(g.header=R.header);continue}const{encryptedKey:_,parameters:C}=await YT(((r=c.unprotectedHeader)===null||r===void 0?void 0:r.alg)||((n=this._protectedHeader)===null||n===void 0?void 0:n.alg)||((o=this._unprotectedHeader)===null||o===void 0?void 0:o.alg),a,c.key,s,{p2c:m});g.encrypted_key=Kn(_),(c.unprotectedHeader||C)&&(g.header={...c.unprotectedHeader,...C})}return u}}function eP(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new Xr(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function tP(e,t,r){if(Mi(t))return kD(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(mi(t,...Un));return Dr.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(mi(t,...Un,"Uint8Array"))}const vL=async(e,t,r,n)=>{const o=await tP(e,t,"verify");Wp(e,o);const a=eP(e,o.algorithm);try{return await Dr.subtle.verify(a,o,r,n)}catch{return!1}};async function fw(e,t,r){var n;if(!ni(e))throw new yn("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new yn('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new yn("JWS Protected Header incorrect type");if(e.payload===void 0)throw new yn("JWS Payload missing");if(typeof e.signature!="string")throw new yn("JWS Signature missing or incorrect type");if(e.header!==void 0&&!ni(e.header))throw new yn("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{const I=Qn(e.protected);o=JSON.parse(ho.decode(I))}catch{throw new yn("JWS Protected Header is invalid")}if(!yd(o,e.header))throw new yn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...o,...e.header},s=md(yn,new Map([["b64",!0]]),r==null?void 0:r.crit,o,a);let u=!0;if(s.has("b64")&&(u=o.b64,typeof u!="boolean"))throw new yn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:f}=a;if(typeof f!="string"||!f)throw new yn('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=r&&Vm("algorithms",r.algorithms);if(c&&!c.has(f))throw new Qh('"alg" (Algorithm) Header Parameter not allowed');if(u){if(typeof e.payload!="string")throw new yn("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new yn("JWS Payload must be a string or an Uint8Array instance");let g=!1;typeof t=="function"&&(t=await t(o,e),g=!0),qp(f,t,"verify");const p=$o($n.encode((n=e.protected)!==null&&n!==void 0?n:""),$n.encode("."),typeof e.payload=="string"?$n.encode(e.payload):e.payload),m=Qn(e.signature);if(!await vL(f,t,m,p))throw new uw;let C;u?C=Qn(e.payload):typeof e.payload=="string"?C=$n.encode(e.payload):C=e.payload;const R={payload:C};return e.protected!==void 0&&(R.protectedHeader=o),e.header!==void 0&&(R.unprotectedHeader=e.header),g?{...R,key:t}:R}async function rP(e,t,r){if(e instanceof Uint8Array&&(e=ho.decode(e)),typeof e!="string")throw new yn("Compact JWS must be a string or Uint8Array");const{0:n,1:o,2:a,length:s}=e.split(".");if(s!==3)throw new yn("Invalid Compact JWS");const u=await fw({payload:o,protected:n,signature:a},t,r),f={payload:u.payload,protectedHeader:u.protectedHeader};return typeof t=="function"?{...f,key:u.key}:f}async function wL(e,t,r){if(!ni(e))throw new yn("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(ni))throw new yn("JWS Signatures missing or incorrect type");for(const n of e.signatures)try{return await fw({header:n.header,payload:e.payload,protected:n.protected,signature:n.signature},t,r)}catch{}throw new uw}const Rh=e=>Math.floor(e.getTime()/1e3),nP=60,iP=nP*60,hw=iP*24,_L=hw*7,SL=hw*365.25,EL=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,tp=e=>{const t=EL.exec(e);if(!t)throw new TypeError("Invalid time period format");const r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(r*nP);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(r*iP);case"day":case"days":case"d":return Math.round(r*hw);case"week":case"weeks":case"w":return Math.round(r*_L);default:return Math.round(r*SL)}},EA=e=>e.toLowerCase().replace(/^application\//,""),bL=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,pw=(e,t,r={})=>{const{typ:n}=r;if(n&&(typeof e.typ!="string"||EA(e.typ)!==EA(n)))throw new Ii('unexpected "typ" JWT header value',"typ","check_failed");let o;try{o=JSON.parse(ho.decode(t))}catch{}if(!ni(o))throw new Fi("JWT Claims Set must be a top-level JSON object");const{requiredClaims:a=[],issuer:s,subject:u,audience:f,maxTokenAge:c}=r;c!==void 0&&a.push("iat"),f!==void 0&&a.push("aud"),u!==void 0&&a.push("sub"),s!==void 0&&a.push("iss");for(const _ of new Set(a.reverse()))if(!(_ in o))throw new Ii(`missing required "${_}" claim`,_,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(o.iss))throw new Ii('unexpected "iss" claim value',"iss","check_failed");if(u&&o.sub!==u)throw new Ii('unexpected "sub" claim value',"sub","check_failed");if(f&&!bL(o.aud,typeof f=="string"?[f]:f))throw new Ii('unexpected "aud" claim value',"aud","check_failed");let g;switch(typeof r.clockTolerance){case"string":g=tp(r.clockTolerance);break;case"number":g=r.clockTolerance;break;case"undefined":g=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:p}=r,m=Rh(p||new Date);if((o.iat!==void 0||c)&&typeof o.iat!="number")throw new Ii('"iat" claim must be a number',"iat","invalid");if(o.nbf!==void 0){if(typeof o.nbf!="number")throw new Ii('"nbf" claim must be a number',"nbf","invalid");if(o.nbf>m+g)throw new Ii('"nbf" claim timestamp check failed',"nbf","check_failed")}if(o.exp!==void 0){if(typeof o.exp!="number")throw new Ii('"exp" claim must be a number',"exp","invalid");if(o.exp<=m-g)throw new Bm('"exp" claim timestamp check failed',"exp","check_failed")}if(c){const _=m-o.iat,C=typeof c=="number"?c:tp(c);if(_-g>C)throw new Bm('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(_<0-g)throw new Ii('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return o};async function AL(e,t,r){var n;const o=await rP(e,t,r);if(!((n=o.protectedHeader.crit)===null||n===void 0)&&n.includes("b64")&&o.protectedHeader.b64===!1)throw new Fi("JWTs MUST NOT use unencoded payload");const s={payload:pw(o.protectedHeader,o.payload,r),protectedHeader:o.protectedHeader};return typeof t=="function"?{...s,key:o.key}:s}async function RL(e,t,r){const n=await XT(e,t,r),o=pw(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(a.iss!==void 0&&a.iss!==o.iss)throw new Ii('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(a.sub!==void 0&&a.sub!==o.sub)throw new Ii('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(a.aud!==void 0&&JSON.stringify(a.aud)!==JSON.stringify(o.aud))throw new Ii('replicated "aud" claim header parameter mismatch',"aud","mismatch");const s={payload:o,protectedHeader:a};return typeof t=="function"?{...s,key:n.key}:s}class oP{constructor(t){this._flattened=new ep(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){const n=await this._flattened.encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const xL=async(e,t,r)=>{const n=await tP(e,t,"sign");Wp(e,n);const o=await Dr.subtle.sign(eP(e,n.algorithm),n,r);return new Uint8Array(o)};class gw{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new yn("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!yd(this._protectedHeader,this._unprotectedHeader))throw new yn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},o=md(yn,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,n);let a=!0;if(o.has("b64")&&(a=this._protectedHeader.b64,typeof a!="boolean"))throw new yn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:s}=n;if(typeof s!="string"||!s)throw new yn('JWS "alg" (Algorithm) Header Parameter missing or invalid');qp(s,t,"sign");let u=this._payload;a&&(u=$n.encode(Kn(u)));let f;this._protectedHeader?f=$n.encode(Kn(JSON.stringify(this._protectedHeader))):f=$n.encode("");const c=$o(f,$n.encode("."),u),g=await xL(s,t,c),p={signature:Kn(g),payload:""};return a&&(p.payload=ho.decode(u)),this._unprotectedHeader&&(p.header=this._unprotectedHeader),this._protectedHeader&&(p.protected=ho.decode(f)),p}}class sP{constructor(t){this._flattened=new gw(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){const n=await this._flattened.sign(t,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class CL{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class TL{constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){const n=new CL(this,t,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new yn("at least one signature must be added");const t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){const n=this._signatures[r],o=new gw(this._payload);o.setProtectedHeader(n.protectedHeader),o.setUnprotectedHeader(n.unprotectedHeader);const{payload:a,...s}=await o.sign(n.key,n.options);if(r===0)t.payload=a;else if(t.payload!==a)throw new yn("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(s)}return t}}class yw{constructor(t){if(!ni(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:Rh(new Date)+tp(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:Rh(new Date)+tp(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:Rh(new Date)}:this._payload={...this._payload,iat:t},this}}class PL extends yw{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var n;const o=new sP($n.encode(JSON.stringify(this._payload)));if(o.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Fi("JWTs MUST NOT use unencoded payload");return o.sign(t,r)}}class IL extends yw{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){const n=new oP($n.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(t,r)}}const ms=(e,t)=>{if(typeof e!="string"||!e)throw new PT(`${t} missing or invalid`)};async function aP(e,t){if(!ni(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":ms(e.crv,'"crv" (Curve) Parameter'),ms(e.x,'"x" (X Coordinate) Parameter'),ms(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":ms(e.crv,'"crv" (Subtype of Key Pair) Parameter'),ms(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":ms(e.e,'"e" (Exponent) Parameter'),ms(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":ms(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new Xr('"kty" (Key Type) Parameter missing or unsupported')}const n=$n.encode(JSON.stringify(r));return Kn(await xT(t,n))}async function FL(e,t){t??(t="sha256");const r=await aP(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function OL(e,t){const r={...e,...t==null?void 0:t.header};if(!ni(r.jwk))throw new yn('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await Gp({...r.jwk,ext:!0},r.alg,!0);if(n instanceof Uint8Array||n.type!=="public")throw new yn('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function NL(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Xr('Unsupported "alg" value for a JSON Web Key Set')}}function lP(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(kL)}function kL(e){return ni(e)}function DL(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class uP{constructor(t){if(this._cached=new WeakMap,!lP(t))throw new $p("JSON Web Key Set malformed");this._jwks=DL(t)}async getKey(t,r){const{alg:n,kid:o}={...t,...r==null?void 0:r.header},a=NL(n),s=this._jwks.keys.filter(c=>{let g=a===c.kty;if(g&&typeof o=="string"&&(g=o===c.kid),g&&typeof c.alg=="string"&&(g=n===c.alg),g&&typeof c.use=="string"&&(g=c.use==="sig"),g&&Array.isArray(c.key_ops)&&(g=c.key_ops.includes("verify")),g&&n==="EdDSA"&&(g=c.crv==="Ed25519"||c.crv==="Ed448"),g)switch(n){case"ES256":g=c.crv==="P-256";break;case"ES256K":g=c.crv==="secp256k1";break;case"ES384":g=c.crv==="P-384";break;case"ES512":g=c.crv==="P-521";break}return g}),{0:u,length:f}=s;if(f===0)throw new lw;if(f!==1){const c=new IT,{_cached:g}=this;throw c[Symbol.asyncIterator]=async function*(){for(const p of s)try{yield await bA(g,p,n)}catch{continue}},c}return bA(this._cached,u,n)}}async function bA(e,t,r){const n=e.get(t)||e.set(t,{}).get(t);if(n[r]===void 0){const o=await Gp({...t,ext:!0},r);if(o instanceof Uint8Array||o.type!=="public")throw new $p("JSON Web Key Set members must be public keys");n[r]=o}return n[r]}function LL(e){const t=new uP(e);return async function(r,n){return t.getKey(r,n)}}const UL=async(e,t,r)=>{let n,o,a=!1;typeof AbortController=="function"&&(n=new AbortController,o=setTimeout(()=>{a=!0,n.abort()},t));const s=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(u=>{throw a?new FT:u});if(o!==void 0&&clearTimeout(o),s.status!==200)throw new di("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await s.json()}catch{throw new di("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function ML(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}class BL extends uP{constructor(t,r){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:r==null?void 0:r.agent,headers:r==null?void 0:r.headers},this._timeoutDuration=typeof(r==null?void 0:r.timeoutDuration)=="number"?r==null?void 0:r.timeoutDuration:5e3,this._cooldownDuration=typeof(r==null?void 0:r.cooldownDuration)=="number"?r==null?void 0:r.cooldownDuration:3e4,this._cacheMaxAge=typeof(r==null?void 0:r.cacheMaxAge)=="number"?r==null?void 0:r.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(t,r)}catch(n){if(n instanceof lw&&this.coolingDown()===!1)return await this.reload(),super.getKey(t,r);throw n}}async reload(){this._pendingFetch&&ML()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=UL(this._url,this._timeoutDuration,this._options).then(t=>{if(!lP(t))throw new $p("JSON Web Key Set malformed");this._jwks={keys:t.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(t=>{throw this._pendingFetch=void 0,t})),await this._pendingFetch}}function HL(e,t){const r=new BL(e,t);return async function(n,o){return r.getKey(n,o)}}class jL extends yw{encode(){const t=Kn(JSON.stringify({alg:"none"})),r=Kn(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){if(typeof t!="string")throw new Fi("Unsecured JWT must be a string");const{0:n,1:o,2:a,length:s}=t.split(".");if(s!==3||a!=="")throw new Fi("Invalid Unsecured JWT");let u;try{if(u=JSON.parse(ho.decode(Qn(n))),u.alg!=="none")throw new Error}catch{throw new Fi("Invalid Unsecured JWT")}return{payload:pw(u,Qn(o),r),header:u}}}const $L=Kn,mw=Qn,VL=Object.freeze(Object.defineProperty({__proto__:null,decode:mw,encode:$L},Symbol.toStringTag,{value:"Module"}));function KL(e){let t;if(typeof e=="string"){const r=e.split(".");(r.length===3||r.length===5)&&([t]=r)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const r=JSON.parse(ho.decode(mw(t)));if(!ni(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function WL(e){if(typeof e!="string")throw new Fi("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(r===5)throw new Fi("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Fi("Invalid JWT");if(!t)throw new Fi("JWTs must contain a payload");let n;try{n=mw(t)}catch{throw new Fi("Failed to parse the base64url encoded payload")}let o;try{o=JSON.parse(ho.decode(n))}catch{throw new Fi("Failed to parse the decoded payload as JSON")}if(!ni(o))throw new Fi("Invalid JWT Claims Set");return o}async function GL(e,t){var r;let n,o,a;switch(e){case"HS256":case"HS384":case"HS512":n=parseInt(e.slice(-3),10),o={name:"HMAC",hash:`SHA-${n}`,length:n},a=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(e.slice(-3),10),Vp(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(e.slice(1,4),10),o={name:"AES-KW",length:n},a=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(e.slice(1,4),10),o={name:"AES-GCM",length:n},a=["encrypt","decrypt"];break;default:throw new Xr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return Dr.subtle.generateKey(o,(r=t==null?void 0:t.extractable)!==null&&r!==void 0?r:!1,a)}function P0(e){var t;const r=(t=e==null?void 0:e.modulusLength)!==null&&t!==void 0?t:2048;if(typeof r!="number"||r<2048)throw new Xr("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}async function qL(e,t){var r,n,o;let a,s;switch(e){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:P0(t)},s=["sign","verify"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:P0(t)},s=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:P0(t)},s=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},s=["sign","verify"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},s=["sign","verify"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},s=["sign","verify"];break;case"EdDSA":s=["sign","verify"];const u=(r=t==null?void 0:t.crv)!==null&&r!==void 0?r:"Ed25519";switch(u){case"Ed25519":case"Ed448":a={name:u};break;default:throw new Xr("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{s=["deriveKey","deriveBits"];const f=(n=t==null?void 0:t.crv)!==null&&n!==void 0?n:"P-256";switch(f){case"P-256":case"P-384":case"P-521":{a={name:"ECDH",namedCurve:f};break}case"X25519":case"X448":a={name:f};break;default:throw new Xr("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Xr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return Dr.subtle.generateKey(a,(o=t==null?void 0:t.extractable)!==null&&o!==void 0?o:!1,s)}async function zL(e,t){return qL(e,t)}async function JL(e,t){return GL(e,t)}const XL=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:oP,CompactSign:sP,EmbeddedJWK:OL,EncryptJWT:IL,FlattenedEncrypt:ep,FlattenedSign:gw,GeneralEncrypt:mL,GeneralSign:TL,SignJWT:PL,UnsecuredJWT:jL,base64url:VL,calculateJwkThumbprint:aP,calculateJwkThumbprintUri:FL,compactDecrypt:XT,compactVerify:rP,createLocalJWKSet:LL,createRemoteJWKSet:HL,decodeJwt:WL,decodeProtectedHeader:KL,errors:FD,exportJWK:QT,exportPKCS8:gL,exportSPKI:pL,flattenedDecrypt:dw,flattenedVerify:fw,generalDecrypt:dL,generalVerify:wL,generateKeyPair:zL,generateSecret:JL,importJWK:Gp,importPKCS8:nL,importSPKI:tL,importX509:rL,jwtDecrypt:RL,jwtVerify:AL},Symbol.toStringTag,{value:"Module"})),QL=rp(XL);var AA;function Ci(){if(AA)return en;AA=1;var e=pd(),t=Oa(),r=QL,n=jp();const o="solidClientAuthn:",a=["ES256","RS256"],s={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},u=5,p=["openid","offline_access","webid"].join(" "),m=(Z,N)=>({get(E,j,G){if(!Object.getOwnPropertyNames(e.EventEmitter).includes(j)&&Object.getOwnPropertyNames(Z).includes(j))throw new Error(`${N}: [${j}] is not supported`);return Reflect.get(E,j,G)}});class _{constructor(N){this.handleables=N}async getProperHandler(N){const E=await Promise.all(this.handleables.map(j=>j.canHandle(...N)));for(let j=0;j<E.length;j+=1)if(E[j])return this.handleables[j];return null}async canHandle(...N){return await this.getProperHandler(N)!==null}async handle(...N){const E=await this.getProperHandler(N);if(E)return E.handle(...N);throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${N.map(j=>{try{return JSON.stringify(j)}catch{return j.toString()}}).join(", ")}`)}}async function C(Z,N){const E=await t.fetch(Z);if(E.status!==200)throw new Error(`Could not fetch JWKS for [${N}] at [${Z}]: ${E.status} ${E.statusText}`);let j;try{j=(await E.json()).keys[0]}catch(G){throw new Error(`Malformed JWKS for [${N}] at [${Z}]: ${G.message}`)}return j}async function R(Z,N,E,j){const G=await C(N,E);let fe;try{const{payload:we}=await r.jwtVerify(Z,await r.importJWK(G),{issuer:E,audience:j});fe=we}catch(we){throw new Error(`Token verification failed: ${we.stack}`)}if(typeof fe.webid=="string")return fe.webid;if(typeof fe.sub!="string")throw new Error(`The token ${JSON.stringify(fe)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(fe.sub),fe.sub}catch(we){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${fe.sub}] is invalid as a URL - error [${we}].`)}}function I(Z){try{return new URL(Z).hash===""}catch{return!1}}function S(Z){return typeof Z=="string"&&["DPoP","Bearer"].includes(Z)}const b="solidClientAuthenticationUser";function T(Z){try{return new URL(Z),!0}catch{return!1}}function B(Z,N){var E;return(E=N.find(j=>Z.includes(j)))!==null&&E!==void 0?E:null}function H(Z,N){return Z.clientId!==void 0&&!T(Z.clientId)?"static":N.scopesSupported.includes("webid")&&Z.clientId!==void 0&&T(Z.clientId)?"solid-oidc":"dynamic"}async function $(Z,N,E,j){const G=H(Z,N);return G==="dynamic"?j.getClient({sessionId:Z.sessionId,clientName:Z.clientName,redirectUrl:Z.redirectUrl},N):(await E.setForUser(Z.sessionId,{clientId:Z.clientId}),Z.clientSecret&&await E.setForUser(Z.sessionId,{clientSecret:Z.clientSecret}),Z.clientName&&await E.setForUser(Z.sessionId,{clientName:Z.clientName}),{clientId:Z.clientId,clientSecret:Z.clientSecret,clientName:Z.clientName,clientType:G})}async function F(Z,N){return Z.getForUser(N,"sessionId")}async function ne(Z,N,E){try{const[j,G,fe,we]=await Promise.all([N.getForUser(Z,"issuer",{errorIfNull:!0}),N.getForUser(Z,"codeVerifier"),N.getForUser(Z,"redirectUrl"),N.getForUser(Z,"dpop",{errorIfNull:!0})]);await N.deleteForUser(Z,"codeVerifier");const me=await E.fetchConfig(j);return{codeVerifier:G,redirectUrl:fe,issuerConfig:me,dpop:we==="true"}}catch(j){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${Z}]: ${j}`)}}async function Y(Z,N,E,j,G,fe,we){G!==void 0&&await Z.setForUser(N,{refreshToken:G},{secure:fe}),E!==void 0&&await Z.setForUser(N,{webId:E},{secure:fe}),j!==void 0&&await Z.setForUser(N,{isLoggedIn:j},{secure:fe}),we!==void 0&&await Z.setForUser(N,{publicKey:JSON.stringify(we.publicKey),privateKey:JSON.stringify(await r.exportJWK(we.privateKey))},{secure:fe})}class M{constructor(N,E){this.secureStorage=N,this.insecureStorage=E}getKey(N){return`solidClientAuthenticationUser:${N}`}async getUserData(N,E){const j=await(E?this.secureStorage:this.insecureStorage).get(this.getKey(N));if(j===void 0)return{};try{return JSON.parse(j)}catch{throw new Error(`Data for user [${N}] in [${E?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${j}`)}}async setUserData(N,E,j){await(j?this.secureStorage:this.insecureStorage).set(this.getKey(N),JSON.stringify(E))}async get(N,E){const j=await(E!=null&&E.secure?this.secureStorage:this.insecureStorage).get(N);if(j===void 0&&(E!=null&&E.errorIfNull))throw new Error(`[${N}] is not stored`);return j}async set(N,E,j){return(j!=null&&j.secure?this.secureStorage:this.insecureStorage).set(N,E)}async delete(N,E){return(E!=null&&E.secure?this.secureStorage:this.insecureStorage).delete(N)}async getForUser(N,E,j){const G=await this.getUserData(N,j==null?void 0:j.secure);let fe;if((!G||!G[E])&&(fe=void 0),fe=G[E],fe===void 0&&(j!=null&&j.errorIfNull))throw new Error(`Field [${E}] for user [${N}] is not stored`);return fe||void 0}async setForUser(N,E,j){let G;try{G=await this.getUserData(N,j==null?void 0:j.secure)}catch{G={}}await this.setUserData(N,{...G,...E},j==null?void 0:j.secure)}async deleteForUser(N,E,j){const G=await this.getUserData(N,j==null?void 0:j.secure);delete G[E],await this.setUserData(N,G,j==null?void 0:j.secure)}async deleteAllUserData(N,E){await(E!=null&&E.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(N))}}class J{constructor(){this.map={}}async get(N){return this.map[N]||void 0}async set(N,E){this.map[N]=E}async delete(N){delete this.map[N]}}class Le extends Error{constructor(N){super(N)}}class Ue extends Error{constructor(N){super(`[${N}] is not implemented`)}}class je extends Error{constructor(N){super(`Invalid response from OIDC provider: missing fields ${N}`),this.missingFields=N}}class nt extends Error{constructor(N,E,j){super(N),this.error=E,this.errorDescription=j}}function ke(Z){const N=new URL(Z);return new URL(N.pathname,N.origin).toString()}async function Be(Z,N,E){return new r.SignJWT({htu:ke(Z),htm:N.toUpperCase(),jti:n.v4()}).setProtectedHeader({alg:a[0],jwk:E.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(E.privateKey,{})}async function De(){const{privateKey:Z,publicKey:N}=await r.generateKeyPair(a[0]),E={privateKey:Z,publicKey:await r.exportJWK(N)};return[E.publicKey.alg]=a,E}const tt=600;function re(Z){return[401,403].includes(Z)}async function Ie(Z,N,E,j){var G;const fe=new t.Headers(j==null?void 0:j.headers);return fe.set("Authorization",`DPoP ${N}`),fe.set("DPoP",await Be(Z,(G=j==null?void 0:j.method)!==null&&G!==void 0?G:"get",E)),{...j,headers:fe}}async function Ge(Z,N,E,j){if(E!==void 0)return Ie(Z,N,E,j);const G=new t.Headers(j==null?void 0:j.headers);return G.set("Authorization",`Bearer ${N}`),{...j,headers:G}}async function dt(Z,N,E,j,G){return Z(E,await Ge(E.toString(),N,G,j))}async function Ze(Z,N,E){var j;const G=await Z.tokenRefresher.refresh(Z.sessionId,Z.refreshToken,N);return E==null||E.emit(s.SESSION_EXTENDED,(j=G.expiresIn)!==null&&j!==void 0?j:tt),typeof G.refreshToken=="string"&&(E==null||E.emit(s.NEW_REFRESH_TOKEN,G.refreshToken)),{accessToken:G.accessToken,refreshToken:G.refreshToken,expiresIn:G.expiresIn}}const qe=Z=>Z!==void 0?Z-u>0?Z-u:Z:tt;async function Fe(Z,N,E){var j;let G=N,fe;const we=E==null?void 0:E.refreshOptions;if(we!==void 0){const me=async()=>{var $e,Xe,ft,Mt;try{const{accessToken:$t,refreshToken:Lr,expiresIn:ee}=await Ze(we,E.dpopKey,E.eventEmitter);G=$t,Lr!==void 0&&(we.refreshToken=Lr),clearTimeout(fe),fe=setTimeout(me,qe(ee)*1e3),($e=E.eventEmitter)===null||$e===void 0||$e.emit(s.TIMEOUT_SET,fe)}catch($t){$t instanceof nt&&((Xe=E==null?void 0:E.eventEmitter)===null||Xe===void 0||Xe.emit(s.ERROR,$t.error,$t.errorDescription),(ft=E==null?void 0:E.eventEmitter)===null||ft===void 0||ft.emit(s.SESSION_EXPIRED)),$t instanceof je&&$t.missingFields.includes("access_token")&&((Mt=E==null?void 0:E.eventEmitter)===null||Mt===void 0||Mt.emit(s.SESSION_EXPIRED))}};fe=setTimeout(me,qe(E.expiresIn)*1e3),(j=E.eventEmitter)===null||j===void 0||j.emit(s.TIMEOUT_SET,fe)}else if(E!==void 0&&E.eventEmitter!==void 0){const me=setTimeout(()=>{E.eventEmitter.emit(s.SESSION_EXPIRED)},qe(E.expiresIn)*1e3);E.eventEmitter.emit(s.TIMEOUT_SET,me)}return async(me,$e)=>{let Xe=await dt(Z,G,me,$e,E==null?void 0:E.dpopKey);const ft=!Xe.ok&&!re(Xe.status);return Xe.ok||ft||Xe.url!==me&&(E==null?void 0:E.dpopKey)!==void 0&&(Xe=await dt(Z,G,Xe.url,$e,E.dpopKey)),Xe}}const lt="getResponse",gt={get:async(Z,N)=>lt,set:async(Z,N)=>{},delete:async Z=>{},getForUser:async(Z,N,E)=>lt,setForUser:async(Z,N,E)=>{},deleteForUser:async(Z,N,E)=>{},deleteAllUserData:async(Z,N)=>{}},Pt=Z=>{const N=Z;return{get:async E=>{if(N[E]!==void 0)return typeof N[E]=="string"?N[E]:JSON.stringify(N[E])},set:async(E,j)=>{N[E]=j},delete:async E=>{delete N[E]}}},Ft=(Z,N=!1)=>N?new M(Pt(Z),Pt({})):new M(Pt({}),Pt(Z));return en.AggregateHandler=_,en.ConfigurationError=Le,en.DEFAULT_SCOPES=p,en.EVENTS=s,en.InMemoryStorage=J,en.InvalidResponseError=je,en.NotImplementedError=Ue,en.OidcProviderError=nt,en.PREFERRED_SIGNING_ALG=a,en.REFRESH_BEFORE_EXPIRATION_SECONDS=u,en.SOLID_CLIENT_AUTHN_KEY_PREFIX=o,en.StorageUtility=M,en.StorageUtilityGetResponse=lt,en.StorageUtilityMock=gt,en.USER_SESSION_PREFIX=b,en.buildAuthenticatedFetch=Fe,en.buildProxyHandler=m,en.createDpopHeader=Be,en.determineSigningAlg=B,en.fetchJwks=C,en.generateDpopKeyPair=De,en.getSessionIdFromOauthState=F,en.getWebidFromTokenPayload=R,en.handleRegistration=$,en.isSupportedTokenType=S,en.isValidRedirectUrl=I,en.loadOidcContextFromStorage=ne,en.mockStorage=Pt,en.mockStorageUtility=Ft,en.saveSessionInfoToStorage=Y,en}var Ac={},eh={},RA;function YL(){if(RA)return eh;RA=1,Object.defineProperty(eh,"__esModule",{value:!0});const e=Ci();class t extends e.StorageUtility{constructor(n,o){super(n,o)}}return eh.default=t,eh}var th={},cP={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(cn,function(){return function(r){var n={};function o(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=r,o.c=n,o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:u})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,s){if(1&s&&(a=o(a)),8&s||4&s&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),2&s&&typeof a!="string")for(var f in a)o.d(u,f,function(c){return a[c]}.bind(null,f));return u},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=22)}([function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function c(g,p){for(var m=0;m<p.length;m++){var _=p[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,p,m){return p&&c(g.prototype,p),m&&c(g,m),g}}(),s={debug:function(){},info:function(){},warn:function(){},error:function(){}},u=void 0,f=void 0;(n.Log=function(){function c(){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.reset=function(){f=3,u=s},c.debug=function(){if(f>=4){for(var p=arguments.length,m=Array(p),_=0;_<p;_++)m[_]=arguments[_];u.debug.apply(u,Array.from(m))}},c.info=function(){if(f>=3){for(var p=arguments.length,m=Array(p),_=0;_<p;_++)m[_]=arguments[_];u.info.apply(u,Array.from(m))}},c.warn=function(){if(f>=2){for(var p=arguments.length,m=Array(p),_=0;_<p;_++)m[_]=arguments[_];u.warn.apply(u,Array.from(m))}},c.error=function(){if(f>=1){for(var p=arguments.length,m=Array(p),_=0;_<p;_++)m[_]=arguments[_];u.error.apply(u,Array.from(m))}},a(c,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return f},set:function(p){if(!(0<=p&&p<=4))throw new Error("Invalid log level");f=p}},{key:"logger",get:function(){return u},set:function(p){if(!p.debug&&p.info&&(p.debug=p.info),!(p.debug&&p.info&&p.warn&&p.error))throw new Error("Invalid logger");u=p}}]),c}()).reset()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function c(g,p){for(var m=0;m<p.length;m++){var _=p[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,p,m){return p&&c(g.prototype,p),m&&c(g,m),g}}(),s={setInterval:function(c){function g(p,m){return c.apply(this,arguments)}return g.toString=function(){return c.toString()},g}(function(c,g){return setInterval(c,g)}),clearInterval:function(c){function g(p){return c.apply(this,arguments)}return g.toString=function(){return c.toString()},g}(function(c){return clearInterval(c)})},u=!1,f=null;n.Global=function(){function c(){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c)}return c._testing=function(){u=!0},c.setXMLHttpRequest=function(p){f=p},a(c,null,[{key:"location",get:function(){if(!u)return location}},{key:"localStorage",get:function(){if(!u&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!u&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!u&&typeof window<"u")return f||XMLHttpRequest}},{key:"timer",get:function(){if(!u)return s}}]),c}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.MetadataService=void 0;var a=function(){function g(p,m){for(var _=0;_<m.length;_++){var C=m[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(p,C.key,C)}}return function(p,m,_){return m&&g(p.prototype,m),_&&g(p,_),p}}(),s=o(0),u=o(7);function f(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}var c=".well-known/openid-configuration";n.MetadataService=function(){function g(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.JsonService;if(f(this,g),!p)throw s.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=p,this._jsonService=new m(["application/jwk-set+json"])}return g.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},g.prototype.getMetadata=function(){var m=this;return this._settings.metadata?(s.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(s.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(_){s.Log.debug("MetadataService.getMetadata: json received");var C=m._settings.metadataSeed||{};return m._settings.metadata=Object.assign({},C,_),m._settings.metadata})):(s.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},g.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},g.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},g.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},g.prototype.getTokenEndpoint=function(){var m=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this._getMetadataProperty("token_endpoint",m)},g.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},g.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},g.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},g.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},g.prototype._getMetadataProperty=function(m){var _=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return s.Log.debug("MetadataService.getMetadataProperty for: "+m),this.getMetadata().then(function(C){if(s.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),C[m]===void 0){if(_===!0)return void s.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+m);throw s.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+m),new Error("Metadata does not contain property "+m)}return C[m]})},g.prototype.getSigningKeys=function(){var m=this;return this._settings.signingKeys?(s.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(_){return s.Log.debug("MetadataService.getSigningKeys: jwks_uri received",_),m._jsonService.getJson(_).then(function(C){if(s.Log.debug("MetadataService.getSigningKeys: key set received",C),!C.keys)throw s.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return m._settings.signingKeys=C.keys,m._settings.signingKeys})})},a(g,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(c)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=c))),this._metadataUrl}}]),g}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UrlUtility=void 0;var a=o(0),s=o(1);n.UrlUtility=function(){function u(){(function(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.addQueryParam=function(c,g,p){return c.indexOf("?")<0&&(c+="?"),c[c.length-1]!=="?"&&(c+="&"),c+=encodeURIComponent(g),c+="=",c+=encodeURIComponent(p)},u.parseUrlFragment=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.Global;typeof c!="string"&&(c=p.location.href);var m=c.lastIndexOf(g);m>=0&&(c=c.substr(m+1)),g==="?"&&(m=c.indexOf("#"))>=0&&(c=c.substr(0,m));for(var _,C={},R=/([^&=]+)=([^&]*)/g,I=0;_=R.exec(c);)if(C[decodeURIComponent(_[1])]=decodeURIComponent(_[2].replace(/\+/g," ")),I++>50)return a.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",c),{error:"Response exceeded expected number of parameters"};for(var S in C)return C;return{}},u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.JoseUtil=void 0;var a=o(26),s=function(f){return f&&f.__esModule?f:{default:f}}(o(33));n.JoseUtil=(0,s.default)({jws:a.jws,KeyUtil:a.KeyUtil,X509:a.X509,crypto:a.crypto,hextob64u:a.hextob64u,b64tohex:a.b64tohex,AllowedSigningAlgs:a.AllowedSigningAlgs})},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.OidcClientSettings=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},s=function(){function S(b,T){for(var B=0;B<T.length;B++){var H=T[B];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(b,H.key,H)}}return function(b,T,B){return T&&S(b.prototype,T),B&&S(b,B),b}}(),u=o(0),f=o(23),c=o(6),g=o(24),p=o(2);function m(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}var _=".well-known/openid-configuration",C="id_token",R="openid",I="client_secret_post";n.OidcClientSettings=function(){function S(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=b.authority,B=b.metadataUrl,H=b.metadata,$=b.signingKeys,F=b.metadataSeed,ne=b.client_id,Y=b.client_secret,M=b.response_type,J=M===void 0?C:M,Le=b.scope,Ue=Le===void 0?R:Le,je=b.redirect_uri,nt=b.post_logout_redirect_uri,ke=b.client_authentication,Be=ke===void 0?I:ke,De=b.prompt,tt=b.display,re=b.max_age,Ie=b.ui_locales,Ge=b.acr_values,dt=b.resource,Ze=b.response_mode,qe=b.filterProtocolClaims,Fe=qe===void 0||qe,lt=b.loadUserInfo,gt=lt===void 0||lt,Pt=b.staleStateAge,Ft=Pt===void 0?900:Pt,Z=b.clockSkew,N=Z===void 0?300:Z,E=b.clockService,j=E===void 0?new f.ClockService:E,G=b.userInfoJwtIssuer,fe=G===void 0?"OP":G,we=b.mergeClaims,me=we!==void 0&&we,$e=b.stateStore,Xe=$e===void 0?new c.WebStorageStateStore:$e,ft=b.ResponseValidatorCtor,Mt=ft===void 0?g.ResponseValidator:ft,$t=b.MetadataServiceCtor,Lr=$t===void 0?p.MetadataService:$t,ee=b.extraQueryParams,de=ee===void 0?{}:ee,K=b.extraTokenParams,P=K===void 0?{}:K;m(this,S),this._authority=T,this._metadataUrl=B,this._metadata=H,this._metadataSeed=F,this._signingKeys=$,this._client_id=ne,this._client_secret=Y,this._response_type=J,this._scope=Ue,this._redirect_uri=je,this._post_logout_redirect_uri=nt,this._client_authentication=Be,this._prompt=De,this._display=tt,this._max_age=re,this._ui_locales=Ie,this._acr_values=Ge,this._resource=dt,this._response_mode=Ze,this._filterProtocolClaims=!!Fe,this._loadUserInfo=!!gt,this._staleStateAge=Ft,this._clockSkew=N,this._clockService=j,this._userInfoJwtIssuer=fe,this._mergeClaims=!!me,this._stateStore=Xe,this._validator=new Mt(this),this._metadataService=new Lr(this),this._extraQueryParams=(de===void 0?"undefined":a(de))==="object"?de:{},this._extraTokenParams=(P===void 0?"undefined":a(P))==="object"?P:{}}return S.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},s(S,[{key:"client_id",get:function(){return this._client_id},set:function(T){if(this._client_id)throw u.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=T}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(T){if(this._authority)throw u.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=T}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(_)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=_)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(T){this._metadata=T}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(T){this._metadataSeed=T}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(T){this._signingKeys=T}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(T){(T===void 0?"undefined":a(T))==="object"?this._extraQueryParams=T:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(T){(T===void 0?"undefined":a(T))==="object"?this._extraTokenParams=T:this._extraTokenParams={}}}]),S}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.WebStorageStateStore=void 0;var a=o(0),s=o(1);function u(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}n.WebStorageStateStore=function(){function f(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=c.prefix,p=g===void 0?"oidc.":g,m=c.store,_=m===void 0?s.Global.localStorage:m;u(this,f),this._store=_,this._prefix=p}return f.prototype.set=function(g,p){return a.Log.debug("WebStorageStateStore.set",g),g=this._prefix+g,this._store.setItem(g,p),Promise.resolve()},f.prototype.get=function(g){a.Log.debug("WebStorageStateStore.get",g),g=this._prefix+g;var p=this._store.getItem(g);return Promise.resolve(p)},f.prototype.remove=function(g){a.Log.debug("WebStorageStateStore.remove",g),g=this._prefix+g;var p=this._store.getItem(g);return this._store.removeItem(g),Promise.resolve(p)},f.prototype.getAllKeys=function(){a.Log.debug("WebStorageStateStore.getAllKeys");for(var g=[],p=0;p<this._store.length;p++){var m=this._store.key(p);m.indexOf(this._prefix)===0&&g.push(m.substr(this._prefix.length))}return Promise.resolve(g)},f}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.JsonService=void 0;var a=o(0),s=o(1);function u(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}n.JsonService=function(){function f(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.Global.XMLHttpRequest,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;u(this,f),c&&Array.isArray(c)?this._contentTypes=c.slice():this._contentTypes=[],this._contentTypes.push("application/json"),p&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=g,this._jwtHandler=p}return f.prototype.getJson=function(g,p){var m=this;if(!g)throw a.Log.error("JsonService.getJson: No url passed"),new Error("url");return a.Log.debug("JsonService.getJson, url: ",g),new Promise(function(_,C){var R=new m._XMLHttpRequest;R.open("GET",g);var I=m._contentTypes,S=m._jwtHandler;R.onload=function(){if(a.Log.debug("JsonService.getJson: HTTP response received, status",R.status),R.status===200){var b=R.getResponseHeader("Content-Type");if(b){var T=I.find(function(B){if(b.startsWith(B))return!0});if(T=="application/jwt")return void S(R).then(_,C);if(T)try{return void _(JSON.parse(R.responseText))}catch(B){return a.Log.error("JsonService.getJson: Error parsing JSON response",B.message),void C(B)}}C(Error("Invalid response Content-Type: "+b+", from URL: "+g))}else C(Error(R.statusText+" ("+R.status+")"))},R.onerror=function(){a.Log.error("JsonService.getJson: network error"),C(Error("Network Error"))},p&&(a.Log.debug("JsonService.getJson: token passed, setting Authorization header"),R.setRequestHeader("Authorization","Bearer "+p)),R.send()})},f.prototype.postForm=function(g,p,m){var _=this;if(!g)throw a.Log.error("JsonService.postForm: No url passed"),new Error("url");return a.Log.debug("JsonService.postForm, url: ",g),new Promise(function(C,R){var I=new _._XMLHttpRequest;I.open("POST",g);var S=_._contentTypes;I.onload=function(){if(a.Log.debug("JsonService.postForm: HTTP response received, status",I.status),I.status!==200){if(I.status===400&&($=I.getResponseHeader("Content-Type"))&&S.find(function(F){if($.startsWith(F))return!0}))try{var H=JSON.parse(I.responseText);if(H&&H.error)return a.Log.error("JsonService.postForm: Error from server: ",H.error),void R(new Error(H.error))}catch(F){return a.Log.error("JsonService.postForm: Error parsing JSON response",F.message),void R(F)}R(Error(I.statusText+" ("+I.status+")"))}else{var $;if(($=I.getResponseHeader("Content-Type"))&&S.find(function(F){if($.startsWith(F))return!0}))try{return void C(JSON.parse(I.responseText))}catch(F){return a.Log.error("JsonService.postForm: Error parsing JSON response",F.message),void R(F)}R(Error("Invalid response Content-Type: "+$+", from URL: "+g))}},I.onerror=function(){a.Log.error("JsonService.postForm: network error"),R(Error("Network Error"))};var b="";for(var T in p){var B=p[T];B&&(b.length>0&&(b+="&"),b+=encodeURIComponent(T),b+="=",b+=encodeURIComponent(B))}I.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m!==void 0&&I.setRequestHeader("Authorization","Basic "+btoa(m)),I.send(b)})},f}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninRequest=void 0;var a=o(0),s=o(3),u=o(13);n.SigninRequest=function(){function f(c){var g=c.url,p=c.client_id,m=c.redirect_uri,_=c.response_type,C=c.scope,R=c.authority,I=c.data,S=c.prompt,b=c.display,T=c.max_age,B=c.ui_locales,H=c.id_token_hint,$=c.login_hint,F=c.acr_values,ne=c.resource,Y=c.response_mode,M=c.request,J=c.request_uri,Le=c.extraQueryParams,Ue=c.request_type,je=c.client_secret,nt=c.extraTokenParams,ke=c.skipUserInfo;if(function(dt,Ze){if(!(dt instanceof Ze))throw new TypeError("Cannot call a class as a function")}(this,f),!g)throw a.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!p)throw a.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!m)throw a.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!_)throw a.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!C)throw a.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!R)throw a.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var Be=f.isOidc(_),De=f.isCode(_);Y||(Y=f.isCode(_)?"query":null),this.state=new u.SigninState({nonce:Be,data:I,client_id:p,authority:R,redirect_uri:m,code_verifier:De,request_type:Ue,response_mode:Y,client_secret:je,scope:C,extraTokenParams:nt,skipUserInfo:ke}),g=s.UrlUtility.addQueryParam(g,"client_id",p),g=s.UrlUtility.addQueryParam(g,"redirect_uri",m),g=s.UrlUtility.addQueryParam(g,"response_type",_),g=s.UrlUtility.addQueryParam(g,"scope",C),g=s.UrlUtility.addQueryParam(g,"state",this.state.id),Be&&(g=s.UrlUtility.addQueryParam(g,"nonce",this.state.nonce)),De&&(g=s.UrlUtility.addQueryParam(g,"code_challenge",this.state.code_challenge),g=s.UrlUtility.addQueryParam(g,"code_challenge_method","S256"));var tt={prompt:S,display:b,max_age:T,ui_locales:B,id_token_hint:H,login_hint:$,acr_values:F,resource:ne,request:M,request_uri:J,response_mode:Y};for(var re in tt)tt[re]&&(g=s.UrlUtility.addQueryParam(g,re,tt[re]));for(var Ie in Le)g=s.UrlUtility.addQueryParam(g,Ie,Le[Ie]);this.url=g}return f.isOidc=function(g){return!!g.split(/\s+/g).filter(function(p){return p==="id_token"})[0]},f.isOAuth=function(g){return!!g.split(/\s+/g).filter(function(p){return p==="token"})[0]},f.isCode=function(g){return!!g.split(/\s+/g).filter(function(p){return p==="code"})[0]},f}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.State=void 0;var a=function(){function c(g,p){for(var m=0;m<p.length;m++){var _=p[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,p,m){return p&&c(g.prototype,p),m&&c(g,m),g}}(),s=o(0),u=function(g){return g&&g.__esModule?g:{default:g}}(o(14));function f(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")}n.State=function(){function c(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=g.id,m=g.data,_=g.created,C=g.request_type;f(this,c),this._id=p||(0,u.default)(),this._data=m,this._created=typeof _=="number"&&_>0?_:parseInt(Date.now()/1e3),this._request_type=C}return c.prototype.toStorageString=function(){return s.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},c.fromStorageString=function(p){return s.Log.debug("State.fromStorageString"),new c(JSON.parse(p))},c.clearStaleState=function(p,m){var _=Date.now()/1e3-m;return p.getAllKeys().then(function(C){s.Log.debug("State.clearStaleState: got keys",C);for(var R=[],I=function(B){var H=C[B];b=p.get(H).then(function($){var F=!1;if($)try{var ne=c.fromStorageString($);s.Log.debug("State.clearStaleState: got item from key: ",H,ne.created),ne.created<=_&&(F=!0)}catch(Y){s.Log.error("State.clearStaleState: Error parsing state for key",H,Y.message),F=!0}else s.Log.debug("State.clearStaleState: no item in storage for key: ",H),F=!0;if(F)return s.Log.debug("State.clearStaleState: removed item for key: ",H),p.remove(H)}),R.push(b)},S=0;S<C.length;S++){var b;I(S)}return s.Log.debug("State.clearStaleState: waiting on promise count:",R.length),Promise.all(R)})},a(c,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),c}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.OidcClient=void 0;var a=function(){function I(S,b){for(var T=0;T<b.length;T++){var B=b[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(S,B.key,B)}}return function(S,b,T){return b&&I(S.prototype,b),T&&I(S,T),S}}(),s=o(0),u=o(5),f=o(12),c=o(8),g=o(34),p=o(35),m=o(36),_=o(13),C=o(9);function R(I,S){if(!(I instanceof S))throw new TypeError("Cannot call a class as a function")}n.OidcClient=function(){function I(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};R(this,I),S instanceof u.OidcClientSettings?this._settings=S:this._settings=new u.OidcClientSettings(S)}return I.prototype.createSigninRequest=function(){var b=this,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=T.response_type,H=T.scope,$=T.redirect_uri,F=T.data,ne=T.state,Y=T.prompt,M=T.display,J=T.max_age,Le=T.ui_locales,Ue=T.id_token_hint,je=T.login_hint,nt=T.acr_values,ke=T.resource,Be=T.request,De=T.request_uri,tt=T.response_mode,re=T.extraQueryParams,Ie=T.extraTokenParams,Ge=T.request_type,dt=T.skipUserInfo,Ze=arguments[1];s.Log.debug("OidcClient.createSigninRequest");var qe=this._settings.client_id;B=B||this._settings.response_type,H=H||this._settings.scope,$=$||this._settings.redirect_uri,Y=Y||this._settings.prompt,M=M||this._settings.display,J=J||this._settings.max_age,Le=Le||this._settings.ui_locales,nt=nt||this._settings.acr_values,ke=ke||this._settings.resource,tt=tt||this._settings.response_mode,re=re||this._settings.extraQueryParams,Ie=Ie||this._settings.extraTokenParams;var Fe=this._settings.authority;return c.SigninRequest.isCode(B)&&B!=="code"?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(lt){s.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",lt);var gt=new c.SigninRequest({url:lt,client_id:qe,redirect_uri:$,response_type:B,scope:H,data:F||ne,authority:Fe,prompt:Y,display:M,max_age:J,ui_locales:Le,id_token_hint:Ue,login_hint:je,acr_values:nt,resource:ke,request:Be,request_uri:De,extraQueryParams:re,extraTokenParams:Ie,request_type:Ge,response_mode:tt,client_secret:b._settings.client_secret,skipUserInfo:dt}),Pt=gt.state;return(Ze=Ze||b._stateStore).set(Pt.id,Pt.toStorageString()).then(function(){return gt})})},I.prototype.readSigninResponseState=function(b,T){var B=arguments.length>2&&arguments[2]!==void 0&&arguments[2];s.Log.debug("OidcClient.readSigninResponseState");var H=this._settings.response_mode==="query"||!this._settings.response_mode&&c.SigninRequest.isCode(this._settings.response_type),$=H?"?":"#",F=new g.SigninResponse(b,$);if(!F.state)return s.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));T=T||this._stateStore;var ne=B?T.remove.bind(T):T.get.bind(T);return ne(F.state).then(function(Y){if(!Y)throw s.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:_.SigninState.fromStorageString(Y),response:F}})},I.prototype.processSigninResponse=function(b,T){var B=this;return s.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(b,T,!0).then(function(H){var $=H.state,F=H.response;return s.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),B._validator.validateSigninResponse($,F)})},I.prototype.createSignoutRequest=function(){var b=this,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=T.id_token_hint,H=T.data,$=T.state,F=T.post_logout_redirect_uri,ne=T.extraQueryParams,Y=T.request_type,M=arguments[1];return s.Log.debug("OidcClient.createSignoutRequest"),F=F||this._settings.post_logout_redirect_uri,ne=ne||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(J){if(!J)throw s.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");s.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",J);var Le=new p.SignoutRequest({url:J,id_token_hint:B,post_logout_redirect_uri:F,data:H||$,extraQueryParams:ne,request_type:Y}),Ue=Le.state;return Ue&&(s.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(M=M||b._stateStore).set(Ue.id,Ue.toStorageString())),Le})},I.prototype.readSignoutResponseState=function(b,T){var B=arguments.length>2&&arguments[2]!==void 0&&arguments[2];s.Log.debug("OidcClient.readSignoutResponseState");var H=new m.SignoutResponse(b);if(!H.state)return s.Log.debug("OidcClient.readSignoutResponseState: No state in response"),H.error?(s.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",H.error),Promise.reject(new f.ErrorResponse(H))):Promise.resolve({state:void 0,response:H});var $=H.state;T=T||this._stateStore;var F=B?T.remove.bind(T):T.get.bind(T);return F($).then(function(ne){if(!ne)throw s.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:C.State.fromStorageString(ne),response:H}})},I.prototype.processSignoutResponse=function(b,T){var B=this;return s.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(b,T,!0).then(function(H){var $=H.state,F=H.response;return $?(s.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),B._validator.validateSignoutResponse($,F)):(s.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),F)})},I.prototype.clearStaleState=function(b){return s.Log.debug("OidcClient.clearStaleState"),b=b||this._stateStore,C.State.clearStaleState(b,this.settings.staleStateAge)},a(I,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),I}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenClient=void 0;var a=o(7),s=o(2),u=o(0);function f(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")}n.TokenClient=function(){function c(g){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.JsonService,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService;if(f(this,c),!g)throw u.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=g,this._jsonService=new p,this._metadataService=new m(this._settings)}return c.prototype.exchangeCode=function(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(m=Object.assign({},m)).grant_type=m.grant_type||"authorization_code",m.client_id=m.client_id||this._settings.client_id,m.client_secret=m.client_secret||this._settings.client_secret,m.redirect_uri=m.redirect_uri||this._settings.redirect_uri;var _=void 0,C=m._client_authentication||this._settings._client_authentication;return delete m._client_authentication,m.code?m.redirect_uri?m.code_verifier?m.client_id?m.client_secret||C!="client_secret_basic"?(C=="client_secret_basic"&&(_=m.client_id+":"+m.client_secret,delete m.client_id,delete m.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(R){return u.Log.debug("TokenClient.exchangeCode: Received token endpoint"),p._jsonService.postForm(R,m,_).then(function(I){return u.Log.debug("TokenClient.exchangeCode: response received"),I})})):(u.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(u.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(u.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(u.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(u.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},c.prototype.exchangeRefreshToken=function(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(m=Object.assign({},m)).grant_type=m.grant_type||"refresh_token",m.client_id=m.client_id||this._settings.client_id,m.client_secret=m.client_secret||this._settings.client_secret;var _=void 0,C=m._client_authentication||this._settings._client_authentication;return delete m._client_authentication,m.refresh_token?m.client_id?(C=="client_secret_basic"&&(_=m.client_id+":"+m.client_secret,delete m.client_id,delete m.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(R){return u.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),p._jsonService.postForm(R,m,_).then(function(I){return u.Log.debug("TokenClient.exchangeRefreshToken: response received"),I})})):(u.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(u.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},c}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorResponse=void 0;var a=o(0);function s(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function u(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?f:c}n.ErrorResponse=function(f){function c(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=g.error,m=g.error_description,_=g.error_uri,C=g.state,R=g.session_state;if(s(this,c),!p)throw a.Log.error("No error passed to ErrorResponse"),new Error("error");var I=u(this,f.call(this,m||p));return I.name="ErrorResponse",I.error=p,I.error_description=m,I.error_uri=_,I.state=C,I.session_state=R,I}return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}(c,f),c}(Error)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninState=void 0;var a=function(){function m(_,C){for(var R=0;R<C.length;R++){var I=C[R];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,C,R){return C&&m(_.prototype,C),R&&m(_,R),_}}(),s=o(0),u=o(9),f=o(4),c=function(_){return _&&_.__esModule?_:{default:_}}(o(14));function g(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function p(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?m:_}n.SigninState=function(m){function _(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=C.nonce,I=C.authority,S=C.client_id,b=C.redirect_uri,T=C.code_verifier,B=C.response_mode,H=C.client_secret,$=C.scope,F=C.extraTokenParams,ne=C.skipUserInfo;g(this,_);var Y=p(this,m.call(this,arguments[0]));if(R===!0?Y._nonce=(0,c.default)():R&&(Y._nonce=R),T===!0?Y._code_verifier=(0,c.default)()+(0,c.default)()+(0,c.default)():T&&(Y._code_verifier=T),Y.code_verifier){var M=f.JoseUtil.hashString(Y.code_verifier,"SHA256");Y._code_challenge=f.JoseUtil.hexToBase64Url(M)}return Y._redirect_uri=b,Y._authority=I,Y._client_id=S,Y._response_mode=B,Y._client_secret=H,Y._scope=$,Y._extraTokenParams=F,Y._skipUserInfo=ne,Y}return function(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);R.prototype=Object.create(I&&I.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(R,I):R.__proto__=I)}(_,m),_.prototype.toStorageString=function(){return s.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},_.fromStorageString=function(R){return s.Log.debug("SigninState.fromStorageString"),new _(JSON.parse(R))},a(_,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),_}(u.State)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(a!="undefined"&&a!==null&&a.getRandomValues!==void 0?s:u)().replace(/-/g,"")};var a=typeof window<"u"?window.crypto||window.msCrypto:null;function s(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(f){return(f^a.getRandomValues(new Uint8Array(1))[0]&15>>f/4).toString(16)})}function u(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(f){return(f^16*Math.random()>>f/4).toString(16)})}r.exports=n.default},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.User=void 0;var a=function(){function u(f,c){for(var g=0;g<c.length;g++){var p=c[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}return function(f,c,g){return c&&u(f.prototype,c),g&&u(f,g),f}}(),s=o(0);n.User=function(){function u(f){var c=f.id_token,g=f.session_state,p=f.access_token,m=f.refresh_token,_=f.token_type,C=f.scope,R=f.profile,I=f.expires_at,S=f.state;(function(T,B){if(!(T instanceof B))throw new TypeError("Cannot call a class as a function")})(this,u),this.id_token=c,this.session_state=g,this.access_token=p,this.refresh_token=m,this.token_type=_,this.scope=C,this.profile=R,this.expires_at=I,this.state=S}return u.prototype.toStorageString=function(){return s.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},u.fromStorageString=function(c){return s.Log.debug("User.fromStorageString"),new u(JSON.parse(c))},a(u,[{key:"expires_in",get:function(){if(this.expires_at){var c=parseInt(Date.now()/1e3);return this.expires_at-c}},set:function(c){var g=parseInt(c);if(typeof g=="number"&&g>0){var p=parseInt(Date.now()/1e3);this.expires_at=p+g}}},{key:"expired",get:function(){var c=this.expires_in;if(c!==void 0)return c<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.AccessTokenEvents=void 0;var a=o(0),s=o(46);function u(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}n.AccessTokenEvents=function(){function f(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=c.accessTokenExpiringNotificationTime,p=g===void 0?60:g,m=c.accessTokenExpiringTimer,_=m===void 0?new s.Timer("Access token expiring"):m,C=c.accessTokenExpiredTimer,R=C===void 0?new s.Timer("Access token expired"):C;u(this,f),this._accessTokenExpiringNotificationTime=p,this._accessTokenExpiring=_,this._accessTokenExpired=R}return f.prototype.load=function(g){if(g.access_token&&g.expires_in!==void 0){var p=g.expires_in;if(a.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",p),p>0){var m=p-this._accessTokenExpiringNotificationTime;m<=0&&(m=1),a.Log.debug("AccessTokenEvents.load: registering expiring timer in:",m),this._accessTokenExpiring.init(m)}else a.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var _=p+1;a.Log.debug("AccessTokenEvents.load: registering expired timer in:",_),this._accessTokenExpired.init(_)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},f.prototype.unload=function(){a.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},f.prototype.addAccessTokenExpiring=function(g){this._accessTokenExpiring.addHandler(g)},f.prototype.removeAccessTokenExpiring=function(g){this._accessTokenExpiring.removeHandler(g)},f.prototype.addAccessTokenExpired=function(g){this._accessTokenExpired.addHandler(g)},f.prototype.removeAccessTokenExpired=function(g){this._accessTokenExpired.removeHandler(g)},f}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.Event=void 0;var a=o(0);n.Event=function(){function s(u){(function(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,s),this._name=u,this._callbacks=[]}return s.prototype.addHandler=function(f){this._callbacks.push(f)},s.prototype.removeHandler=function(f){var c=this._callbacks.findIndex(function(g){return g===f});c>=0&&this._callbacks.splice(c,1)},s.prototype.raise=function(){a.Log.debug("Event: Raising event: "+this._name);for(var f=0;f<this._callbacks.length;f++){var c;(c=this._callbacks)[f].apply(c,arguments)}},s}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SessionMonitor=void 0;var a=function(){function g(p,m){for(var _=0;_<m.length;_++){var C=m[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(p,C.key,C)}}return function(p,m,_){return m&&g(p.prototype,m),_&&g(p,_),p}}(),s=o(0),u=o(19),f=o(1);function c(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}n.SessionMonitor=function(){function g(p){var m=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.CheckSessionIFrame,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.Global.timer;if(c(this,g),!p)throw s.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=p,this._CheckSessionIFrameCtor=_,this._timer=C,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(R){R?m._start(R):m._settings.monitorAnonymousSession&&m._userManager.querySessionStatus().then(function(I){var S={session_state:I.session_state};I.sub&&I.sid&&(S.profile={sub:I.sub,sid:I.sid}),m._start(S)}).catch(function(I){s.Log.error("SessionMonitor ctor: error from querySessionStatus:",I.message)})}).catch(function(R){s.Log.error("SessionMonitor ctor: error from getUser:",R.message)}))}return g.prototype._start=function(m){var _=this,C=m.session_state;C&&(m.profile?(this._sub=m.profile.sub,this._sid=m.profile.sid,s.Log.debug("SessionMonitor._start: session_state:",C,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,s.Log.debug("SessionMonitor._start: session_state:",C,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(C):this._metadataService.getCheckSessionIframe().then(function(R){if(R){s.Log.debug("SessionMonitor._start: Initializing check session iframe");var I=_._client_id,S=_._checkSessionInterval,b=_._stopCheckSessionOnError;_._checkSessionIFrame=new _._CheckSessionIFrameCtor(_._callback.bind(_),I,R,S,b),_._checkSessionIFrame.load().then(function(){_._checkSessionIFrame.start(C)})}else s.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(R){s.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",R.message)}))},g.prototype._stop=function(){var m=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(s.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var _=this._timer.setInterval(function(){m._timer.clearInterval(_),m._userManager.querySessionStatus().then(function(C){var R={session_state:C.session_state};C.sub&&C.sid&&(R.profile={sub:C.sub,sid:C.sid}),m._start(R)}).catch(function(C){s.Log.error("SessionMonitor: error from querySessionStatus:",C.message)})},1e3)},g.prototype._callback=function(){var m=this;this._userManager.querySessionStatus().then(function(_){var C=!0;_?_.sub===m._sub?(C=!1,m._checkSessionIFrame.start(_.session_state),_.sid===m._sid?s.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",_.session_state):(s.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",_.session_state),m._userManager.events._raiseUserSessionChanged())):s.Log.debug("SessionMonitor._callback: Different subject signed into OP:",_.sub):s.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),C&&(m._sub?(s.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),m._userManager.events._raiseUserSignedOut()):(s.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),m._userManager.events._raiseUserSignedIn()))}).catch(function(_){m._sub&&(s.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",_.message),m._userManager.events._raiseUserSignedOut())})},a(g,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),g}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.CheckSessionIFrame=void 0;var a=o(0);function s(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}n.CheckSessionIFrame=function(){function u(f,c,g,p){var m=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];s(this,u),this._callback=f,this._client_id=c,this._url=g,this._interval=p||2e3,this._stopOnError=m;var _=g.indexOf("/",g.indexOf("//")+2);this._frame_origin=g.substr(0,_),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=g}return u.prototype.load=function(){var c=this;return new Promise(function(g){c._frame.onload=function(){g()},window.document.body.appendChild(c._frame),c._boundMessageEvent=c._message.bind(c),window.addEventListener("message",c._boundMessageEvent,!1)})},u.prototype._message=function(c){c.origin===this._frame_origin&&c.source===this._frame.contentWindow&&(c.data==="error"?(a.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):c.data==="changed"?(a.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):a.Log.debug("CheckSessionIFrame: "+c.data+" message from check session op iframe"))},u.prototype.start=function(c){var g=this;if(this._session_state!==c){a.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=c;var p=function(){g._frame.contentWindow.postMessage(g._client_id+" "+g._session_state,g._frame_origin)};p(),this._timer=window.setInterval(p,this._interval)}},u.prototype.stop=function(){this._session_state=null,this._timer&&(a.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenRevocationClient=void 0;var a=o(0),s=o(2),u=o(1);function f(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}var c="access_token",g="refresh_token";n.TokenRevocationClient=function(){function p(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.Global.XMLHttpRequest,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService;if(f(this,p),!m)throw a.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=m,this._XMLHttpRequestCtor=_,this._metadataService=new C(this._settings)}return p.prototype.revoke=function(_,C){var R=this,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"access_token";if(!_)throw a.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(I!==c&&I!=g)throw a.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(S){if(S){a.Log.debug("TokenRevocationClient.revoke: Revoking "+I);var b=R._settings.client_id,T=R._settings.client_secret;return R._revoke(S,b,T,_,I)}if(C)throw a.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},p.prototype._revoke=function(_,C,R,I,S){var b=this;return new Promise(function(T,B){var H=new b._XMLHttpRequestCtor;H.open("POST",_),H.onload=function(){a.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",H.status),H.status===200?T():B(Error(H.statusText+" ("+H.status+")"))},H.onerror=function(){a.Log.debug("TokenRevocationClient.revoke: Network Error."),B("Network Error")};var $="client_id="+encodeURIComponent(C);R&&($+="&client_secret="+encodeURIComponent(R)),$+="&token_type_hint="+encodeURIComponent(S),$+="&token="+encodeURIComponent(I),H.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),H.send($)})},p}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaPopupWindow=void 0;var a=function(){function u(f,c){for(var g=0;g<c.length;g++){var p=c[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}return function(f,c,g){return c&&u(f.prototype,c),g&&u(f,g),f}}(),s=o(0);n.CordovaPopupWindow=function(){function u(f){var c=this;(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this._promise=new Promise(function(g,p){c._resolve=g,c._reject=p}),this.features=f.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=f.popupWindowTarget||"_blank",this.redirect_uri=f.startUrl,s.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return u.prototype._isInAppBrowserInstalled=function(c){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(g){return c.hasOwnProperty(g)})},u.prototype.navigate=function(c){if(c&&c.url){if(!window.cordova)return this._error("cordova is undefined");var g=window.cordova.require("cordova/plugin_list").metadata;if(this._isInAppBrowserInstalled(g)===!1)return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(c.url,this.target,this.features),this._popup?(s.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},u.prototype._loadStartCallback=function(c){c.url.indexOf(this.redirect_uri)===0&&this._success({url:c.url})},u.prototype._exitCallback=function(c){this._error(c)},u.prototype._success=function(c){this._cleanup(),s.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(c)},u.prototype._error=function(c){this._cleanup(),s.Log.error(c),this._reject(new Error(c))},u.prototype.close=function(){this._cleanup()},u.prototype._cleanup=function(){this._popup&&(s.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},a(u,[{key:"promise",get:function(){return this._promise}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0});var a=o(0),s=o(10),u=o(5),f=o(6),c=o(37),g=o(38),p=o(16),m=o(2),_=o(48),C=o(49),R=o(19),I=o(20),S=o(18),b=o(1),T=o(15),B=o(50);n.default={Version:B.Version,Log:a.Log,OidcClient:s.OidcClient,OidcClientSettings:u.OidcClientSettings,WebStorageStateStore:f.WebStorageStateStore,InMemoryWebStorage:c.InMemoryWebStorage,UserManager:g.UserManager,AccessTokenEvents:p.AccessTokenEvents,MetadataService:m.MetadataService,CordovaPopupNavigator:_.CordovaPopupNavigator,CordovaIFrameNavigator:C.CordovaIFrameNavigator,CheckSessionIFrame:R.CheckSessionIFrame,TokenRevocationClient:I.TokenRevocationClient,SessionMonitor:S.SessionMonitor,Global:b.Global,User:T.User},r.exports=n.default},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.ClockService=function(){function a(){(function(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a)}return a.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},a}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.ResponseValidator=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},s=o(0),u=o(2),f=o(25),c=o(11),g=o(12),p=o(4);function m(C,R){if(!(C instanceof R))throw new TypeError("Cannot call a class as a function")}var _=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];n.ResponseValidator=function(){function C(R){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.MetadataService,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.UserInfoService,b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:p.JoseUtil,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:c.TokenClient;if(m(this,C),!R)throw s.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=R,this._metadataService=new I(this._settings),this._userInfoService=new S(this._settings),this._joseUtil=b,this._tokenClient=new T(this._settings)}return C.prototype.validateSigninResponse=function(I,S){var b=this;return s.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(I,S).then(function(T){return s.Log.debug("ResponseValidator.validateSigninResponse: state processed"),b._validateTokens(I,T).then(function(B){return s.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),b._processClaims(I,B).then(function(H){return s.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),H})})})},C.prototype.validateSignoutResponse=function(I,S){return I.id!==S.state?(s.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(s.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),S.state=I.data,S.error?(s.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",S.error),Promise.reject(new g.ErrorResponse(S))):Promise.resolve(S))},C.prototype._processSigninParams=function(I,S){if(I.id!==S.state)return s.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!I.client_id)return s.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!I.authority)return s.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==I.authority)return s.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=I.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==I.client_id)return s.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=I.client_id;return s.Log.debug("ResponseValidator._processSigninParams: state validated"),S.state=I.data,S.error?(s.Log.warn("ResponseValidator._processSigninParams: Response was error",S.error),Promise.reject(new g.ErrorResponse(S))):I.nonce&&!S.id_token?(s.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!I.nonce&&S.id_token?(s.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):I.code_verifier&&!S.code?(s.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!I.code_verifier&&S.code?(s.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(S.scope||(S.scope=I.scope),Promise.resolve(S))},C.prototype._processClaims=function(I,S){var b=this;if(S.isOpenIdConnect){if(s.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),S.profile=this._filterProtocolClaims(S.profile),I.skipUserInfo!==!0&&this._settings.loadUserInfo&&S.access_token)return s.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(S.access_token).then(function(T){return s.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),T.sub!==S.profile.sub?(s.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(S.profile=b._mergeClaims(S.profile,T),s.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",S.profile),S)});s.Log.debug("ResponseValidator._processClaims: not loading user info")}else s.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(S)},C.prototype._mergeClaims=function(I,S){var b=Object.assign({},I);for(var T in S){var B=S[T];Array.isArray(B)||(B=[B]);for(var H=0;H<B.length;H++){var $=B[H];b[T]?Array.isArray(b[T])?b[T].indexOf($)<0&&b[T].push($):b[T]!==$&&(($===void 0?"undefined":a($))==="object"&&this._settings.mergeClaims?b[T]=this._mergeClaims(b[T],$):b[T]=[b[T],$]):b[T]=$}}return b},C.prototype._filterProtocolClaims=function(I){s.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",I);var S=Object.assign({},I);return this._settings._filterProtocolClaims?(_.forEach(function(b){delete S[b]}),s.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",S)):s.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),S},C.prototype._validateTokens=function(I,S){return S.code?(s.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(I,S)):S.id_token?S.access_token?(s.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(I,S)):(s.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(I,S)):(s.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(S))},C.prototype._processCode=function(I,S){var b=this,T={client_id:I.client_id,client_secret:I.client_secret,code:S.code,redirect_uri:I.redirect_uri,code_verifier:I.code_verifier};return I.extraTokenParams&&a(I.extraTokenParams)==="object"&&Object.assign(T,I.extraTokenParams),this._tokenClient.exchangeCode(T).then(function(B){for(var H in B)S[H]=B[H];return S.id_token?(s.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),b._validateIdTokenAttributes(I,S)):(s.Log.debug("ResponseValidator._processCode: token response successful, returning response"),S)})},C.prototype._validateIdTokenAttributes=function(I,S){var b=this;return this._metadataService.getIssuer().then(function(T){var B=I.client_id,H=b._settings.clockSkew;return s.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",H),b._settings.getEpochTime().then(function($){return b._joseUtil.validateJwtAttributes(S.id_token,T,B,H,$).then(function(F){return I.nonce&&I.nonce!==F.nonce?(s.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):F.sub?(S.profile=F,S):(s.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},C.prototype._validateIdTokenAndAccessToken=function(I,S){var b=this;return this._validateIdToken(I,S).then(function(T){return b._validateAccessToken(T)})},C.prototype._getSigningKeyForJwt=function(I){var S=this;return this._metadataService.getSigningKeys().then(function(b){var T=I.header.kid;if(!b)return s.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));s.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var B=void 0;if(T)B=b.filter(function(H){return H.kid===T})[0];else{if((b=S._filterByAlg(b,I.header.alg)).length>1)return s.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));B=b[0]}return Promise.resolve(B)})},C.prototype._getSigningKeyForJwtWithSingleRetry=function(I){var S=this;return this._getSigningKeyForJwt(I).then(function(b){return b?Promise.resolve(b):(S._metadataService.resetSigningKeys(),S._getSigningKeyForJwt(I))})},C.prototype._validateIdToken=function(I,S){var b=this;if(!I.nonce)return s.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var T=this._joseUtil.parseJwt(S.id_token);return T&&T.header&&T.payload?I.nonce!==T.payload.nonce?(s.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(B){return s.Log.debug("ResponseValidator._validateIdToken: Received issuer"),b._getSigningKeyForJwtWithSingleRetry(T).then(function(H){if(!H)return s.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var $=I.client_id,F=b._settings.clockSkew;return s.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",F),b._joseUtil.validateJwt(S.id_token,H,B,$,F).then(function(){return s.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),T.payload.sub?(S.profile=T.payload,S):(s.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(s.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",T),Promise.reject(new Error("Failed to parse id_token")))},C.prototype._filterByAlg=function(I,S){var b=null;if(S.startsWith("RS"))b="RSA";else if(S.startsWith("PS"))b="PS";else{if(!S.startsWith("ES"))return s.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",S),[];b="EC"}return s.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",b),I=I.filter(function(T){return T.kty===b}),s.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",b,I.length),I},C.prototype._validateAccessToken=function(I){if(!I.profile)return s.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!I.profile.at_hash)return s.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!I.id_token)return s.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var S=this._joseUtil.parseJwt(I.id_token);if(!S||!S.header)return s.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",S),Promise.reject(new Error("Failed to parse id_token"));var b=S.header.alg;if(!b||b.length!==5)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",b),Promise.reject(new Error("Unsupported alg: "+b));var T=b.substr(2,3);if(!T)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",b,T),Promise.reject(new Error("Unsupported alg: "+b));if((T=parseInt(T))!==256&&T!==384&&T!==512)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",b,T),Promise.reject(new Error("Unsupported alg: "+b));var B="sha"+T,H=this._joseUtil.hashString(I.access_token,B);if(!H)return s.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",B),Promise.reject(new Error("Failed to validate at_hash"));var $=H.substr(0,H.length/2),F=this._joseUtil.hexToBase64Url($);return F!==I.profile.at_hash?(s.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",F,I.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(s.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(I))},C}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UserInfoService=void 0;var a=o(7),s=o(2),u=o(0),f=o(4);function c(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}n.UserInfoService=function(){function g(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.JsonService,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f.JoseUtil;if(c(this,g),!p)throw u.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=p,this._jsonService=new m(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new _(this._settings),this._joseUtil=C}return g.prototype.getClaims=function(m){var _=this;return m?this._metadataService.getUserInfoEndpoint().then(function(C){return u.Log.debug("UserInfoService.getClaims: received userinfo url",C),_._jsonService.getJson(C,m).then(function(R){return u.Log.debug("UserInfoService.getClaims: claims received",R),R})}):(u.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},g.prototype._getClaimsFromJwt=function(m){var _=this;try{var C=this._joseUtil.parseJwt(m.responseText);if(!C||!C.header||!C.payload)return u.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",C),Promise.reject(new Error("Failed to parse id_token"));var R=C.header.kid,I=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":I=this._metadataService.getIssuer();break;case"ANY":I=Promise.resolve(C.payload.iss);break;default:I=Promise.resolve(this._settings.userInfoJwtIssuer)}return I.then(function(S){return u.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+S),_._metadataService.getSigningKeys().then(function(b){if(!b)return u.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));u.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var T=void 0;if(R)T=b.filter(function($){return $.kid===R})[0];else{if((b=_._filterByAlg(b,C.header.alg)).length>1)return u.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));T=b[0]}if(!T)return u.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var B=_._settings.client_id,H=_._settings.clockSkew;return u.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",H),_._joseUtil.validateJwt(m.responseText,T,S,B,H,void 0,!0).then(function(){return u.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),C.payload})})})}catch(S){return u.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",S.message),void reject(S)}},g.prototype._filterByAlg=function(m,_){var C=null;if(_.startsWith("RS"))C="RSA";else if(_.startsWith("PS"))C="PS";else{if(!_.startsWith("ES"))return u.Log.debug("UserInfoService._filterByAlg: alg not supported: ",_),[];C="EC"}return u.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",C),m=m.filter(function(R){return R.kty===C}),u.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",C,m.length),m},g}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.AllowedSigningAlgs=n.b64tohex=n.hextob64u=n.crypto=n.X509=n.KeyUtil=n.jws=void 0;var a=o(27);n.jws=a.jws,n.KeyUtil=a.KEYUTIL,n.X509=a.X509,n.crypto=a.crypto,n.hextob64u=a.hextob64u,n.b64tohex=a.b64tohex,n.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(r,n,o){(function(a){Object.defineProperty(n,"__esModule",{value:!0});var s,u,f,c,g,p,m,_,C,R,I,S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},b={userAgent:!1},T={},B=B||(s=Math,f=(u={}).lib={},c=f.Base=function(){function h(){}return{extend:function(w){h.prototype=this;var A=new h;return w&&A.mixIn(w),A.hasOwnProperty("init")||(A.init=function(){A.$super.init.apply(this,arguments)}),A.init.prototype=A,A.$super=this,A},create:function(){var w=this.extend();return w.init.apply(w,arguments),w},init:function(){},mixIn:function(w){for(var A in w)w.hasOwnProperty(A)&&(this[A]=w[A]);w.hasOwnProperty("toString")&&(this.toString=w.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),g=f.WordArray=c.extend({init:function(y,w){y=this.words=y||[],this.sigBytes=w??4*y.length},toString:function(y){return(y||m).stringify(this)},concat:function(y){var w=this.words,A=y.words,U=this.sigBytes,W=y.sigBytes;if(this.clamp(),U%4)for(var Q=0;Q<W;Q++){var ue=A[Q>>>2]>>>24-Q%4*8&255;w[U+Q>>>2]|=ue<<24-(U+Q)%4*8}else for(Q=0;Q<W;Q+=4)w[U+Q>>>2]=A[Q>>>2];return this.sigBytes+=W,this},clamp:function(){var y=this.words,w=this.sigBytes;y[w>>>2]&=4294967295<<32-w%4*8,y.length=s.ceil(w/4)},clone:function(){var y=c.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var w=[],A=0;A<y;A+=4)w.push(4294967296*s.random()|0);return new g.init(w,y)}}),p=u.enc={},m=p.Hex={stringify:function(y){for(var w=y.words,A=y.sigBytes,U=[],W=0;W<A;W++){var Q=w[W>>>2]>>>24-W%4*8&255;U.push((Q>>>4).toString(16)),U.push((15&Q).toString(16))}return U.join("")},parse:function(y){for(var w=y.length,A=[],U=0;U<w;U+=2)A[U>>>3]|=parseInt(y.substr(U,2),16)<<24-U%8*4;return new g.init(A,w/2)}},_=p.Latin1={stringify:function(y){for(var w=y.words,A=y.sigBytes,U=[],W=0;W<A;W++){var Q=w[W>>>2]>>>24-W%4*8&255;U.push(String.fromCharCode(Q))}return U.join("")},parse:function(y){for(var w=y.length,A=[],U=0;U<w;U++)A[U>>>2]|=(255&y.charCodeAt(U))<<24-U%4*8;return new g.init(A,w)}},C=p.Utf8={stringify:function(y){try{return decodeURIComponent(escape(_.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return _.parse(unescape(encodeURIComponent(y)))}},R=f.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=C.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var w=this._data,A=w.words,U=w.sigBytes,W=this.blockSize,Q=U/(4*W),ue=(Q=y?s.ceil(Q):s.max((0|Q)-this._minBufferSize,0))*W,oe=s.min(4*ue,U);if(ue){for(var ce=0;ce<ue;ce+=W)this._doProcessBlock(A,ce);var he=A.splice(0,ue);w.sigBytes-=oe}return new g.init(he,oe)},clone:function(){var y=c.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0}),f.Hasher=R.extend({cfg:c.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){R.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){return y&&this._append(y),this._doFinalize()},blockSize:16,_createHelper:function(y){return function(w,A){return new y.init(A).finalize(w)}},_createHmacHelper:function(y){return function(w,A){return new I.HMAC.init(y,A).finalize(w)}}}),I=u.algo={},u);(function(h){var y,w=(y=B).lib,A=w.Base,U=w.WordArray;(y=y.x64={}).Word=A.extend({init:function(Q,ue){this.high=Q,this.low=ue}}),y.WordArray=A.extend({init:function(Q,ue){Q=this.words=Q||[],this.sigBytes=ue??8*Q.length},toX32:function(){for(var Q=this.words,ue=Q.length,oe=[],ce=0;ce<ue;ce++){var he=Q[ce];oe.push(he.high),oe.push(he.low)}return U.create(oe,this.sigBytes)},clone:function(){for(var Q=A.clone.call(this),ue=Q.words=this.words.slice(0),oe=ue.length,ce=0;ce<oe;ce++)ue[ce]=ue[ce].clone();return Q}})})(),function(){var h=B,y=h.lib.WordArray;h.enc.Base64={stringify:function(A){var U=A.words,W=A.sigBytes,Q=this._map;A.clamp(),A=[];for(var ue=0;ue<W;ue+=3)for(var oe=(U[ue>>>2]>>>24-ue%4*8&255)<<16|(U[ue+1>>>2]>>>24-(ue+1)%4*8&255)<<8|U[ue+2>>>2]>>>24-(ue+2)%4*8&255,ce=0;4>ce&&ue+.75*ce<W;ce++)A.push(Q.charAt(oe>>>6*(3-ce)&63));if(U=Q.charAt(64))for(;A.length%4;)A.push(U);return A.join("")},parse:function(A){var U=A.length,W=this._map;(Q=W.charAt(64))&&(Q=A.indexOf(Q))!=-1&&(U=Q);for(var Q=[],ue=0,oe=0;oe<U;oe++)if(oe%4){var ce=W.indexOf(A.charAt(oe-1))<<oe%4*2,he=W.indexOf(A.charAt(oe))>>>6-oe%4*2;Q[ue>>>2]|=(ce|he)<<24-ue%4*8,ue++}return y.create(Q,ue)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(h){for(var y=B,w=(U=y.lib).WordArray,A=U.Hasher,U=y.algo,W=[],Q=[],ue=function(ze){return 4294967296*(ze-(0|ze))|0},oe=2,ce=0;64>ce;){var he;e:{he=oe;for(var ye=h.sqrt(he),be=2;be<=ye;be++)if(!(he%be)){he=!1;break e}he=!0}he&&(8>ce&&(W[ce]=ue(h.pow(oe,.5))),Q[ce]=ue(h.pow(oe,1/3)),ce++),oe++}var Pe=[];U=U.SHA256=A.extend({_doReset:function(){this._hash=new w.init(W.slice(0))},_doProcessBlock:function(ze,Qe){for(var te=this._hash.words,pe=te[0],ve=te[1],Ee=te[2],We=te[3],Ye=te[4],Vt=te[5],pt=te[6],Tr=te[7],kt=0;64>kt;kt++){if(16>kt)Pe[kt]=0|ze[Qe+kt];else{var Jt=Pe[kt-15],qt=Pe[kt-2];Pe[kt]=((Jt<<25|Jt>>>7)^(Jt<<14|Jt>>>18)^Jt>>>3)+Pe[kt-7]+((qt<<15|qt>>>17)^(qt<<13|qt>>>19)^qt>>>10)+Pe[kt-16]}Jt=Tr+((Ye<<26|Ye>>>6)^(Ye<<21|Ye>>>11)^(Ye<<7|Ye>>>25))+(Ye&Vt^~Ye&pt)+Q[kt]+Pe[kt],qt=((pe<<30|pe>>>2)^(pe<<19|pe>>>13)^(pe<<10|pe>>>22))+(pe&ve^pe&Ee^ve&Ee),Tr=pt,pt=Vt,Vt=Ye,Ye=We+Jt|0,We=Ee,Ee=ve,ve=pe,pe=Jt+qt|0}te[0]=te[0]+pe|0,te[1]=te[1]+ve|0,te[2]=te[2]+Ee|0,te[3]=te[3]+We|0,te[4]=te[4]+Ye|0,te[5]=te[5]+Vt|0,te[6]=te[6]+pt|0,te[7]=te[7]+Tr|0},_doFinalize:function(){var ze=this._data,Qe=ze.words,te=8*this._nDataBytes,pe=8*ze.sigBytes;return Qe[pe>>>5]|=128<<24-pe%32,Qe[14+(pe+64>>>9<<4)]=h.floor(te/4294967296),Qe[15+(pe+64>>>9<<4)]=te,ze.sigBytes=4*Qe.length,this._process(),this._hash},clone:function(){var ze=A.clone.call(this);return ze._hash=this._hash.clone(),ze}}),y.SHA256=A._createHelper(U),y.HmacSHA256=A._createHmacHelper(U)}(Math),function(){function h(){return A.create.apply(A,arguments)}for(var y=B,w=y.lib.Hasher,A=(W=y.x64).Word,U=W.WordArray,W=y.algo,Q=[h(1116352408,3609767458),h(1899447441,602891725),h(3049323471,3964484399),h(3921009573,2173295548),h(961987163,4081628472),h(1508970993,3053834265),h(2453635748,2937671579),h(2870763221,3664609560),h(3624381080,2734883394),h(310598401,1164996542),h(607225278,1323610764),h(1426881987,3590304994),h(1925078388,4068182383),h(2162078206,991336113),h(2614888103,633803317),h(3248222580,3479774868),h(3835390401,2666613458),h(4022224774,944711139),h(264347078,2341262773),h(604807628,2007800933),h(770255983,1495990901),h(1249150122,1856431235),h(1555081692,3175218132),h(1996064986,2198950837),h(2554220882,3999719339),h(2821834349,766784016),h(2952996808,2566594879),h(3210313671,3203337956),h(3336571891,1034457026),h(3584528711,2466948901),h(113926993,3758326383),h(338241895,168717936),h(666307205,1188179964),h(773529912,1546045734),h(1294757372,1522805485),h(1396182291,2643833823),h(1695183700,2343527390),h(1986661051,1014477480),h(2177026350,1206759142),h(2456956037,344077627),h(2730485921,1290863460),h(2820302411,3158454273),h(3259730800,3505952657),h(3345764771,106217008),h(3516065817,3606008344),h(3600352804,1432725776),h(4094571909,1467031594),h(275423344,851169720),h(430227734,3100823752),h(506948616,1363258195),h(659060556,3750685593),h(883997877,3785050280),h(958139571,3318307427),h(1322822218,3812723403),h(1537002063,2003034995),h(1747873779,3602036899),h(1955562222,1575990012),h(2024104815,1125592928),h(2227730452,2716904306),h(2361852424,442776044),h(2428436474,593698344),h(2756734187,3733110249),h(3204031479,2999351573),h(3329325298,3815920427),h(3391569614,3928383900),h(3515267271,566280711),h(3940187606,3454069534),h(4118630271,4000239992),h(116418474,1914138554),h(174292421,2731055270),h(289380356,3203993006),h(460393269,320620315),h(685471733,587496836),h(852142971,1086792851),h(1017036298,365543100),h(1126000580,2618297676),h(1288033470,3409855158),h(1501505948,4234509866),h(1607167915,987167468),h(1816402316,1246189591)],ue=[],oe=0;80>oe;oe++)ue[oe]=h();W=W.SHA512=w.extend({_doReset:function(){this._hash=new U.init([new A.init(1779033703,4089235720),new A.init(3144134277,2227873595),new A.init(1013904242,4271175723),new A.init(2773480762,1595750129),new A.init(1359893119,2917565137),new A.init(2600822924,725511199),new A.init(528734635,4215389547),new A.init(1541459225,327033209)])},_doProcessBlock:function(he,ye){for(var be=(ve=this._hash.words)[0],Pe=ve[1],He=ve[2],ze=ve[3],Qe=ve[4],te=ve[5],pe=ve[6],ve=ve[7],Ee=be.high,We=be.low,Ye=Pe.high,Vt=Pe.low,pt=He.high,Tr=He.low,kt=ze.high,Jt=ze.low,qt=Qe.high,Ur=Qe.low,_r=te.high,pn=te.low,kr=pe.high,mn=pe.low,$r=ve.high,ar=ve.low,Rn=Ee,vn=We,mo=Ye,an=Vt,Hi=pt,vo=Tr,Gs=kt,Ti=Jt,Mn=qt,oi=Ur,Dn=_r,Vo=pn,cs=kr,ji=mn,O=$r,q=ar,X=0;80>X;X++){var ie=ue[X];if(16>X)var Ae=ie.high=0|he[ye+2*X],le=ie.low=0|he[ye+2*X+1];else{Ae=((le=(Ae=ue[X-15]).high)>>>1|(Re=Ae.low)<<31)^(le>>>8|Re<<24)^le>>>7;var Re=(Re>>>1|le<<31)^(Re>>>8|le<<24)^(Re>>>7|le<<25),et=((le=(et=ue[X-2]).high)>>>19|(Je=et.low)<<13)^(le<<3|Je>>>29)^le>>>6,Je=(Je>>>19|le<<13)^(Je<<3|le>>>29)^(Je>>>6|le<<26),it=(le=ue[X-7]).high,_t=(mt=ue[X-16]).high,mt=mt.low;Ae=(Ae=(Ae=Ae+it+((le=Re+le.low)>>>0<Re>>>0?1:0))+et+((le=le+Je)>>>0<Je>>>0?1:0))+_t+((le=le+mt)>>>0<mt>>>0?1:0),ie.high=Ae,ie.low=le}it=Mn&Dn^~Mn&cs,mt=oi&Vo^~oi&ji,ie=Rn&mo^Rn&Hi^mo&Hi;var St=vn&an^vn&vo^an&vo,at=(Re=(Rn>>>28|vn<<4)^(Rn<<30|vn>>>2)^(Rn<<25|vn>>>7),et=(vn>>>28|Rn<<4)^(vn<<30|Rn>>>2)^(vn<<25|Rn>>>7),(Je=Q[X]).high),Et=Je.low;_t=O+((Mn>>>14|oi<<18)^(Mn>>>18|oi<<14)^(Mn<<23|oi>>>9))+((Je=q+((oi>>>14|Mn<<18)^(oi>>>18|Mn<<14)^(oi<<23|Mn>>>9)))>>>0<q>>>0?1:0),O=cs,q=ji,cs=Dn,ji=Vo,Dn=Mn,Vo=oi,Mn=Gs+(_t=(_t=(_t=_t+it+((Je=Je+mt)>>>0<mt>>>0?1:0))+at+((Je=Je+Et)>>>0<Et>>>0?1:0))+Ae+((Je=Je+le)>>>0<le>>>0?1:0))+((oi=Ti+Je|0)>>>0<Ti>>>0?1:0)|0,Gs=Hi,Ti=vo,Hi=mo,vo=an,mo=Rn,an=vn,Rn=_t+(ie=Re+ie+((le=et+St)>>>0<et>>>0?1:0))+((vn=Je+le|0)>>>0<Je>>>0?1:0)|0}We=be.low=We+vn,be.high=Ee+Rn+(We>>>0<vn>>>0?1:0),Vt=Pe.low=Vt+an,Pe.high=Ye+mo+(Vt>>>0<an>>>0?1:0),Tr=He.low=Tr+vo,He.high=pt+Hi+(Tr>>>0<vo>>>0?1:0),Jt=ze.low=Jt+Ti,ze.high=kt+Gs+(Jt>>>0<Ti>>>0?1:0),Ur=Qe.low=Ur+oi,Qe.high=qt+Mn+(Ur>>>0<oi>>>0?1:0),pn=te.low=pn+Vo,te.high=_r+Dn+(pn>>>0<Vo>>>0?1:0),mn=pe.low=mn+ji,pe.high=kr+cs+(mn>>>0<ji>>>0?1:0),ar=ve.low=ar+q,ve.high=$r+O+(ar>>>0<q>>>0?1:0)},_doFinalize:function(){var he=this._data,ye=he.words,be=8*this._nDataBytes,Pe=8*he.sigBytes;return ye[Pe>>>5]|=128<<24-Pe%32,ye[30+(Pe+128>>>10<<5)]=Math.floor(be/4294967296),ye[31+(Pe+128>>>10<<5)]=be,he.sigBytes=4*ye.length,this._process(),this._hash.toX32()},clone:function(){var he=w.clone.call(this);return he._hash=this._hash.clone(),he},blockSize:32}),y.SHA512=w._createHelper(W),y.HmacSHA512=w._createHmacHelper(W)}(),function(){var h=B,y=(U=h.x64).Word,w=U.WordArray,A=(U=h.algo).SHA512,U=U.SHA384=A.extend({_doReset:function(){this._hash=new w.init([new y.init(3418070365,3238371032),new y.init(1654270250,914150663),new y.init(2438529370,812702999),new y.init(355462360,4144912697),new y.init(1731405415,4290775857),new y.init(2394180231,1750603025),new y.init(3675008525,1694076839),new y.init(1203062813,3204075428)])},_doFinalize:function(){var Q=A._doFinalize.call(this);return Q.sigBytes-=16,Q}});h.SHA384=A._createHelper(U),h.HmacSHA384=A._createHmacHelper(U)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var H,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function F(h){var y,w,A="";for(y=0;y+3<=h.length;y+=3)w=parseInt(h.substring(y,y+3),16),A+=$.charAt(w>>6)+$.charAt(63&w);for(y+1==h.length?(w=parseInt(h.substring(y,y+1),16),A+=$.charAt(w<<2)):y+2==h.length&&(w=parseInt(h.substring(y,y+2),16),A+=$.charAt(w>>2)+$.charAt((3&w)<<4)),"=";(3&A.length)>0;)A+="=";return A}function ne(h){var y,w,A,U="",W=0;for(y=0;y<h.length&&h.charAt(y)!="=";++y)(A=$.indexOf(h.charAt(y)))<0||(W==0?(U+=nt(A>>2),w=3&A,W=1):W==1?(U+=nt(w<<2|A>>4),w=15&A,W=2):W==2?(U+=nt(w),U+=nt(A>>2),w=3&A,W=3):(U+=nt(w<<2|A>>4),U+=nt(15&A),W=0));return W==1&&(U+=nt(w<<2)),U}function Y(h){var y,w=ne(h),A=new Array;for(y=0;2*y<w.length;++y)A[y]=parseInt(w.substring(2*y,2*y+2),16);return A}function M(h,y,w){h!=null&&(typeof h=="number"?this.fromNumber(h,y,w):y==null&&typeof h!="string"?this.fromString(h,256):this.fromString(h,y))}function J(){return new M(null)}b.appName=="Microsoft Internet Explorer"?(M.prototype.am=function(y,w,A,U,W,Q){for(var ue=32767&w,oe=w>>15;--Q>=0;){var ce=32767&this[y],he=this[y++]>>15,ye=oe*ce+he*ue;W=((ce=ue*ce+((32767&ye)<<15)+A[U]+(1073741823&W))>>>30)+(ye>>>15)+oe*he+(W>>>30),A[U++]=1073741823&ce}return W},H=30):b.appName!="Netscape"?(M.prototype.am=function(y,w,A,U,W,Q){for(;--Q>=0;){var ue=w*this[y++]+A[U]+W;W=Math.floor(ue/67108864),A[U++]=67108863&ue}return W},H=26):(M.prototype.am=function(y,w,A,U,W,Q){for(var ue=16383&w,oe=w>>14;--Q>=0;){var ce=16383&this[y],he=this[y++]>>14,ye=oe*ce+he*ue;W=((ce=ue*ce+((16383&ye)<<14)+A[U]+W)>>28)+(ye>>14)+oe*he,A[U++]=268435455&ce}return W},H=28),M.prototype.DB=H,M.prototype.DM=(1<<H)-1,M.prototype.DV=1<<H,M.prototype.FV=Math.pow(2,52),M.prototype.F1=52-H,M.prototype.F2=2*H-52;var Le,Ue,je=new Array;for(Le="0".charCodeAt(0),Ue=0;Ue<=9;++Ue)je[Le++]=Ue;for(Le="a".charCodeAt(0),Ue=10;Ue<36;++Ue)je[Le++]=Ue;for(Le="A".charCodeAt(0),Ue=10;Ue<36;++Ue)je[Le++]=Ue;function nt(h){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(h)}function ke(h,y){var w=je[h.charCodeAt(y)];return w??-1}function Be(h){var y=J();return y.fromInt(h),y}function De(h){var y,w=1;return(y=h>>>16)!=0&&(h=y,w+=16),(y=h>>8)!=0&&(h=y,w+=8),(y=h>>4)!=0&&(h=y,w+=4),(y=h>>2)!=0&&(h=y,w+=2),(y=h>>1)!=0&&(h=y,w+=1),w}function tt(h){this.m=h}function re(h){this.m=h,this.mp=h.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<h.DB-15)-1,this.mt2=2*h.t}function Ie(h,y){return h&y}function Ge(h,y){return h|y}function dt(h,y){return h^y}function Ze(h,y){return h&~y}function qe(h){if(h==0)return-1;var y=0;return!(65535&h)&&(h>>=16,y+=16),!(255&h)&&(h>>=8,y+=8),!(15&h)&&(h>>=4,y+=4),!(3&h)&&(h>>=2,y+=2),!(1&h)&&++y,y}function Fe(h){for(var y=0;h!=0;)h&=h-1,++y;return y}function lt(){}function gt(h){return h}function Pt(h){this.r2=J(),this.q3=J(),M.ONE.dlShiftTo(2*h.t,this.r2),this.mu=this.r2.divide(h),this.m=h}tt.prototype.convert=function(y){return y.s<0||y.compareTo(this.m)>=0?y.mod(this.m):y},tt.prototype.revert=function(y){return y},tt.prototype.reduce=function(y){y.divRemTo(this.m,null,y)},tt.prototype.mulTo=function(y,w,A){y.multiplyTo(w,A),this.reduce(A)},tt.prototype.sqrTo=function(y,w){y.squareTo(w),this.reduce(w)},re.prototype.convert=function(y){var w=J();return y.abs().dlShiftTo(this.m.t,w),w.divRemTo(this.m,null,w),y.s<0&&w.compareTo(M.ZERO)>0&&this.m.subTo(w,w),w},re.prototype.revert=function(y){var w=J();return y.copyTo(w),this.reduce(w),w},re.prototype.reduce=function(y){for(;y.t<=this.mt2;)y[y.t++]=0;for(var w=0;w<this.m.t;++w){var A=32767&y[w],U=A*this.mpl+((A*this.mph+(y[w]>>15)*this.mpl&this.um)<<15)&y.DM;for(y[A=w+this.m.t]+=this.m.am(0,U,y,w,0,this.m.t);y[A]>=y.DV;)y[A]-=y.DV,y[++A]++}y.clamp(),y.drShiftTo(this.m.t,y),y.compareTo(this.m)>=0&&y.subTo(this.m,y)},re.prototype.mulTo=function(y,w,A){y.multiplyTo(w,A),this.reduce(A)},re.prototype.sqrTo=function(y,w){y.squareTo(w),this.reduce(w)},M.prototype.copyTo=function(y){for(var w=this.t-1;w>=0;--w)y[w]=this[w];y.t=this.t,y.s=this.s},M.prototype.fromInt=function(y){this.t=1,this.s=y<0?-1:0,y>0?this[0]=y:y<-1?this[0]=y+this.DV:this.t=0},M.prototype.fromString=function(y,w){var A;if(w==16)A=4;else if(w==8)A=3;else if(w==256)A=8;else if(w==2)A=1;else if(w==32)A=5;else{if(w!=4)return void this.fromRadix(y,w);A=2}this.t=0,this.s=0;for(var U=y.length,W=!1,Q=0;--U>=0;){var ue=A==8?255&y[U]:ke(y,U);ue<0?y.charAt(U)=="-"&&(W=!0):(W=!1,Q==0?this[this.t++]=ue:Q+A>this.DB?(this[this.t-1]|=(ue&(1<<this.DB-Q)-1)<<Q,this[this.t++]=ue>>this.DB-Q):this[this.t-1]|=ue<<Q,(Q+=A)>=this.DB&&(Q-=this.DB))}A==8&&128&y[0]&&(this.s=-1,Q>0&&(this[this.t-1]|=(1<<this.DB-Q)-1<<Q)),this.clamp(),W&&M.ZERO.subTo(this,this)},M.prototype.clamp=function(){for(var y=this.s&this.DM;this.t>0&&this[this.t-1]==y;)--this.t},M.prototype.dlShiftTo=function(y,w){var A;for(A=this.t-1;A>=0;--A)w[A+y]=this[A];for(A=y-1;A>=0;--A)w[A]=0;w.t=this.t+y,w.s=this.s},M.prototype.drShiftTo=function(y,w){for(var A=y;A<this.t;++A)w[A-y]=this[A];w.t=Math.max(this.t-y,0),w.s=this.s},M.prototype.lShiftTo=function(y,w){var A,U=y%this.DB,W=this.DB-U,Q=(1<<W)-1,ue=Math.floor(y/this.DB),oe=this.s<<U&this.DM;for(A=this.t-1;A>=0;--A)w[A+ue+1]=this[A]>>W|oe,oe=(this[A]&Q)<<U;for(A=ue-1;A>=0;--A)w[A]=0;w[ue]=oe,w.t=this.t+ue+1,w.s=this.s,w.clamp()},M.prototype.rShiftTo=function(y,w){w.s=this.s;var A=Math.floor(y/this.DB);if(A>=this.t)w.t=0;else{var U=y%this.DB,W=this.DB-U,Q=(1<<U)-1;w[0]=this[A]>>U;for(var ue=A+1;ue<this.t;++ue)w[ue-A-1]|=(this[ue]&Q)<<W,w[ue-A]=this[ue]>>U;U>0&&(w[this.t-A-1]|=(this.s&Q)<<W),w.t=this.t-A,w.clamp()}},M.prototype.subTo=function(y,w){for(var A=0,U=0,W=Math.min(y.t,this.t);A<W;)U+=this[A]-y[A],w[A++]=U&this.DM,U>>=this.DB;if(y.t<this.t){for(U-=y.s;A<this.t;)U+=this[A],w[A++]=U&this.DM,U>>=this.DB;U+=this.s}else{for(U+=this.s;A<y.t;)U-=y[A],w[A++]=U&this.DM,U>>=this.DB;U-=y.s}w.s=U<0?-1:0,U<-1?w[A++]=this.DV+U:U>0&&(w[A++]=U),w.t=A,w.clamp()},M.prototype.multiplyTo=function(y,w){var A=this.abs(),U=y.abs(),W=A.t;for(w.t=W+U.t;--W>=0;)w[W]=0;for(W=0;W<U.t;++W)w[W+A.t]=A.am(0,U[W],w,W,0,A.t);w.s=0,w.clamp(),this.s!=y.s&&M.ZERO.subTo(w,w)},M.prototype.squareTo=function(y){for(var w=this.abs(),A=y.t=2*w.t;--A>=0;)y[A]=0;for(A=0;A<w.t-1;++A){var U=w.am(A,w[A],y,2*A,0,1);(y[A+w.t]+=w.am(A+1,2*w[A],y,2*A+1,U,w.t-A-1))>=w.DV&&(y[A+w.t]-=w.DV,y[A+w.t+1]=1)}y.t>0&&(y[y.t-1]+=w.am(A,w[A],y,2*A,0,1)),y.s=0,y.clamp()},M.prototype.divRemTo=function(y,w,A){var U=y.abs();if(!(U.t<=0)){var W=this.abs();if(W.t<U.t)return w!=null&&w.fromInt(0),void(A!=null&&this.copyTo(A));A==null&&(A=J());var Q=J(),ue=this.s,oe=y.s,ce=this.DB-De(U[U.t-1]);ce>0?(U.lShiftTo(ce,Q),W.lShiftTo(ce,A)):(U.copyTo(Q),W.copyTo(A));var he=Q.t,ye=Q[he-1];if(ye!=0){var be=ye*(1<<this.F1)+(he>1?Q[he-2]>>this.F2:0),Pe=this.FV/be,He=(1<<this.F1)/be,ze=1<<this.F2,Qe=A.t,te=Qe-he,pe=w??J();for(Q.dlShiftTo(te,pe),A.compareTo(pe)>=0&&(A[A.t++]=1,A.subTo(pe,A)),M.ONE.dlShiftTo(he,pe),pe.subTo(Q,Q);Q.t<he;)Q[Q.t++]=0;for(;--te>=0;){var ve=A[--Qe]==ye?this.DM:Math.floor(A[Qe]*Pe+(A[Qe-1]+ze)*He);if((A[Qe]+=Q.am(0,ve,A,te,0,he))<ve)for(Q.dlShiftTo(te,pe),A.subTo(pe,A);A[Qe]<--ve;)A.subTo(pe,A)}w!=null&&(A.drShiftTo(he,w),ue!=oe&&M.ZERO.subTo(w,w)),A.t=he,A.clamp(),ce>0&&A.rShiftTo(ce,A),ue<0&&M.ZERO.subTo(A,A)}}},M.prototype.invDigit=function(){if(this.t<1)return 0;var y=this[0];if(!(1&y))return 0;var w=3&y;return(w=(w=(w=(w=w*(2-(15&y)*w)&15)*(2-(255&y)*w)&255)*(2-((65535&y)*w&65535))&65535)*(2-y*w%this.DV)%this.DV)>0?this.DV-w:-w},M.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},M.prototype.exp=function(y,w){if(y>4294967295||y<1)return M.ONE;var A=J(),U=J(),W=w.convert(this),Q=De(y)-1;for(W.copyTo(A);--Q>=0;)if(w.sqrTo(A,U),(y&1<<Q)>0)w.mulTo(U,W,A);else{var ue=A;A=U,U=ue}return w.revert(A)},M.prototype.toString=function(y){if(this.s<0)return"-"+this.negate().toString(y);var w;if(y==16)w=4;else if(y==8)w=3;else if(y==2)w=1;else if(y==32)w=5;else{if(y!=4)return this.toRadix(y);w=2}var A,U=(1<<w)-1,W=!1,Q="",ue=this.t,oe=this.DB-ue*this.DB%w;if(ue-- >0)for(oe<this.DB&&(A=this[ue]>>oe)>0&&(W=!0,Q=nt(A));ue>=0;)oe<w?(A=(this[ue]&(1<<oe)-1)<<w-oe,A|=this[--ue]>>(oe+=this.DB-w)):(A=this[ue]>>(oe-=w)&U,oe<=0&&(oe+=this.DB,--ue)),A>0&&(W=!0),W&&(Q+=nt(A));return W?Q:"0"},M.prototype.negate=function(){var y=J();return M.ZERO.subTo(this,y),y},M.prototype.abs=function(){return this.s<0?this.negate():this},M.prototype.compareTo=function(y){var w=this.s-y.s;if(w!=0)return w;var A=this.t;if((w=A-y.t)!=0)return this.s<0?-w:w;for(;--A>=0;)if((w=this[A]-y[A])!=0)return w;return 0},M.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+De(this[this.t-1]^this.s&this.DM)},M.prototype.mod=function(y){var w=J();return this.abs().divRemTo(y,null,w),this.s<0&&w.compareTo(M.ZERO)>0&&y.subTo(w,w),w},M.prototype.modPowInt=function(y,w){var A;return A=y<256||w.isEven()?new tt(w):new re(w),this.exp(y,A)},M.ZERO=Be(0),M.ONE=Be(1),lt.prototype.convert=gt,lt.prototype.revert=gt,lt.prototype.mulTo=function(y,w,A){y.multiplyTo(w,A)},lt.prototype.sqrTo=function(y,w){y.squareTo(w)},Pt.prototype.convert=function(y){if(y.s<0||y.t>2*this.m.t)return y.mod(this.m);if(y.compareTo(this.m)<0)return y;var w=J();return y.copyTo(w),this.reduce(w),w},Pt.prototype.revert=function(y){return y},Pt.prototype.reduce=function(y){for(y.drShiftTo(this.m.t-1,this.r2),y.t>this.m.t+1&&(y.t=this.m.t+1,y.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);y.compareTo(this.r2)<0;)y.dAddOffset(1,this.m.t+1);for(y.subTo(this.r2,y);y.compareTo(this.m)>=0;)y.subTo(this.m,y)},Pt.prototype.mulTo=function(y,w,A){y.multiplyTo(w,A),this.reduce(A)},Pt.prototype.sqrTo=function(y,w){y.squareTo(w),this.reduce(w)};var Ft=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Z=(1<<26)/Ft[Ft.length-1];/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function N(){this.i=0,this.j=0,this.S=new Array}M.prototype.chunkSize=function(y){return Math.floor(Math.LN2*this.DB/Math.log(y))},M.prototype.toRadix=function(y){if(y==null&&(y=10),this.signum()==0||y<2||y>36)return"0";var w=this.chunkSize(y),A=Math.pow(y,w),U=Be(A),W=J(),Q=J(),ue="";for(this.divRemTo(U,W,Q);W.signum()>0;)ue=(A+Q.intValue()).toString(y).substr(1)+ue,W.divRemTo(U,W,Q);return Q.intValue().toString(y)+ue},M.prototype.fromRadix=function(y,w){this.fromInt(0),w==null&&(w=10);for(var A=this.chunkSize(w),U=Math.pow(w,A),W=!1,Q=0,ue=0,oe=0;oe<y.length;++oe){var ce=ke(y,oe);ce<0?y.charAt(oe)=="-"&&this.signum()==0&&(W=!0):(ue=w*ue+ce,++Q>=A&&(this.dMultiply(U),this.dAddOffset(ue,0),Q=0,ue=0))}Q>0&&(this.dMultiply(Math.pow(w,Q)),this.dAddOffset(ue,0)),W&&M.ZERO.subTo(this,this)},M.prototype.fromNumber=function(y,w,A){if(typeof w=="number")if(y<2)this.fromInt(1);else for(this.fromNumber(y,A),this.testBit(y-1)||this.bitwiseTo(M.ONE.shiftLeft(y-1),Ge,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(w);)this.dAddOffset(2,0),this.bitLength()>y&&this.subTo(M.ONE.shiftLeft(y-1),this);else{var U=new Array,W=7&y;U.length=1+(y>>3),w.nextBytes(U),W>0?U[0]&=(1<<W)-1:U[0]=0,this.fromString(U,256)}},M.prototype.bitwiseTo=function(y,w,A){var U,W,Q=Math.min(y.t,this.t);for(U=0;U<Q;++U)A[U]=w(this[U],y[U]);if(y.t<this.t){for(W=y.s&this.DM,U=Q;U<this.t;++U)A[U]=w(this[U],W);A.t=this.t}else{for(W=this.s&this.DM,U=Q;U<y.t;++U)A[U]=w(W,y[U]);A.t=y.t}A.s=w(this.s,y.s),A.clamp()},M.prototype.changeBit=function(y,w){var A=M.ONE.shiftLeft(y);return this.bitwiseTo(A,w,A),A},M.prototype.addTo=function(y,w){for(var A=0,U=0,W=Math.min(y.t,this.t);A<W;)U+=this[A]+y[A],w[A++]=U&this.DM,U>>=this.DB;if(y.t<this.t){for(U+=y.s;A<this.t;)U+=this[A],w[A++]=U&this.DM,U>>=this.DB;U+=this.s}else{for(U+=this.s;A<y.t;)U+=y[A],w[A++]=U&this.DM,U>>=this.DB;U+=y.s}w.s=U<0?-1:0,U>0?w[A++]=U:U<-1&&(w[A++]=this.DV+U),w.t=A,w.clamp()},M.prototype.dMultiply=function(y){this[this.t]=this.am(0,y-1,this,0,0,this.t),++this.t,this.clamp()},M.prototype.dAddOffset=function(y,w){if(y!=0){for(;this.t<=w;)this[this.t++]=0;for(this[w]+=y;this[w]>=this.DV;)this[w]-=this.DV,++w>=this.t&&(this[this.t++]=0),++this[w]}},M.prototype.multiplyLowerTo=function(y,w,A){var U,W=Math.min(this.t+y.t,w);for(A.s=0,A.t=W;W>0;)A[--W]=0;for(U=A.t-this.t;W<U;++W)A[W+this.t]=this.am(0,y[W],A,W,0,this.t);for(U=Math.min(y.t,w);W<U;++W)this.am(0,y[W],A,W,0,w-W);A.clamp()},M.prototype.multiplyUpperTo=function(y,w,A){--w;var U=A.t=this.t+y.t-w;for(A.s=0;--U>=0;)A[U]=0;for(U=Math.max(w-this.t,0);U<y.t;++U)A[this.t+U-w]=this.am(w-U,y[U],A,0,0,this.t+U-w);A.clamp(),A.drShiftTo(1,A)},M.prototype.modInt=function(y){if(y<=0)return 0;var w=this.DV%y,A=this.s<0?y-1:0;if(this.t>0)if(w==0)A=this[0]%y;else for(var U=this.t-1;U>=0;--U)A=(w*A+this[U])%y;return A},M.prototype.millerRabin=function(y){var w=this.subtract(M.ONE),A=w.getLowestSetBit();if(A<=0)return!1;var U=w.shiftRight(A);(y=y+1>>1)>Ft.length&&(y=Ft.length);for(var W=J(),Q=0;Q<y;++Q){W.fromInt(Ft[Math.floor(Math.random()*Ft.length)]);var ue=W.modPow(U,this);if(ue.compareTo(M.ONE)!=0&&ue.compareTo(w)!=0){for(var oe=1;oe++<A&&ue.compareTo(w)!=0;)if((ue=ue.modPowInt(2,this)).compareTo(M.ONE)==0)return!1;if(ue.compareTo(w)!=0)return!1}}return!0},M.prototype.clone=function(){var y=J();return this.copyTo(y),y},M.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},M.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},M.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},M.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},M.prototype.toByteArray=function(){var y=this.t,w=new Array;w[0]=this.s;var A,U=this.DB-y*this.DB%8,W=0;if(y-- >0)for(U<this.DB&&(A=this[y]>>U)!=(this.s&this.DM)>>U&&(w[W++]=A|this.s<<this.DB-U);y>=0;)U<8?(A=(this[y]&(1<<U)-1)<<8-U,A|=this[--y]>>(U+=this.DB-8)):(A=this[y]>>(U-=8)&255,U<=0&&(U+=this.DB,--y)),128&A&&(A|=-256),W==0&&(128&this.s)!=(128&A)&&++W,(W>0||A!=this.s)&&(w[W++]=A);return w},M.prototype.equals=function(y){return this.compareTo(y)==0},M.prototype.min=function(y){return this.compareTo(y)<0?this:y},M.prototype.max=function(y){return this.compareTo(y)>0?this:y},M.prototype.and=function(y){var w=J();return this.bitwiseTo(y,Ie,w),w},M.prototype.or=function(y){var w=J();return this.bitwiseTo(y,Ge,w),w},M.prototype.xor=function(y){var w=J();return this.bitwiseTo(y,dt,w),w},M.prototype.andNot=function(y){var w=J();return this.bitwiseTo(y,Ze,w),w},M.prototype.not=function(){for(var y=J(),w=0;w<this.t;++w)y[w]=this.DM&~this[w];return y.t=this.t,y.s=~this.s,y},M.prototype.shiftLeft=function(y){var w=J();return y<0?this.rShiftTo(-y,w):this.lShiftTo(y,w),w},M.prototype.shiftRight=function(y){var w=J();return y<0?this.lShiftTo(-y,w):this.rShiftTo(y,w),w},M.prototype.getLowestSetBit=function(){for(var y=0;y<this.t;++y)if(this[y]!=0)return y*this.DB+qe(this[y]);return this.s<0?this.t*this.DB:-1},M.prototype.bitCount=function(){for(var y=0,w=this.s&this.DM,A=0;A<this.t;++A)y+=Fe(this[A]^w);return y},M.prototype.testBit=function(y){var w=Math.floor(y/this.DB);return w>=this.t?this.s!=0:(this[w]&1<<y%this.DB)!=0},M.prototype.setBit=function(y){return this.changeBit(y,Ge)},M.prototype.clearBit=function(y){return this.changeBit(y,Ze)},M.prototype.flipBit=function(y){return this.changeBit(y,dt)},M.prototype.add=function(y){var w=J();return this.addTo(y,w),w},M.prototype.subtract=function(y){var w=J();return this.subTo(y,w),w},M.prototype.multiply=function(y){var w=J();return this.multiplyTo(y,w),w},M.prototype.divide=function(y){var w=J();return this.divRemTo(y,w,null),w},M.prototype.remainder=function(y){var w=J();return this.divRemTo(y,null,w),w},M.prototype.divideAndRemainder=function(y){var w=J(),A=J();return this.divRemTo(y,w,A),new Array(w,A)},M.prototype.modPow=function(y,w){var A,U,W=y.bitLength(),Q=Be(1);if(W<=0)return Q;A=W<18?1:W<48?3:W<144?4:W<768?5:6,U=W<8?new tt(w):w.isEven()?new Pt(w):new re(w);var ue=new Array,oe=3,ce=A-1,he=(1<<A)-1;if(ue[1]=U.convert(this),A>1){var ye=J();for(U.sqrTo(ue[1],ye);oe<=he;)ue[oe]=J(),U.mulTo(ye,ue[oe-2],ue[oe]),oe+=2}var be,Pe,He=y.t-1,ze=!0,Qe=J();for(W=De(y[He])-1;He>=0;){for(W>=ce?be=y[He]>>W-ce&he:(be=(y[He]&(1<<W+1)-1)<<ce-W,He>0&&(be|=y[He-1]>>this.DB+W-ce)),oe=A;!(1&be);)be>>=1,--oe;if((W-=oe)<0&&(W+=this.DB,--He),ze)ue[be].copyTo(Q),ze=!1;else{for(;oe>1;)U.sqrTo(Q,Qe),U.sqrTo(Qe,Q),oe-=2;oe>0?U.sqrTo(Q,Qe):(Pe=Q,Q=Qe,Qe=Pe),U.mulTo(Qe,ue[be],Q)}for(;He>=0&&!(y[He]&1<<W);)U.sqrTo(Q,Qe),Pe=Q,Q=Qe,Qe=Pe,--W<0&&(W=this.DB-1,--He)}return U.revert(Q)},M.prototype.modInverse=function(y){var w=y.isEven();if(this.isEven()&&w||y.signum()==0)return M.ZERO;for(var A=y.clone(),U=this.clone(),W=Be(1),Q=Be(0),ue=Be(0),oe=Be(1);A.signum()!=0;){for(;A.isEven();)A.rShiftTo(1,A),w?(W.isEven()&&Q.isEven()||(W.addTo(this,W),Q.subTo(y,Q)),W.rShiftTo(1,W)):Q.isEven()||Q.subTo(y,Q),Q.rShiftTo(1,Q);for(;U.isEven();)U.rShiftTo(1,U),w?(ue.isEven()&&oe.isEven()||(ue.addTo(this,ue),oe.subTo(y,oe)),ue.rShiftTo(1,ue)):oe.isEven()||oe.subTo(y,oe),oe.rShiftTo(1,oe);A.compareTo(U)>=0?(A.subTo(U,A),w&&W.subTo(ue,W),Q.subTo(oe,Q)):(U.subTo(A,U),w&&ue.subTo(W,ue),oe.subTo(Q,oe))}return U.compareTo(M.ONE)!=0?M.ZERO:oe.compareTo(y)>=0?oe.subtract(y):oe.signum()<0?(oe.addTo(y,oe),oe.signum()<0?oe.add(y):oe):oe},M.prototype.pow=function(y){return this.exp(y,new lt)},M.prototype.gcd=function(y){var w=this.s<0?this.negate():this.clone(),A=y.s<0?y.negate():y.clone();if(w.compareTo(A)<0){var U=w;w=A,A=U}var W=w.getLowestSetBit(),Q=A.getLowestSetBit();if(Q<0)return w;for(W<Q&&(Q=W),Q>0&&(w.rShiftTo(Q,w),A.rShiftTo(Q,A));w.signum()>0;)(W=w.getLowestSetBit())>0&&w.rShiftTo(W,w),(W=A.getLowestSetBit())>0&&A.rShiftTo(W,A),w.compareTo(A)>=0?(w.subTo(A,w),w.rShiftTo(1,w)):(A.subTo(w,A),A.rShiftTo(1,A));return Q>0&&A.lShiftTo(Q,A),A},M.prototype.isProbablePrime=function(y){var w,A=this.abs();if(A.t==1&&A[0]<=Ft[Ft.length-1]){for(w=0;w<Ft.length;++w)if(A[0]==Ft[w])return!0;return!1}if(A.isEven())return!1;for(w=1;w<Ft.length;){for(var U=Ft[w],W=w+1;W<Ft.length&&U<Z;)U*=Ft[W++];for(U=A.modInt(U);w<W;)if(U%Ft[w++]==0)return!1}return A.millerRabin(y)},M.prototype.square=function(){var y=J();return this.squareTo(y),y},N.prototype.init=function(y){var w,A,U;for(w=0;w<256;++w)this.S[w]=w;for(A=0,w=0;w<256;++w)A=A+this.S[w]+y[w%y.length]&255,U=this.S[w],this.S[w]=this.S[A],this.S[A]=U;this.i=0,this.j=0},N.prototype.next=function(){var y;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,y=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=y,this.S[y+this.S[this.i]&255]};var E,j,G;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function fe(){(function(y){j[G++]^=255&y,j[G++]^=y>>8&255,j[G++]^=y>>16&255,j[G++]^=y>>24&255,G>=256&&(G-=256)})(new Date().getTime())}if(j==null){var we;if(j=new Array,G=0,T!==void 0&&(T.crypto!==void 0||T.msCrypto!==void 0)){var me=T.crypto||T.msCrypto;if(me.getRandomValues){var $e=new Uint8Array(32);for(me.getRandomValues($e),we=0;we<32;++we)j[G++]=$e[we]}else if(b.appName=="Netscape"&&b.appVersion<"5"){var Xe=T.crypto.random(32);for(we=0;we<Xe.length;++we)j[G++]=255&Xe.charCodeAt(we)}}for(;G<256;)we=Math.floor(65536*Math.random()),j[G++]=we>>>8,j[G++]=255&we;G=0,fe()}function ft(){if(E==null){for(fe(),(E=function(){return new N}()).init(j),G=0;G<j.length;++G)j[G]=0;G=0}return E.next()}function Mt(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function $t(h,y){return new M(h,y)}function Lr(h,y,w){for(var A="",U=0;A.length<y;)A+=w(String.fromCharCode.apply(String,h.concat([(4278190080&U)>>24,(16711680&U)>>16,(65280&U)>>8,255&U]))),U+=1;return A}function ee(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function de(h,y){this.x=y,this.q=h}function K(h,y,w,A){this.curve=h,this.x=y,this.y=w,this.z=A??M.ONE,this.zinv=null}function P(h,y,w){this.q=h,this.a=this.fromBigInteger(y),this.b=this.fromBigInteger(w),this.infinity=new K(this,null,null)}Mt.prototype.nextBytes=function(y){var w;for(w=0;w<y.length;++w)y[w]=ft()},ee.prototype.doPublic=function(y){return y.modPowInt(this.e,this.n)},ee.prototype.setPublic=function(y,w){if(this.isPublic=!0,this.isPrivate=!1,typeof y!="string")this.n=y,this.e=w;else{if(!(y!=null&&w!=null&&y.length>0&&w.length>0))throw"Invalid RSA public key";this.n=$t(y,16),this.e=parseInt(w,16)}},ee.prototype.encrypt=function(y){var w=function(Q,ue){if(ue<Q.length+11)throw"Message too long for RSA";for(var oe=new Array,ce=Q.length-1;ce>=0&&ue>0;){var he=Q.charCodeAt(ce--);he<128?oe[--ue]=he:he>127&&he<2048?(oe[--ue]=63&he|128,oe[--ue]=he>>6|192):(oe[--ue]=63&he|128,oe[--ue]=he>>6&63|128,oe[--ue]=he>>12|224)}oe[--ue]=0;for(var ye=new Mt,be=new Array;ue>2;){for(be[0]=0;be[0]==0;)ye.nextBytes(be);oe[--ue]=be[0]}return oe[--ue]=2,oe[--ue]=0,new M(oe)}(y,this.n.bitLength()+7>>3);if(w==null)return null;var A=this.doPublic(w);if(A==null)return null;var U=A.toString(16);return 1&U.length?"0"+U:U},ee.prototype.encryptOAEP=function(y,w,A){var U=function(oe,ce,he,ye){var be=k.crypto.MessageDigest,Pe=k.crypto.Util,He=null;if(he||(he="sha1"),typeof he=="string"&&(He=be.getCanonicalAlgName(he),ye=be.getHashLength(He),he=function(pt){return ut(Pe.hashHex(ot(pt),He))}),oe.length+2*ye+2>ce)throw"Message too long for RSA";var ze,Qe="";for(ze=0;ze<ce-oe.length-2*ye-2;ze+=1)Qe+="\0";var te=he("")+Qe+""+oe,pe=new Array(ye);new Mt().nextBytes(pe);var ve=Lr(pe,te.length,he),Ee=[];for(ze=0;ze<te.length;ze+=1)Ee[ze]=te.charCodeAt(ze)^ve.charCodeAt(ze);var We=Lr(Ee,pe.length,he),Ye=[0];for(ze=0;ze<pe.length;ze+=1)Ye[ze+1]=pe[ze]^We.charCodeAt(ze);return new M(Ye.concat(Ee))}(y,this.n.bitLength()+7>>3,w,A);if(U==null)return null;var W=this.doPublic(U);if(W==null)return null;var Q=W.toString(16);return 1&Q.length?"0"+Q:Q},ee.prototype.type="RSA",de.prototype.equals=function(y){return y==this||this.q.equals(y.q)&&this.x.equals(y.x)},de.prototype.toBigInteger=function(){return this.x},de.prototype.negate=function(){return new de(this.q,this.x.negate().mod(this.q))},de.prototype.add=function(y){return new de(this.q,this.x.add(y.toBigInteger()).mod(this.q))},de.prototype.subtract=function(y){return new de(this.q,this.x.subtract(y.toBigInteger()).mod(this.q))},de.prototype.multiply=function(y){return new de(this.q,this.x.multiply(y.toBigInteger()).mod(this.q))},de.prototype.square=function(){return new de(this.q,this.x.square().mod(this.q))},de.prototype.divide=function(y){return new de(this.q,this.x.multiply(y.toBigInteger().modInverse(this.q)).mod(this.q))},K.prototype.getX=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},K.prototype.getY=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},K.prototype.equals=function(y){return y==this||(this.isInfinity()?y.isInfinity():y.isInfinity()?this.isInfinity():!!y.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(y.z)).mod(this.curve.q).equals(M.ZERO)&&y.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(y.z)).mod(this.curve.q).equals(M.ZERO))},K.prototype.isInfinity=function(){return this.x==null&&this.y==null||this.z.equals(M.ZERO)&&!this.y.toBigInteger().equals(M.ZERO)},K.prototype.negate=function(){return new K(this.curve,this.x,this.y.negate(),this.z)},K.prototype.add=function(y){if(this.isInfinity())return y;if(y.isInfinity())return this;var w=y.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(y.z)).mod(this.curve.q),A=y.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(y.z)).mod(this.curve.q);if(M.ZERO.equals(A))return M.ZERO.equals(w)?this.twice():this.curve.getInfinity();var U=new M("3"),W=this.x.toBigInteger(),Q=this.y.toBigInteger(),ue=(y.x.toBigInteger(),y.y.toBigInteger(),A.square()),oe=ue.multiply(A),ce=W.multiply(ue),he=w.square().multiply(this.z),ye=he.subtract(ce.shiftLeft(1)).multiply(y.z).subtract(oe).multiply(A).mod(this.curve.q),be=ce.multiply(U).multiply(w).subtract(Q.multiply(oe)).subtract(he.multiply(w)).multiply(y.z).add(w.multiply(oe)).mod(this.curve.q),Pe=oe.multiply(this.z).multiply(y.z).mod(this.curve.q);return new K(this.curve,this.curve.fromBigInteger(ye),this.curve.fromBigInteger(be),Pe)},K.prototype.twice=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var y=new M("3"),w=this.x.toBigInteger(),A=this.y.toBigInteger(),U=A.multiply(this.z),W=U.multiply(A).mod(this.curve.q),Q=this.curve.a.toBigInteger(),ue=w.square().multiply(y);M.ZERO.equals(Q)||(ue=ue.add(this.z.square().multiply(Q)));var oe=(ue=ue.mod(this.curve.q)).square().subtract(w.shiftLeft(3).multiply(W)).shiftLeft(1).multiply(U).mod(this.curve.q),ce=ue.multiply(y).multiply(w).subtract(W.shiftLeft(1)).shiftLeft(2).multiply(W).subtract(ue.square().multiply(ue)).mod(this.curve.q),he=U.square().multiply(U).shiftLeft(3).mod(this.curve.q);return new K(this.curve,this.curve.fromBigInteger(oe),this.curve.fromBigInteger(ce),he)},K.prototype.multiply=function(y){if(this.isInfinity())return this;if(y.signum()==0)return this.curve.getInfinity();var w,A=y,U=A.multiply(new M("3")),W=this.negate(),Q=this,ue=this.curve.q.subtract(y),oe=ue.multiply(new M("3")),ce=new K(this.curve,this.x,this.y),he=ce.negate();for(w=U.bitLength()-2;w>0;--w){Q=Q.twice();var ye=U.testBit(w);ye!=A.testBit(w)&&(Q=Q.add(ye?this:W))}for(w=oe.bitLength()-2;w>0;--w){ce=ce.twice();var be=oe.testBit(w);be!=ue.testBit(w)&&(ce=ce.add(be?ce:he))}return Q},K.prototype.multiplyTwo=function(y,w,A){var U;U=y.bitLength()>A.bitLength()?y.bitLength()-1:A.bitLength()-1;for(var W=this.curve.getInfinity(),Q=this.add(w);U>=0;)W=W.twice(),y.testBit(U)?W=A.testBit(U)?W.add(Q):W.add(this):A.testBit(U)&&(W=W.add(w)),--U;return W},P.prototype.getQ=function(){return this.q},P.prototype.getA=function(){return this.a},P.prototype.getB=function(){return this.b},P.prototype.equals=function(y){return y==this||this.q.equals(y.q)&&this.a.equals(y.a)&&this.b.equals(y.b)},P.prototype.getInfinity=function(){return this.infinity},P.prototype.fromBigInteger=function(y){return new de(this.q,y)},P.prototype.decodePointHex=function(y){switch(parseInt(y.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var w=(y.length-2)/2,A=y.substr(2,w),U=y.substr(w+2,w);return new K(this,this.fromBigInteger(new M(A,16)),this.fromBigInteger(new M(U,16)));default:return null}},de.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},K.prototype.getEncoded=function(h){var y=function(Q,ue){var oe=Q.toByteArrayUnsigned();if(ue<oe.length)oe=oe.slice(oe.length-ue);else for(;ue>oe.length;)oe.unshift(0);return oe},w=this.getX().toBigInteger(),A=this.getY().toBigInteger(),U=y(w,32);return h?A.isEven()?U.unshift(2):U.unshift(3):(U.unshift(4),U=U.concat(y(A,32))),U},K.decodeFrom=function(h,y){y[0];var w=y.length-1,A=y.slice(1,1+w/2),U=y.slice(1+w/2,1+w);A.unshift(0),U.unshift(0);var W=new M(A),Q=new M(U);return new K(h,h.fromBigInteger(W),h.fromBigInteger(Q))},K.decodeFromHex=function(h,y){y.substr(0,2);var w=y.length-2,A=y.substr(2,w/2),U=y.substr(2+w/2,w/2),W=new M(A,16),Q=new M(U,16);return new K(h,h.fromBigInteger(W),h.fromBigInteger(Q))},K.prototype.add2D=function(h){if(this.isInfinity())return h;if(h.isInfinity())return this;if(this.x.equals(h.x))return this.y.equals(h.y)?this.twice():this.curve.getInfinity();var y=h.x.subtract(this.x),w=h.y.subtract(this.y).divide(y),A=w.square().subtract(this.x).subtract(h.x),U=w.multiply(this.x.subtract(A)).subtract(this.y);return new K(this.curve,A,U)},K.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var h=this.curve.fromBigInteger(M.valueOf(2)),y=this.curve.fromBigInteger(M.valueOf(3)),w=this.x.square().multiply(y).add(this.curve.a).divide(this.y.multiply(h)),A=w.square().subtract(this.x.multiply(h)),U=w.multiply(this.x.subtract(A)).subtract(this.y);return new K(this.curve,A,U)},K.prototype.multiply2D=function(h){if(this.isInfinity())return this;if(h.signum()==0)return this.curve.getInfinity();var y,w=h,A=w.multiply(new M("3")),U=this.negate(),W=this;for(y=A.bitLength()-2;y>0;--y){W=W.twice();var Q=A.testBit(y);Q!=w.testBit(y)&&(W=W.add2D(Q?this:U))}return W},K.prototype.isOnCurve=function(){var h=this.getX().toBigInteger(),y=this.getY().toBigInteger(),w=this.curve.getA().toBigInteger(),A=this.curve.getB().toBigInteger(),U=this.curve.getQ(),W=y.multiply(y).mod(U),Q=h.multiply(h).multiply(h).add(w.multiply(h)).add(A).mod(U);return W.equals(Q)},K.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},K.prototype.validate=function(){var h=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var y=this.getX().toBigInteger(),w=this.getY().toBigInteger();if(y.compareTo(M.ONE)<0||y.compareTo(h.subtract(M.ONE))>0)throw new Error("x coordinate out of bounds");if(w.compareTo(M.ONE)<0||w.compareTo(h.subtract(M.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(h).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var L=function(){var h=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),y=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),w={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function A(Q,ue,oe){return ue?w[ue]:String.fromCharCode(parseInt(oe,16))}var U=new String(""),W=Object.hasOwnProperty;return function(Q,ue){var oe,ce,he=Q.match(h),ye=he[0],be=!1;ye==="{"?oe={}:ye==="["?oe=[]:(oe=[],be=!0);for(var Pe=[oe],He=1-be,ze=he.length;He<ze;++He){var Qe;switch((ye=he[He]).charCodeAt(0)){default:(Qe=Pe[0])[ce||Qe.length]=+ye,ce=void 0;break;case 34:if((ye=ye.substring(1,ye.length-1)).indexOf("\\")!==-1&&(ye=ye.replace(y,A)),Qe=Pe[0],!ce){if(!(Qe instanceof Array)){ce=ye||U;break}ce=Qe.length}Qe[ce]=ye,ce=void 0;break;case 91:Qe=Pe[0],Pe.unshift(Qe[ce||Qe.length]=[]),ce=void 0;break;case 93:Pe.shift();break;case 102:(Qe=Pe[0])[ce||Qe.length]=!1,ce=void 0;break;case 110:(Qe=Pe[0])[ce||Qe.length]=null,ce=void 0;break;case 116:(Qe=Pe[0])[ce||Qe.length]=!0,ce=void 0;break;case 123:Qe=Pe[0],Pe.unshift(Qe[ce||Qe.length]={}),ce=void 0;break;case 125:Pe.shift()}}if(be){if(Pe.length!==1)throw new Error;oe=oe[0]}else if(Pe.length)throw new Error;return ue&&(oe=function te(pe,ve){var Ee=pe[ve];if(Ee&&(Ee===void 0?"undefined":S(Ee))==="object"){var We=null;for(var Ye in Ee)if(W.call(Ee,Ye)&&Ee!==pe){var Vt=te(Ee,Ye);Vt!==void 0?Ee[Ye]=Vt:(We||(We=[]),We.push(Ye))}if(We)for(var pt=We.length;--pt>=0;)delete Ee[We[pt]]}return ue.call(pe,ve,Ee)}({"":oe},"")),oe}}();k!==void 0&&k||(n.KJUR=k={}),k.asn1!==void 0&&k.asn1||(k.asn1={}),k.asn1.ASN1Util=new function(){this.integerToByteHex=function(h){var y=h.toString(16);return y.length%2==1&&(y="0"+y),y},this.bigIntToMinTwosComplementsHex=function(h){var y=h.toString(16);if(y.substr(0,1)!="-")y.length%2==1?y="0"+y:y.match(/^[0-7]/)||(y="00"+y);else{var w=y.substr(1).length;w%2==1?w+=1:y.match(/^[0-7]/)||(w+=2);for(var A="",U=0;U<w;U++)A+="f";y=new M(A,16).xor(h).add(M.ONE).toString(16).replace(/^-/,"")}return y},this.getPEMStringFromHex=function(h,y){return zt(h,y)},this.newObject=function(h){var y=k.asn1,w=y.ASN1Object,A=y.DERBoolean,U=y.DERInteger,W=y.DERBitString,Q=y.DEROctetString,ue=y.DERNull,oe=y.DERObjectIdentifier,ce=y.DEREnumerated,he=y.DERUTF8String,ye=y.DERNumericString,be=y.DERPrintableString,Pe=y.DERTeletexString,He=y.DERIA5String,ze=y.DERUTCTime,Qe=y.DERGeneralizedTime,te=y.DERVisibleString,pe=y.DERBMPString,ve=y.DERSequence,Ee=y.DERSet,We=y.DERTaggedObject,Ye=y.ASN1Util.newObject;if(h instanceof y.ASN1Object)return h;var Vt=Object.keys(h);if(Vt.length!=1)throw new Error("key of param shall be only one.");var pt=Vt[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+pt+":")==-1)throw new Error("undefined key: "+pt);if(pt=="bool")return new A(h[pt]);if(pt=="int")return new U(h[pt]);if(pt=="bitstr")return new W(h[pt]);if(pt=="octstr")return new Q(h[pt]);if(pt=="null")return new ue(h[pt]);if(pt=="oid")return new oe(h[pt]);if(pt=="enum")return new ce(h[pt]);if(pt=="utf8str")return new he(h[pt]);if(pt=="numstr")return new ye(h[pt]);if(pt=="prnstr")return new be(h[pt]);if(pt=="telstr")return new Pe(h[pt]);if(pt=="ia5str")return new He(h[pt]);if(pt=="utctime")return new ze(h[pt]);if(pt=="gentime")return new Qe(h[pt]);if(pt=="visstr")return new te(h[pt]);if(pt=="bmpstr")return new pe(h[pt]);if(pt=="asn1")return new w(h[pt]);if(pt=="seq"){for(var Tr=h[pt],kt=[],Jt=0;Jt<Tr.length;Jt++){var qt=Ye(Tr[Jt]);kt.push(qt)}return new ve({array:kt})}if(pt=="set"){for(Tr=h[pt],kt=[],Jt=0;Jt<Tr.length;Jt++)qt=Ye(Tr[Jt]),kt.push(qt);return new Ee({array:kt})}if(pt=="tag"){var Ur=h[pt];if(Object.prototype.toString.call(Ur)==="[object Array]"&&Ur.length==3){var _r=Ye(Ur[2]);return new We({tag:Ur[0],explicit:Ur[1],obj:_r})}return new We(Ur)}},this.jsonToASN1HEX=function(h){return this.newObject(h).getEncodedHex()}},k.asn1.ASN1Util.oidHexToInt=function(h){for(var y="",w=parseInt(h.substr(0,2),16),A=(y=Math.floor(w/40)+"."+w%40,""),U=2;U<h.length;U+=2){var W=("00000000"+parseInt(h.substr(U,2),16).toString(2)).slice(-8);A+=W.substr(1,7),W.substr(0,1)=="0"&&(y=y+"."+new M(A,2).toString(10),A="")}return y},k.asn1.ASN1Util.oidIntToHex=function(h){var y=function(oe){var ce=oe.toString(16);return ce.length==1&&(ce="0"+ce),ce},w=function(oe){var ce="",he=new M(oe,10).toString(2),ye=7-he.length%7;ye==7&&(ye=0);for(var be="",Pe=0;Pe<ye;Pe++)be+="0";for(he=be+he,Pe=0;Pe<he.length-1;Pe+=7){var He=he.substr(Pe,7);Pe!=he.length-7&&(He="1"+He),ce+=y(parseInt(He,2))}return ce};if(!h.match(/^[0-9.]+$/))throw"malformed oid string: "+h;var A="",U=h.split("."),W=40*parseInt(U[0])+parseInt(U[1]);A+=y(W),U.splice(0,2);for(var Q=0;Q<U.length;Q++)A+=w(U[Q]);return A},k.asn1.ASN1Object=function(h){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var y=this.hV.length/2,w=y.toString(16);if(w.length%2==1&&(w="0"+w),y<128)return w;var A=w.length/2;if(A>15)throw"ASN.1 length too long to represent by 8x: n = "+y.toString(16);return(128+A).toString(16)+w},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(y){this.params=y},h!=null&&h.tlv!=null&&(this.hTLV=h.tlv,this.isModified=!1)},k.asn1.DERAbstractString=function(h){k.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(y){this.hTLV=null,this.isModified=!0,this.s=y,this.hV=Ke(this.s).toLowerCase()},this.setStringHex=function(y){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=y},this.getFreshValueHex=function(){return this.hV},h!==void 0&&(typeof h=="string"?this.setString(h):h.str!==void 0?this.setString(h.str):h.hex!==void 0&&this.setStringHex(h.hex))},Kt(k.asn1.DERAbstractString,k.asn1.ASN1Object),k.asn1.DERAbstractTime=function(h){k.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(y){var w=y.getTime()+6e4*y.getTimezoneOffset();return new Date(w)},this.formatDate=function(y,w,A){var U=this.zeroPadding,W=this.localDateToUTC(y),Q=String(W.getFullYear());w=="utc"&&(Q=Q.substr(2,2));var ue=Q+U(String(W.getMonth()+1),2)+U(String(W.getDate()),2)+U(String(W.getHours()),2)+U(String(W.getMinutes()),2)+U(String(W.getSeconds()),2);if(A===!0){var oe=W.getMilliseconds();if(oe!=0){var ce=U(String(oe),3);ue=ue+"."+(ce=ce.replace(/[0]+$/,""))}}return ue+"Z"},this.zeroPadding=function(y,w){return y.length>=w?y:new Array(w-y.length+1).join("0")+y},this.getString=function(){return this.s},this.setString=function(y){this.hTLV=null,this.isModified=!0,this.s=y,this.hV=xt(y)},this.setByDateValue=function(y,w,A,U,W,Q){var ue=new Date(Date.UTC(y,w-1,A,U,W,Q,0));this.setByDate(ue)},this.getFreshValueHex=function(){return this.hV}},Kt(k.asn1.DERAbstractTime,k.asn1.ASN1Object),k.asn1.DERAbstractStructured=function(h){k.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(y){this.hTLV=null,this.isModified=!0,this.asn1Array=y},this.appendASN1Object=function(y){this.hTLV=null,this.isModified=!0,this.asn1Array.push(y)},this.asn1Array=new Array,h!==void 0&&h.array!==void 0&&(this.asn1Array=h.array)},Kt(k.asn1.DERAbstractStructured,k.asn1.ASN1Object),k.asn1.DERBoolean=function(h){k.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=h==0?"010100":"0101ff"},Kt(k.asn1.DERBoolean,k.asn1.ASN1Object),k.asn1.DERInteger=function(h){k.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(y){this.hTLV=null,this.isModified=!0,this.hV=k.asn1.ASN1Util.bigIntToMinTwosComplementsHex(y)},this.setByInteger=function(y){var w=new M(String(y),10);this.setByBigInteger(w)},this.setValueHex=function(y){this.hV=y},this.getFreshValueHex=function(){return this.hV},h!==void 0&&(h.bigint!==void 0?this.setByBigInteger(h.bigint):h.int!==void 0?this.setByInteger(h.int):typeof h=="number"?this.setByInteger(h):h.hex!==void 0&&this.setValueHex(h.hex))},Kt(k.asn1.DERInteger,k.asn1.ASN1Object),k.asn1.DERBitString=function(h){if(h!==void 0&&h.obj!==void 0){var y=k.asn1.ASN1Util.newObject(h.obj);h.hex="00"+y.getEncodedHex()}k.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(w){this.hTLV=null,this.isModified=!0,this.hV=w},this.setUnusedBitsAndHexValue=function(w,A){if(w<0||7<w)throw"unused bits shall be from 0 to 7: u = "+w;var U="0"+w;this.hTLV=null,this.isModified=!0,this.hV=U+A},this.setByBinaryString=function(w){var A=8-(w=w.replace(/0+$/,"")).length%8;A==8&&(A=0);for(var U=0;U<=A;U++)w+="0";var W="";for(U=0;U<w.length-1;U+=8){var Q=w.substr(U,8),ue=parseInt(Q,2).toString(16);ue.length==1&&(ue="0"+ue),W+=ue}this.hTLV=null,this.isModified=!0,this.hV="0"+A+W},this.setByBooleanArray=function(w){for(var A="",U=0;U<w.length;U++)w[U]==1?A+="1":A+="0";this.setByBinaryString(A)},this.newFalseArray=function(w){for(var A=new Array(w),U=0;U<w;U++)A[U]=!1;return A},this.getFreshValueHex=function(){return this.hV},h!==void 0&&(typeof h=="string"&&h.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(h):h.hex!==void 0?this.setHexValueIncludingUnusedBits(h.hex):h.bin!==void 0?this.setByBinaryString(h.bin):h.array!==void 0&&this.setByBooleanArray(h.array))},Kt(k.asn1.DERBitString,k.asn1.ASN1Object),k.asn1.DEROctetString=function(h){if(h!==void 0&&h.obj!==void 0){var y=k.asn1.ASN1Util.newObject(h.obj);h.hex=y.getEncodedHex()}k.asn1.DEROctetString.superclass.constructor.call(this,h),this.hT="04"},Kt(k.asn1.DEROctetString,k.asn1.DERAbstractString),k.asn1.DERNull=function(){k.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Kt(k.asn1.DERNull,k.asn1.ASN1Object),k.asn1.DERObjectIdentifier=function(h){k.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(y){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=y},this.setValueOidString=function(y){var w=function(U){var W=function(be){var Pe=be.toString(16);return Pe.length==1&&(Pe="0"+Pe),Pe},Q=function(be){var Pe="",He=parseInt(be,10).toString(2),ze=7-He.length%7;ze==7&&(ze=0);for(var Qe="",te=0;te<ze;te++)Qe+="0";for(He=Qe+He,te=0;te<He.length-1;te+=7){var pe=He.substr(te,7);te!=He.length-7&&(pe="1"+pe),Pe+=W(parseInt(pe,2))}return Pe};try{if(!U.match(/^[0-9.]+$/))return null;var ue="",oe=U.split("."),ce=40*parseInt(oe[0],10)+parseInt(oe[1],10);ue+=W(ce),oe.splice(0,2);for(var he=0;he<oe.length;he++)ue+=Q(oe[he]);return ue}catch{return null}}(y);if(w==null)throw new Error("malformed oid string: "+y);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=w},this.setValueName=function(y){var w=k.asn1.x509.OID.name2oid(y);if(w==="")throw new Error("DERObjectIdentifier oidName undefined: "+y);this.setValueOidString(w)},this.setValueNameOrOid=function(y){y.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(y):this.setValueName(y)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(y){typeof y=="string"?this.setValueNameOrOid(y):y.oid!==void 0?this.setValueNameOrOid(y.oid):y.name!==void 0?this.setValueNameOrOid(y.name):y.hex!==void 0&&this.setValueHex(y.hex)},h!==void 0&&this.setByParam(h)},Kt(k.asn1.DERObjectIdentifier,k.asn1.ASN1Object),k.asn1.DEREnumerated=function(h){k.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(y){this.hTLV=null,this.isModified=!0,this.hV=k.asn1.ASN1Util.bigIntToMinTwosComplementsHex(y)},this.setByInteger=function(y){var w=new M(String(y),10);this.setByBigInteger(w)},this.setValueHex=function(y){this.hV=y},this.getFreshValueHex=function(){return this.hV},h!==void 0&&(h.int!==void 0?this.setByInteger(h.int):typeof h=="number"?this.setByInteger(h):h.hex!==void 0&&this.setValueHex(h.hex))},Kt(k.asn1.DEREnumerated,k.asn1.ASN1Object),k.asn1.DERUTF8String=function(h){k.asn1.DERUTF8String.superclass.constructor.call(this,h),this.hT="0c"},Kt(k.asn1.DERUTF8String,k.asn1.DERAbstractString),k.asn1.DERNumericString=function(h){k.asn1.DERNumericString.superclass.constructor.call(this,h),this.hT="12"},Kt(k.asn1.DERNumericString,k.asn1.DERAbstractString),k.asn1.DERPrintableString=function(h){k.asn1.DERPrintableString.superclass.constructor.call(this,h),this.hT="13"},Kt(k.asn1.DERPrintableString,k.asn1.DERAbstractString),k.asn1.DERTeletexString=function(h){k.asn1.DERTeletexString.superclass.constructor.call(this,h),this.hT="14"},Kt(k.asn1.DERTeletexString,k.asn1.DERAbstractString),k.asn1.DERIA5String=function(h){k.asn1.DERIA5String.superclass.constructor.call(this,h),this.hT="16"},Kt(k.asn1.DERIA5String,k.asn1.DERAbstractString),k.asn1.DERVisibleString=function(h){k.asn1.DERIA5String.superclass.constructor.call(this,h),this.hT="1a"},Kt(k.asn1.DERVisibleString,k.asn1.DERAbstractString),k.asn1.DERBMPString=function(h){k.asn1.DERBMPString.superclass.constructor.call(this,h),this.hT="1e"},Kt(k.asn1.DERBMPString,k.asn1.DERAbstractString),k.asn1.DERUTCTime=function(h){k.asn1.DERUTCTime.superclass.constructor.call(this,h),this.hT="17",this.setByDate=function(y){this.hTLV=null,this.isModified=!0,this.date=y,this.s=this.formatDate(this.date,"utc"),this.hV=xt(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=xt(this.s)),this.hV},h!==void 0&&(h.str!==void 0?this.setString(h.str):typeof h=="string"&&h.match(/^[0-9]{12}Z$/)?this.setString(h):h.hex!==void 0?this.setStringHex(h.hex):h.date!==void 0&&this.setByDate(h.date))},Kt(k.asn1.DERUTCTime,k.asn1.DERAbstractTime),k.asn1.DERGeneralizedTime=function(h){k.asn1.DERGeneralizedTime.superclass.constructor.call(this,h),this.hT="18",this.withMillis=!1,this.setByDate=function(y){this.hTLV=null,this.isModified=!0,this.date=y,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=xt(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=xt(this.s)),this.hV},h!==void 0&&(h.str!==void 0?this.setString(h.str):typeof h=="string"&&h.match(/^[0-9]{14}Z$/)?this.setString(h):h.hex!==void 0?this.setStringHex(h.hex):h.date!==void 0&&this.setByDate(h.date),h.millis===!0&&(this.withMillis=!0))},Kt(k.asn1.DERGeneralizedTime,k.asn1.DERAbstractTime),k.asn1.DERSequence=function(h){k.asn1.DERSequence.superclass.constructor.call(this,h),this.hT="30",this.getFreshValueHex=function(){for(var y="",w=0;w<this.asn1Array.length;w++)y+=this.asn1Array[w].getEncodedHex();return this.hV=y,this.hV}},Kt(k.asn1.DERSequence,k.asn1.DERAbstractStructured),k.asn1.DERSet=function(h){k.asn1.DERSet.superclass.constructor.call(this,h),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var y=new Array,w=0;w<this.asn1Array.length;w++){var A=this.asn1Array[w];y.push(A.getEncodedHex())}return this.sortFlag==1&&y.sort(),this.hV=y.join(""),this.hV},h!==void 0&&h.sortflag!==void 0&&h.sortflag==0&&(this.sortFlag=!1)},Kt(k.asn1.DERSet,k.asn1.DERAbstractStructured),k.asn1.DERTaggedObject=function(h){k.asn1.DERTaggedObject.superclass.constructor.call(this);var y=k.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(w,A,U){this.hT=A,this.isExplicit=w,this.asn1Object=U,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=U.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,A),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(w){w.tag!=null&&(this.hT=w.tag),w.explicit!=null&&(this.isExplicit=w.explicit),w.tage!=null&&(this.hT=w.tage,this.isExplicit=!0),w.tagi!=null&&(this.hT=w.tagi,this.isExplicit=!1),w.obj!=null&&(w.obj instanceof y.ASN1Object?(this.asn1Object=w.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):S(w.obj)=="object"&&(this.asn1Object=y.ASN1Util.newObject(w.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},h!=null&&this.setByParam(h)},Kt(k.asn1.DERTaggedObject,k.asn1.ASN1Object);var k,ge,xe,ae=new function(){};function bt(h){for(var y=new Array,w=0;w<h.length;w++)y[w]=h.charCodeAt(w);return y}function Wt(h){for(var y="",w=0;w<h.length;w++)y+=String.fromCharCode(h[w]);return y}function Rt(h){for(var y="",w=0;w<h.length;w++){var A=h[w].toString(16);A.length==1&&(A="0"+A),y+=A}return y}function xt(h){return Rt(bt(h))}function Se(h){return h=(h=(h=h.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ve(h){return h.length%4==2?h+="==":h.length%4==3&&(h+="="),h=(h=h.replace(/-/g,"+")).replace(/_/g,"/")}function Oe(h){return h.length%2==1&&(h="0"+h),Se(F(h))}function _e(h){return ne(Ve(h))}function Ke(h){return Ot(Sr(h))}function ht(h){return decodeURIComponent(mr(h))}function ut(h){for(var y="",w=0;w<h.length-1;w+=2)y+=String.fromCharCode(parseInt(h.substr(w,2),16));return y}function ot(h){for(var y="",w=0;w<h.length;w++)y+=("0"+h.charCodeAt(w).toString(16)).slice(-2);return y}function yt(h){return F(h)}function Ht(h){var y=yt(h).replace(/(.{64})/g,`$1\r
`);return y=y.replace(/\r\n$/,"")}function Qt(h){return ne(h.replace(/[^0-9A-Za-z\/+=]*/g,""))}function zt(h,y){return"-----BEGIN "+y+`-----\r
`+Ht(h)+`\r
-----END `+y+`-----\r
`}function Yt(h,y){if(h.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+y;return Qt(h=y!==void 0?(h=h.replace(new RegExp("^[^]*-----BEGIN "+y+"-----"),"")).replace(new RegExp("-----END "+y+"-----[^]*$"),""):(h=h.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function fr(h){var y,w,A,U,W,Q,ue,oe,ce,he,ye;if(ye=h.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return oe=ye[1],y=parseInt(oe),oe.length===2&&(50<=y&&y<100?y=1900+y:0<=y&&y<50&&(y=2e3+y)),w=parseInt(ye[2])-1,A=parseInt(ye[3]),U=parseInt(ye[4]),W=parseInt(ye[5]),Q=parseInt(ye[6]),ue=0,(ce=ye[7])!==""&&(he=(ce.substr(1)+"00").substr(0,3),ue=parseInt(he)),Date.UTC(y,w,A,U,W,Q,ue);throw"unsupported zulu format: "+h}function Zt(h){return~~(fr(h)/1e3)}function Ot(h){return h.replace(/%/g,"")}function mr(h){return h.replace(/(..)/g,"%$1")}function wt(h){var y="malformed IPv6 address";if(!h.match(/^[0-9A-Fa-f:]+$/))throw y;var w=(h=h.toLowerCase()).split(":").length-1;if(w<2)throw y;var A=":".repeat(7-w+2),U=(h=h.replace("::",A)).split(":");if(U.length!=8)throw y;for(var W=0;W<8;W++)U[W]=("0000"+U[W]).slice(-4);return U.join("")}function It(h){if(!h.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var y=(h=h.toLowerCase()).match(/.{1,4}/g),w=0;w<8;w++)y[w]=y[w].replace(/^0+/,""),y[w]==""&&(y[w]="0");var A=(h=":"+y.join(":")+":").match(/:(0:){2,}/g);if(A===null)return h.slice(1,-1);var U="";for(w=0;w<A.length;w++)A[w].length>U.length&&(U=A[w]);return(h=h.replace(U,"::")).slice(1,-1)}function Gt(h){var y="malformed hex value";if(!h.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw y;if(h.length!=8)return h.length==32?It(h):h;try{return parseInt(h.substr(0,2),16)+"."+parseInt(h.substr(2,2),16)+"."+parseInt(h.substr(4,2),16)+"."+parseInt(h.substr(6,2),16)}catch{throw y}}function Lt(h){return h.match(/.{4}/g).map(function(w){var A=parseInt(w.substr(0,2),16),U=parseInt(w.substr(2),16);if(A==0&U<128)return String.fromCharCode(U);if(A<8){var W=128|63&U;return ht((192|(7&A)<<3|(192&U)>>6).toString(16)+W.toString(16))}W=128|(15&A)<<2|(192&U)>>6;var Q=128|63&U;return ht((224|(240&A)>>4).toString(16)+W.toString(16)+Q.toString(16))}).join("")}function Sr(h){for(var y=encodeURIComponent(h),w="",A=0;A<y.length;A++)y[A]=="%"?(w+=y.substr(A,3),A+=2):w=w+"%"+xt(y[A]);return w}function sr(h){return!(h.length%2!=0||!h.match(/^[0-9a-f]+$/)&&!h.match(/^[0-9A-F]+$/))}function jr(h){return h.length%2==1?"0"+h:h.substr(0,1)>"7"?"00"+h:h}ae.getLblen=function(h,y){if(h.substr(y+2,1)!="8")return 1;var w=parseInt(h.substr(y+3,1));return w==0?-1:0<w&&w<10?w+1:-2},ae.getL=function(h,y){var w=ae.getLblen(h,y);return w<1?"":h.substr(y+2,2*w)},ae.getVblen=function(h,y){var w;return(w=ae.getL(h,y))==""?-1:(w.substr(0,1)==="8"?new M(w.substr(2),16):new M(w,16)).intValue()},ae.getVidx=function(h,y){var w=ae.getLblen(h,y);return w<0?w:y+2*(w+1)},ae.getV=function(h,y){var w=ae.getVidx(h,y),A=ae.getVblen(h,y);return h.substr(w,2*A)},ae.getTLV=function(h,y){return h.substr(y,2)+ae.getL(h,y)+ae.getV(h,y)},ae.getTLVblen=function(h,y){return 2+2*ae.getLblen(h,y)+2*ae.getVblen(h,y)},ae.getNextSiblingIdx=function(h,y){return ae.getVidx(h,y)+2*ae.getVblen(h,y)},ae.getChildIdx=function(h,y){var w,A,U,W=ae,Q=[];w=W.getVidx(h,y),A=2*W.getVblen(h,y),h.substr(y,2)=="03"&&(w+=2,A-=2),U=0;for(var ue=w;U<=A;){var oe=W.getTLVblen(h,ue);if((U+=oe)<=A&&Q.push(ue),ue+=oe,U>=A)break}return Q},ae.getNthChildIdx=function(h,y,w){return ae.getChildIdx(h,y)[w]},ae.getIdxbyList=function(h,y,w,A){var U,W,Q=ae;return w.length==0?A!==void 0&&h.substr(y,2)!==A?-1:y:(U=w.shift())>=(W=Q.getChildIdx(h,y)).length?-1:Q.getIdxbyList(h,W[U],w,A)},ae.getIdxbyListEx=function(h,y,w,A){var U,W,Q=ae;if(w.length==0)return A!==void 0&&h.substr(y,2)!==A?-1:y;U=w.shift(),W=Q.getChildIdx(h,y);for(var ue=0,oe=0;oe<W.length;oe++){var ce=h.substr(W[oe],2);if(typeof U=="number"&&!Q.isContextTag(ce)&&ue==U||typeof U=="string"&&Q.isContextTag(ce,U))return Q.getIdxbyListEx(h,W[oe],w,A);Q.isContextTag(ce)||ue++}return-1},ae.getTLVbyList=function(h,y,w,A){var U=ae,W=U.getIdxbyList(h,y,w,A);return W==-1||W>=h.length?null:U.getTLV(h,W)},ae.getTLVbyListEx=function(h,y,w,A){var U=ae,W=U.getIdxbyListEx(h,y,w,A);return W==-1?null:U.getTLV(h,W)},ae.getVbyList=function(h,y,w,A,U){var W,Q,ue=ae;return(W=ue.getIdxbyList(h,y,w,A))==-1||W>=h.length?null:(Q=ue.getV(h,W),U===!0&&(Q=Q.substr(2)),Q)},ae.getVbyListEx=function(h,y,w,A,U){var W,Q,ue=ae;return(W=ue.getIdxbyListEx(h,y,w,A))==-1?null:(Q=ue.getV(h,W),h.substr(W,2)=="03"&&U!==!1&&(Q=Q.substr(2)),Q)},ae.getInt=function(h,y,w){w==null&&(w=-1);try{var A=h.substr(y,2);if(A!="02"&&A!="03")return w;var U=ae.getV(h,y);return A=="02"?parseInt(U,16):function(Q){try{var ue=Q.substr(0,2);if(ue=="00")return parseInt(Q.substr(2),16);var oe=parseInt(ue,16),ce=Q.substr(2),he=parseInt(ce,16).toString(2);return he=="0"&&(he="00000000"),he=he.slice(0,0-oe),parseInt(he,2)}catch{return-1}}(U)}catch{return w}},ae.getOID=function(h,y,w){w==null&&(w=null);try{return h.substr(y,2)!="06"?w:function(U){if(!sr(U))return null;try{var W=[],Q=U.substr(0,2),ue=parseInt(Q,16);W[0]=new String(Math.floor(ue/40)),W[1]=new String(ue%40);for(var oe=U.substr(2),ce=[],he=0;he<oe.length/2;he++)ce.push(parseInt(oe.substr(2*he,2),16));var ye=[],be="";for(he=0;he<ce.length;he++)128&ce[he]?be+=nr((127&ce[he]).toString(2),7):(be+=nr((127&ce[he]).toString(2),7),ye.push(new String(parseInt(be,2))),be="");var Pe=W.join(".");return ye.length>0&&(Pe=Pe+"."+ye.join(".")),Pe}catch{return null}}(ae.getV(h,y))}catch{return w}},ae.getOIDName=function(h,y,w){w==null&&(w=null);try{var A=ae.getOID(h,y,w);if(A==w)return w;var U=k.asn1.x509.OID.oid2name(A);return U==""?A:U}catch{return w}},ae.getString=function(h,y,w){w==null&&(w=null);try{return ut(ae.getV(h,y))}catch{return w}},ae.hextooidstr=function(h){var y=function(be,Pe){return be.length>=Pe?be:new Array(Pe-be.length+1).join("0")+be},w=[],A=h.substr(0,2),U=parseInt(A,16);w[0]=new String(Math.floor(U/40)),w[1]=new String(U%40);for(var W=h.substr(2),Q=[],ue=0;ue<W.length/2;ue++)Q.push(parseInt(W.substr(2*ue,2),16));var oe=[],ce="";for(ue=0;ue<Q.length;ue++)128&Q[ue]?ce+=y((127&Q[ue]).toString(2),7):(ce+=y((127&Q[ue]).toString(2),7),oe.push(new String(parseInt(ce,2))),ce="");var he=w.join(".");return oe.length>0&&(he=he+"."+oe.join(".")),he},ae.dump=function(h,y,w,A){var U=ae,W=U.getV,Q=U.dump,ue=U.getChildIdx,oe=h;h instanceof k.asn1.ASN1Object&&(oe=h.getEncodedHex());var ce=function(pt,Tr){return pt.length<=2*Tr?pt:pt.substr(0,Tr)+"..(total "+pt.length/2+"bytes).."+pt.substr(pt.length-Tr,Tr)};y===void 0&&(y={ommit_long_octet:32}),w===void 0&&(w=0),A===void 0&&(A="");var he,ye=y.ommit_long_octet;if((he=oe.substr(w,2))=="01")return(be=W(oe,w))=="00"?A+`BOOLEAN FALSE
`:A+`BOOLEAN TRUE
`;if(he=="02")return A+"INTEGER "+ce(be=W(oe,w),ye)+`
`;if(he=="03"){var be=W(oe,w);if(U.isASN1HEX(be.substr(2))){var Pe=A+`BITSTRING, encapsulates
`;return Pe+=Q(be.substr(2),y,0,A+"  ")}return A+"BITSTRING "+ce(be,ye)+`
`}if(he=="04")return be=W(oe,w),U.isASN1HEX(be)?(Pe=A+`OCTETSTRING, encapsulates
`,Pe+=Q(be,y,0,A+"  ")):A+"OCTETSTRING "+ce(be,ye)+`
`;if(he=="05")return A+`NULL
`;if(he=="06"){var He=W(oe,w),ze=k.asn1.ASN1Util.oidHexToInt(He),Qe=k.asn1.x509.OID.oid2name(ze),te=ze.replace(/\./g," ");return Qe!=""?A+"ObjectIdentifier "+Qe+" ("+te+`)
`:A+"ObjectIdentifier ("+te+`)
`}if(he=="0a")return A+"ENUMERATED "+parseInt(W(oe,w))+`
`;if(he=="0c")return A+"UTF8String '"+ht(W(oe,w))+`'
`;if(he=="13")return A+"PrintableString '"+ht(W(oe,w))+`'
`;if(he=="14")return A+"TeletexString '"+ht(W(oe,w))+`'
`;if(he=="16")return A+"IA5String '"+ht(W(oe,w))+`'
`;if(he=="17")return A+"UTCTime "+ht(W(oe,w))+`
`;if(he=="18")return A+"GeneralizedTime "+ht(W(oe,w))+`
`;if(he=="1a")return A+"VisualString '"+ht(W(oe,w))+`'
`;if(he=="1e")return A+"BMPString '"+Lt(W(oe,w))+`'
`;if(he=="30"){if(oe.substr(w,4)=="3000")return A+`SEQUENCE {}
`;Pe=A+`SEQUENCE
`;var pe=y;if(((We=ue(oe,w)).length==2||We.length==3)&&oe.substr(We[0],2)=="06"&&oe.substr(We[We.length-1],2)=="04"){Qe=U.oidname(W(oe,We[0]));var ve=JSON.parse(JSON.stringify(y));ve.x509ExtName=Qe,pe=ve}for(var Ee=0;Ee<We.length;Ee++)Pe+=Q(oe,pe,We[Ee],A+"  ");return Pe}if(he=="31"){Pe=A+`SET
`;var We=ue(oe,w);for(Ee=0;Ee<We.length;Ee++)Pe+=Q(oe,y,We[Ee],A+"  ");return Pe}if(128&(he=parseInt(he,16))){var Ye=31&he;if(32&he){for(Pe=A+"["+Ye+`]
`,We=ue(oe,w),Ee=0;Ee<We.length;Ee++)Pe+=Q(oe,y,We[Ee],A+"  ");return Pe}if(be=W(oe,w),ae.isASN1HEX(be)){var Pe=A+"["+Ye+`]
`;return Pe+=Q(be,y,0,A+"  ")}return(be.substr(0,8)=="68747470"||y.x509ExtName==="subjectAltName"&&Ye==2)&&(be=ht(be)),Pe=A+"["+Ye+"] "+be+`
`}return A+"UNKNOWN("+he+") "+W(oe,w)+`
`},ae.isContextTag=function(h,y){var w,A;h=h.toLowerCase();try{w=parseInt(h,16)}catch{return-1}if(y===void 0)return(192&w)==128;try{return y.match(/^\[[0-9]+\]$/)!=null&&!((A=parseInt(y.substr(1,y.length-1),10))>31)&&(192&w)==128&&(31&w)==A}catch{return!1}},ae.isASN1HEX=function(h){var y=ae;if(h.length%2==1)return!1;var w=y.getVblen(h,0),A=h.substr(0,2),U=y.getL(h,0);return h.length-A.length-U.length==2*w},ae.checkStrictDER=function(h,y,w,A,U){var W=ae;if(w===void 0){if(typeof h!="string")throw new Error("not hex string");if(h=h.toLowerCase(),!k.lang.String.isHex(h))throw new Error("not hex string");w=h.length,U=(A=h.length/2)<128?1:Math.ceil(A.toString(16))+1}if(W.getL(h,y).length>2*U)throw new Error("L of TLV too long: idx="+y);var Q=W.getVblen(h,y);if(Q>A)throw new Error("value of L too long than hex: idx="+y);var ue=W.getTLV(h,y),oe=ue.length-2-W.getL(h,y).length;if(oe!==2*Q)throw new Error("V string length and L's value not the same:"+oe+"/"+2*Q);if(y===0&&h.length!=ue.length)throw new Error("total length and TLV length unmatch:"+h.length+"!="+ue.length);var ce=h.substr(y,2);if(ce==="02"){var he=W.getVidx(h,y);if(h.substr(he,2)=="00"&&h.charCodeAt(he+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(ce,16)){for(var ye=W.getVblen(h,y),be=0,Pe=W.getChildIdx(h,y),He=0;He<Pe.length;He++)be+=W.getTLV(h,Pe[He]).length,W.checkStrictDER(h,Pe[He],w,A,U);if(2*ye!=be)throw new Error("sum of children's TLV length and L unmatch: "+2*ye+"!="+be)}},ae.oidname=function(h){var y=k.asn1;k.lang.String.isHex(h)&&(h=y.ASN1Util.oidHexToInt(h));var w=y.x509.OID.oid2name(h);return w===""&&(w=h),w},k!==void 0&&k||(n.KJUR=k={}),k.lang!==void 0&&k.lang||(k.lang={}),k.lang.String=function(){},typeof a=="function"?(n.utf8tob64u=ge=function(y){return Se(a.from(y,"utf8").toString("base64"))},n.b64utoutf8=xe=function(y){return a.from(Ve(y),"base64").toString("utf8")}):(n.utf8tob64u=ge=function(y){return Oe(Ot(Sr(y)))},n.b64utoutf8=xe=function(y){return decodeURIComponent(mr(_e(y)))}),k.lang.String.isInteger=function(h){return!!h.match(/^[0-9]+$/)||!!h.match(/^-[0-9]+$/)},k.lang.String.isHex=function(h){return sr(h)},k.lang.String.isBase64=function(h){return!(!(h=h.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||h.length%4!=0)},k.lang.String.isBase64URL=function(h){return!h.match(/[+/=]/)&&(h=Ve(h),k.lang.String.isBase64(h))},k.lang.String.isIntegerArray=function(h){return!!(h=h.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},k.lang.String.isPrintable=function(h){return h.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},k.lang.String.isIA5=function(h){return h.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},k.lang.String.isMail=function(h){return h.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var nr=function(y,w,A){return A==null&&(A="0"),y.length>=w?y:new Array(w-y.length+1).join(A)+y};function Kt(h,y){var w=function(){};w.prototype=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.superclass=y.prototype,y.prototype.constructor==Object.prototype.constructor&&(y.prototype.constructor=y)}k!==void 0&&k||(n.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:B.algo.MD5,sha1:B.algo.SHA1,sha224:B.algo.SHA224,sha256:B.algo.SHA256,sha384:B.algo.SHA384,sha512:B.algo.SHA512,ripemd160:B.algo.RIPEMD160},this.getDigestInfoHex=function(h,y){if(this.DIGESTINFOHEAD[y]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+y;return this.DIGESTINFOHEAD[y]+h},this.getPaddedDigestInfoHex=function(h,y,w){var A=this.getDigestInfoHex(h,y),U=w/4;if(A.length+22>U)throw"key is too short for SigAlg: keylen="+w+","+y;for(var W="0001",Q="00"+A,ue="",oe=U-W.length-Q.length,ce=0;ce<oe;ce+=2)ue+="ff";return W+ue+Q},this.hashString=function(h,y){return new k.crypto.MessageDigest({alg:y}).digestString(h)},this.hashHex=function(h,y){return new k.crypto.MessageDigest({alg:y}).digestHex(h)},this.sha1=function(h){return this.hashString(h,"sha1")},this.sha256=function(h){return this.hashString(h,"sha256")},this.sha256Hex=function(h){return this.hashHex(h,"sha256")},this.sha512=function(h){return this.hashString(h,"sha512")},this.sha512Hex=function(h){return this.hashHex(h,"sha512")},this.isKey=function(h){return h instanceof ee||h instanceof k.crypto.DSA||h instanceof k.crypto.ECDSA}},k.crypto.Util.md5=function(h){return new k.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(h)},k.crypto.Util.ripemd160=function(h){return new k.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(h)},k.crypto.Util.SECURERANDOMGEN=new Mt,k.crypto.Util.getRandomHexOfNbytes=function(h){var y=new Array(h);return k.crypto.Util.SECURERANDOMGEN.nextBytes(y),Rt(y)},k.crypto.Util.getRandomBigIntegerOfNbytes=function(h){return new M(k.crypto.Util.getRandomHexOfNbytes(h),16)},k.crypto.Util.getRandomHexOfNbits=function(h){var y=h%8,w=new Array((h-y)/8+1);return k.crypto.Util.SECURERANDOMGEN.nextBytes(w),w[0]=(255<<y&255^255)&w[0],Rt(w)},k.crypto.Util.getRandomBigIntegerOfNbits=function(h){return new M(k.crypto.Util.getRandomHexOfNbits(h),16)},k.crypto.Util.getRandomBigIntegerZeroToMax=function(h){for(var y=h.bitLength();;){var w=k.crypto.Util.getRandomBigIntegerOfNbits(y);if(h.compareTo(w)!=-1)return w}},k.crypto.Util.getRandomBigIntegerMinToMax=function(h,y){var w=h.compareTo(y);if(w==1)throw"biMin is greater than biMax";if(w==0)return h;var A=y.subtract(h);return k.crypto.Util.getRandomBigIntegerZeroToMax(A).add(h)},k.crypto.MessageDigest=function(h){this.setAlgAndProvider=function(y,w){if((y=k.crypto.MessageDigest.getCanonicalAlgName(y))!==null&&w===void 0&&(w=k.crypto.Util.DEFAULTPROVIDER[y]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(y)!=-1&&w=="cryptojs"){try{this.md=k.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[y].create()}catch(A){throw"setAlgAndProvider hash alg set fail alg="+y+"/"+A}this.updateString=function(A){this.md.update(A)},this.updateHex=function(A){var U=B.enc.Hex.parse(A);this.md.update(U)},this.digest=function(){return this.md.finalize().toString(B.enc.Hex)},this.digestString=function(A){return this.updateString(A),this.digest()},this.digestHex=function(A){return this.updateHex(A),this.digest()}}if(":sha256:".indexOf(y)!=-1&&w=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(A){throw"setAlgAndProvider hash alg set fail alg="+y+"/"+A}this.updateString=function(A){this.md.update(A)},this.updateHex=function(A){var U=sjcl.codec.hex.toBits(A);this.md.update(U)},this.digest=function(){var A=this.md.finalize();return sjcl.codec.hex.fromBits(A)},this.digestString=function(A){return this.updateString(A),this.digest()},this.digestHex=function(A){return this.updateHex(A),this.digest()}}},this.updateString=function(y){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(y){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(y){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(y){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},h!==void 0&&h.alg!==void 0&&(this.algName=h.alg,h.prov===void 0&&(this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},k.crypto.MessageDigest.getCanonicalAlgName=function(h){return typeof h=="string"&&(h=(h=h.toLowerCase()).replace(/-/,"")),h},k.crypto.MessageDigest.getHashLength=function(h){var y=k.crypto.MessageDigest,w=y.getCanonicalAlgName(h);if(y.HASHLENGTH[w]===void 0)throw"not supported algorithm: "+h;return y.HASHLENGTH[w]},k.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},k.crypto.Mac=function(h){this.setAlgAndProvider=function(y,w){if((y=y.toLowerCase())==null&&(y="hmacsha1"),(y=y.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+y;w===void 0&&(w=k.crypto.Util.DEFAULTPROVIDER[y]),this.algProv=y+"/"+w;var A=y.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(A)!=-1&&w=="cryptojs"){try{var U=k.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[A];this.mac=B.algo.HMAC.create(U,this.pass)}catch(W){throw"setAlgAndProvider hash alg set fail hashAlg="+A+"/"+W}this.updateString=function(W){this.mac.update(W)},this.updateHex=function(W){var Q=B.enc.Hex.parse(W);this.mac.update(Q)},this.doFinal=function(){return this.mac.finalize().toString(B.enc.Hex)},this.doFinalString=function(W){return this.updateString(W),this.doFinal()},this.doFinalHex=function(W){return this.updateHex(W),this.doFinal()}}},this.updateString=function(y){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(y){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(y){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(y){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(y){if(typeof y=="string"){var w=y;return y.length%2!=1&&y.match(/^[0-9A-Fa-f]+$/)||(w=ot(y)),void(this.pass=B.enc.Hex.parse(w))}if((y===void 0?"undefined":S(y))!="object")throw"KJUR.crypto.Mac unsupported password type: "+y;if(w=null,y.hex!==void 0){if(y.hex.length%2!=0||!y.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+y.hex;w=y.hex}if(y.utf8!==void 0&&(w=Ke(y.utf8)),y.rstr!==void 0&&(w=ot(y.rstr)),y.b64!==void 0&&(w=ne(y.b64)),y.b64u!==void 0&&(w=_e(y.b64u)),w==null)throw"KJUR.crypto.Mac unsupported password type: "+y;this.pass=B.enc.Hex.parse(w)},h!==void 0&&(h.pass!==void 0&&this.setPassword(h.pass),h.alg!==void 0&&(this.algName=h.alg,h.prov===void 0&&(this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},k.crypto.Signature=function(h){var y=null;if(this._setAlgNames=function(){var w=this.algName.match(/^(.+)with(.+)$/);w&&(this.mdAlgName=w[1].toLowerCase(),this.pubkeyAlgName=w[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(w,A){for(var U="",W=A/4-w.length,Q=0;Q<W;Q++)U+="0";return U+w},this.setAlgAndProvider=function(w,A){if(this._setAlgNames(),A!="cryptojs/jsrsa")throw new Error("provider not supported: "+A);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new k.crypto.MessageDigest({alg:this.mdAlgName})}catch(U){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+U)}this.init=function(U,W){var Q=null;try{Q=W===void 0?Bt.getKey(U):Bt.getKey(U,W)}catch(ue){throw"init failed:"+ue}if(Q.isPrivate===!0)this.prvKey=Q,this.state="SIGN";else{if(Q.isPublic!==!0)throw"init failed.:"+Q;this.pubKey=Q,this.state="VERIFY"}},this.updateString=function(U){this.md.updateString(U)},this.updateHex=function(U){this.md.updateHex(U)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&k.crypto.ECDSA!==void 0&&(this.prvKey=new k.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ee&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ee&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof k.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof k.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(U){return this.updateString(U),this.sign()},this.signHex=function(U){return this.updateHex(U),this.sign()},this.verify=function(U){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&k.crypto.ECDSA!==void 0&&(this.pubKey=new k.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ee&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,U,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ee&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,U);if(k.crypto.ECDSA!==void 0&&this.pubKey instanceof k.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,U);if(k.crypto.DSA!==void 0&&this.pubKey instanceof k.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,U);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(w,A){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(w){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(w){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(w){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(w){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(w){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=h,h!==void 0&&(h.alg!==void 0&&(this.algName=h.alg,h.prov===void 0?this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=h.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),h.psssaltlen!==void 0&&(this.pssSaltLen=h.psssaltlen),h.prvkeypem!==void 0)){if(h.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{y=Bt.getKey(h.prvkeypem),this.init(y)}catch(w){throw"fatal error to load pem private key: "+w}}},k.crypto.Cipher=function(h){},k.crypto.Cipher.encrypt=function(h,y,w){if(y instanceof ee&&y.isPublic){var A=k.crypto.Cipher.getAlgByKeyAndName(y,w);if(A==="RSA")return y.encrypt(h);if(A==="RSAOAEP")return y.encryptOAEP(h,"sha1");var U=A.match(/^RSAOAEP(\d+)$/);if(U!==null)return y.encryptOAEP(h,"sha"+U[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+w}throw"Cipher.encrypt: unsupported key or algorithm"},k.crypto.Cipher.decrypt=function(h,y,w){if(y instanceof ee&&y.isPrivate){var A=k.crypto.Cipher.getAlgByKeyAndName(y,w);if(A==="RSA")return y.decrypt(h);if(A==="RSAOAEP")return y.decryptOAEP(h,"sha1");var U=A.match(/^RSAOAEP(\d+)$/);if(U!==null)return y.decryptOAEP(h,"sha"+U[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+w}throw"Cipher.decrypt: unsupported key or algorithm"},k.crypto.Cipher.getAlgByKeyAndName=function(h,y){if(h instanceof ee){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(y)!=-1)return y;if(y==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+y}throw"getAlgByKeyAndName: not supported algorithm name: "+y},k.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},k!==void 0&&k||(n.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.ECDSA=function(h){var y=Error,w=M,A=K,U=k.crypto.ECDSA,W=k.crypto.ECParameterDB,Q=U.getName,ue=ae,oe=ue.getVbyListEx,ce=ue.isASN1HEX,he=new Mt;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(ye){return new w(ye.bitLength(),he).mod(ye.subtract(w.ONE)).add(w.ONE)},this.setNamedCurve=function(ye){this.ecparams=W.getByName(ye),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=ye},this.setPrivateKeyHex=function(ye){this.isPrivate=!0,this.prvKeyHex=ye},this.setPublicKeyHex=function(ye){this.isPublic=!0,this.pubKeyHex=ye},this.getPublicKeyXYHex=function(){var ye=this.pubKeyHex;if(ye.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var be=this.ecparams.keylen/4;if(ye.length!==2+2*be)throw"malformed public key hex length";var Pe={};return Pe.x=ye.substr(2,be),Pe.y=ye.substr(2+be),Pe},this.getShortNISTPCurveName=function(){var ye=this.curveName;return ye==="secp256r1"||ye==="NIST P-256"||ye==="P-256"||ye==="prime256v1"?"P-256":ye==="secp384r1"||ye==="NIST P-384"||ye==="P-384"?"P-384":null},this.generateKeyPairHex=function(){var ye=this.ecparams.n,be=this.getBigRandom(ye),Pe=this.ecparams.G.multiply(be),He=Pe.getX().toBigInteger(),ze=Pe.getY().toBigInteger(),Qe=this.ecparams.keylen/4,te=("0000000000"+be.toString(16)).slice(-Qe),pe="04"+("0000000000"+He.toString(16)).slice(-Qe)+("0000000000"+ze.toString(16)).slice(-Qe);return this.setPrivateKeyHex(te),this.setPublicKeyHex(pe),{ecprvhex:te,ecpubhex:pe}},this.signWithMessageHash=function(ye){return this.signHex(ye,this.prvKeyHex)},this.signHex=function(ye,be){var Pe=new w(be,16),He=this.ecparams.n,ze=new w(ye.substring(0,this.ecparams.keylen/4),16);do var Qe=this.getBigRandom(He),te=this.ecparams.G.multiply(Qe).getX().toBigInteger().mod(He);while(te.compareTo(w.ZERO)<=0);var pe=Qe.modInverse(He).multiply(ze.add(Pe.multiply(te))).mod(He);return U.biRSSigToASN1Sig(te,pe)},this.sign=function(ye,be){var Pe=be,He=this.ecparams.n,ze=w.fromByteArrayUnsigned(ye);do var Qe=this.getBigRandom(He),te=this.ecparams.G.multiply(Qe).getX().toBigInteger().mod(He);while(te.compareTo(M.ZERO)<=0);var pe=Qe.modInverse(He).multiply(ze.add(Pe.multiply(te))).mod(He);return this.serializeSig(te,pe)},this.verifyWithMessageHash=function(ye,be){return this.verifyHex(ye,be,this.pubKeyHex)},this.verifyHex=function(ye,be,Pe){try{var He,ze,Qe=U.parseSigHex(be);He=Qe.r,ze=Qe.s;var te=A.decodeFromHex(this.ecparams.curve,Pe),pe=new w(ye.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(pe,He,ze,te)}catch{return!1}},this.verify=function(ye,be,Pe){var He,ze,Qe;if(Bitcoin.Util.isArray(be)){var te=this.parseSig(be);He=te.r,ze=te.s}else{if((be===void 0?"undefined":S(be))!=="object"||!be.r||!be.s)throw"Invalid value for signature";He=be.r,ze=be.s}if(Pe instanceof K)Qe=Pe;else{if(!Bitcoin.Util.isArray(Pe))throw"Invalid format for pubkey value, must be byte array or ECPointFp";Qe=A.decodeFrom(this.ecparams.curve,Pe)}var pe=w.fromByteArrayUnsigned(ye);return this.verifyRaw(pe,He,ze,Qe)},this.verifyRaw=function(ye,be,Pe,He){var ze=this.ecparams.n,Qe=this.ecparams.G;if(be.compareTo(w.ONE)<0||be.compareTo(ze)>=0||Pe.compareTo(w.ONE)<0||Pe.compareTo(ze)>=0)return!1;var te=Pe.modInverse(ze),pe=ye.multiply(te).mod(ze),ve=be.multiply(te).mod(ze);return Qe.multiply(pe).add(He.multiply(ve)).getX().toBigInteger().mod(ze).equals(be)},this.serializeSig=function(ye,be){var Pe=ye.toByteArraySigned(),He=be.toByteArraySigned(),ze=[];return ze.push(2),ze.push(Pe.length),(ze=ze.concat(Pe)).push(2),ze.push(He.length),(ze=ze.concat(He)).unshift(ze.length),ze.unshift(48),ze},this.parseSig=function(ye){var be;if(ye[0]!=48)throw new Error("Signature not a valid DERSequence");if(ye[be=2]!=2)throw new Error("First element in signature must be a DERInteger");var Pe=ye.slice(be+2,be+2+ye[be+1]);if(ye[be+=2+ye[be+1]]!=2)throw new Error("Second element in signature must be a DERInteger");var He=ye.slice(be+2,be+2+ye[be+1]);return be+=2+ye[be+1],{r:w.fromByteArrayUnsigned(Pe),s:w.fromByteArrayUnsigned(He)}},this.parseSigCompact=function(ye){if(ye.length!==65)throw"Signature has the wrong length";var be=ye[0]-27;if(be<0||be>7)throw"Invalid signature type";var Pe=this.ecparams.n;return{r:w.fromByteArrayUnsigned(ye.slice(1,33)).mod(Pe),s:w.fromByteArrayUnsigned(ye.slice(33,65)).mod(Pe),i:be}},this.readPKCS5PrvKeyHex=function(ye){if(ce(ye)===!1)throw new Error("not ASN.1 hex string");var be,Pe,He;try{be=oe(ye,0,["[0]",0],"06"),Pe=oe(ye,0,[1],"04");try{He=oe(ye,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=Q(be),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(He),this.setPrivateKeyHex(Pe),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(ye){if(ce(ye)===!1)throw new y("not ASN.1 hex string");var be,Pe,He;try{oe(ye,0,[1,0],"06"),be=oe(ye,0,[1,1],"06"),Pe=oe(ye,0,[2,0,1],"04");try{He=oe(ye,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new y("malformed PKCS#8 plain ECC private key")}if(this.curveName=Q(be),this.curveName===void 0)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(He),this.setPrivateKeyHex(Pe),this.isPublic=!1},this.readPKCS8PubKeyHex=function(ye){if(ce(ye)===!1)throw new y("not ASN.1 hex string");var be,Pe;try{oe(ye,0,[0,0],"06"),be=oe(ye,0,[0,1],"06"),Pe=oe(ye,0,[1],"03")}catch{throw new y("malformed PKCS#8 ECC public key")}if(this.curveName=Q(be),this.curveName===null)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Pe)},this.readCertPubKeyHex=function(ye,be){if(ce(ye)===!1)throw new y("not ASN.1 hex string");var Pe,He;try{Pe=oe(ye,0,[0,5,0,1],"06"),He=oe(ye,0,[0,5,1],"03")}catch{throw new y("malformed X.509 certificate ECC public key")}if(this.curveName=Q(Pe),this.curveName===null)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(He)},h!==void 0&&h.curve!==void 0&&(this.curveName=h.curve),this.curveName===void 0&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),h!==void 0&&(h.prv!==void 0&&this.setPrivateKeyHex(h.prv),h.pub!==void 0&&this.setPublicKeyHex(h.pub))},k.crypto.ECDSA.parseSigHex=function(h){var y=k.crypto.ECDSA.parseSigHexInHexRS(h);return{r:new M(y.r,16),s:new M(y.s,16)}},k.crypto.ECDSA.parseSigHexInHexRS=function(h){var y=ae,w=y.getChildIdx,A=y.getV;if(y.checkStrictDER(h,0),h.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var U=w(h,0);if(U.length!=2)throw new Error("signature shall have two elements");var W=U[0],Q=U[1];if(h.substr(W,2)!="02")throw new Error("1st item not ASN.1 integer");if(h.substr(Q,2)!="02")throw new Error("2nd item not ASN.1 integer");return{r:A(h,W),s:A(h,Q)}},k.crypto.ECDSA.asn1SigToConcatSig=function(h){var y=k.crypto.ECDSA.parseSigHexInHexRS(h),w=y.r,A=y.s;if(w.substr(0,2)=="00"&&w.length%32==2&&(w=w.substr(2)),A.substr(0,2)=="00"&&A.length%32==2&&(A=A.substr(2)),w.length%32==30&&(w="00"+w),A.length%32==30&&(A="00"+A),w.length%32!=0)throw"unknown ECDSA sig r length error";if(A.length%32!=0)throw"unknown ECDSA sig s length error";return w+A},k.crypto.ECDSA.concatSigToASN1Sig=function(h){if(h.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var y=h.substr(0,h.length/2),w=h.substr(h.length/2);return k.crypto.ECDSA.hexRSSigToASN1Sig(y,w)},k.crypto.ECDSA.hexRSSigToASN1Sig=function(h,y){var w=new M(h,16),A=new M(y,16);return k.crypto.ECDSA.biRSSigToASN1Sig(w,A)},k.crypto.ECDSA.biRSSigToASN1Sig=function(h,y){var w=k.asn1,A=new w.DERInteger({bigint:h}),U=new w.DERInteger({bigint:y});return new w.DERSequence({array:[A,U]}).getEncodedHex()},k.crypto.ECDSA.getName=function(h){return h==="2b8104001f"?"secp192k1":h==="2a8648ce3d030107"?"secp256r1":h==="2b8104000a"?"secp256k1":h==="2b81040021"?"secp224r1":h==="2b81040022"?"secp384r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(h)!==-1?"secp256r1":"|secp256k1|".indexOf(h)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(h)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(h)!==-1?"secp384r1":null},k!==void 0&&k||(n.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.ECParameterDB=new function(){var h={},y={};function w(A){return new M(A,16)}this.getByName=function(A){var U=A;if(y[U]!==void 0&&(U=y[A]),h[U]!==void 0)return h[U];throw"unregistered EC curve name: "+U},this.regist=function(A,U,W,Q,ue,oe,ce,he,ye,be,Pe,He){h[A]={};var ze=w(W),Qe=w(Q),te=w(ue),pe=w(oe),ve=w(ce),Ee=new P(ze,Qe,te),We=Ee.decodePointHex("04"+he+ye);h[A].name=A,h[A].keylen=U,h[A].curve=Ee,h[A].G=We,h[A].n=pe,h[A].h=ve,h[A].oid=Pe,h[A].info=He;for(var Ye=0;Ye<be.length;Ye++)y[be[Ye]]=A}},k.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),k.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),k.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),k.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),k.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),k.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),k.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),k.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),k.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),k.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Bt=function(){var h=function(ce,he,ye){return y(B.AES,ce,he,ye)},y=function(ce,he,ye,be){var Pe=B.enc.Hex.parse(he),He=B.enc.Hex.parse(ye),ze=B.enc.Hex.parse(be),Qe={};Qe.key=He,Qe.iv=ze,Qe.ciphertext=Pe;var te=ce.decrypt(Qe,He,{iv:ze});return B.enc.Hex.stringify(te)},w=function(ce,he,ye){return A(B.AES,ce,he,ye)},A=function(ce,he,ye,be){var Pe=B.enc.Hex.parse(he),He=B.enc.Hex.parse(ye),ze=B.enc.Hex.parse(be),Qe=ce.encrypt(Pe,He,{iv:ze}),te=B.enc.Hex.parse(Qe.toString());return B.enc.Base64.stringify(te)},U={"AES-256-CBC":{proc:h,eproc:w,keylen:32,ivlen:16},"AES-192-CBC":{proc:h,eproc:w,keylen:24,ivlen:16},"AES-128-CBC":{proc:h,eproc:w,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(ce,he,ye){return y(B.TripleDES,ce,he,ye)},eproc:function(ce,he,ye){return A(B.TripleDES,ce,he,ye)},keylen:24,ivlen:8},"DES-CBC":{proc:function(ce,he,ye){return y(B.DES,ce,he,ye)},eproc:function(ce,he,ye){return A(B.DES,ce,he,ye)},keylen:8,ivlen:8}},W=function(ce){var he={},ye=ce.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ye&&(he.cipher=ye[1],he.ivsalt=ye[2]);var be=ce.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));be&&(he.type=be[1]);var Pe=-1,He=0;ce.indexOf(`\r
\r
`)!=-1&&(Pe=ce.indexOf(`\r
\r
`),He=2),ce.indexOf(`

`)!=-1&&(Pe=ce.indexOf(`

`),He=1);var ze=ce.indexOf("-----END");if(Pe!=-1&&ze!=-1){var Qe=ce.substring(Pe+2*He,ze-He);Qe=Qe.replace(/\s+/g,""),he.data=Qe}return he},Q=function(ce,he,ye){for(var be=ye.substring(0,16),Pe=B.enc.Hex.parse(be),He=B.enc.Utf8.parse(he),ze=U[ce].keylen+U[ce].ivlen,Qe="",te=null;;){var pe=B.algo.MD5.create();if(te!=null&&pe.update(te),pe.update(He),pe.update(Pe),te=pe.finalize(),(Qe+=B.enc.Hex.stringify(te)).length>=2*ze)break}var ve={};return ve.keyhex=Qe.substr(0,2*U[ce].keylen),ve.ivhex=Qe.substr(2*U[ce].keylen,2*U[ce].ivlen),ve},ue=function(ce,he,ye,be){var Pe=B.enc.Base64.parse(ce),He=B.enc.Hex.stringify(Pe);return(0,U[he].proc)(He,ye,be)};return{version:"1.0.0",parsePKCS5PEM:function(ce){return W(ce)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(ce,he,ye){return Q(ce,he,ye)},decryptKeyB64:function(ce,he,ye,be){return ue(ce,he,ye,be)},getDecryptedKeyHex:function(ce,he){var ye=W(ce),be=ye.cipher,Pe=ye.ivsalt,He=ye.data,ze=Q(be,he,Pe).keyhex;return ue(He,be,ze,Pe)},getEncryptedPKCS5PEMFromPrvKeyHex:function(ce,he,ye,be,Pe){var He="";if(be!==void 0&&be!=null||(be="AES-256-CBC"),U[be]===void 0)throw new Error("KEYUTIL unsupported algorithm: "+be);Pe!==void 0&&Pe!=null||(Pe=function(te){var pe=B.lib.WordArray.random(te);return B.enc.Hex.stringify(pe)}(U[be].ivlen).toUpperCase());var ze=function(te,pe,ve,Ee){return(0,U[pe].eproc)(te,ve,Ee)}(he,be,Q(be,ye,Pe).keyhex,Pe);return He="-----BEGIN "+ce+` PRIVATE KEY-----\r
`,He+=`Proc-Type: 4,ENCRYPTED\r
`,He+="DEK-Info: "+be+","+Pe+`\r
`,He+=`\r
`,He+=ze.replace(/(.{64})/g,`$1\r
`),He+=`\r
-----END `+ce+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(ce){var he=ae,ye=he.getChildIdx,be=he.getV,Pe={},He=ye(ce,0);if(He.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+He.length);Pe.ciphertext=be(ce,He[1]);var ze=ye(ce,He[0]);if(ze.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+ze.length);if(be(ce,ze[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var Qe=ye(ce,ze[1]);if(ze.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+Qe.length);var te=ye(ce,Qe[1]);if(te.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+te.length);if(be(ce,te[0])!="2a864886f70d0307")throw"this only supports TripleDES";Pe.encryptionSchemeAlg="TripleDES",Pe.encryptionSchemeIV=be(ce,te[1]);var pe=ye(ce,Qe[0]);if(pe.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+pe.length);if(be(ce,pe[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var ve=ye(ce,pe[1]);if(ve.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+ve.length);Pe.pbkdf2Salt=be(ce,ve[0]);var Ee=be(ce,ve[1]);try{Pe.pbkdf2Iter=parseInt(Ee,16)}catch{throw new Error("malformed format pbkdf2Iter: "+Ee)}return Pe},getPBKDF2KeyHexFromParam:function(ce,he){var ye=B.enc.Hex.parse(ce.pbkdf2Salt),be=ce.pbkdf2Iter,Pe=B.PBKDF2(he,ye,{keySize:6,iterations:be});return B.enc.Hex.stringify(Pe)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(ce,he){var ye=Yt(ce,"ENCRYPTED PRIVATE KEY"),be=this.parseHexOfEncryptedPKCS8(ye),Pe=Bt.getPBKDF2KeyHexFromParam(be,he),He={};He.ciphertext=B.enc.Hex.parse(be.ciphertext);var ze=B.enc.Hex.parse(Pe),Qe=B.enc.Hex.parse(be.encryptionSchemeIV),te=B.TripleDES.decrypt(He,ze,{iv:Qe});return B.enc.Hex.stringify(te)},getKeyFromEncryptedPKCS8PEM:function(ce,he){var ye=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(ce,he);return this.getKeyFromPlainPrivatePKCS8Hex(ye)},parsePlainPrivatePKCS8Hex:function(ce){var he=ae,ye=he.getChildIdx,be=he.getV,Pe={algparam:null};if(ce.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var He=ye(ce,0);if(He.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(ce.substr(He[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var ze=ye(ce,He[1]);if(ze.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(ce.substr(ze[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Pe.algoid=be(ce,ze[0]),ce.substr(ze[1],2)=="06"&&(Pe.algparam=be(ce,ze[1])),ce.substr(He[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Pe.keyidx=he.getVidx(ce,He[2]),Pe},getKeyFromPlainPrivatePKCS8PEM:function(ce){var he=Yt(ce,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(he)},getKeyFromPlainPrivatePKCS8Hex:function(ce){var he,ye=this.parsePlainPrivatePKCS8Hex(ce);if(ye.algoid=="2a864886f70d010101")he=new ee;else if(ye.algoid=="2a8648ce380401")he=new k.crypto.DSA;else{if(ye.algoid!="2a8648ce3d0201")throw new Error("unsupported private key algorithm");he=new k.crypto.ECDSA}return he.readPKCS8PrvKeyHex(ce),he},_getKeyFromPublicPKCS8Hex:function(ce){var he,ye=ae.getVbyList(ce,0,[0,0],"06");if(ye==="2a864886f70d010101")he=new ee;else if(ye==="2a8648ce380401")he=new k.crypto.DSA;else{if(ye!=="2a8648ce3d0201")throw new Error("unsupported PKCS#8 public key hex");he=new k.crypto.ECDSA}return he.readPKCS8PubKeyHex(ce),he},parsePublicRawRSAKeyHex:function(ce){var he=ae,ye=he.getChildIdx,be=he.getV,Pe={};if(ce.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var He=ye(ce,0);if(He.length!=2)throw new Error("malformed RSA key(code:002)");if(ce.substr(He[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Pe.n=be(ce,He[0]),ce.substr(He[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Pe.e=be(ce,He[1]),Pe},parsePublicPKCS8Hex:function(ce){var he=ae,ye=he.getChildIdx,be=he.getV,Pe={algparam:null},He=ye(ce,0);if(He.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+He.length);var ze=He[0];if(ce.substr(ze,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var Qe=ye(ce,ze);if(Qe.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(ce.substr(Qe[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Pe.algoid=be(ce,Qe[0]),ce.substr(Qe[1],2)=="06"?Pe.algparam=be(ce,Qe[1]):ce.substr(Qe[1],2)=="30"&&(Pe.algparam={},Pe.algparam.p=he.getVbyList(ce,Qe[1],[0],"02"),Pe.algparam.q=he.getVbyList(ce,Qe[1],[1],"02"),Pe.algparam.g=he.getVbyList(ce,Qe[1],[2],"02")),ce.substr(He[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Pe.key=be(ce,He[1]).substr(2),Pe}}}();Bt.getKey=function(h,y,w){var A=(Qe=ae).getChildIdx,U=(Qe.getV,Qe.getVbyList),W=k.crypto,Q=W.ECDSA,ue=W.DSA,oe=ee,ce=Yt,he=Bt;if(oe!==void 0&&h instanceof oe||Q!==void 0&&h instanceof Q||ue!==void 0&&h instanceof ue)return h;if(h.curve!==void 0&&h.xy!==void 0&&h.d===void 0)return new Q({pub:h.xy,curve:h.curve});if(h.curve!==void 0&&h.d!==void 0)return new Q({prv:h.d,curve:h.curve});if(h.kty===void 0&&h.n!==void 0&&h.e!==void 0&&h.d===void 0)return(Jt=new oe).setPublic(h.n,h.e),Jt;if(h.kty===void 0&&h.n!==void 0&&h.e!==void 0&&h.d!==void 0&&h.p!==void 0&&h.q!==void 0&&h.dp!==void 0&&h.dq!==void 0&&h.co!==void 0&&h.qi===void 0)return(Jt=new oe).setPrivateEx(h.n,h.e,h.d,h.p,h.q,h.dp,h.dq,h.co),Jt;if(h.kty===void 0&&h.n!==void 0&&h.e!==void 0&&h.d!==void 0&&h.p===void 0)return(Jt=new oe).setPrivate(h.n,h.e,h.d),Jt;if(h.p!==void 0&&h.q!==void 0&&h.g!==void 0&&h.y!==void 0&&h.x===void 0)return(Jt=new ue).setPublic(h.p,h.q,h.g,h.y),Jt;if(h.p!==void 0&&h.q!==void 0&&h.g!==void 0&&h.y!==void 0&&h.x!==void 0)return(Jt=new ue).setPrivate(h.p,h.q,h.g,h.y,h.x),Jt;if(h.kty==="RSA"&&h.n!==void 0&&h.e!==void 0&&h.d===void 0)return(Jt=new oe).setPublic(_e(h.n),_e(h.e)),Jt;if(h.kty==="RSA"&&h.n!==void 0&&h.e!==void 0&&h.d!==void 0&&h.p!==void 0&&h.q!==void 0&&h.dp!==void 0&&h.dq!==void 0&&h.qi!==void 0)return(Jt=new oe).setPrivateEx(_e(h.n),_e(h.e),_e(h.d),_e(h.p),_e(h.q),_e(h.dp),_e(h.dq),_e(h.qi)),Jt;if(h.kty==="RSA"&&h.n!==void 0&&h.e!==void 0&&h.d!==void 0)return(Jt=new oe).setPrivate(_e(h.n),_e(h.e),_e(h.d)),Jt;if(h.kty==="EC"&&h.crv!==void 0&&h.x!==void 0&&h.y!==void 0&&h.d===void 0){var ye=(kt=new Q({curve:h.crv})).ecparams.keylen/4,be="04"+("0000000000"+_e(h.x)).slice(-ye)+("0000000000"+_e(h.y)).slice(-ye);return kt.setPublicKeyHex(be),kt}if(h.kty==="EC"&&h.crv!==void 0&&h.x!==void 0&&h.y!==void 0&&h.d!==void 0){ye=(kt=new Q({curve:h.crv})).ecparams.keylen/4,be="04"+("0000000000"+_e(h.x)).slice(-ye)+("0000000000"+_e(h.y)).slice(-ye);var Pe=("0000000000"+_e(h.d)).slice(-ye);return kt.setPublicKeyHex(be),kt.setPrivateKeyHex(Pe),kt}if(w==="pkcs5prv"){var He,ze=h,Qe=ae;if((He=A(ze,0)).length===9)(Jt=new oe).readPKCS5PrvKeyHex(ze);else if(He.length===6)(Jt=new ue).readPKCS5PrvKeyHex(ze);else{if(!(He.length>2&&ze.substr(He[1],2)==="04"))throw new Error("unsupported PKCS#1/5 hexadecimal key");(Jt=new Q).readPKCS5PrvKeyHex(ze)}return Jt}if(w==="pkcs8prv")return Jt=he.getKeyFromPlainPrivatePKCS8Hex(h);if(w==="pkcs8pub")return he._getKeyFromPublicPKCS8Hex(h);if(w==="x509pub")return vr.getPublicKeyFromCertHex(h);if(h.indexOf("-END CERTIFICATE-",0)!=-1||h.indexOf("-END X509 CERTIFICATE-",0)!=-1||h.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return vr.getPublicKeyFromCertPEM(h);if(h.indexOf("-END PUBLIC KEY-")!=-1){var te=Yt(h,"PUBLIC KEY");return he._getKeyFromPublicPKCS8Hex(te)}if(h.indexOf("-END RSA PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")==-1){var pe=ce(h,"RSA PRIVATE KEY");return he.getKey(pe,null,"pkcs5prv")}if(h.indexOf("-END DSA PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")==-1){var ve=U(_r=ce(h,"DSA PRIVATE KEY"),0,[1],"02"),Ee=U(_r,0,[2],"02"),We=U(_r,0,[3],"02"),Ye=U(_r,0,[4],"02"),Vt=U(_r,0,[5],"02");return(Jt=new ue).setPrivate(new M(ve,16),new M(Ee,16),new M(We,16),new M(Ye,16),new M(Vt,16)),Jt}if(h.indexOf("-END EC PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")==-1)return pe=ce(h,"EC PRIVATE KEY"),he.getKey(pe,null,"pkcs5prv");if(h.indexOf("-END PRIVATE KEY-")!=-1)return he.getKeyFromPlainPrivatePKCS8PEM(h);if(h.indexOf("-END RSA PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")!=-1){var pt=he.getDecryptedKeyHex(h,y),Tr=new ee;return Tr.readPKCS5PrvKeyHex(pt),Tr}if(h.indexOf("-END EC PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")!=-1){var kt,Jt=U(_r=he.getDecryptedKeyHex(h,y),0,[1],"04"),qt=U(_r,0,[2,0],"06"),Ur=U(_r,0,[3,0],"03").substr(2);if(k.crypto.OID.oidhex2name[qt]===void 0)throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+qt);return(kt=new Q({curve:k.crypto.OID.oidhex2name[qt]})).setPublicKeyHex(Ur),kt.setPrivateKeyHex(Jt),kt.isPublic=!1,kt}if(h.indexOf("-END DSA PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")!=-1){var _r;return ve=U(_r=he.getDecryptedKeyHex(h,y),0,[1],"02"),Ee=U(_r,0,[2],"02"),We=U(_r,0,[3],"02"),Ye=U(_r,0,[4],"02"),Vt=U(_r,0,[5],"02"),(Jt=new ue).setPrivate(new M(ve,16),new M(Ee,16),new M(We,16),new M(Ye,16),new M(Vt,16)),Jt}if(h.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return he.getKeyFromEncryptedPKCS8PEM(h,y);throw new Error("not supported argument")},Bt.generateKeypair=function(h,y){if(h=="RSA"){var w=y;(Q=new ee).generate(w,"10001"),Q.isPrivate=!0,Q.isPublic=!0;var A=new ee,U=Q.n.toString(16),W=Q.e.toString(16);return A.setPublic(U,W),A.isPrivate=!1,A.isPublic=!0,(ue={}).prvKeyObj=Q,ue.pubKeyObj=A,ue}if(h=="EC"){var Q,ue,oe=y,ce=new k.crypto.ECDSA({curve:oe}).generateKeyPairHex();return(Q=new k.crypto.ECDSA({curve:oe})).setPublicKeyHex(ce.ecpubhex),Q.setPrivateKeyHex(ce.ecprvhex),Q.isPrivate=!0,Q.isPublic=!1,(A=new k.crypto.ECDSA({curve:oe})).setPublicKeyHex(ce.ecpubhex),A.isPrivate=!1,A.isPublic=!0,(ue={}).prvKeyObj=Q,ue.pubKeyObj=A,ue}throw new Error("unknown algorithm: "+h)},Bt.getPEM=function(h,y,w,A,U,W){var Q=k,ue=Q.asn1,oe=ue.DERObjectIdentifier,ce=ue.DERInteger,he=ue.ASN1Util.newObject,ye=ue.x509.SubjectPublicKeyInfo,be=Q.crypto,Pe=be.DSA,He=be.ECDSA,ze=ee;function Qe(kt){return he({seq:[{int:0},{int:{bigint:kt.n}},{int:kt.e},{int:{bigint:kt.d}},{int:{bigint:kt.p}},{int:{bigint:kt.q}},{int:{bigint:kt.dmp1}},{int:{bigint:kt.dmq1}},{int:{bigint:kt.coeff}}]})}function te(kt){return he({seq:[{int:1},{octstr:{hex:kt.prvKeyHex}},{tag:["a0",!0,{oid:{name:kt.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+kt.pubKeyHex}}]}]})}function pe(kt){return he({seq:[{int:0},{int:{bigint:kt.p}},{int:{bigint:kt.q}},{int:{bigint:kt.g}},{int:{bigint:kt.y}},{int:{bigint:kt.x}}]})}if((ze!==void 0&&h instanceof ze||Pe!==void 0&&h instanceof Pe||He!==void 0&&h instanceof He)&&h.isPublic==1&&(y===void 0||y=="PKCS8PUB"))return zt(Ye=new ye(h).getEncodedHex(),"PUBLIC KEY");if(y=="PKCS1PRV"&&ze!==void 0&&h instanceof ze&&(w===void 0||w==null)&&h.isPrivate==1)return zt(Ye=Qe(h).getEncodedHex(),"RSA PRIVATE KEY");if(y=="PKCS1PRV"&&He!==void 0&&h instanceof He&&(w===void 0||w==null)&&h.isPrivate==1){var ve=new oe({name:h.curveName}).getEncodedHex(),Ee=te(h).getEncodedHex(),We="";return We+=zt(ve,"EC PARAMETERS"),We+=zt(Ee,"EC PRIVATE KEY")}if(y=="PKCS1PRV"&&Pe!==void 0&&h instanceof Pe&&(w===void 0||w==null)&&h.isPrivate==1)return zt(Ye=pe(h).getEncodedHex(),"DSA PRIVATE KEY");if(y=="PKCS5PRV"&&ze!==void 0&&h instanceof ze&&w!==void 0&&w!=null&&h.isPrivate==1){var Ye=Qe(h).getEncodedHex();return A===void 0&&(A="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Ye,w,A,W)}if(y=="PKCS5PRV"&&He!==void 0&&h instanceof He&&w!==void 0&&w!=null&&h.isPrivate==1)return Ye=te(h).getEncodedHex(),A===void 0&&(A="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Ye,w,A,W);if(y=="PKCS5PRV"&&Pe!==void 0&&h instanceof Pe&&w!==void 0&&w!=null&&h.isPrivate==1)return Ye=pe(h).getEncodedHex(),A===void 0&&(A="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Ye,w,A,W);var Vt=function(Jt,qt){var Ur=pt(Jt,qt);return new he({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Ur.pbkdf2Salt}},{int:Ur.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Ur.encryptionSchemeIV}}]}]}]},{octstr:{hex:Ur.ciphertext}}]}).getEncodedHex()},pt=function(Jt,qt){var Ur=B.lib.WordArray.random(8),_r=B.lib.WordArray.random(8),pn=B.PBKDF2(qt,Ur,{keySize:6,iterations:100}),kr=B.enc.Hex.parse(Jt),mn=B.TripleDES.encrypt(kr,pn,{iv:_r})+"",$r={};return $r.ciphertext=mn,$r.pbkdf2Salt=B.enc.Hex.stringify(Ur),$r.pbkdf2Iter=100,$r.encryptionSchemeAlg="DES-EDE3-CBC",$r.encryptionSchemeIV=B.enc.Hex.stringify(_r),$r};if(y=="PKCS8PRV"&&ze!=null&&h instanceof ze&&h.isPrivate==1){var Tr=Qe(h).getEncodedHex();return Ye=he({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Tr}}]}).getEncodedHex(),w===void 0||w==null?zt(Ye,"PRIVATE KEY"):zt(Ee=Vt(Ye,w),"ENCRYPTED PRIVATE KEY")}if(y=="PKCS8PRV"&&He!==void 0&&h instanceof He&&h.isPrivate==1)return Tr=new he({seq:[{int:1},{octstr:{hex:h.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+h.pubKeyHex}}]}]}).getEncodedHex(),Ye=he({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:h.curveName}}]},{octstr:{hex:Tr}}]}).getEncodedHex(),w===void 0||w==null?zt(Ye,"PRIVATE KEY"):zt(Ee=Vt(Ye,w),"ENCRYPTED PRIVATE KEY");if(y=="PKCS8PRV"&&Pe!==void 0&&h instanceof Pe&&h.isPrivate==1)return Tr=new ce({bigint:h.x}).getEncodedHex(),Ye=he({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:h.p}},{int:{bigint:h.q}},{int:{bigint:h.g}}]}]},{octstr:{hex:Tr}}]}).getEncodedHex(),w===void 0||w==null?zt(Ye,"PRIVATE KEY"):zt(Ee=Vt(Ye,w),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Bt.getKeyFromCSRPEM=function(h){var y=Yt(h,"CERTIFICATE REQUEST");return Bt.getKeyFromCSRHex(y)},Bt.getKeyFromCSRHex=function(h){var y=Bt.parseCSRHex(h);return Bt.getKey(y.p8pubkeyhex,null,"pkcs8pub")},Bt.parseCSRHex=function(h){var y=ae,w=y.getChildIdx,A=y.getTLV,U={},W=h;if(W.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var Q=w(W,0);if(Q.length<1)throw new Error("malformed CSR(code:002)");if(W.substr(Q[0],2)!="30")throw new Error("malformed CSR(code:003)");var ue=w(W,Q[0]);if(ue.length<3)throw new Error("malformed CSR(code:004)");return U.p8pubkeyhex=A(W,ue[2]),U},Bt.getKeyID=function(h){var y=Bt,w=ae;typeof h=="string"&&h.indexOf("BEGIN ")!=-1&&(h=y.getKey(h));var A=Yt(y.getPEM(h)),U=w.getIdxbyList(A,0,[1]),W=w.getV(A,U).substring(2);return k.crypto.Util.hashHex(W,"sha1")},Bt.getJWKFromKey=function(h){var y={};if(h instanceof ee&&h.isPrivate)return y.kty="RSA",y.n=Oe(h.n.toString(16)),y.e=Oe(h.e.toString(16)),y.d=Oe(h.d.toString(16)),y.p=Oe(h.p.toString(16)),y.q=Oe(h.q.toString(16)),y.dp=Oe(h.dmp1.toString(16)),y.dq=Oe(h.dmq1.toString(16)),y.qi=Oe(h.coeff.toString(16)),y;if(h instanceof ee&&h.isPublic)return y.kty="RSA",y.n=Oe(h.n.toString(16)),y.e=Oe(h.e.toString(16)),y;if(h instanceof k.crypto.ECDSA&&h.isPrivate){if((A=h.getShortNISTPCurveName())!=="P-256"&&A!=="P-384")throw new Error("unsupported curve name for JWT: "+A);var w=h.getPublicKeyXYHex();return y.kty="EC",y.crv=A,y.x=Oe(w.x),y.y=Oe(w.y),y.d=Oe(h.prvKeyHex),y}if(h instanceof k.crypto.ECDSA&&h.isPublic){var A;if((A=h.getShortNISTPCurveName())!=="P-256"&&A!=="P-384")throw new Error("unsupported curve name for JWT: "+A);return w=h.getPublicKeyXYHex(),y.kty="EC",y.crv=A,y.x=Oe(w.x),y.y=Oe(w.y),y}throw new Error("not supported key object")},ee.getPosArrayOfChildrenFromHex=function(h){return ae.getChildIdx(h,0)},ee.getHexValueArrayOfChildrenFromHex=function(h){var y,w=ae.getV,A=w(h,(y=ee.getPosArrayOfChildrenFromHex(h))[0]),U=w(h,y[1]),W=w(h,y[2]),Q=w(h,y[3]),ue=w(h,y[4]),oe=w(h,y[5]),ce=w(h,y[6]),he=w(h,y[7]),ye=w(h,y[8]);return(y=new Array).push(A,U,W,Q,ue,oe,ce,he,ye),y},ee.prototype.readPrivateKeyFromPEMString=function(h){var y=Yt(h),w=ee.getHexValueArrayOfChildrenFromHex(y);this.setPrivateEx(w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8])},ee.prototype.readPKCS5PrvKeyHex=function(h){var y=ee.getHexValueArrayOfChildrenFromHex(h);this.setPrivateEx(y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8])},ee.prototype.readPKCS8PrvKeyHex=function(h){var y,w,A,U,W,Q,ue,oe,ce=ae,he=ce.getVbyListEx;if(ce.isASN1HEX(h)===!1)throw new Error("not ASN.1 hex string");try{y=he(h,0,[2,0,1],"02"),w=he(h,0,[2,0,2],"02"),A=he(h,0,[2,0,3],"02"),U=he(h,0,[2,0,4],"02"),W=he(h,0,[2,0,5],"02"),Q=he(h,0,[2,0,6],"02"),ue=he(h,0,[2,0,7],"02"),oe=he(h,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(y,w,A,U,W,Q,ue,oe)},ee.prototype.readPKCS5PubKeyHex=function(h){var y=ae,w=y.getV;if(y.isASN1HEX(h)===!1)throw new Error("keyHex is not ASN.1 hex string");var A=y.getChildIdx(h,0);if(A.length!==2||h.substr(A[0],2)!=="02"||h.substr(A[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var U=w(h,A[0]),W=w(h,A[1]);this.setPublic(U,W)},ee.prototype.readPKCS8PubKeyHex=function(h){var y=ae;if(y.isASN1HEX(h)===!1)throw new Error("not ASN.1 hex string");if(y.getTLVbyListEx(h,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var w=y.getTLVbyListEx(h,0,[1,0]);this.readPKCS5PubKeyHex(w)},ee.prototype.readCertPubKeyHex=function(h,y){var w,A;(w=new vr).readCertHex(h),A=w.getPublicKeyHex(),this.readPKCS8PubKeyHex(A)};function Kr(h,y){for(var w="",A=y/4-h.length,U=0;U<A;U++)w+="0";return w+h}function Mr(h,y,w){for(var A="",U=0;A.length<y;)A+=ut(w(ot(h+String.fromCharCode.apply(String,[(4278190080&U)>>24,(16711680&U)>>16,(65280&U)>>8,255&U])))),U+=1;return A}function Br(h){for(var y in k.crypto.Util.DIGESTINFOHEAD){var w=k.crypto.Util.DIGESTINFOHEAD[y],A=w.length;if(h.substring(0,A)==w)return[y,h.substring(A)]}return[]}function vr(h){var y,w=ae,A=w.getChildIdx,U=w.getV,W=w.getTLV,Q=w.getVbyList,ue=w.getVbyListEx,oe=w.getTLVbyList,ce=w.getTLVbyListEx,he=w.getIdxbyList,ye=w.getIdxbyListEx,be=w.getVidx,Pe=w.getInt,He=w.oidname,ze=w.hextooidstr,Qe=Yt;try{y=k.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var te=oe(this.hex,0,[0,0]);if(te.substr(0,2)=="a0"){var pe=oe(te,0,[0]),ve=Pe(pe,0);if(ve<0||2<ve)throw new Error("malformed version field");return this.version=ve+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return ue(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var te=ce(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(te)},this.getAlgorithmIdentifierName=function(te){for(var pe in y)if(te===y[pe])return pe;return He(ue(te,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return oe(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return oe(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var te=Q(this.hex,0,[0,4+this.foffset,0]);return te=te.replace(/(..)/g,"%$1"),te=decodeURIComponent(te)},this.getNotAfter=function(){var te=Q(this.hex,0,[0,4+this.foffset,1]);return te=te.replace(/(..)/g,"%$1"),te=decodeURIComponent(te)},this.getPublicKeyHex=function(){return w.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return he(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var te=this.getPublicKeyIdx();return he(this.hex,te,[1,0],"30")},this.getPublicKey=function(){return Bt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var te=oe(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(te)},this.getSignatureValueHex=function(){return Q(this.hex,0,[2],"03",!0)},this.verifySignature=function(te){var pe=this.getSignatureAlgorithmField(),ve=this.getSignatureValueHex(),Ee=oe(this.hex,0,[0],"30"),We=new k.crypto.Signature({alg:pe});return We.init(te),We.updateHex(Ee),We.verify(ve)},this.parseExt=function(te){var pe,ve,Ee;if(te===void 0){if(Ee=this.hex,this.version!==3)return-1;pe=he(Ee,0,[0,7,0],"30"),ve=A(Ee,pe)}else{Ee=Yt(te);var We=he(Ee,0,[0,3,0,0],"06");if(U(Ee,We)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);pe=he(Ee,0,[0,3,0,1,0],"30"),ve=A(Ee,pe),this.hex=Ee}this.aExtInfo=new Array;for(var Ye=0;Ye<ve.length;Ye++){var Vt={critical:!1},pt=0;A(Ee,ve[Ye]).length===3&&(Vt.critical=!0,pt=1),Vt.oid=w.hextooidstr(Q(Ee,ve[Ye],[0],"06"));var Tr=he(Ee,ve[Ye],[1+pt]);Vt.vidx=be(Ee,Tr),this.aExtInfo.push(Vt)}},this.getExtInfo=function(te){var pe=this.aExtInfo,ve=te;if(te.match(/^[0-9.]+$/)||(ve=k.asn1.x509.OID.name2oid(te)),ve!==""){for(var Ee=0;Ee<pe.length;Ee++)if(pe[Ee].oid===ve)return pe[Ee]}},this.getExtBasicConstraints=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("basicConstraints");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"basicConstraints"};if(pe&&(Ee.critical=!0),te==="3000")return Ee;if(te==="30030101ff")return Ee.cA=!0,Ee;if(te.substr(0,12)==="30060101ff02"){var We=U(te,10),Ye=parseInt(We,16);return Ee.cA=!0,Ee.pathLen=Ye,Ee}throw new Error("hExtV parse error: "+te)},this.getExtKeyUsage=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("keyUsage");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"keyUsage"};return pe&&(Ee.critical=!0),Ee.names=this.getExtKeyUsageString(te).split(","),Ee},this.getExtKeyUsageBin=function(te){if(te===void 0){var pe=this.getExtInfo("keyUsage");if(pe===void 0)return"";te=W(this.hex,pe.vidx)}if(te.length!=8&&te.length!=10)throw new Error("malformed key usage value: "+te);var ve="000000000000000"+parseInt(te.substr(6),16).toString(2);return te.length==8&&(ve=ve.slice(-8)),te.length==10&&(ve=ve.slice(-16)),(ve=ve.replace(/0+$/,""))==""&&(ve="0"),ve},this.getExtKeyUsageString=function(te){for(var pe=this.getExtKeyUsageBin(te),ve=new Array,Ee=0;Ee<pe.length;Ee++)pe.substr(Ee,1)=="1"&&ve.push(vr.KEYUSAGE_NAME[Ee]);return ve.join(",")},this.getExtSubjectKeyIdentifier=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("subjectKeyIdentifier");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"subjectKeyIdentifier"};pe&&(Ee.critical=!0);var We=U(te,0);return Ee.kid={hex:We},Ee},this.getExtAuthorityKeyIdentifier=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("authorityKeyIdentifier");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"authorityKeyIdentifier"};pe&&(Ee.critical=!0);for(var We=A(te,0),Ye=0;Ye<We.length;Ye++){var Vt=te.substr(We[Ye],2);if(Vt==="80"&&(Ee.kid={hex:U(te,We[Ye])}),Vt==="a1"){var pt=W(te,We[Ye]),Tr=this.getGeneralNames(pt);Ee.issuer=Tr[0].dn}Vt==="82"&&(Ee.sn={hex:U(te,We[Ye])})}return Ee},this.getExtExtKeyUsage=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("extKeyUsage");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"extKeyUsage",array:[]};pe&&(Ee.critical=!0);for(var We=A(te,0),Ye=0;Ye<We.length;Ye++)Ee.array.push(He(U(te,We[Ye])));return Ee},this.getExtExtKeyUsageName=function(){var te=this.getExtInfo("extKeyUsage");if(te===void 0)return te;var pe=new Array,ve=W(this.hex,te.vidx);if(ve==="")return pe;for(var Ee=A(ve,0),We=0;We<Ee.length;We++)pe.push(He(U(ve,Ee[We])));return pe},this.getExtSubjectAltName=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("subjectAltName");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"subjectAltName",array:[]};return pe&&(Ee.critical=!0),Ee.array=this.getGeneralNames(te),Ee},this.getExtIssuerAltName=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("issuerAltName");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"issuerAltName",array:[]};return pe&&(Ee.critical=!0),Ee.array=this.getGeneralNames(te),Ee},this.getGeneralNames=function(te){for(var pe=A(te,0),ve=[],Ee=0;Ee<pe.length;Ee++){var We=this.getGeneralName(W(te,pe[Ee]));We!==void 0&&ve.push(We)}return ve},this.getGeneralName=function(te){var pe=te.substr(0,2),ve=U(te,0),Ee=ut(ve);return pe=="81"?{rfc822:Ee}:pe=="82"?{dns:Ee}:pe=="86"?{uri:Ee}:pe=="87"?{ip:Gt(ve)}:pe=="a4"?{dn:this.getX500Name(ve)}:void 0},this.getExtSubjectAltName2=function(){var te,pe,ve,Ee=this.getExtInfo("subjectAltName");if(Ee===void 0)return Ee;for(var We=new Array,Ye=W(this.hex,Ee.vidx),Vt=A(Ye,0),pt=0;pt<Vt.length;pt++)ve=Ye.substr(Vt[pt],2),te=U(Ye,Vt[pt]),ve==="81"&&(pe=ht(te),We.push(["MAIL",pe])),ve==="82"&&(pe=ht(te),We.push(["DNS",pe])),ve==="84"&&(pe=vr.hex2dn(te,0),We.push(["DN",pe])),ve==="86"&&(pe=ht(te),We.push(["URI",pe])),ve==="87"&&(pe=Gt(te),We.push(["IP",pe]));return We},this.getExtCRLDistributionPoints=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("cRLDistributionPoints");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"cRLDistributionPoints",array:[]};pe&&(Ee.critical=!0);for(var We=A(te,0),Ye=0;Ye<We.length;Ye++){var Vt=W(te,We[Ye]);Ee.array.push(this.getDistributionPoint(Vt))}return Ee},this.getDistributionPoint=function(te){for(var pe={},ve=A(te,0),Ee=0;Ee<ve.length;Ee++){var We=te.substr(ve[Ee],2),Ye=W(te,ve[Ee]);We=="a0"&&(pe.dpname=this.getDistributionPointName(Ye))}return pe},this.getDistributionPointName=function(te){for(var pe={},ve=A(te,0),Ee=0;Ee<ve.length;Ee++){var We=te.substr(ve[Ee],2),Ye=W(te,ve[Ee]);We=="a0"&&(pe.full=this.getGeneralNames(Ye))}return pe},this.getExtCRLDistributionPointsURI=function(){var te=this.getExtInfo("cRLDistributionPoints");if(te===void 0)return te;for(var pe=new Array,ve=A(this.hex,te.vidx),Ee=0;Ee<ve.length;Ee++)try{var We=ht(Q(this.hex,ve[Ee],[0,0,0],"86"));pe.push(We)}catch{}return pe},this.getExtAIAInfo=function(){var te=this.getExtInfo("authorityInfoAccess");if(te===void 0)return te;for(var pe={ocsp:[],caissuer:[]},ve=A(this.hex,te.vidx),Ee=0;Ee<ve.length;Ee++){var We=Q(this.hex,ve[Ee],[0],"06"),Ye=Q(this.hex,ve[Ee],[1],"86");We==="2b06010505073001"&&pe.ocsp.push(ht(Ye)),We==="2b06010505073002"&&pe.caissuer.push(ht(Ye))}return pe},this.getExtAuthorityInfoAccess=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("authorityInfoAccess");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"authorityInfoAccess",array:[]};pe&&(Ee.critical=!0);for(var We=A(te,0),Ye=0;Ye<We.length;Ye++){var Vt=ue(te,We[Ye],[0],"06"),pt=ht(Q(te,We[Ye],[1],"86"));if(Vt=="2b06010505073001")Ee.array.push({ocsp:pt});else{if(Vt!="2b06010505073002")throw new Error("unknown method: "+Vt);Ee.array.push({caissuer:pt})}}return Ee},this.getExtCertificatePolicies=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("certificatePolicies");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"certificatePolicies",array:[]};pe&&(Ee.critical=!0);for(var We=A(te,0),Ye=0;Ye<We.length;Ye++){var Vt=W(te,We[Ye]),pt=this.getPolicyInformation(Vt);Ee.array.push(pt)}return Ee},this.getPolicyInformation=function(te){var pe={},ve=Q(te,0,[0],"06");pe.policyoid=He(ve);var Ee=ye(te,0,[1],"30");if(Ee!=-1){pe.array=[];for(var We=A(te,Ee),Ye=0;Ye<We.length;Ye++){var Vt=W(te,We[Ye]),pt=this.getPolicyQualifierInfo(Vt);pe.array.push(pt)}}return pe},this.getPolicyQualifierInfo=function(te){var pe={},ve=Q(te,0,[0],"06");if(ve==="2b06010505070201"){var Ee=ue(te,0,[1],"16");pe.cps=ut(Ee)}else if(ve==="2b06010505070202"){var We=oe(te,0,[1],"30");pe.unotice=this.getUserNotice(We)}return pe},this.getUserNotice=function(te){for(var pe={},ve=A(te,0),Ee=0;Ee<ve.length;Ee++){var We=W(te,ve[Ee]);We.substr(0,2)!="30"&&(pe.exptext=this.getDisplayText(We))}return pe},this.getDisplayText=function(te){var pe={};return pe.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[te.substr(0,2)],pe.str=ut(U(te,0)),pe},this.getExtCRLNumber=function(te,pe){var ve={extname:"cRLNumber"};if(pe&&(ve.critical=!0),te.substr(0,2)=="02")return ve.num={hex:U(te,0)},ve;throw new Error("hExtV parse error: "+te)},this.getExtCRLReason=function(te,pe){var ve={extname:"cRLReason"};if(pe&&(ve.critical=!0),te.substr(0,2)=="0a")return ve.code=parseInt(U(te,0),16),ve;throw new Error("hExtV parse error: "+te)},this.getExtOcspNonce=function(te,pe){var ve={extname:"ocspNonce"};pe&&(ve.critical=!0);var Ee=U(te,0);return ve.hex=Ee,ve},this.getExtOcspNoCheck=function(te,pe){var ve={extname:"ocspNoCheck"};return pe&&(ve.critical=!0),ve},this.getExtAdobeTimeStamp=function(te,pe){if(te===void 0&&pe===void 0){var ve=this.getExtInfo("adobeTimeStamp");if(ve===void 0)return;te=W(this.hex,ve.vidx),pe=ve.critical}var Ee={extname:"adobeTimeStamp"};pe&&(Ee.critical=!0);var We=A(te,0);if(We.length>1){var Ye=W(te,We[1]),Vt=this.getGeneralName(Ye);Vt.uri!=null&&(Ee.uri=Vt.uri)}if(We.length>2){var pt=W(te,We[2]);pt=="0101ff"&&(Ee.reqauth=!0),pt=="010100"&&(Ee.reqauth=!1)}return Ee},this.getX500NameRule=function(te){for(var pe=null,ve=[],Ee=0;Ee<te.length;Ee++)for(var We=te[Ee],Ye=0;Ye<We.length;Ye++)ve.push(We[Ye]);for(Ee=0;Ee<ve.length;Ee++){var Vt=ve[Ee],pt=Vt.ds,Tr=Vt.value,kt=Vt.type;if(pt!="prn"&&pt!="utf8"&&pt!="ia5")return"mixed";if(pt=="ia5"){if(kt!="CN")return"mixed";if(k.lang.String.isMail(Tr))continue;return"mixed"}if(kt=="C"){if(pt=="prn")continue;return"mixed"}if(pe==null)pe=pt;else if(pe!==pt)return"mixed"}return pe??"prn"},this.getX500Name=function(te){var pe=this.getX500NameArray(te);return{array:pe,str:this.dnarraytostr(pe)}},this.getX500NameArray=function(te){for(var pe=[],ve=A(te,0),Ee=0;Ee<ve.length;Ee++)pe.push(this.getRDN(W(te,ve[Ee])));return pe},this.getRDN=function(te){for(var pe=[],ve=A(te,0),Ee=0;Ee<ve.length;Ee++)pe.push(this.getAttrTypeAndValue(W(te,ve[Ee])));return pe},this.getAttrTypeAndValue=function(te){var pe={type:null,value:null,ds:null},ve=A(te,0),Ee=Q(te,ve[0],[],"06"),We=Q(te,ve[1],[]),Ye=k.asn1.ASN1Util.oidHexToInt(Ee);return pe.type=k.asn1.x509.OID.oid2atype(Ye),pe.ds=this.HEX2STAG[te.substr(ve[1],2)],pe.ds!="bmp"?pe.value=ht(We):pe.value=Lt(We),pe},this.readCertPEM=function(te){this.readCertHex(Qe(te))},this.readCertHex=function(te){this.hex=te,this.getVersion();try{he(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var te={};return te.version=this.getVersion(),te.serial={hex:this.getSerialNumberHex()},te.sigalg=this.getSignatureAlgorithmField(),te.issuer=this.getIssuer(),te.notbefore=this.getNotBefore(),te.notafter=this.getNotAfter(),te.subject=this.getSubject(),te.sbjpubkey=zt(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(te.ext=this.getExtParamArray()),te.sighex=this.getSignatureValueHex(),te},this.getExtParamArray=function(te){te==null&&ye(this.hex,0,[0,"[3]"])!=-1&&(te=ce(this.hex,0,[0,"[3]",0],"30"));for(var pe=[],ve=A(te,0),Ee=0;Ee<ve.length;Ee++){var We=W(te,ve[Ee]),Ye=this.getExtParam(We);Ye!=null&&pe.push(Ye)}return pe},this.getExtParam=function(te){var pe=A(te,0).length;if(pe!=2&&pe!=3)throw new Error("wrong number elements in Extension: "+pe+" "+te);var ve=ze(Q(te,0,[0],"06")),Ee=!1;pe==3&&oe(te,0,[1])=="0101ff"&&(Ee=!0);var We=oe(te,0,[pe-1,0]),Ye=void 0;if(ve=="2.5.29.14"?Ye=this.getExtSubjectKeyIdentifier(We,Ee):ve=="2.5.29.15"?Ye=this.getExtKeyUsage(We,Ee):ve=="2.5.29.17"?Ye=this.getExtSubjectAltName(We,Ee):ve=="2.5.29.18"?Ye=this.getExtIssuerAltName(We,Ee):ve=="2.5.29.19"?Ye=this.getExtBasicConstraints(We,Ee):ve=="2.5.29.31"?Ye=this.getExtCRLDistributionPoints(We,Ee):ve=="2.5.29.32"?Ye=this.getExtCertificatePolicies(We,Ee):ve=="2.5.29.35"?Ye=this.getExtAuthorityKeyIdentifier(We,Ee):ve=="2.5.29.37"?Ye=this.getExtExtKeyUsage(We,Ee):ve=="1.3.6.1.5.5.7.1.1"?Ye=this.getExtAuthorityInfoAccess(We,Ee):ve=="2.5.29.20"?Ye=this.getExtCRLNumber(We,Ee):ve=="2.5.29.21"?Ye=this.getExtCRLReason(We,Ee):ve=="1.3.6.1.5.5.7.48.1.2"?Ye=this.getExtOcspNonce(We,Ee):ve=="1.3.6.1.5.5.7.48.1.5"?Ye=this.getExtOcspNoCheck(We,Ee):ve=="1.2.840.113583.1.1.9.1"&&(Ye=this.getExtAdobeTimeStamp(We,Ee)),Ye!=null)return Ye;var Vt={extname:ve,extn:We};return Ee&&(Vt.critical=!0),Vt},this.findExt=function(te,pe){for(var ve=0;ve<te.length;ve++)if(te[ve].extname==pe)return te[ve];return null},this.updateExtCDPFullURI=function(te,pe){var ve=this.findExt(te,"cRLDistributionPoints");if(ve!=null&&ve.array!=null){for(var Ee=ve.array,We=0;We<Ee.length;We++)if(Ee[We].dpname!=null&&Ee[We].dpname.full!=null)for(var Ye=Ee[We].dpname.full,Vt=0;Vt<Ye.length;Vt++){var pt=Ye[We];pt.uri!=null&&(pt.uri=pe)}}},this.updateExtAIAOCSP=function(te,pe){var ve=this.findExt(te,"authorityInfoAccess");if(ve!=null&&ve.array!=null)for(var Ee=ve.array,We=0;We<Ee.length;We++)Ee[We].ocsp!=null&&(Ee[We].ocsp=pe)},this.updateExtAIACAIssuer=function(te,pe){var ve=this.findExt(te,"authorityInfoAccess");if(ve!=null&&ve.array!=null)for(var Ee=ve.array,We=0;We<Ee.length;We++)Ee[We].caissuer!=null&&(Ee[We].caissuer=pe)},this.dnarraytostr=function(te){return"/"+te.map(function(pe){return function(Ee){return Ee.map(function(We){return function(Vt){return Vt.type+"="+Vt.value}(We).replace(/\+/,"\\+")}).join("+")}(pe).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var te,pe,ve,Ee=function(pn){return JSON.stringify(pn.array).replace(/[\[\]\{\}\"]/g,"")},We=function(pn){for(var kr="",mn=pn.array,$r=0;$r<mn.length;$r++){var ar=mn[$r];if(kr+="    policy oid: "+ar.policyoid+`
`,ar.array!==void 0)for(var Rn=0;Rn<ar.array.length;Rn++){var vn=ar.array[Rn];vn.cps!==void 0&&(kr+="    cps: "+vn.cps+`
`)}}return kr},Ye=function(pn){for(var kr="",mn=pn.array,$r=0;$r<mn.length;$r++){var ar=mn[$r];try{ar.dpname.full[0].uri!==void 0&&(kr+="    "+ar.dpname.full[0].uri+`
`)}catch{}try{ar.dname.full[0].dn.hex!==void 0&&(kr+="    "+vr.hex2dn(ar.dpname.full[0].dn.hex)+`
`)}catch{}}return kr},Vt=function(pn){for(var kr="",mn=pn.array,$r=0;$r<mn.length;$r++){var ar=mn[$r];ar.caissuer!==void 0&&(kr+="    caissuer: "+ar.caissuer+`
`),ar.ocsp!==void 0&&(kr+="    ocsp: "+ar.ocsp+`
`)}return kr};if(te=`Basic Fields
`,te+="  serial number: "+this.getSerialNumberHex()+`
`,te+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,te+="  issuer: "+this.getIssuerString()+`
`,te+="  notBefore: "+this.getNotBefore()+`
`,te+="  notAfter: "+this.getNotAfter()+`
`,te+="  subject: "+this.getSubjectString()+`
`,te+=`  subject public key info: 
`,te+="    key algorithm: "+(pe=this.getPublicKey()).type+`
`,pe.type==="RSA"&&(te+="    n="+jr(pe.n.toString(16)).substr(0,16)+`...
`,te+="    e="+jr(pe.e.toString(16))+`
`),(ve=this.aExtInfo)!=null){te+=`X509v3 Extensions:
`;for(var pt=0;pt<ve.length;pt++){var Tr=ve[pt],kt=k.asn1.x509.OID.oid2name(Tr.oid);kt===""&&(kt=Tr.oid);var Jt="";if(Tr.critical===!0&&(Jt="CRITICAL"),te+="  "+kt+" "+Jt+`:
`,kt==="basicConstraints"){var qt=this.getExtBasicConstraints();qt.cA===void 0?te+=`    {}
`:(te+="    cA=true",qt.pathLen!==void 0&&(te+=", pathLen="+qt.pathLen),te+=`
`)}else if(kt==="keyUsage")te+="    "+this.getExtKeyUsageString()+`
`;else if(kt==="subjectKeyIdentifier")te+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(kt==="authorityKeyIdentifier"){var Ur=this.getExtAuthorityKeyIdentifier();Ur.kid!==void 0&&(te+="    kid="+Ur.kid.hex+`
`)}else kt==="extKeyUsage"?te+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:kt==="subjectAltName"?te+="    "+Ee(this.getExtSubjectAltName())+`
`:kt==="cRLDistributionPoints"?te+=Ye(this.getExtCRLDistributionPoints()):kt==="authorityInfoAccess"?te+=Vt(this.getExtAuthorityInfoAccess()):kt==="certificatePolicies"&&(te+=We(this.getExtCertificatePolicies()))}}return te+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,te+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof h=="string"&&(h.indexOf("-----BEGIN")!=-1?this.readCertPEM(h):k.lang.String.isHex(h)&&this.readCertHex(h))}ee.prototype.sign=function(h,y){var w=function(U){return k.crypto.Util.hashString(U,y)}(h);return this.signWithMessageHash(w,y)},ee.prototype.signWithMessageHash=function(h,y){var w=$t(k.crypto.Util.getPaddedDigestInfoHex(h,y,this.n.bitLength()),16);return Kr(this.doPrivate(w).toString(16),this.n.bitLength())},ee.prototype.signPSS=function(h,y,w){var A=function(W){return k.crypto.Util.hashHex(W,y)}(ot(h));return w===void 0&&(w=-1),this.signWithMessageHashPSS(A,y,w)},ee.prototype.signWithMessageHashPSS=function(h,y,w){var A,U=ut(h),W=U.length,Q=this.n.bitLength()-1,ue=Math.ceil(Q/8),oe=function(te){return k.crypto.Util.hashHex(te,y)};if(w===-1||w===void 0)w=W;else if(w===-2)w=ue-W-2;else if(w<-2)throw new Error("invalid salt length");if(ue<W+w+2)throw new Error("data too long");var ce="";w>0&&(ce=new Array(w),new Mt().nextBytes(ce),ce=String.fromCharCode.apply(String,ce));var he=ut(oe(ot("\0\0\0\0\0\0\0\0"+U+ce))),ye=[];for(A=0;A<ue-w-W-2;A+=1)ye[A]=0;var be=String.fromCharCode.apply(String,ye)+""+ce,Pe=Mr(he,be.length,oe),He=[];for(A=0;A<be.length;A+=1)He[A]=be.charCodeAt(A)^Pe.charCodeAt(A);var ze=65280>>8*ue-Q&255;for(He[0]&=~ze,A=0;A<W;A++)He.push(he.charCodeAt(A));return He.push(188),Kr(this.doPrivate(new M(He)).toString(16),this.n.bitLength())},ee.prototype.verify=function(h,y){if((y=y.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var w=$t(y,16),A=this.n.bitLength();if(w.bitLength()>A)return!1;var U=this.doPublic(w).toString(16);if(U.length+3!=A/4)return!1;var W=Br(U.replace(/^1f+00/,""));if(W.length==0)return!1;var Q=W[0];return W[1]==function(oe){return k.crypto.Util.hashString(oe,Q)}(h)},ee.prototype.verifyWithMessageHash=function(h,y){if(y.length!=Math.ceil(this.n.bitLength()/4))return!1;var w=$t(y,16);if(w.bitLength()>this.n.bitLength())return 0;var A=Br(this.doPublic(w).toString(16).replace(/^1f+00/,""));return A.length==0?!1:(A[0],A[1]==h)},ee.prototype.verifyPSS=function(h,y,w,A){var U=function(Q){return k.crypto.Util.hashHex(Q,w)}(ot(h));return A===void 0&&(A=-1),this.verifyWithMessageHashPSS(U,y,w,A)},ee.prototype.verifyWithMessageHashPSS=function(h,y,w,A){if(y.length!=Math.ceil(this.n.bitLength()/4))return!1;var U,W=new M(y,16),Q=function(ve){return k.crypto.Util.hashHex(ve,w)},ue=ut(h),oe=ue.length,ce=this.n.bitLength()-1,he=Math.ceil(ce/8);if(A===-1||A===void 0)A=oe;else if(A===-2)A=he-oe-2;else if(A<-2)throw new Error("invalid salt length");if(he<oe+A+2)throw new Error("data too long");var ye=this.doPublic(W).toByteArray();for(U=0;U<ye.length;U+=1)ye[U]&=255;for(;ye.length<he;)ye.unshift(0);if(ye[he-1]!==188)throw new Error("encoded message does not end in 0xbc");var be=(ye=String.fromCharCode.apply(String,ye)).substr(0,he-oe-1),Pe=ye.substr(be.length,oe),He=65280>>8*he-ce&255;if(be.charCodeAt(0)&He)throw new Error("bits beyond keysize not zero");var ze=Mr(Pe,be.length,Q),Qe=[];for(U=0;U<be.length;U+=1)Qe[U]=be.charCodeAt(U)^ze.charCodeAt(U);Qe[0]&=~He;var te=he-oe-A-2;for(U=0;U<te;U+=1)if(Qe[U]!==0)throw new Error("leftmost octets not zero");if(Qe[te]!==1)throw new Error("0x01 marker not found");return Pe===ut(Q(ot("\0\0\0\0\0\0\0\0"+ue+String.fromCharCode.apply(String,Qe.slice(-A)))))},ee.SALT_LEN_HLEN=-1,ee.SALT_LEN_MAX=-2,ee.SALT_LEN_RECOVER=-2,vr.hex2dn=function(h,y){y===void 0&&(y=0);var w=new vr;return ae.getTLV(h,y),w.getX500Name(h).str},vr.hex2rdn=function(h,y){if(y===void 0&&(y=0),h.substr(y,2)!=="31")throw new Error("malformed RDN");for(var w=new Array,A=ae.getChildIdx(h,y),U=0;U<A.length;U++)w.push(vr.hex2attrTypeValue(h,A[U]));return(w=w.map(function(W){return W.replace("+","\\+")})).join("+")},vr.hex2attrTypeValue=function(h,y){var w=ae,A=w.getV;if(y===void 0&&(y=0),h.substr(y,2)!=="30")throw new Error("malformed attribute type and value");var U=w.getChildIdx(h,y);U.length!==2||h.substr(U[0],2);var W=A(h,U[0]),Q=k.asn1.ASN1Util.oidHexToInt(W);return k.asn1.x509.OID.oid2atype(Q)+"="+ut(A(h,U[1]))},vr.getPublicKeyFromCertHex=function(h){var y=new vr;return y.readCertHex(h),y.getPublicKey()},vr.getPublicKeyFromCertPEM=function(h){var y=new vr;return y.readCertPEM(h),y.getPublicKey()},vr.getPublicKeyInfoPropOfCertPEM=function(h){var y,w,A=ae.getVbyList,U={};return U.algparam=null,(y=new vr).readCertPEM(h),w=y.getPublicKeyHex(),U.keyhex=A(w,0,[1],"03").substr(2),U.algoid=A(w,0,[0,0],"06"),U.algoid==="2a8648ce3d0201"&&(U.algparam=A(w,0,[0,1],"06")),U},vr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],k!==void 0&&k||(n.KJUR=k={}),k.jws!==void 0&&k.jws||(k.jws={}),k.jws.JWS=function(){var h=k.jws.JWS.isSafeJSONString;this.parseJWS=function(y,w){if(this.parsedJWS===void 0||!w&&this.parsedJWS.sigvalH===void 0){var A=y.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(A==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var U=A[1],W=A[2],Q=A[3],ue=U+"."+W;if(this.parsedJWS={},this.parsedJWS.headB64U=U,this.parsedJWS.payloadB64U=W,this.parsedJWS.sigvalB64U=Q,this.parsedJWS.si=ue,!w){var oe=_e(Q),ce=$t(oe,16);this.parsedJWS.sigvalH=oe,this.parsedJWS.sigvalBI=ce}var he=xe(U),ye=xe(W);if(this.parsedJWS.headS=he,this.parsedJWS.payloadS=ye,!h(he,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+he}}},k.jws.JWS.sign=function(h,y,w,A,U){var W,Q,ue,oe=k,ce=oe.jws.JWS,he=ce.readSafeJSONString,ye=ce.isSafeJSONString,be=oe.crypto,Pe=(be.ECDSA,be.Mac),He=be.Signature,ze=JSON;if(typeof y!="string"&&(y===void 0?"undefined":S(y))!="object")throw"spHeader must be JSON string or object: "+y;if((y===void 0?"undefined":S(y))=="object"&&(Q=y,W=ze.stringify(Q)),typeof y=="string"){if(!ye(W=y))throw"JWS Head is not safe JSON string: "+W;Q=he(W)}if(ue=w,(w===void 0?"undefined":S(w))=="object"&&(ue=ze.stringify(w)),h!=""&&h!=null||Q.alg===void 0||(h=Q.alg),h!=""&&h!=null&&Q.alg===void 0&&(Q.alg=h,W=ze.stringify(Q)),h!==Q.alg)throw"alg and sHeader.alg doesn't match: "+h+"!="+Q.alg;var Qe=null;if(ce.jwsalg2sigalg[h]===void 0)throw"unsupported alg name: "+h;Qe=ce.jwsalg2sigalg[h];var te=ge(W)+"."+ge(ue),pe="";if(Qe.substr(0,4)=="Hmac"){if(A===void 0)throw"mac key shall be specified for HS* alg";var ve=new Pe({alg:Qe,prov:"cryptojs",pass:A});ve.updateString(te),pe=ve.doFinal()}else if(Qe.indexOf("withECDSA")!=-1){(We=new He({alg:Qe})).init(A,U),We.updateString(te);var Ee=We.sign();pe=k.crypto.ECDSA.asn1SigToConcatSig(Ee)}else{var We;Qe!="none"&&((We=new He({alg:Qe})).init(A,U),We.updateString(te),pe=We.sign())}return te+"."+Oe(pe)},k.jws.JWS.verify=function(h,y,w){var A,U=k,W=U.jws.JWS,Q=W.readSafeJSONString,ue=U.crypto,oe=ue.ECDSA,ce=ue.Mac,he=ue.Signature;S(ee)!==void 0&&(A=ee);var ye=h.split(".");if(ye.length!==3)return!1;var be=ye[0]+"."+ye[1],Pe=_e(ye[2]),He=Q(xe(ye[0])),ze=null,Qe=null;if(He.alg===void 0)throw"algorithm not specified in header";if(Qe=(ze=He.alg).substr(0,2),w!=null&&Object.prototype.toString.call(w)==="[object Array]"&&w.length>0&&(":"+w.join(":")+":").indexOf(":"+ze+":")==-1)throw"algorithm '"+ze+"' not accepted in the list";if(ze!="none"&&y===null)throw"key shall be specified to verify.";if(typeof y=="string"&&y.indexOf("-----BEGIN ")!=-1&&(y=Bt.getKey(y)),!(Qe!="RS"&&Qe!="PS"||y instanceof A))throw"key shall be a RSAKey obj for RS* and PS* algs";if(Qe=="ES"&&!(y instanceof oe))throw"key shall be a ECDSA obj for ES* algs";var te=null;if(W.jwsalg2sigalg[He.alg]===void 0)throw"unsupported alg name: "+ze;if((te=W.jwsalg2sigalg[ze])=="none")throw"not supported";if(te.substr(0,4)=="Hmac"){if(y===void 0)throw"hexadecimal key shall be specified for HMAC";var pe=new ce({alg:te,pass:y});return pe.updateString(be),Pe==pe.doFinal()}if(te.indexOf("withECDSA")!=-1){var ve,Ee=null;try{Ee=oe.concatSigToASN1Sig(Pe)}catch{return!1}return(ve=new he({alg:te})).init(y),ve.updateString(be),ve.verify(Ee)}return(ve=new he({alg:te})).init(y),ve.updateString(be),ve.verify(Pe)},k.jws.JWS.parse=function(h){var y,w,A,U=h.split("."),W={};if(U.length!=2&&U.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return y=U[0],w=U[1],U.length==3&&(A=U[2]),W.headerObj=k.jws.JWS.readSafeJSONString(xe(y)),W.payloadObj=k.jws.JWS.readSafeJSONString(xe(w)),W.headerPP=JSON.stringify(W.headerObj,null,"  "),W.payloadObj==null?W.payloadPP=xe(w):W.payloadPP=JSON.stringify(W.payloadObj,null,"  "),A!==void 0&&(W.sigHex=_e(A)),W},k.jws.JWS.verifyJWT=function(h,y,w){var A=k.jws,U=A.JWS,W=U.readSafeJSONString,Q=U.inArray,ue=U.includedArray,oe=h.split("."),ce=oe[0],he=oe[1],ye=(_e(oe[2]),W(xe(ce))),be=W(xe(he));if(ye.alg===void 0)return!1;if(w.alg===void 0)throw"acceptField.alg shall be specified";if(!Q(ye.alg,w.alg)||be.iss!==void 0&&S(w.iss)==="object"&&!Q(be.iss,w.iss)||be.sub!==void 0&&S(w.sub)==="object"&&!Q(be.sub,w.sub))return!1;if(be.aud!==void 0&&S(w.aud)==="object"){if(typeof be.aud=="string"){if(!Q(be.aud,w.aud))return!1}else if(S(be.aud)=="object"&&!ue(be.aud,w.aud))return!1}var Pe=A.IntDate.getNow();return w.verifyAt!==void 0&&typeof w.verifyAt=="number"&&(Pe=w.verifyAt),w.gracePeriod!==void 0&&typeof w.gracePeriod=="number"||(w.gracePeriod=0),!(be.exp!==void 0&&typeof be.exp=="number"&&be.exp+w.gracePeriod<Pe)&&!(be.nbf!==void 0&&typeof be.nbf=="number"&&Pe<be.nbf-w.gracePeriod)&&!(be.iat!==void 0&&typeof be.iat=="number"&&Pe<be.iat-w.gracePeriod)&&(be.jti===void 0||w.jti===void 0||be.jti===w.jti)&&!!U.verify(h,y,w.alg)},k.jws.JWS.includedArray=function(h,y){var w=k.jws.JWS.inArray;if(h===null||(h===void 0?"undefined":S(h))!=="object"||typeof h.length!="number")return!1;for(var A=0;A<h.length;A++)if(!w(h[A],y))return!1;return!0},k.jws.JWS.inArray=function(h,y){if(y===null||(y===void 0?"undefined":S(y))!=="object"||typeof y.length!="number")return!1;for(var w=0;w<y.length;w++)if(y[w]==h)return!0;return!1},k.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},k.jws.JWS.isSafeJSONString=function(h,y,w){var A=null;try{return((A=L(h))===void 0?"undefined":S(A))!="object"||A.constructor===Array?0:(y&&(y[w]=A),1)}catch{return 0}},k.jws.JWS.readSafeJSONString=function(h){var y=null;try{return((y=L(h))===void 0?"undefined":S(y))!="object"||y.constructor===Array?null:y}catch{return null}},k.jws.JWS.getEncodedSignatureValueFromJWS=function(h){var y=h.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(y==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return y[1]},k.jws.JWS.getJWKthumbprint=function(h){if(h.kty!=="RSA"&&h.kty!=="EC"&&h.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var y="{";if(h.kty==="RSA"){if(typeof h.n!="string"||typeof h.e!="string")throw"wrong n and e value for RSA key";y+='"e":"'+h.e+'",',y+='"kty":"'+h.kty+'",',y+='"n":"'+h.n+'"}'}else if(h.kty==="EC"){if(typeof h.crv!="string"||typeof h.x!="string"||typeof h.y!="string")throw"wrong crv, x and y value for EC key";y+='"crv":"'+h.crv+'",',y+='"kty":"'+h.kty+'",',y+='"x":"'+h.x+'",',y+='"y":"'+h.y+'"}'}else if(h.kty==="oct"){if(typeof h.k!="string")throw"wrong k value for oct(symmetric) key";y+='"kty":"'+h.kty+'",',y+='"k":"'+h.k+'"}'}var w=ot(y);return Oe(k.crypto.Util.hashHex(w,"sha256"))},k.jws.IntDate={},k.jws.IntDate.get=function(h){var y=k.jws.IntDate,w=y.getNow,A=y.getZulu;if(h=="now")return w();if(h=="now + 1hour")return w()+3600;if(h=="now + 1day")return w()+86400;if(h=="now + 1month")return w()+2592e3;if(h=="now + 1year")return w()+31536e3;if(h.match(/Z$/))return A(h);if(h.match(/^[0-9]+$/))return parseInt(h);throw"unsupported format: "+h},k.jws.IntDate.getZulu=function(h){return Zt(h)},k.jws.IntDate.getNow=function(){return~~(new Date/1e3)},k.jws.IntDate.intDate2UTCString=function(h){return new Date(1e3*h).toUTCString()},k.jws.IntDate.intDate2Zulu=function(h){var y=new Date(1e3*h);return("0000"+y.getUTCFullYear()).slice(-4)+("00"+(y.getUTCMonth()+1)).slice(-2)+("00"+y.getUTCDate()).slice(-2)+("00"+y.getUTCHours()).slice(-2)+("00"+y.getUTCMinutes()).slice(-2)+("00"+y.getUTCSeconds()).slice(-2)+"Z"},n.SecureRandom=Mt,n.rng_seed_time=fe,n.BigInteger=M,n.RSAKey=ee;var Cr=k.crypto.EDSA;n.EDSA=Cr;var Ct=k.crypto.DSA;n.DSA=Ct;var sn=k.crypto.Signature;n.Signature=sn;var Wr=k.crypto.MessageDigest;n.MessageDigest=Wr;var Ir=k.crypto.Mac;n.Mac=Ir;var Sn=k.crypto.Cipher;n.Cipher=Sn,n.KEYUTIL=Bt,n.ASN1HEX=ae,n.X509=vr,n.CryptoJS=B,n.b64tohex=ne,n.b64toBA=Y,n.stoBA=bt,n.BAtos=Wt,n.BAtohex=Rt,n.stohex=xt,n.stob64=function(y){return F(xt(y))},n.stob64u=function(y){return Se(F(xt(y)))},n.b64utos=function(y){return Wt(Y(Ve(y)))},n.b64tob64u=Se,n.b64utob64=Ve,n.hex2b64=F,n.hextob64u=Oe,n.b64utohex=_e,n.utf8tob64u=ge,n.b64utoutf8=xe,n.utf8tob64=function(y){return F(Ot(Sr(y)))},n.b64toutf8=function(y){return decodeURIComponent(mr(ne(y)))},n.utf8tohex=Ke,n.hextoutf8=ht,n.hextorstr=ut,n.rstrtohex=ot,n.hextob64=yt,n.hextob64nl=Ht,n.b64nltohex=Qt,n.hextopem=zt,n.pemtohex=Yt,n.hextoArrayBuffer=function(y){if(y.length%2!=0)throw"input is not even length";if(y.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var w=new ArrayBuffer(y.length/2),A=new DataView(w),U=0;U<y.length/2;U++)A.setUint8(U,parseInt(y.substr(2*U,2),16));return w},n.ArrayBuffertohex=function(y){for(var w="",A=new DataView(y),U=0;U<y.byteLength;U++)w+=("00"+A.getUint8(U).toString(16)).slice(-2);return w},n.zulutomsec=fr,n.zulutosec=Zt,n.zulutodate=function(y){return new Date(fr(y))},n.datetozulu=function(y,w,A){var U,W=y.getUTCFullYear();if(w){if(W<1950||2049<W)throw"not proper year for UTCTime: "+W;U=(""+W).slice(-2)}else U=("000"+W).slice(-4);if(U+=("0"+(y.getUTCMonth()+1)).slice(-2),U+=("0"+y.getUTCDate()).slice(-2),U+=("0"+y.getUTCHours()).slice(-2),U+=("0"+y.getUTCMinutes()).slice(-2),U+=("0"+y.getUTCSeconds()).slice(-2),A){var Q=y.getUTCMilliseconds();Q!==0&&(U+="."+(Q=(Q=("00"+Q).slice(-3)).replace(/0+$/g,"")))}return U+="Z"},n.uricmptohex=Ot,n.hextouricmp=mr,n.ipv6tohex=wt,n.hextoipv6=It,n.hextoip=Gt,n.iptohex=function(y){var w="malformed IP address";if(!(y=y.toLowerCase(y)).match(/^[0-9.]+$/)){if(y.match(/^[0-9a-f:]+$/)&&y.indexOf(":")!==-1)return wt(y);throw w}var A=y.split(".");if(A.length!==4)throw w;var U="";try{for(var W=0;W<4;W++)U+=("0"+parseInt(A[W]).toString(16)).slice(-2);return U}catch{throw w}},n.encodeURIComponentAll=Sr,n.newline_toUnix=function(y){return y=y.replace(/\r\n/gm,`
`)},n.newline_toDos=function(y){return y=(y=y.replace(/\r\n/gm,`
`)).replace(/\n/gm,`\r
`)},n.hextoposhex=jr,n.intarystrtohex=function(y){y=(y=(y=y.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return y.split(/,/).map(function(w,A,U){var W=parseInt(w);if(W<0||255<W)throw"integer not in range 0-255";return("00"+W.toString(16)).slice(-2)}).join("")}catch(w){throw"malformed integer array string: "+w}},n.strdiffidx=function(y,w){var A=y.length;y.length>w.length&&(A=w.length);for(var U=0;U<A;U++)if(y.charCodeAt(U)!=w.charCodeAt(U))return U;return y.length!=w.length?A:-1},n.KJUR=k;var Gn=k.crypto;n.crypto=Gn;var qn=k.asn1;n.asn1=qn;var tn=k.jws;n.jws=tn;var rn=k.lang;n.lang=rn}).call(this,o(28).Buffer)},function(r,n,o){(function(a){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var s=o(30),u=o(31),f=o(32);function c(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(Z,N){if(c()<N)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(Z=new Uint8Array(N)).__proto__=p.prototype:(Z===null&&(Z=new p(N)),Z.length=N),Z}function p(Z,N,E){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(Z,N,E);if(typeof Z=="number"){if(typeof N=="string")throw new Error("If encoding is specified then the first argument must be a string");return C(this,Z)}return m(this,Z,N,E)}function m(Z,N,E,j){if(typeof N=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&N instanceof ArrayBuffer?function(fe,we,me,$e){if(we.byteLength,me<0||we.byteLength<me)throw new RangeError("'offset' is out of bounds");if(we.byteLength<me+($e||0))throw new RangeError("'length' is out of bounds");return we=me===void 0&&$e===void 0?new Uint8Array(we):$e===void 0?new Uint8Array(we,me):new Uint8Array(we,me,$e),p.TYPED_ARRAY_SUPPORT?(fe=we).__proto__=p.prototype:fe=R(fe,we),fe}(Z,N,E,j):typeof N=="string"?function(fe,we,me){if(typeof me=="string"&&me!==""||(me="utf8"),!p.isEncoding(me))throw new TypeError('"encoding" must be a valid string encoding');var $e=0|S(we,me),Xe=(fe=g(fe,$e)).write(we,me);return Xe!==$e&&(fe=fe.slice(0,Xe)),fe}(Z,N,E):function(fe,we){if(p.isBuffer(we)){var me=0|I(we.length);return(fe=g(fe,me)).length===0||we.copy(fe,0,0,me),fe}if(we){if(typeof ArrayBuffer<"u"&&we.buffer instanceof ArrayBuffer||"length"in we)return typeof we.length!="number"||function(Xe){return Xe!=Xe}(we.length)?g(fe,0):R(fe,we);if(we.type==="Buffer"&&f(we.data))return R(fe,we.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Z,N)}function _(Z){if(typeof Z!="number")throw new TypeError('"size" argument must be a number');if(Z<0)throw new RangeError('"size" argument must not be negative')}function C(Z,N){if(_(N),Z=g(Z,N<0?0:0|I(N)),!p.TYPED_ARRAY_SUPPORT)for(var E=0;E<N;++E)Z[E]=0;return Z}function R(Z,N){var E=N.length<0?0:0|I(N.length);Z=g(Z,E);for(var j=0;j<E;j+=1)Z[j]=255&N[j];return Z}function I(Z){if(Z>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|Z}function S(Z,N){if(p.isBuffer(Z))return Z.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(Z)||Z instanceof ArrayBuffer))return Z.byteLength;typeof Z!="string"&&(Z=""+Z);var E=Z.length;if(E===0)return 0;for(var j=!1;;)switch(N){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":case void 0:return gt(Z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*E;case"hex":return E>>>1;case"base64":return Pt(Z).length;default:if(j)return gt(Z).length;N=(""+N).toLowerCase(),j=!0}}function b(Z,N,E){var j=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0)<=(N>>>=0))return"";for(Z||(Z="utf8");;)switch(Z){case"hex":return Be(this,N,E);case"utf8":case"utf-8":return Ue(this,N,E);case"ascii":return nt(this,N,E);case"latin1":case"binary":return ke(this,N,E);case"base64":return Le(this,N,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,N,E);default:if(j)throw new TypeError("Unknown encoding: "+Z);Z=(Z+"").toLowerCase(),j=!0}}function T(Z,N,E){var j=Z[N];Z[N]=Z[E],Z[E]=j}function B(Z,N,E,j,G){if(Z.length===0)return-1;if(typeof E=="string"?(j=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,isNaN(E)&&(E=G?0:Z.length-1),E<0&&(E=Z.length+E),E>=Z.length){if(G)return-1;E=Z.length-1}else if(E<0){if(!G)return-1;E=0}if(typeof N=="string"&&(N=p.from(N,j)),p.isBuffer(N))return N.length===0?-1:H(Z,N,E,j,G);if(typeof N=="number")return N&=255,p.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(Z,N,E):Uint8Array.prototype.lastIndexOf.call(Z,N,E):H(Z,[N],E,j,G);throw new TypeError("val must be string, number or Buffer")}function H(Z,N,E,j,G){var fe,we=1,me=Z.length,$e=N.length;if(j!==void 0&&((j=String(j).toLowerCase())==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(Z.length<2||N.length<2)return-1;we=2,me/=2,$e/=2,E/=2}function Xe(Lr,ee){return we===1?Lr[ee]:Lr.readUInt16BE(ee*we)}if(G){var ft=-1;for(fe=E;fe<me;fe++)if(Xe(Z,fe)===Xe(N,ft===-1?0:fe-ft)){if(ft===-1&&(ft=fe),fe-ft+1===$e)return ft*we}else ft!==-1&&(fe-=fe-ft),ft=-1}else for(E+$e>me&&(E=me-$e),fe=E;fe>=0;fe--){for(var Mt=!0,$t=0;$t<$e;$t++)if(Xe(Z,fe+$t)!==Xe(N,$t)){Mt=!1;break}if(Mt)return fe}return-1}function $(Z,N,E,j){E=Number(E)||0;var G=Z.length-E;j?(j=Number(j))>G&&(j=G):j=G;var fe=N.length;if(fe%2!=0)throw new TypeError("Invalid hex string");j>fe/2&&(j=fe/2);for(var we=0;we<j;++we){var me=parseInt(N.substr(2*we,2),16);if(isNaN(me))return we;Z[E+we]=me}return we}function F(Z,N,E,j){return Ft(gt(N,Z.length-E),Z,E,j)}function ne(Z,N,E,j){return Ft(function(fe){for(var we=[],me=0;me<fe.length;++me)we.push(255&fe.charCodeAt(me));return we}(N),Z,E,j)}function Y(Z,N,E,j){return ne(Z,N,E,j)}function M(Z,N,E,j){return Ft(Pt(N),Z,E,j)}function J(Z,N,E,j){return Ft(function(fe,we){for(var me,$e,Xe,ft=[],Mt=0;Mt<fe.length&&!((we-=2)<0);++Mt)$e=(me=fe.charCodeAt(Mt))>>8,Xe=me%256,ft.push(Xe),ft.push($e);return ft}(N,Z.length-E),Z,E,j)}function Le(Z,N,E){return N===0&&E===Z.length?s.fromByteArray(Z):s.fromByteArray(Z.slice(N,E))}function Ue(Z,N,E){E=Math.min(Z.length,E);for(var j=[],G=N;G<E;){var fe,we,me,$e,Xe=Z[G],ft=null,Mt=Xe>239?4:Xe>223?3:Xe>191?2:1;if(G+Mt<=E)switch(Mt){case 1:Xe<128&&(ft=Xe);break;case 2:(192&(fe=Z[G+1]))==128&&($e=(31&Xe)<<6|63&fe)>127&&(ft=$e);break;case 3:fe=Z[G+1],we=Z[G+2],(192&fe)==128&&(192&we)==128&&($e=(15&Xe)<<12|(63&fe)<<6|63&we)>2047&&($e<55296||$e>57343)&&(ft=$e);break;case 4:fe=Z[G+1],we=Z[G+2],me=Z[G+3],(192&fe)==128&&(192&we)==128&&(192&me)==128&&($e=(15&Xe)<<18|(63&fe)<<12|(63&we)<<6|63&me)>65535&&$e<1114112&&(ft=$e)}ft===null?(ft=65533,Mt=1):ft>65535&&(ft-=65536,j.push(ft>>>10&1023|55296),ft=56320|1023&ft),j.push(ft),G+=Mt}return function(Lr){var ee=Lr.length;if(ee<=je)return String.fromCharCode.apply(String,Lr);for(var de="",K=0;K<ee;)de+=String.fromCharCode.apply(String,Lr.slice(K,K+=je));return de}(j)}n.Buffer=p,n.SlowBuffer=function(N){return+N!=N&&(N=0),p.alloc(+N)},n.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=a.TYPED_ARRAY_SUPPORT!==void 0?a.TYPED_ARRAY_SUPPORT:function(){try{var N=new Uint8Array(1);return N.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},N.foo()===42&&typeof N.subarray=="function"&&N.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=c(),p.poolSize=8192,p._augment=function(Z){return Z.__proto__=p.prototype,Z},p.from=function(Z,N,E){return m(null,Z,N,E)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(Z,N,E){return function(G,fe,we,me){return _(fe),fe<=0?g(G,fe):we!==void 0?typeof me=="string"?g(G,fe).fill(we,me):g(G,fe).fill(we):g(G,fe)}(null,Z,N,E)},p.allocUnsafe=function(Z){return C(null,Z)},p.allocUnsafeSlow=function(Z){return C(null,Z)},p.isBuffer=function(N){return!(N==null||!N._isBuffer)},p.compare=function(N,E){if(!p.isBuffer(N)||!p.isBuffer(E))throw new TypeError("Arguments must be Buffers");if(N===E)return 0;for(var j=N.length,G=E.length,fe=0,we=Math.min(j,G);fe<we;++fe)if(N[fe]!==E[fe]){j=N[fe],G=E[fe];break}return j<G?-1:G<j?1:0},p.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(N,E){if(!f(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return p.alloc(0);var j;if(E===void 0)for(E=0,j=0;j<N.length;++j)E+=N[j].length;var G=p.allocUnsafe(E),fe=0;for(j=0;j<N.length;++j){var we=N[j];if(!p.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(G,fe),fe+=we.length}return G},p.byteLength=S,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var E=0;E<N;E+=2)T(this,E,E+1);return this},p.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var E=0;E<N;E+=4)T(this,E,E+3),T(this,E+1,E+2);return this},p.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var E=0;E<N;E+=8)T(this,E,E+7),T(this,E+1,E+6),T(this,E+2,E+5),T(this,E+3,E+4);return this},p.prototype.toString=function(){var N=0|this.length;return N===0?"":arguments.length===0?Ue(this,0,N):b.apply(this,arguments)},p.prototype.equals=function(N){if(!p.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||p.compare(this,N)===0},p.prototype.inspect=function(){var N="",E=n.INSPECT_MAX_BYTES;return this.length>0&&(N=this.toString("hex",0,E).match(/.{2}/g).join(" "),this.length>E&&(N+=" ... ")),"<Buffer "+N+">"},p.prototype.compare=function(N,E,j,G,fe){if(!p.isBuffer(N))throw new TypeError("Argument must be a Buffer");if(E===void 0&&(E=0),j===void 0&&(j=N?N.length:0),G===void 0&&(G=0),fe===void 0&&(fe=this.length),E<0||j>N.length||G<0||fe>this.length)throw new RangeError("out of range index");if(G>=fe&&E>=j)return 0;if(G>=fe)return-1;if(E>=j)return 1;if(this===N)return 0;for(var we=(fe>>>=0)-(G>>>=0),me=(j>>>=0)-(E>>>=0),$e=Math.min(we,me),Xe=this.slice(G,fe),ft=N.slice(E,j),Mt=0;Mt<$e;++Mt)if(Xe[Mt]!==ft[Mt]){we=Xe[Mt],me=ft[Mt];break}return we<me?-1:me<we?1:0},p.prototype.includes=function(N,E,j){return this.indexOf(N,E,j)!==-1},p.prototype.indexOf=function(N,E,j){return B(this,N,E,j,!0)},p.prototype.lastIndexOf=function(N,E,j){return B(this,N,E,j,!1)},p.prototype.write=function(N,E,j,G){if(E===void 0)G="utf8",j=this.length,E=0;else if(j===void 0&&typeof E=="string")G=E,j=this.length,E=0;else{if(!isFinite(E))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");E|=0,isFinite(j)?(j|=0,G===void 0&&(G="utf8")):(G=j,j=void 0)}var fe=this.length-E;if((j===void 0||j>fe)&&(j=fe),N.length>0&&(j<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var we=!1;;)switch(G){case"hex":return $(this,N,E,j);case"utf8":case"utf-8":return F(this,N,E,j);case"ascii":return ne(this,N,E,j);case"latin1":case"binary":return Y(this,N,E,j);case"base64":return M(this,N,E,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,N,E,j);default:if(we)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),we=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var je=4096;function nt(Z,N,E){var j="";E=Math.min(Z.length,E);for(var G=N;G<E;++G)j+=String.fromCharCode(127&Z[G]);return j}function ke(Z,N,E){var j="";E=Math.min(Z.length,E);for(var G=N;G<E;++G)j+=String.fromCharCode(Z[G]);return j}function Be(Z,N,E){var j=Z.length;(!N||N<0)&&(N=0),(!E||E<0||E>j)&&(E=j);for(var G="",fe=N;fe<E;++fe)G+=lt(Z[fe]);return G}function De(Z,N,E){for(var j=Z.slice(N,E),G="",fe=0;fe<j.length;fe+=2)G+=String.fromCharCode(j[fe]+256*j[fe+1]);return G}function tt(Z,N,E){if(Z%1!=0||Z<0)throw new RangeError("offset is not uint");if(Z+N>E)throw new RangeError("Trying to access beyond buffer length")}function re(Z,N,E,j,G,fe){if(!p.isBuffer(Z))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>G||N<fe)throw new RangeError('"value" argument is out of bounds');if(E+j>Z.length)throw new RangeError("Index out of range")}function Ie(Z,N,E,j){N<0&&(N=65535+N+1);for(var G=0,fe=Math.min(Z.length-E,2);G<fe;++G)Z[E+G]=(N&255<<8*(j?G:1-G))>>>8*(j?G:1-G)}function Ge(Z,N,E,j){N<0&&(N=4294967295+N+1);for(var G=0,fe=Math.min(Z.length-E,4);G<fe;++G)Z[E+G]=N>>>8*(j?G:3-G)&255}function dt(Z,N,E,j,G,fe){if(E+j>Z.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Ze(Z,N,E,j,G){return G||dt(Z,0,E,4),u.write(Z,N,E,j,23,4),E+4}function qe(Z,N,E,j,G){return G||dt(Z,0,E,8),u.write(Z,N,E,j,52,8),E+8}p.prototype.slice=function(N,E){var j,G=this.length;if((N=~~N)<0?(N+=G)<0&&(N=0):N>G&&(N=G),(E=E===void 0?G:~~E)<0?(E+=G)<0&&(E=0):E>G&&(E=G),E<N&&(E=N),p.TYPED_ARRAY_SUPPORT)(j=this.subarray(N,E)).__proto__=p.prototype;else{var fe=E-N;j=new p(fe,void 0);for(var we=0;we<fe;++we)j[we]=this[we+N]}return j},p.prototype.readUIntLE=function(N,E,j){N|=0,E|=0,j||tt(N,E,this.length);for(var G=this[N],fe=1,we=0;++we<E&&(fe*=256);)G+=this[N+we]*fe;return G},p.prototype.readUIntBE=function(N,E,j){N|=0,E|=0,j||tt(N,E,this.length);for(var G=this[N+--E],fe=1;E>0&&(fe*=256);)G+=this[N+--E]*fe;return G},p.prototype.readUInt8=function(N,E){return E||tt(N,1,this.length),this[N]},p.prototype.readUInt16LE=function(N,E){return E||tt(N,2,this.length),this[N]|this[N+1]<<8},p.prototype.readUInt16BE=function(N,E){return E||tt(N,2,this.length),this[N]<<8|this[N+1]},p.prototype.readUInt32LE=function(N,E){return E||tt(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},p.prototype.readUInt32BE=function(N,E){return E||tt(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},p.prototype.readIntLE=function(N,E,j){N|=0,E|=0,j||tt(N,E,this.length);for(var G=this[N],fe=1,we=0;++we<E&&(fe*=256);)G+=this[N+we]*fe;return G>=(fe*=128)&&(G-=Math.pow(2,8*E)),G},p.prototype.readIntBE=function(N,E,j){N|=0,E|=0,j||tt(N,E,this.length);for(var G=E,fe=1,we=this[N+--G];G>0&&(fe*=256);)we+=this[N+--G]*fe;return we>=(fe*=128)&&(we-=Math.pow(2,8*E)),we},p.prototype.readInt8=function(N,E){return E||tt(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},p.prototype.readInt16LE=function(N,E){E||tt(N,2,this.length);var j=this[N]|this[N+1]<<8;return 32768&j?4294901760|j:j},p.prototype.readInt16BE=function(N,E){E||tt(N,2,this.length);var j=this[N+1]|this[N]<<8;return 32768&j?4294901760|j:j},p.prototype.readInt32LE=function(N,E){return E||tt(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},p.prototype.readInt32BE=function(N,E){return E||tt(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},p.prototype.readFloatLE=function(N,E){return E||tt(N,4,this.length),u.read(this,N,!0,23,4)},p.prototype.readFloatBE=function(N,E){return E||tt(N,4,this.length),u.read(this,N,!1,23,4)},p.prototype.readDoubleLE=function(N,E){return E||tt(N,8,this.length),u.read(this,N,!0,52,8)},p.prototype.readDoubleBE=function(N,E){return E||tt(N,8,this.length),u.read(this,N,!1,52,8)},p.prototype.writeUIntLE=function(N,E,j,G){N=+N,E|=0,j|=0,G||re(this,N,E,j,Math.pow(2,8*j)-1,0);var fe=1,we=0;for(this[E]=255&N;++we<j&&(fe*=256);)this[E+we]=N/fe&255;return E+j},p.prototype.writeUIntBE=function(N,E,j,G){N=+N,E|=0,j|=0,G||re(this,N,E,j,Math.pow(2,8*j)-1,0);var fe=j-1,we=1;for(this[E+fe]=255&N;--fe>=0&&(we*=256);)this[E+fe]=N/we&255;return E+j},p.prototype.writeUInt8=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,1,255,0),p.TYPED_ARRAY_SUPPORT||(N=Math.floor(N)),this[E]=255&N,E+1},p.prototype.writeUInt16LE=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[E]=255&N,this[E+1]=N>>>8):Ie(this,N,E,!0),E+2},p.prototype.writeUInt16BE=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[E]=N>>>8,this[E+1]=255&N):Ie(this,N,E,!1),E+2},p.prototype.writeUInt32LE=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[E+3]=N>>>24,this[E+2]=N>>>16,this[E+1]=N>>>8,this[E]=255&N):Ge(this,N,E,!0),E+4},p.prototype.writeUInt32BE=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[E]=N>>>24,this[E+1]=N>>>16,this[E+2]=N>>>8,this[E+3]=255&N):Ge(this,N,E,!1),E+4},p.prototype.writeIntLE=function(N,E,j,G){if(N=+N,E|=0,!G){var fe=Math.pow(2,8*j-1);re(this,N,E,j,fe-1,-fe)}var we=0,me=1,$e=0;for(this[E]=255&N;++we<j&&(me*=256);)N<0&&$e===0&&this[E+we-1]!==0&&($e=1),this[E+we]=(N/me>>0)-$e&255;return E+j},p.prototype.writeIntBE=function(N,E,j,G){if(N=+N,E|=0,!G){var fe=Math.pow(2,8*j-1);re(this,N,E,j,fe-1,-fe)}var we=j-1,me=1,$e=0;for(this[E+we]=255&N;--we>=0&&(me*=256);)N<0&&$e===0&&this[E+we+1]!==0&&($e=1),this[E+we]=(N/me>>0)-$e&255;return E+j},p.prototype.writeInt8=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,1,127,-128),p.TYPED_ARRAY_SUPPORT||(N=Math.floor(N)),N<0&&(N=255+N+1),this[E]=255&N,E+1},p.prototype.writeInt16LE=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[E]=255&N,this[E+1]=N>>>8):Ie(this,N,E,!0),E+2},p.prototype.writeInt16BE=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[E]=N>>>8,this[E+1]=255&N):Ie(this,N,E,!1),E+2},p.prototype.writeInt32LE=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[E]=255&N,this[E+1]=N>>>8,this[E+2]=N>>>16,this[E+3]=N>>>24):Ge(this,N,E,!0),E+4},p.prototype.writeInt32BE=function(N,E,j){return N=+N,E|=0,j||re(this,N,E,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),p.TYPED_ARRAY_SUPPORT?(this[E]=N>>>24,this[E+1]=N>>>16,this[E+2]=N>>>8,this[E+3]=255&N):Ge(this,N,E,!1),E+4},p.prototype.writeFloatLE=function(N,E,j){return Ze(this,N,E,!0,j)},p.prototype.writeFloatBE=function(N,E,j){return Ze(this,N,E,!1,j)},p.prototype.writeDoubleLE=function(N,E,j){return qe(this,N,E,!0,j)},p.prototype.writeDoubleBE=function(N,E,j){return qe(this,N,E,!1,j)},p.prototype.copy=function(N,E,j,G){if(j||(j=0),G||G===0||(G=this.length),E>=N.length&&(E=N.length),E||(E=0),G>0&&G<j&&(G=j),G===j||N.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("sourceStart out of bounds");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),N.length-E<G-j&&(G=N.length-E+j);var fe,we=G-j;if(this===N&&j<E&&E<G)for(fe=we-1;fe>=0;--fe)N[fe+E]=this[fe+j];else if(we<1e3||!p.TYPED_ARRAY_SUPPORT)for(fe=0;fe<we;++fe)N[fe+E]=this[fe+j];else Uint8Array.prototype.set.call(N,this.subarray(j,j+we),E);return we},p.prototype.fill=function(N,E,j,G){if(typeof N=="string"){if(typeof E=="string"?(G=E,E=0,j=this.length):typeof j=="string"&&(G=j,j=this.length),N.length===1){var fe=N.charCodeAt(0);fe<256&&(N=fe)}if(G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!p.isEncoding(G))throw new TypeError("Unknown encoding: "+G)}else typeof N=="number"&&(N&=255);if(E<0||this.length<E||this.length<j)throw new RangeError("Out of range index");if(j<=E)return this;var we;if(E>>>=0,j=j===void 0?this.length:j>>>0,N||(N=0),typeof N=="number")for(we=E;we<j;++we)this[we]=N;else{var me=p.isBuffer(N)?N:gt(new p(N,G).toString()),$e=me.length;for(we=0;we<j-E;++we)this[we+E]=me[we%$e]}return this};var Fe=/[^+\/0-9A-Za-z-_]/g;function lt(Z){return Z<16?"0"+Z.toString(16):Z.toString(16)}function gt(Z,N){var E;N=N||1/0;for(var j=Z.length,G=null,fe=[],we=0;we<j;++we){if((E=Z.charCodeAt(we))>55295&&E<57344){if(!G){if(E>56319){(N-=3)>-1&&fe.push(239,191,189);continue}if(we+1===j){(N-=3)>-1&&fe.push(239,191,189);continue}G=E;continue}if(E<56320){(N-=3)>-1&&fe.push(239,191,189),G=E;continue}E=65536+(G-55296<<10|E-56320)}else G&&(N-=3)>-1&&fe.push(239,191,189);if(G=null,E<128){if((N-=1)<0)break;fe.push(E)}else if(E<2048){if((N-=2)<0)break;fe.push(E>>6|192,63&E|128)}else if(E<65536){if((N-=3)<0)break;fe.push(E>>12|224,E>>6&63|128,63&E|128)}else{if(!(E<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;fe.push(E>>18|240,E>>12&63|128,E>>6&63|128,63&E|128)}}return fe}function Pt(Z){return s.toByteArray(function(E){if((E=function(G){return G.trim?G.trim():G.replace(/^\s+|\s+$/g,"")}(E).replace(Fe,"")).length<2)return"";for(;E.length%4!=0;)E+="=";return E}(Z))}function Ft(Z,N,E,j){for(var G=0;G<j&&!(G+E>=N.length||G>=Z.length);++G)N[G+E]=Z[G];return G}}).call(this,o(29))},function(r,n){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}r.exports=o},function(r,n,o){n.byteLength=function(C){var R=p(C),I=R[0],S=R[1];return 3*(I+S)/4-S},n.toByteArray=function(C){var R,I,S=p(C),b=S[0],T=S[1],B=new u(function(ne,Y,M){return 3*(Y+M)/4-M}(0,b,T)),H=0,$=T>0?b-4:b;for(I=0;I<$;I+=4)R=s[C.charCodeAt(I)]<<18|s[C.charCodeAt(I+1)]<<12|s[C.charCodeAt(I+2)]<<6|s[C.charCodeAt(I+3)],B[H++]=R>>16&255,B[H++]=R>>8&255,B[H++]=255&R;return T===2&&(R=s[C.charCodeAt(I)]<<2|s[C.charCodeAt(I+1)]>>4,B[H++]=255&R),T===1&&(R=s[C.charCodeAt(I)]<<10|s[C.charCodeAt(I+1)]<<4|s[C.charCodeAt(I+2)]>>2,B[H++]=R>>8&255,B[H++]=255&R),B},n.fromByteArray=function(C){for(var R,I=C.length,S=I%3,b=[],T=16383,B=0,H=I-S;B<H;B+=T)b.push(m(C,B,B+T>H?H:B+T));return S===1?(R=C[I-1],b.push(a[R>>2]+a[R<<4&63]+"==")):S===2&&(R=(C[I-2]<<8)+C[I-1],b.push(a[R>>10]+a[R>>4&63]+a[R<<2&63]+"=")),b.join("")};for(var a=[],s=[],u=typeof Uint8Array<"u"?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,g=f.length;c<g;++c)a[c]=f[c],s[f.charCodeAt(c)]=c;function p(_){var C=_.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=_.indexOf("=");return R===-1&&(R=C),[R,R===C?0:4-R%4]}function m(_,C,R){for(var I,S,b=[],T=C;T<R;T+=3)I=(_[T]<<16&16711680)+(_[T+1]<<8&65280)+(255&_[T+2]),b.push(a[(S=I)>>18&63]+a[S>>12&63]+a[S>>6&63]+a[63&S]);return b.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(r,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(o,a,s,u,f){var c,g,p=8*f-u-1,m=(1<<p)-1,_=m>>1,C=-7,R=s?f-1:0,I=s?-1:1,S=o[a+R];for(R+=I,c=S&(1<<-C)-1,S>>=-C,C+=p;C>0;c=256*c+o[a+R],R+=I,C-=8);for(g=c&(1<<-C)-1,c>>=-C,C+=u;C>0;g=256*g+o[a+R],R+=I,C-=8);if(c===0)c=1-_;else{if(c===m)return g?NaN:1/0*(S?-1:1);g+=Math.pow(2,u),c-=_}return(S?-1:1)*g*Math.pow(2,c-u)},n.write=function(o,a,s,u,f,c){var g,p,m,_=8*c-f-1,C=(1<<_)-1,R=C>>1,I=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=u?0:c-1,b=u?1:-1,T=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(p=isNaN(a)?1:0,g=C):(g=Math.floor(Math.log(a)/Math.LN2),a*(m=Math.pow(2,-g))<1&&(g--,m*=2),(a+=g+R>=1?I/m:I*Math.pow(2,1-R))*m>=2&&(g++,m/=2),g+R>=C?(p=0,g=C):g+R>=1?(p=(a*m-1)*Math.pow(2,f),g+=R):(p=a*Math.pow(2,R-1)*Math.pow(2,f),g=0));f>=8;o[s+S]=255&p,S+=b,p/=256,f-=8);for(g=g<<f|p,_+=f;_>0;o[s+S]=255&g,S+=b,g/=256,_-=8);o[s+S-b]|=128*T}},function(r,n){var o={}.toString;r.exports=Array.isArray||function(a){return o.call(a)=="[object Array]"}},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(u){var f=u.jws,c=u.KeyUtil,g=u.X509,p=u.crypto,m=u.hextob64u,_=u.b64tohex,C=u.AllowedSigningAlgs;return function(){function R(){(function(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")})(this,R)}return R.parseJwt=function(S){a.Log.debug("JoseUtil.parseJwt");try{var b=f.JWS.parse(S);return{header:b.headerObj,payload:b.payloadObj}}catch(T){a.Log.error(T)}},R.validateJwt=function(S,b,T,B,H,$,F){a.Log.debug("JoseUtil.validateJwt");try{if(b.kty==="RSA")if(b.e&&b.n)b=c.getKey(b);else{if(!b.x5c||!b.x5c.length)return a.Log.error("JoseUtil.validateJwt: RSA key missing key material",b),Promise.reject(new Error("RSA key missing key material"));var ne=_(b.x5c[0]);b=g.getPublicKeyFromCertHex(ne)}else{if(b.kty!=="EC")return a.Log.error("JoseUtil.validateJwt: Unsupported key type",b&&b.kty),Promise.reject(new Error(b.kty));if(!(b.crv&&b.x&&b.y))return a.Log.error("JoseUtil.validateJwt: EC key missing key material",b),Promise.reject(new Error("EC key missing key material"));b=c.getKey(b)}return R._validateJwt(S,b,T,B,H,$,F)}catch(Y){return a.Log.error(Y&&Y.message||Y),Promise.reject("JWT validation failed")}},R.validateJwtAttributes=function(S,b,T,B,H,$){B||(B=0),H||(H=parseInt(Date.now()/1e3));var F=R.parseJwt(S).payload;if(!F.iss)return a.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(F.iss!==b)return a.Log.error("JoseUtil._validateJwt: Invalid issuer in token",F.iss),Promise.reject(new Error("Invalid issuer in token: "+F.iss));if(!F.aud)return a.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(F.aud===T||Array.isArray(F.aud)&&F.aud.indexOf(T)>=0))return a.Log.error("JoseUtil._validateJwt: Invalid audience in token",F.aud),Promise.reject(new Error("Invalid audience in token: "+F.aud));if(F.azp&&F.azp!==T)return a.Log.error("JoseUtil._validateJwt: Invalid azp in token",F.azp),Promise.reject(new Error("Invalid azp in token: "+F.azp));if(!$){var ne=H+B,Y=H-B;if(!F.iat)return a.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(ne<F.iat)return a.Log.error("JoseUtil._validateJwt: iat is in the future",F.iat),Promise.reject(new Error("iat is in the future: "+F.iat));if(F.nbf&&ne<F.nbf)return a.Log.error("JoseUtil._validateJwt: nbf is in the future",F.nbf),Promise.reject(new Error("nbf is in the future: "+F.nbf));if(!F.exp)return a.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(F.exp<Y)return a.Log.error("JoseUtil._validateJwt: exp is in the past",F.exp),Promise.reject(new Error("exp is in the past:"+F.exp))}return Promise.resolve(F)},R._validateJwt=function(S,b,T,B,H,$,F){return R.validateJwtAttributes(S,T,B,H,$,F).then(function(ne){try{return f.JWS.verify(S,b,C)?ne:(a.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Y){return a.Log.error(Y&&Y.message||Y),Promise.reject(new Error("signature validation failed"))}})},R.hashString=function(S,b){try{return p.Util.hashString(S,b)}catch(T){a.Log.error(T)}},R.hexToBase64Url=function(S){try{return m(S)}catch(b){a.Log.error(b)}},R}()};var a=o(0);r.exports=n.default},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninResponse=void 0;var a=function(){function f(c,g){for(var p=0;p<g.length;p++){var m=g[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}return function(c,g,p){return g&&f(c.prototype,g),p&&f(c,p),c}}(),s=o(3);function u(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}n.SigninResponse=function(){function f(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";u(this,f);var p=s.UrlUtility.parseUrlFragment(c,g);this.error=p.error,this.error_description=p.error_description,this.error_uri=p.error_uri,this.code=p.code,this.state=p.state,this.id_token=p.id_token,this.session_state=p.session_state,this.access_token=p.access_token,this.token_type=p.token_type,this.scope=p.scope,this.profile=void 0,this.expires_in=p.expires_in}return a(f,[{key:"expires_in",get:function(){if(this.expires_at){var g=parseInt(Date.now()/1e3);return this.expires_at-g}},set:function(g){var p=parseInt(g);if(typeof p=="number"&&p>0){var m=parseInt(Date.now()/1e3);this.expires_at=m+p}}},{key:"expired",get:function(){var g=this.expires_in;if(g!==void 0)return g<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),f}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SignoutRequest=void 0;var a=o(0),s=o(3),u=o(9);n.SignoutRequest=function f(c){var g=c.url,p=c.id_token_hint,m=c.post_logout_redirect_uri,_=c.data,C=c.extraQueryParams,R=c.request_type;if(function(b,T){if(!(b instanceof T))throw new TypeError("Cannot call a class as a function")}(this,f),!g)throw a.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var I in p&&(g=s.UrlUtility.addQueryParam(g,"id_token_hint",p)),m&&(g=s.UrlUtility.addQueryParam(g,"post_logout_redirect_uri",m),_&&(this.state=new u.State({data:_,request_type:R}),g=s.UrlUtility.addQueryParam(g,"state",this.state.id))),C)g=s.UrlUtility.addQueryParam(g,I,C[I]);this.url=g}},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SignoutResponse=void 0;var a=o(3);n.SignoutResponse=function s(u){(function(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")})(this,s);var f=a.UrlUtility.parseUrlFragment(u,"?");this.error=f.error,this.error_description=f.error_description,this.error_uri=f.error_uri,this.state=f.state}},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.InMemoryWebStorage=void 0;var a=function(){function u(f,c){for(var g=0;g<c.length;g++){var p=c[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}return function(f,c,g){return c&&u(f.prototype,c),g&&u(f,g),f}}(),s=o(0);n.InMemoryWebStorage=function(){function u(){(function(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,u),this._data={}}return u.prototype.getItem=function(c){return s.Log.debug("InMemoryWebStorage.getItem",c),this._data[c]},u.prototype.setItem=function(c,g){s.Log.debug("InMemoryWebStorage.setItem",c),this._data[c]=g},u.prototype.removeItem=function(c){s.Log.debug("InMemoryWebStorage.removeItem",c),delete this._data[c]},u.prototype.key=function(c){return Object.getOwnPropertyNames(this._data)[c]},a(u,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManager=void 0;var a=function(){function T(B,H){for(var $=0;$<H.length;$++){var F=H[$];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(B,F.key,F)}}return function(B,H,$){return H&&T(B.prototype,H),$&&T(B,$),B}}(),s=o(0),u=o(10),f=o(39),c=o(15),g=o(45),p=o(47),m=o(18),_=o(8),C=o(20),R=o(11),I=o(4);function S(T,B){if(!(T instanceof B))throw new TypeError("Cannot call a class as a function")}function b(T,B){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!B||typeof B!="object"&&typeof B!="function"?T:B}n.UserManager=function(T){function B(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.SilentRenewService,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.SessionMonitor,ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C.TokenRevocationClient,Y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:R.TokenClient,M=arguments.length>5&&arguments[5]!==void 0?arguments[5]:I.JoseUtil;S(this,B),H instanceof f.UserManagerSettings||(H=new f.UserManagerSettings(H));var J=b(this,T.call(this,H));return J._events=new g.UserManagerEvents(H),J._silentRenewService=new $(J),J.settings.automaticSilentRenew&&(s.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),J.startSilentRenew()),J.settings.monitorSession&&(s.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),J._sessionMonitor=new F(J)),J._tokenRevocationClient=new ne(J._settings),J._tokenClient=new Y(J._settings),J._joseUtil=M,J}return function($,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);$.prototype=Object.create(F&&F.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf($,F):$.__proto__=F)}(B,T),B.prototype.getUser=function(){var $=this;return this._loadUser().then(function(F){return F?(s.Log.info("UserManager.getUser: user loaded"),$._events.load(F,!1),F):(s.Log.info("UserManager.getUser: user not found in storage"),null)})},B.prototype.removeUser=function(){var $=this;return this.storeUser(null).then(function(){s.Log.info("UserManager.removeUser: user removed from storage"),$._events.unload()})},B.prototype.signinRedirect=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};($=Object.assign({},$)).request_type="si:r";var F={useReplaceToNavigate:$.useReplaceToNavigate};return this._signinStart($,this._redirectNavigator,F).then(function(){s.Log.info("UserManager.signinRedirect: successful")})},B.prototype.signinRedirectCallback=function($){return this._signinEnd($||this._redirectNavigator.url).then(function(F){return F.profile&&F.profile.sub?s.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",F.profile.sub):s.Log.info("UserManager.signinRedirectCallback: no sub"),F})},B.prototype.signinPopup=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};($=Object.assign({},$)).request_type="si:p";var F=$.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return F?($.redirect_uri=F,$.display="popup",this._signin($,this._popupNavigator,{startUrl:F,popupWindowFeatures:$.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:$.popupWindowTarget||this.settings.popupWindowTarget}).then(function(ne){return ne&&(ne.profile&&ne.profile.sub?s.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",ne.profile.sub):s.Log.info("UserManager.signinPopup: no sub")),ne})):(s.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},B.prototype.signinPopupCallback=function($){return this._signinCallback($,this._popupNavigator).then(function(F){return F&&(F.profile&&F.profile.sub?s.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",F.profile.sub):s.Log.info("UserManager.signinPopupCallback: no sub")),F}).catch(function(F){s.Log.error(F.message)})},B.prototype.signinSilent=function(){var $=this,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return F=Object.assign({},F),this._loadUser().then(function(ne){return ne&&ne.refresh_token?(F.refresh_token=ne.refresh_token,$._useRefreshToken(F)):(F.request_type="si:s",F.id_token_hint=F.id_token_hint||$.settings.includeIdTokenInSilentRenew&&ne&&ne.id_token,ne&&$._settings.validateSubOnSilentRenew&&(s.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",ne.profile.sub),F.current_sub=ne.profile.sub),$._signinSilentIframe(F))})},B.prototype._useRefreshToken=function(){var $=this,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(F).then(function(ne){return ne?ne.access_token?$._loadUser().then(function(Y){if(Y){var M=Promise.resolve();return ne.id_token&&(M=$._validateIdTokenFromTokenRefreshToken(Y.profile,ne.id_token)),M.then(function(){return s.Log.debug("UserManager._useRefreshToken: refresh token response success"),Y.id_token=ne.id_token||Y.id_token,Y.access_token=ne.access_token,Y.refresh_token=ne.refresh_token||Y.refresh_token,Y.expires_in=ne.expires_in,$.storeUser(Y).then(function(){return $._events.load(Y),Y})})}return null}):(s.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(s.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},B.prototype._validateIdTokenFromTokenRefreshToken=function($,F){var ne=this;return this._metadataService.getIssuer().then(function(Y){return ne.settings.getEpochTime().then(function(M){return ne._joseUtil.validateJwtAttributes(F,Y,ne._settings.client_id,ne._settings.clockSkew,M).then(function(J){return J?J.sub!==$.sub?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):J.auth_time&&J.auth_time!==$.auth_time?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):J.azp&&J.azp!==$.azp?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!J.azp&&$.azp?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},B.prototype._signinSilentIframe=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=$.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return F?($.redirect_uri=F,$.prompt=$.prompt||"none",this._signin($,this._iframeNavigator,{startUrl:F,silentRequestTimeout:$.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ne){return ne&&(ne.profile&&ne.profile.sub?s.Log.info("UserManager.signinSilent: successful, signed in sub: ",ne.profile.sub):s.Log.info("UserManager.signinSilent: no sub")),ne})):(s.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},B.prototype.signinSilentCallback=function($){return this._signinCallback($,this._iframeNavigator).then(function(F){return F&&(F.profile&&F.profile.sub?s.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",F.profile.sub):s.Log.info("UserManager.signinSilentCallback: no sub")),F})},B.prototype.signinCallback=function($){var F=this;return this.readSigninResponseState($).then(function(ne){var Y=ne.state;return ne.response,Y.request_type==="si:r"?F.signinRedirectCallback($):Y.request_type==="si:p"?F.signinPopupCallback($):Y.request_type==="si:s"?F.signinSilentCallback($):Promise.reject(new Error("invalid response_type in state"))})},B.prototype.signoutCallback=function($,F){var ne=this;return this.readSignoutResponseState($).then(function(Y){var M=Y.state,J=Y.response;return M?M.request_type==="so:r"?ne.signoutRedirectCallback($):M.request_type==="so:p"?ne.signoutPopupCallback($,F):Promise.reject(new Error("invalid response_type in state")):J})},B.prototype.querySessionStatus=function(){var $=this,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(F=Object.assign({},F)).request_type="si:s";var ne=F.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ne?(F.redirect_uri=ne,F.prompt="none",F.response_type=F.response_type||this.settings.query_status_response_type,F.scope=F.scope||"openid",F.skipUserInfo=!0,this._signinStart(F,this._iframeNavigator,{startUrl:ne,silentRequestTimeout:F.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Y){return $.processSigninResponse(Y.url).then(function(M){if(s.Log.debug("UserManager.querySessionStatus: got signin response"),M.session_state&&M.profile.sub)return s.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",M.profile.sub),{session_state:M.session_state,sub:M.profile.sub,sid:M.profile.sid};s.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(M){if(M.session_state&&$.settings.monitorAnonymousSession&&(M.message=="login_required"||M.message=="consent_required"||M.message=="interaction_required"||M.message=="account_selection_required"))return s.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:M.session_state};throw M})})):(s.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},B.prototype._signin=function($,F){var ne=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signinStart($,F,Y).then(function(M){return ne._signinEnd(M.url,$)})},B.prototype._signinStart=function($,F){var ne=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F.prepare(Y).then(function(M){return s.Log.debug("UserManager._signinStart: got navigator window handle"),ne.createSigninRequest($).then(function(J){return s.Log.debug("UserManager._signinStart: got signin request"),Y.url=J.url,Y.id=J.state.id,M.navigate(Y)}).catch(function(J){throw M.close&&(s.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),M.close()),J})})},B.prototype._signinEnd=function($){var F=this,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.processSigninResponse($).then(function(Y){s.Log.debug("UserManager._signinEnd: got signin response");var M=new c.User(Y);if(ne.current_sub){if(ne.current_sub!==M.profile.sub)return s.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",M.profile.sub),Promise.reject(new Error("login_required"));s.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return F.storeUser(M).then(function(){return s.Log.debug("UserManager._signinEnd: user stored"),F._events.load(M),M})})},B.prototype._signinCallback=function($,F){s.Log.debug("UserManager._signinCallback");var ne=this._settings.response_mode==="query"||!this._settings.response_mode&&_.SigninRequest.isCode(this._settings.response_type)?"?":"#";return F.callback($,void 0,ne)},B.prototype.signoutRedirect=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};($=Object.assign({},$)).request_type="so:r";var F=$.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;F&&($.post_logout_redirect_uri=F);var ne={useReplaceToNavigate:$.useReplaceToNavigate};return this._signoutStart($,this._redirectNavigator,ne).then(function(){s.Log.info("UserManager.signoutRedirect: successful")})},B.prototype.signoutRedirectCallback=function($){return this._signoutEnd($||this._redirectNavigator.url).then(function(F){return s.Log.info("UserManager.signoutRedirectCallback: successful"),F})},B.prototype.signoutPopup=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};($=Object.assign({},$)).request_type="so:p";var F=$.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return $.post_logout_redirect_uri=F,$.display="popup",$.post_logout_redirect_uri&&($.state=$.state||{}),this._signout($,this._popupNavigator,{startUrl:F,popupWindowFeatures:$.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:$.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){s.Log.info("UserManager.signoutPopup: successful")})},B.prototype.signoutPopupCallback=function($,F){return F===void 0&&typeof $=="boolean"&&(F=$,$=null),this._popupNavigator.callback($,F,"?").then(function(){s.Log.info("UserManager.signoutPopupCallback: successful")})},B.prototype._signout=function($,F){var ne=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signoutStart($,F,Y).then(function(M){return ne._signoutEnd(M.url)})},B.prototype._signoutStart=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=this,ne=arguments[1],Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ne.prepare(Y).then(function(M){return s.Log.debug("UserManager._signoutStart: got navigator window handle"),F._loadUser().then(function(J){return s.Log.debug("UserManager._signoutStart: loaded current user from storage"),(F._settings.revokeAccessTokenOnSignout?F._revokeInternal(J):Promise.resolve()).then(function(){var Le=$.id_token_hint||J&&J.id_token;return Le&&(s.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),$.id_token_hint=Le),F.removeUser().then(function(){return s.Log.debug("UserManager._signoutStart: user removed, creating signout request"),F.createSignoutRequest($).then(function(Ue){return s.Log.debug("UserManager._signoutStart: got signout request"),Y.url=Ue.url,Ue.state&&(Y.id=Ue.state.id),M.navigate(Y)})})})}).catch(function(J){throw M.close&&(s.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),M.close()),J})})},B.prototype._signoutEnd=function($){return this.processSignoutResponse($).then(function(F){return s.Log.debug("UserManager._signoutEnd: got signout response"),F})},B.prototype.revokeAccessToken=function(){var $=this;return this._loadUser().then(function(F){return $._revokeInternal(F,!0).then(function(ne){if(ne)return s.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),F.access_token=null,F.refresh_token=null,F.expires_at=null,F.token_type=null,$.storeUser(F).then(function(){s.Log.debug("UserManager.revokeAccessToken: user stored"),$._events.load(F)})})}).then(function(){s.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},B.prototype._revokeInternal=function($,F){var ne=this;if($){var Y=$.access_token,M=$.refresh_token;return this._revokeAccessTokenInternal(Y,F).then(function(J){return ne._revokeRefreshTokenInternal(M,F).then(function(Le){return J||Le||s.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),J||Le})})}return Promise.resolve(!1)},B.prototype._revokeAccessTokenInternal=function($,F){return!$||$.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke($,F).then(function(){return!0})},B.prototype._revokeRefreshTokenInternal=function($,F){return $?this._tokenRevocationClient.revoke($,F,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},B.prototype.startSilentRenew=function(){this._silentRenewService.start()},B.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},B.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function($){return $?(s.Log.debug("UserManager._loadUser: user storageString loaded"),c.User.fromStorageString($)):(s.Log.debug("UserManager._loadUser: no user storageString"),null)})},B.prototype.storeUser=function($){if($){s.Log.debug("UserManager.storeUser: storing user");var F=$.toStorageString();return this._userStore.set(this._userStoreKey,F)}return s.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},a(B,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),B}(u.OidcClient)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManagerSettings=void 0;var a=function(){function R(I,S){for(var b=0;b<S.length;b++){var T=S[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(I,T.key,T)}}return function(I,S,b){return S&&R(I.prototype,S),b&&R(I,b),I}}(),s=(o(0),o(5)),u=o(40),f=o(41),c=o(43),g=o(6),p=o(1),m=o(8);function _(R,I){if(!(R instanceof I))throw new TypeError("Cannot call a class as a function")}function C(R,I){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||typeof I!="object"&&typeof I!="function"?R:I}n.UserManagerSettings=function(R){function I(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=S.popup_redirect_uri,T=S.popup_post_logout_redirect_uri,B=S.popupWindowFeatures,H=S.popupWindowTarget,$=S.silent_redirect_uri,F=S.silentRequestTimeout,ne=S.automaticSilentRenew,Y=ne!==void 0&&ne,M=S.validateSubOnSilentRenew,J=M!==void 0&&M,Le=S.includeIdTokenInSilentRenew,Ue=Le===void 0||Le,je=S.monitorSession,nt=je===void 0||je,ke=S.monitorAnonymousSession,Be=ke!==void 0&&ke,De=S.checkSessionInterval,tt=De===void 0?2e3:De,re=S.stopCheckSessionOnError,Ie=re===void 0||re,Ge=S.query_status_response_type,dt=S.revokeAccessTokenOnSignout,Ze=dt!==void 0&&dt,qe=S.accessTokenExpiringNotificationTime,Fe=qe===void 0?60:qe,lt=S.redirectNavigator,gt=lt===void 0?new u.RedirectNavigator:lt,Pt=S.popupNavigator,Ft=Pt===void 0?new f.PopupNavigator:Pt,Z=S.iframeNavigator,N=Z===void 0?new c.IFrameNavigator:Z,E=S.userStore,j=E===void 0?new g.WebStorageStateStore({store:p.Global.sessionStorage}):E;_(this,I);var G=C(this,R.call(this,arguments[0]));return G._popup_redirect_uri=b,G._popup_post_logout_redirect_uri=T,G._popupWindowFeatures=B,G._popupWindowTarget=H,G._silent_redirect_uri=$,G._silentRequestTimeout=F,G._automaticSilentRenew=Y,G._validateSubOnSilentRenew=J,G._includeIdTokenInSilentRenew=Ue,G._accessTokenExpiringNotificationTime=Fe,G._monitorSession=nt,G._monitorAnonymousSession=Be,G._checkSessionInterval=tt,G._stopCheckSessionOnError=Ie,Ge?G._query_status_response_type=Ge:arguments[0]&&arguments[0].response_type?G._query_status_response_type=m.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":G._query_status_response_type="id_token",G._revokeAccessTokenOnSignout=Ze,G._redirectNavigator=gt,G._popupNavigator=Ft,G._iframeNavigator=N,G._userStore=j,G}return function(b,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);b.prototype=Object.create(T&&T.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(b,T):b.__proto__=T)}(I,R),a(I,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),I}(s.OidcClientSettings)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.RedirectNavigator=void 0;var a=function(){function u(f,c){for(var g=0;g<c.length;g++){var p=c[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}return function(f,c,g){return c&&u(f.prototype,c),g&&u(f,g),f}}(),s=o(0);n.RedirectNavigator=function(){function u(){(function(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(){return Promise.resolve(this)},u.prototype.navigate=function(c){return c&&c.url?(c.useReplaceToNavigate?window.location.replace(c.url):window.location=c.url,Promise.resolve()):(s.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},a(u,[{key:"url",get:function(){return window.location.href}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.PopupNavigator=void 0;var a=o(0),s=o(42);n.PopupNavigator=function(){function u(){(function(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(c){var g=new s.PopupWindow(c);return Promise.resolve(g)},u.prototype.callback=function(c,g,p){a.Log.debug("PopupNavigator.callback");try{return s.PopupWindow.notifyOpener(c,g,p),Promise.resolve()}catch(m){return Promise.reject(m)}},u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.PopupWindow=void 0;var a=function(){function f(c,g){for(var p=0;p<g.length;p++){var m=g[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}return function(c,g,p){return g&&f(c.prototype,g),p&&f(c,p),c}}(),s=o(0),u=o(3);n.PopupWindow=function(){function f(c){var g=this;(function(C,R){if(!(C instanceof R))throw new TypeError("Cannot call a class as a function")})(this,f),this._promise=new Promise(function(_,C){g._resolve=_,g._reject=C});var p=c.popupWindowTarget||"_blank",m=c.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",p,m),this._popup&&(s.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return f.prototype.navigate=function(g){return this._popup?g&&g.url?(s.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=g.id,this._id&&(window["popupCallback_"+g.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=g.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},f.prototype._success=function(g){s.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(g)},f.prototype._error=function(g){s.Log.error("PopupWindow.error: ",g),this._cleanup(),this._reject(new Error(g))},f.prototype.close=function(){this._cleanup(!1)},f.prototype._cleanup=function(g){s.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!g&&this._popup.close(),this._popup=null},f.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},f.prototype._callback=function(g,p){this._cleanup(p),g?(s.Log.debug("PopupWindow.callback success"),this._success({url:g})):(s.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},f.notifyOpener=function(g,p,m){if(window.opener){if(g=g||window.location.href){var _=u.UrlUtility.parseUrlFragment(g,m);if(_.state){var C="popupCallback_"+_.state,R=window.opener[C];R?(s.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),R(g,p)):s.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else s.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else s.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},a(f,[{key:"promise",get:function(){return this._promise}}]),f}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.IFrameNavigator=void 0;var a=o(0),s=o(44);n.IFrameNavigator=function(){function u(){(function(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(c){var g=new s.IFrameWindow(c);return Promise.resolve(g)},u.prototype.callback=function(c){a.Log.debug("IFrameNavigator.callback");try{return s.IFrameWindow.notifyParent(c),Promise.resolve()}catch(g){return Promise.reject(g)}},u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.IFrameWindow=void 0;var a=function(){function u(f,c){for(var g=0;g<c.length;g++){var p=c[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}return function(f,c,g){return c&&u(f.prototype,c),g&&u(f,g),f}}(),s=o(0);n.IFrameWindow=function(){function u(f){var c=this;(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this._promise=new Promise(function(g,p){c._resolve=g,c._reject=p}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return u.prototype.navigate=function(c){if(c&&c.url){var g=c.silentRequestTimeout||1e4;s.Log.debug("IFrameWindow.navigate: Using timeout of:",g),this._timer=window.setTimeout(this._timeout.bind(this),g),this._frame.src=c.url}else this._error("No url provided");return this.promise},u.prototype._success=function(c){this._cleanup(),s.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(c)},u.prototype._error=function(c){this._cleanup(),s.Log.error(c),this._reject(new Error(c))},u.prototype.close=function(){this._cleanup()},u.prototype._cleanup=function(){this._frame&&(s.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},u.prototype._timeout=function(){s.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},u.prototype._message=function(c){if(s.Log.debug("IFrameWindow.message"),this._timer&&c.origin===this._origin&&c.source===this._frame.contentWindow&&typeof c.data=="string"&&(c.data.startsWith("http://")||c.data.startsWith("https://"))){var g=c.data;g?this._success({url:g}):this._error("Invalid response from frame")}},u.notifyParent=function(c){s.Log.debug("IFrameWindow.notifyParent"),(c=c||window.location.href)&&(s.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(c,location.protocol+"//"+location.host))},a(u,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManagerEvents=void 0;var a=o(0),s=o(16),u=o(17);n.UserManagerEvents=function(f){function c(g){(function(_,C){if(!(_ instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c);var p=function(_,C){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?_:C}(this,f.call(this,g));return p._userLoaded=new u.Event("User loaded"),p._userUnloaded=new u.Event("User unloaded"),p._silentRenewError=new u.Event("Silent renew error"),p._userSignedIn=new u.Event("User signed in"),p._userSignedOut=new u.Event("User signed out"),p._userSessionChanged=new u.Event("User session changed"),p}return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}(c,f),c.prototype.load=function(p){var m=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];a.Log.debug("UserManagerEvents.load"),f.prototype.load.call(this,p),m&&this._userLoaded.raise(p)},c.prototype.unload=function(){a.Log.debug("UserManagerEvents.unload"),f.prototype.unload.call(this),this._userUnloaded.raise()},c.prototype.addUserLoaded=function(p){this._userLoaded.addHandler(p)},c.prototype.removeUserLoaded=function(p){this._userLoaded.removeHandler(p)},c.prototype.addUserUnloaded=function(p){this._userUnloaded.addHandler(p)},c.prototype.removeUserUnloaded=function(p){this._userUnloaded.removeHandler(p)},c.prototype.addSilentRenewError=function(p){this._silentRenewError.addHandler(p)},c.prototype.removeSilentRenewError=function(p){this._silentRenewError.removeHandler(p)},c.prototype._raiseSilentRenewError=function(p){a.Log.debug("UserManagerEvents._raiseSilentRenewError",p.message),this._silentRenewError.raise(p)},c.prototype.addUserSignedIn=function(p){this._userSignedIn.addHandler(p)},c.prototype.removeUserSignedIn=function(p){this._userSignedIn.removeHandler(p)},c.prototype._raiseUserSignedIn=function(){a.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},c.prototype.addUserSignedOut=function(p){this._userSignedOut.addHandler(p)},c.prototype.removeUserSignedOut=function(p){this._userSignedOut.removeHandler(p)},c.prototype._raiseUserSignedOut=function(){a.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},c.prototype.addUserSessionChanged=function(p){this._userSessionChanged.addHandler(p)},c.prototype.removeUserSessionChanged=function(p){this._userSessionChanged.removeHandler(p)},c.prototype._raiseUserSessionChanged=function(){a.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},c}(s.AccessTokenEvents)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=void 0;var a=function(){function p(m,_){for(var C=0;C<_.length;C++){var R=_[C];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(m,R.key,R)}}return function(m,_,C){return _&&p(m.prototype,_),C&&p(m,C),m}}(),s=o(0),u=o(1),f=o(17);function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function g(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?p:m}n.Timer=function(p){function m(_){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.Global.timer,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;c(this,m);var I=g(this,p.call(this,_));return I._timer=C,I._nowFunc=R||function(){return Date.now()/1e3},I}return function(C,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);C.prototype=Object.create(R&&R.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(C,R):C.__proto__=R)}(m,p),m.prototype.init=function(C){C<=0&&(C=1),C=parseInt(C);var R=this.now+C;if(this.expiration===R&&this._timerHandle)s.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),s.Log.debug("Timer.init timer "+this._name+" for duration:",C),this._expiration=R;var I=5;C<I&&(I=C),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*I)}},m.prototype.cancel=function(){this._timerHandle&&(s.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},m.prototype._callback=function(){var C=this._expiration-this.now;s.Log.debug("Timer.callback; "+this._name+" timer expires in:",C),this._expiration<=this.now&&(this.cancel(),p.prototype.raise.call(this))},a(m,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),m}(f.Event)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SilentRenewService=void 0;var a=o(0);n.SilentRenewService=function(){function s(u){(function(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,s),this._userManager=u}return s.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(f){}).catch(function(f){a.Log.error("SilentRenewService.start: Error from getUser:",f.message)}))},s.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},s.prototype._tokenExpiring=function(){var f=this;this._userManager.signinSilent().then(function(c){a.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(c){a.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",c.message),f._userManager.events._raiseSilentRenewError(c)})},s}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaPopupNavigator=void 0;var a=o(21);n.CordovaPopupNavigator=function(){function s(){(function(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,s)}return s.prototype.prepare=function(f){var c=new a.CordovaPopupWindow(f);return Promise.resolve(c)},s}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaIFrameNavigator=void 0;var a=o(21);n.CordovaIFrameNavigator=function(){function s(){(function(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,s)}return s.prototype.prepare=function(f){f.popupWindowFeatures="hidden=yes";var c=new a.CordovaPopupWindow(f);return Promise.resolve(c)},s}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.Version="1.11.6"}])})})(cP);var Wi=cP.exports,Ni=Ci(),dP=Oa();function ZL(e,t){var r,n,o,a;throw e.error==="invalid_redirect_uri"?new Error(`Dynamic client registration failed: the provided redirect uri [${(r=t.redirectUrl)===null||r===void 0?void 0:r.toString()}] is invalid - ${(n=e.error_description)!==null&&n!==void 0?n:""}`):e.error==="invalid_client_metadata"?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(t)} is invalid - ${(o=e.error_description)!==null&&o!==void 0?o:""}`):new Error(`Dynamic client registration failed: ${e.error} - ${(a=e.error_description)!==null&&a!==void 0?a:""}`)}function eU(e,t){if(e.client_id===void 0)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(t.redirectUrl&&(e.redirect_uris===void 0||e.redirect_uris[0]!==t.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([t.redirectUrl.toString()])}`)}async function tU(e,t){var r;if(!t.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(t.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const n=Ni.determineSigningAlg(t.idTokenSigningAlgValuesSupported,Ni.PREFERRED_SIGNING_ALG),o={client_name:e.clientName,application_type:"web",redirect_uris:[(r=e.redirectUrl)===null||r===void 0?void 0:r.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:n,grant_types:["authorization_code","refresh_token"]},a={"Content-Type":"application/json"},s=await fetch(t.registrationEndpoint.toString(),{method:"POST",headers:a,body:JSON.stringify(o)});if(s.ok){const u=await s.json();return eU(u,e),{clientId:u.client_id,clientSecret:u.client_secret,idTokenSignedResponseAlg:u.id_token_signed_response_alg,clientType:"dynamic"}}throw s.status===400&&ZL(await s.json(),e),new Error(`Dynamic client registration failed: the server returned ${s.status} ${s.statusText} - ${await s.text()}`)}function rU(e){return e.error!==void 0&&typeof e.error=="string"}function xA(e){return e.error_description!==void 0&&typeof e.error_description=="string"}function nU(e){return e.error_uri!==void 0&&typeof e.error_uri=="string"}function iU(e){return e.access_token!==void 0&&typeof e.access_token=="string"}function oU(e){return e.id_token!==void 0&&typeof e.id_token=="string"}function sU(e){return e.refresh_token!==void 0&&typeof e.refresh_token=="string"}function aU(e){return e.token_type!==void 0&&typeof e.token_type=="string"}function lU(e){return e.expires_in===void 0||typeof e.expires_in=="number"}function uU(e,t){if(t.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(t.grantType)))throw new Error(`The issuer [${e.issuer}] does not support the [${t.grantType}] grant`);if(!e.tokenEndpoint)throw new Error(`This issuer [${e.issuer}] does not have a token endpoint`)}function fP(e,t){if(rU(e))throw new Ni.OidcProviderError(`Token endpoint returned error [${e.error}]${xA(e)?`: ${e.error_description}`:""}${nU(e)?` (see ${e.error_uri})`:""}`,e.error,xA(e)?e.error_description:void 0);if(!iU(e))throw new Ni.InvalidResponseError(["access_token"]);if(!oU(e))throw new Ni.InvalidResponseError(["id_token"]);if(!aU(e))throw new Ni.InvalidResponseError(["token_type"]);if(!lU(e))throw new Ni.InvalidResponseError(["expires_in"]);if(!t&&e.token_type.toLowerCase()!=="bearer")throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function cU(e,t,r,n){uU(e,r);const o={"content-type":"application/x-www-form-urlencoded"};let a;n&&(a=await Ni.generateDpopKeyPair(),o.DPoP=await Ni.createDpopHeader(e.tokenEndpoint,"POST",a)),t.clientSecret&&(o.Authorization=`Basic ${btoa(`${t.clientId}:${t.clientSecret}`)}`);const s={grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:t.clientId},u={method:"POST",headers:o,body:new URLSearchParams(s).toString()},c=await(await dP.fetch(e.tokenEndpoint,u)).json(),g=fP(c,n),p=await Ni.getWebidFromTokenPayload(g.id_token,e.jwksUri,e.issuer,t.clientId);return{accessToken:g.access_token,idToken:g.id_token,refreshToken:sU(g)?g.refresh_token:void 0,webId:p,dpopKey:a,expiresIn:g.expires_in}}async function dU(e){let t;try{const r=new Wi.OidcClient({response_mode:"query",loadUserInfo:!1});if(t=await r.processSigninResponse(e),r.settings.metadata===void 0)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(r.settings.metadata.jwks_uri===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(r.settings.metadata.issuer===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(r.settings.client_id===void 0)throw new Error("Missing some client information in storage: 'client_id' is undefined");const n=await Ni.getWebidFromTokenPayload(t.id_token,r.settings.metadata.jwks_uri,r.settings.metadata.issuer,r.settings.client_id);return{accessToken:t.access_token,idToken:t.id_token,webId:n,refreshToken:t.refresh_token}}catch(r){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${e}]: ${r}`)}}async function fU(e,t,r){return cU(e,t,r,!0)}const hU=e=>{try{return new URL(e),!0}catch{return!1}};async function pU(e,t,r,n){if(r.clientId===void 0)throw new Error("No client ID available when trying to refresh the access token.");const o={grant_type:"refresh_token",refresh_token:e,scope:Ni.DEFAULT_SCOPES};let a={};n!==void 0&&(a={DPoP:await Ni.createDpopHeader(t.tokenEndpoint,"POST",n)});let s={};r.clientSecret!==void 0?s={Authorization:`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`}:hU(r.clientId)&&(o.client_id=r.clientId);const u=await dP.fetch(t.tokenEndpoint,{method:"POST",body:new URLSearchParams(o).toString(),headers:{...a,...s,"Content-Type":"application/x-www-form-urlencoded"}});let f;try{f=await u.json()}catch{throw new Error(`The token endpoint of issuer ${t.issuer} returned a malformed response.`)}const c=fP(f,n!==void 0),g=await Ni.getWebidFromTokenPayload(c.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:c.access_token,idToken:c.id_token,refreshToken:typeof c.refresh_token=="string"?c.refresh_token:void 0,webId:g,dpopKey:n,expiresIn:c.expires_in}}function gU(e){const t=new URL(e);return t.searchParams.delete("code"),t.searchParams.delete("state"),t.hash="",e.includes(`${t.origin}/`)?t.href:`${t.origin}${t.href.substring(t.origin.length+1)}`}async function yU(){await new Wi.OidcClient({response_mode:"query"}).clearStaleState(new Wi.WebStorageStateStore({}));const t=window.localStorage,r=[];for(let n=0;n<=t.length;n+=1){const o=t.key(n);o&&(o.match(/^oidc\..+$/)||o.match(/^solidClientAuthenticationUser:.+$/))&&r.push(o)}r.forEach(n=>t.removeItem(n))}const mU=Object.freeze(Object.defineProperty({__proto__:null,CordovaIFrameNavigator:Wi.CordovaIFrameNavigator,CordovaPopupNavigator:Wi.CordovaPopupNavigator,InMemoryWebStorage:Wi.InMemoryWebStorage,Log:Wi.Log,OidcClient:Wi.OidcClient,SessionMonitor:Wi.SessionMonitor,User:Wi.User,UserManager:Wi.UserManager,Version:Wi.Version,WebStorageStateStore:Wi.WebStorageStateStore,clearOidcPersistentStorage:yU,getBearerToken:dU,getDpopToken:fU,refresh:pU,registerClient:tU,removeOidcQueryParam:gU},Symbol.toStringTag,{value:"Module"})),Xl=rp(mU);var CA;function vU(){if(CA)return th;CA=1,Object.defineProperty(th,"__esModule",{value:!0});const e=Ci(),t=Oa(),r=Xl,n=(a,s)=>(0,t.fetch)(a,s);let o=class{constructor(s,u,f,c,g){this.loginHandler=s,this.redirectHandler=u,this.logoutHandler=f,this.sessionInfoManager=c,this.issuerConfigFetcher=g,this.login=async(p,m)=>{var _,C;await this.sessionInfoManager.clear(p.sessionId);const R=(_=p.redirectUrl)!==null&&_!==void 0?_:(0,r.removeOidcQueryParam)(window.location.href);if(!(0,e.isValidRedirectUrl)(R))throw new Error(`${R} is not a valid redirect URL, it is either a malformed IRI or it includes a hash fragment.`);await this.loginHandler.handle({...p,redirectUrl:R,clientName:(C=p.clientName)!==null&&C!==void 0?C:p.clientId,eventEmitter:m})},this.fetch=n,this.logout=async p=>{await this.logoutHandler.handle(p),this.fetch=n},this.getSessionInfo=async p=>this.sessionInfoManager.get(p),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.validateCurrentSession=async p=>{const m=await this.sessionInfoManager.get(p);return m===void 0||m.clientAppId===void 0||m.issuer===void 0?null:m},this.handleIncomingRedirect=async(p,m)=>{try{const _=await this.redirectHandler.handle(p,m);return this.fetch=_.fetch.bind(window),this.cleanUrlAfterRedirect(p),{isLoggedIn:_.isLoggedIn,webId:_.webId,sessionId:_.sessionId,expirationDate:_.expirationDate}}catch(_){this.cleanUrlAfterRedirect(p),m.emit(e.EVENTS.ERROR,"redirect",_);return}}}cleanUrlAfterRedirect(s){const u=new URL(s);u.searchParams.delete("state"),u.searchParams.delete("code"),u.searchParams.delete("id_token"),u.searchParams.delete("access_token"),u.searchParams.delete("error"),u.searchParams.delete("error_description"),u.searchParams.delete("iss"),window.history.replaceState(null,"",u.toString())}};return th.default=o,th}var rh={},TA;function wU(){if(TA)return rh;TA=1,Object.defineProperty(rh,"__esModule",{value:!0});const e=Ci();function t(o){return typeof o.oidcIssuer=="string"}function r(o){return typeof o.redirectUrl=="string"}let n=class{constructor(a,s,u,f){this.storageUtility=a,this.oidcHandler=s,this.issuerConfigFetcher=u,this.clientRegistrar=f}async canHandle(a){return t(a)&&r(a)}async handle(a){if(!t(a))throw new e.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(a)}`);if(!r(a))throw new e.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(a)}`);const s=await this.issuerConfigFetcher.fetchConfig(a.oidcIssuer),u=await(0,e.handleRegistration)(a,s,this.storageUtility,this.clientRegistrar),f={issuer:s.issuer,dpop:a.tokenType.toLowerCase()==="dpop",...a,issuerConfiguration:s,client:u};return this.oidcHandler.handle(f)}};return rh.default=n,rh}var nh={},PA;function _U(){if(PA)return nh;PA=1,Object.defineProperty(nh,"__esModule",{value:!0});const e=Ci(),t=Xl;let r=class{constructor(o,a){this.storageUtility=o,this.redirector=a}async canHandle(o){return!!(o.issuerConfiguration.grantTypesSupported&&o.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)}async handle(o){var a;const s={authority:o.issuer.toString(),client_id:o.client.clientId,client_secret:o.client.clientSecret,redirect_uri:o.redirectUrl.toString(),post_logout_redirect_uri:o.redirectUrl.toString(),response_type:"code",scope:e.DEFAULT_SCOPES,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:(a=o.prompt)!==null&&a!==void 0?a:"consent"},u=new t.OidcClient(s),{redirector:f}=this,c=this.storageUtility;try{const g=await u.createSigninRequest();await Promise.all([c.setForUser(g.state._id,{sessionId:o.sessionId}),c.setForUser(o.sessionId,{codeVerifier:g.state._code_verifier,issuer:o.issuer.toString(),redirectUrl:o.redirectUrl,dpop:o.dpop?"true":"false"})]),f.redirect(g.url.toString(),{handleRedirect:o.handleRedirect})}catch(g){console.error(g)}}};return nh.default=r,nh}var I0={},IA;function SU(){return IA||(IA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WELL_KNOWN_OPENID_CONFIG=void 0;const t=Ci(),r=Oa();e.WELL_KNOWN_OPENID_CONFIG=".well-known/openid-configuration";const n={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function o(s){const u={};return Object.keys(s).forEach(f=>{n[f]&&(u[n[f].toKey]=s[f])}),Array.isArray(u.scopesSupported)||(u.scopesSupported=["openid"]),u}class a{constructor(u){this.storageUtility=u}static getLocalStorageKey(u){return`issuerConfig:${u}`}async fetchConfig(u){let f;const c=new URL(e.WELL_KNOWN_OPENID_CONFIG,u.endsWith("/")?u:`${u}/`).href,g=await(0,r.fetch)(c);try{f=o(await g.json())}catch(p){throw new t.ConfigurationError(`[${u.toString()}] has an invalid configuration: ${p.message}`)}return await this.storageUtility.set(a.getLocalStorageKey(u),JSON.stringify(f)),f}}e.default=a}(I0)),I0}var Rc={},Xo={},FA;function vw(){if(FA)return Xo;FA=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.SessionInfoManager=Xo.clear=Xo.getUnauthenticatedSession=void 0;const e=Ci(),t=jp(),r=Xl,n=Oa();function o(){return{isLoggedIn:!1,sessionId:(0,t.v4)(),fetch:n.fetch}}Xo.getUnauthenticatedSession=o;async function a(u,f){await Promise.all([f.deleteAllUserData(u,{secure:!1}),f.deleteAllUserData(u,{secure:!0}),f.delete("clientKey",{secure:!1})]),await(0,r.clearOidcPersistentStorage)()}Xo.clear=a;let s=class{constructor(f){this.storageUtility=f}update(f,c){throw new Error("Not Implemented")}async get(f){var c;const g=await this.storageUtility.getForUser(f,"isLoggedIn",{secure:!0}),p=await this.storageUtility.getForUser(f,"webId",{secure:!0}),m=await this.storageUtility.getForUser(f,"clientId",{secure:!1}),_=await this.storageUtility.getForUser(f,"clientSecret",{secure:!1}),C=await this.storageUtility.getForUser(f,"redirectUrl",{secure:!1}),R=await this.storageUtility.getForUser(f,"refreshToken",{secure:!0}),I=await this.storageUtility.getForUser(f,"issuer",{secure:!1}),S=(c=await this.storageUtility.getForUser(f,"tokenType",{secure:!1}))!==null&&c!==void 0?c:"DPoP";if(!(0,e.isSupportedTokenType)(S))throw new Error(`Tokens of type [${S}] are not supported.`);if(!(m===void 0&&g===void 0&&p===void 0&&R===void 0))return{sessionId:f,webId:p,isLoggedIn:g==="true",redirectUrl:C,refreshToken:R,issuer:I,clientAppId:m,clientAppSecret:_,tokenType:S}}async getAll(){throw new Error("Not implemented")}async clear(f){return a(f,this.storageUtility)}async register(f){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}};return Xo.SessionInfoManager=s,Xo}var OA;function EU(){if(OA)return Rc;OA=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.FallbackRedirectHandler=void 0;const e=vw();let t=class{async canHandle(n){try{return new URL(n),!0}catch(o){throw new Error(`[${n}] is not a valid URL, and cannot be used as a redirect URL: ${o}`)}}async handle(n){return(0,e.getUnauthenticatedSession)()}};return Rc.FallbackRedirectHandler=t,Rc}var ih={},NA;function bU(){if(NA)return ih;NA=1,Object.defineProperty(ih,"__esModule",{value:!0});let e=class{constructor(r){this.sessionInfoManager=r}async canHandle(){return!0}async handle(r){await this.sessionInfoManager.clear(r)}};return ih.default=e,ih}var xc={},kA;function AU(){if(kA)return xc;kA=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.AuthCodeRedirectHandler=void 0;const e=Oa(),t=Ci(),r=Xl;let n=class{constructor(a,s,u,f,c){this.storageUtility=a,this.sessionInfoManager=s,this.issuerConfigFetcher=u,this.clientRegistrar=f,this.tokerRefresher=c}async canHandle(a){try{const s=new URL(a);return s.searchParams.get("code")!==null&&s.searchParams.get("state")!==null}catch(s){throw new Error(`[${a}] is not a valid URL, and cannot be used as a redirect URL: ${s}`)}}async handle(a,s){if(!await this.canHandle(a))throw new Error(`AuthCodeRedirectHandler cannot handle [${a}]: it is missing one of [code, state].`);const u=new URL(a),f=u.searchParams.get("state"),c=await this.storageUtility.getForUser(f,"sessionId",{errorIfNull:!0}),{issuerConfig:g,codeVerifier:p,redirectUrl:m,dpop:_}=await(0,t.loadOidcContextFromStorage)(c,this.storageUtility,this.issuerConfigFetcher),C=u.searchParams.get("iss");if(typeof C=="string"&&C!==g.issuer)throw new Error(`The value of the iss parameter (${C}) does not match the issuer identifier of the authorization server (${g.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(p===void 0)throw new Error(`The code verifier for session ${c} is missing from storage.`);if(m===void 0)throw new Error(`The redirect URL for session ${c} is missing from storage.`);const R=await this.clientRegistrar.getClient({sessionId:c},g);let I;const S=Date.now();_?(I=await(0,r.getDpopToken)(g,R,{grantType:"authorization_code",code:u.searchParams.get("code"),codeVerifier:p,redirectUrl:m}),window.localStorage.removeItem(`oidc.${f}`)):I=await(0,r.getBearerToken)(u.toString());let b;I.refreshToken!==void 0&&(b={sessionId:c,refreshToken:I.refreshToken,tokenRefresher:this.tokerRefresher});const T=await(0,t.buildAuthenticatedFetch)(e.fetch,I.accessToken,{dpopKey:I.dpopKey,refreshOptions:b,eventEmitter:s,expiresIn:I.expiresIn});await this.storageUtility.setForUser(c,{webId:I.webId,isLoggedIn:"true"},{secure:!0});const B=await this.sessionInfoManager.get(c);if(!B)throw new Error(`Could not retrieve session: [${c}].`);return Object.assign(B,{fetch:T,expirationDate:typeof I.expiresIn=="number"?S+I.expiresIn*1e3:null})}};return xc.AuthCodeRedirectHandler=n,xc}var oh={},DA;function RU(){if(DA)return oh;DA=1,Object.defineProperty(oh,"__esModule",{value:!0});const e=Ci();let t=class extends e.AggregateHandler{constructor(n){super(n)}};return oh.default=t,oh}var sh={},LA;function xU(){if(LA)return sh;LA=1,Object.defineProperty(sh,"__esModule",{value:!0});let e=class{get storage(){return window.localStorage}async get(r){return this.storage.getItem(r)||void 0}async set(r,n){this.storage.setItem(r,n)}async delete(r){this.storage.removeItem(r)}};return sh.default=e,sh}var ah={},UA;function CU(){if(UA)return ah;UA=1,Object.defineProperty(ah,"__esModule",{value:!0});let e=class{redirect(r,n){n&&n.handleRedirect?n.handleRedirect(r):n&&n.redirectByReplacingState?window.history.replaceState({},"",r):window.location.href=r}};return ah.default=e,ah}var lh={},MA;function TU(){if(MA)return lh;MA=1,Object.defineProperty(lh,"__esModule",{value:!0});const e=Xl;let t=class{constructor(n){this.storageUtility=n}async getClient(n,o){const[a,s]=await Promise.all([this.storageUtility.getForUser(n.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(n.sessionId,"clientSecret",{secure:!1})]);if(a)return{clientId:a,clientSecret:s,clientType:"dynamic"};try{const u=await(0,e.registerClient)(n,o),f={clientId:u.clientId};return u.clientSecret&&(f.clientSecret=u.clientSecret),u.idTokenSignedResponseAlg&&(f.idTokenSignedResponseAlg=u.idTokenSignedResponseAlg),await this.storageUtility.setForUser(n.sessionId,f,{secure:!1}),u}catch(u){throw new Error(`Client registration failed: [${u}]`)}}};return lh.default=t,lh}var Cc={},BA;function PU(){if(BA)return Cc;BA=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.ErrorOidcHandler=void 0;const e=Ci(),t=vw();let r=class{async canHandle(o){try{return new URL(o).searchParams.has("error")}catch(a){throw new Error(`[${o}] is not a valid URL, and cannot be used as a redirect URL: ${a}`)}}async handle(o,a){if(a!==void 0){const s=new URL(o),u=s.searchParams.get("error"),f=s.searchParams.get("error_description");a.emit(e.EVENTS.ERROR,u,f)}return(0,t.getUnauthenticatedSession)()}};return Cc.ErrorOidcHandler=r,Cc}var uh={},HA;function IU(){if(HA)return uh;HA=1,Object.defineProperty(uh,"__esModule",{value:!0});const e=Ci(),t=Xl;let r=class{constructor(o,a,s){this.storageUtility=o,this.issuerConfigFetcher=a,this.clientRegistrar=s}async refresh(o,a,s,u){const f=await(0,e.loadOidcContextFromStorage)(o,this.storageUtility,this.issuerConfigFetcher),c=await this.clientRegistrar.getClient({sessionId:o},f.issuerConfig);if(a===void 0)throw new Error(`Session [${o}] has no refresh token to allow it to refresh its access token.`);if(f.dpop&&s===void 0)throw new Error(`For session [${o}], the key bound to the DPoP access token must be provided to refresh said access token.`);const g=await(0,t.refresh)(a,f.issuerConfig,c,s);return g.refreshToken!==void 0&&(u==null||u.emit(e.EVENTS.NEW_REFRESH_TOKEN,g.refreshToken),await this.storageUtility.setForUser(o,{refreshToken:g.refreshToken})),g}};return uh.default=r,uh}var jA;function hP(){if(jA)return Ac;jA=1;var e=cn&&cn.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.getClientAuthenticationWithDependencies=void 0;const t=Ci(),r=e(YL()),n=e(vU()),o=e(wU()),a=e(_U()),s=e(SU()),u=EU(),f=e(bU()),c=vw(),g=AU(),p=e(RU()),m=e(xU()),_=e(CU()),C=e(TU()),R=PU(),I=e(IU());function S(b){const T=new t.InMemoryStorage,B=b.secureStorage||T,H=b.insecureStorage||new m.default,$=new r.default(B,H),F=new s.default($),ne=new C.default($),Y=new c.SessionInfoManager($),M=new I.default($,F,ne),J=new o.default($,new a.default($,new _.default),F,ne),Le=new p.default([new R.ErrorOidcHandler,new g.AuthCodeRedirectHandler($,Y,F,ne,M),new u.FallbackRedirectHandler]);return new n.default(J,Le,new f.default(Y),Y,F)}return Ac.getClientAuthenticationWithDependencies=S,Ac}var da={},$A;function FU(){if($A)return da;$A=1,Object.defineProperty(da,"__esModule",{value:!0}),da.KEY_CURRENT_URL=da.KEY_CURRENT_SESSION=void 0;const e=Ci();return da.KEY_CURRENT_SESSION=`${e.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`,da.KEY_CURRENT_URL=`${e.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`,da}var VA;function gP(){if(VA)return ca;VA=1;var e=cn&&cn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ca,"__esModule",{value:!0}),ca.Session=ca.silentlyAuthenticate=void 0;const t=Ci(),r=jp(),n=e(pd()),o=hP(),a=FU();async function s(c,g,p){var m;const _=await g.validateCurrentSession(c);return _!==null?(window.localStorage.setItem(a.KEY_CURRENT_URL,window.location.href),await g.login({sessionId:c,prompt:"none",oidcIssuer:_.issuer,redirectUrl:_.redirectUrl,clientId:_.clientAppId,clientSecret:_.clientAppSecret,tokenType:(m=_.tokenType)!==null&&m!==void 0?m:"DPoP"},p.events),!0):!1}ca.silentlyAuthenticate=s;function u(c){return!!(c!=null&&c.isLoggedIn)}let f=class pP extends n.default{constructor(g={},p=void 0){super(),this.tokenRequestInProgress=!1,this.login=async m=>{var _;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...m,tokenType:(_=m.tokenType)!==null&&_!==void 0?_:"DPoP"},this.events),new Promise(()=>{})},this.fetch=async(m,_)=>this.clientAuthentication.fetch(m,_),this.internalLogout=async m=>{window.localStorage.removeItem(a.KEY_CURRENT_SESSION),await this.clientAuthentication.logout(this.info.sessionId),this.info.isLoggedIn=!1,m&&this.events.emit(t.EVENTS.LOGOUT)},this.logout=async()=>this.internalLogout(!0),this.handleIncomingRedirect=async(m={})=>{var _;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const C=typeof m=="string"?{url:m}:m,R=(_=C.url)!==null&&_!==void 0?_:window.location.href;this.tokenRequestInProgress=!0;const I=await this.clientAuthentication.handleIncomingRedirect(R,this.events);if(u(I)){this.setSessionInfo(I);const S=window.localStorage.getItem(a.KEY_CURRENT_URL);S===null?this.events.emit(t.EVENTS.LOGIN):(window.localStorage.removeItem(a.KEY_CURRENT_URL),this.events.emit(t.EVENTS.SESSION_RESTORED,S))}else if(C.restorePreviousSession===!0){const S=window.localStorage.getItem(a.KEY_CURRENT_SESSION);if(S!==null&&await s(S,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,I},this.events=new Proxy(this,(0,t.buildProxyHandler)(pP.prototype,"events only implements ISessionEventListener")),g.clientAuthentication?this.clientAuthentication=g.clientAuthentication:g.secureStorage&&g.insecureStorage?this.clientAuthentication=(0,o.getClientAuthenticationWithDependencies)({secureStorage:g.secureStorage,insecureStorage:g.insecureStorage}):this.clientAuthentication=(0,o.getClientAuthenticationWithDependencies)({}),g.sessionInfo?this.info={sessionId:g.sessionInfo.sessionId,isLoggedIn:!1,webId:g.sessionInfo.webId}:this.info={sessionId:p??(0,r.v4)(),isLoggedIn:!1},this.events.on(t.EVENTS.LOGIN,()=>window.localStorage.setItem(a.KEY_CURRENT_SESSION,this.info.sessionId)),this.events.on(t.EVENTS.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(t.EVENTS.ERROR,()=>this.internalLogout(!1))}onLogin(g){this.events.on(t.EVENTS.LOGIN,g)}onLogout(g){this.events.on(t.EVENTS.LOGOUT,g)}onError(g){this.events.on(t.EVENTS.ERROR,g)}onSessionRestore(g){this.events.on(t.EVENTS.SESSION_RESTORED,g)}onSessionExpiration(g){this.events.on(t.EVENTS.SESSION_EXPIRED,g)}setSessionInfo(g){this.info.isLoggedIn=g.isLoggedIn,this.info.webId=g.webId,this.info.sessionId=g.sessionId,this.info.expirationDate=g.expirationDate,this.events.on(t.EVENTS.SESSION_EXTENDED,p=>{this.info.expirationDate=Date.now()+p*1e3})}};return ca.Session=f,ca}var Hn={},KA;function OU(){if(KA)return Hn;KA=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.events=Hn.onSessionRestore=Hn.onLogout=Hn.onLogin=Hn.handleIncomingRedirect=Hn.logout=Hn.login=Hn.fetch=Hn.getDefaultSession=void 0;const e=gP();let t;function r(){return typeof t>"u"&&(t=new e.Session),t}Hn.getDefaultSession=r;const n=(...p)=>r().fetch(...p);Hn.fetch=n;const o=(...p)=>r().login(...p);Hn.login=o;const a=(...p)=>r().logout(...p);Hn.logout=a;const s=(...p)=>r().handleIncomingRedirect(...p);Hn.handleIncomingRedirect=s;const u=(...p)=>r().onLogin(...p);Hn.onLogin=u;const f=(...p)=>r().onLogout(...p);Hn.onLogout=f;const c=(...p)=>r().onSessionRestore(...p);Hn.onSessionRestore=c;const g=()=>r().events;return Hn.events=g,Hn}var WA;function NU(){return WA||(WA=1,function(e){var t=cn&&cn.__createBinding||(Object.create?function(s,u,f,c){c===void 0&&(c=f);var g=Object.getOwnPropertyDescriptor(u,f);(!g||("get"in g?!u.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(s,c,g)}:function(s,u,f,c){c===void 0&&(c=f),s[c]=u[f]}),r=cn&&cn.__exportStar||function(s,u){for(var f in s)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&t(u,s,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.EVENTS=e.InMemoryStorage=e.ConfigurationError=e.NotImplementedError=e.getClientAuthenticationWithDependencies=e.Session=void 0;var n=gP();Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return n.Session}});var o=hP();Object.defineProperty(e,"getClientAuthenticationWithDependencies",{enumerable:!0,get:function(){return o.getClientAuthenticationWithDependencies}}),r(OU(),e);var a=Ci();Object.defineProperty(e,"NotImplementedError",{enumerable:!0,get:function(){return a.NotImplementedError}}),Object.defineProperty(e,"ConfigurationError",{enumerable:!0,get:function(){return a.ConfigurationError}}),Object.defineProperty(e,"InMemoryStorage",{enumerable:!0,get:function(){return a.InMemoryStorage}}),Object.defineProperty(e,"EVENTS",{enumerable:!0,get:function(){return a.EVENTS}})}(C0)),C0}var F0={},GA;function kU(){return GA||(GA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=un;/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */function r(P,L,k,ge){function xe(ae){return ae instanceof k?ae:new k(function(bt){bt(ae)})}return new(k||(k=Promise))(function(ae,bt){function Wt(Se){try{xt(ge.next(Se))}catch(Ve){bt(Ve)}}function Rt(Se){try{xt(ge.throw(Se))}catch(Ve){bt(Ve)}}function xt(Se){Se.done?ae(Se.value):xe(Se.value).then(Wt,Rt)}xt((ge=ge.apply(P,L||[])).next())})}function n(P,L){var k={label:0,sent:function(){if(ae[0]&1)throw ae[1];return ae[1]},trys:[],ops:[]},ge,xe,ae,bt;return bt={next:Wt(0),throw:Wt(1),return:Wt(2)},typeof Symbol=="function"&&(bt[Symbol.iterator]=function(){return this}),bt;function Wt(xt){return function(Se){return Rt([xt,Se])}}function Rt(xt){if(ge)throw new TypeError("Generator is already executing.");for(;k;)try{if(ge=1,xe&&(ae=xt[0]&2?xe.return:xt[0]?xe.throw||((ae=xe.return)&&ae.call(xe),0):xe.next)&&!(ae=ae.call(xe,xt[1])).done)return ae;switch(xe=0,ae&&(xt=[xt[0]&2,ae.value]),xt[0]){case 0:case 1:ae=xt;break;case 4:return k.label++,{value:xt[1],done:!1};case 5:k.label++,xe=xt[1],xt=[0];continue;case 7:xt=k.ops.pop(),k.trys.pop();continue;default:if(ae=k.trys,!(ae=ae.length>0&&ae[ae.length-1])&&(xt[0]===6||xt[0]===2)){k=0;continue}if(xt[0]===3&&(!ae||xt[1]>ae[0]&&xt[1]<ae[3])){k.label=xt[1];break}if(xt[0]===6&&k.label<ae[1]){k.label=ae[1],ae=xt;break}if(ae&&k.label<ae[2]){k.label=ae[2],k.ops.push(xt);break}ae[2]&&k.ops.pop(),k.trys.pop();continue}xt=L.call(P,k)}catch(Se){xt=[6,Se],xe=0}finally{ge=ae=0}if(xt[0]&5)throw xt[1];return{value:xt[0]?xt[1]:void 0,done:!0}}}var o=function(){},a=o(),s=Object,u=function(P){return P===a},f=function(P){return typeof P=="function"},c=function(P,L){return s.assign({},P,L)},g="undefined",p=function(){return typeof window!=g},m=function(){return typeof document!=g},_=function(){return p()&&typeof window.requestAnimationFrame!=g},C=new WeakMap,R=0,I=function(P){var L=typeof P,k=P&&P.constructor,ge=k==Date,xe,ae;if(s(P)===P&&!ge&&k!=RegExp){if(xe=C.get(P),xe)return xe;if(xe=++R+"~",C.set(P,xe),k==Array){for(xe="@",ae=0;ae<P.length;ae++)xe+=I(P[ae])+",";C.set(P,xe)}if(k==s){xe="#";for(var bt=s.keys(P).sort();!u(ae=bt.pop());)u(P[ae])||(xe+=ae+":"+I(P[ae])+",");C.set(P,xe)}}else xe=ge?P.toJSON():L=="symbol"?P.toString():L=="string"?JSON.stringify(P):""+P;return xe},S=!0,b=function(){return S},T=p(),B=m(),H=T&&window.addEventListener?window.addEventListener.bind(window):o,$=B?document.addEventListener.bind(document):o,F=T&&window.removeEventListener?window.removeEventListener.bind(window):o,ne=B?document.removeEventListener.bind(document):o,Y=function(){var P=B&&document.visibilityState;return u(P)||P!=="hidden"},M=function(P){return $("visibilitychange",P),H("focus",P),function(){ne("visibilitychange",P),F("focus",P)}},J=function(P){var L=function(){S=!0,P()},k=function(){S=!1};return H("online",L),H("offline",k),function(){F("online",L),F("offline",k)}},Le={isOnline:b,isVisible:Y},Ue={initFocus:M,initReconnect:J},je=!p()||"Deno"in window,nt=function(P){return _()?window.requestAnimationFrame(P):setTimeout(P,1)},ke=je?t.useEffect:t.useLayoutEffect,Be=typeof navigator<"u"&&navigator.connection,De=!je&&Be&&(["slow-2g","2g"].includes(Be.effectiveType)||Be.saveData),tt=function(P){if(f(P))try{P=P()}catch{P=""}var L=[].concat(P);P=typeof P=="string"?P:(Array.isArray(P)?P.length:P)?I(P):"";var k=P?"$swr$"+P:"";return[P,L,k]},re=new WeakMap,Ie=0,Ge=1,dt=2,Ze=function(P,L,k,ge,xe,ae,bt){bt===void 0&&(bt=!0);var Wt=re.get(P),Rt=Wt[0],xt=Wt[1],Se=Wt[3],Ve=Rt[L],Oe=xt[L];if(bt&&Oe)for(var _e=0;_e<Oe.length;++_e)Oe[_e](k,ge,xe);return ae&&(delete Se[L],Ve&&Ve[0])?Ve[0](dt).then(function(){return P.get(L)}):P.get(L)},qe=0,Fe=function(){return++qe},lt=function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];return r(void 0,void 0,void 0,function(){var k,ge,xe,ae,bt,Wt,Rt,xt,Se,Ve,Oe,_e,Ke,ht,ut,ot,yt,Ht,Qt,zt,Yt;return n(this,function(fr){switch(fr.label){case 0:if(k=P[0],ge=P[1],xe=P[2],ae=P[3],bt=typeof ae=="boolean"?{revalidate:ae}:ae||{},Wt=u(bt.populateCache)?!0:bt.populateCache,Rt=bt.revalidate!==!1,xt=bt.rollbackOnError!==!1,Se=bt.optimisticData,Ve=tt(ge),Oe=Ve[0],_e=Ve[2],!Oe)return[2];if(Ke=re.get(k),ht=Ke[2],P.length<3)return[2,Ze(k,Oe,k.get(Oe),a,a,Rt,!0)];if(ut=xe,yt=Fe(),ht[Oe]=[yt,0],Ht=!u(Se),Qt=k.get(Oe),Ht&&(zt=f(Se)?Se(Qt):Se,k.set(Oe,zt),Ze(k,Oe,zt)),f(ut))try{ut=ut(k.get(Oe))}catch(Zt){ot=Zt}return ut&&f(ut.then)?[4,ut.catch(function(Zt){ot=Zt})]:[3,2];case 1:if(ut=fr.sent(),yt!==ht[Oe][0]){if(ot)throw ot;return[2,ut]}else ot&&Ht&&xt&&(Wt=!0,ut=Qt,k.set(Oe,Qt));fr.label=2;case 2:return Wt&&(ot||(f(Wt)&&(ut=Wt(ut,Qt)),k.set(Oe,ut)),k.set(_e,c(k.get(_e),{error:ot}))),ht[Oe][1]=Fe(),[4,Ze(k,Oe,ut,ot,a,Rt,!!Wt)];case 3:if(Yt=fr.sent(),ot)throw ot;return[2,Wt?Yt:ut]}})})},gt=function(P,L){for(var k in P)P[k][0]&&P[k][0](L)},Pt=function(P,L){if(!re.has(P)){var k=c(Ue,L),ge={},xe=lt.bind(a,P),ae=o;if(re.set(P,[ge,{},{},{},xe]),!je){var bt=k.initFocus(setTimeout.bind(a,gt.bind(a,ge,Ie))),Wt=k.initReconnect(setTimeout.bind(a,gt.bind(a,ge,Ge)));ae=function(){bt&&bt(),Wt&&Wt(),re.delete(P)}}return[P,xe,ae]}return[P,re.get(P)[4]]},Ft=function(P,L,k,ge,xe){var ae=k.errorRetryCount,bt=xe.retryCount,Wt=~~((Math.random()+.5)*(1<<(bt<8?bt:8)))*k.errorRetryInterval;!u(ae)&&bt>ae||setTimeout(ge,Wt,xe)},Z=Pt(new Map),N=Z[0],E=Z[1],j=c({onLoadingSlow:o,onSuccess:o,onError:o,onErrorRetry:Ft,onDiscarded:o,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:De?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:De?5e3:3e3,compare:function(P,L){return I(P)==I(L)},isPaused:function(){return!1},cache:N,mutate:E,fallback:{}},Le),G=function(P,L){var k=c(P,L);if(L){var ge=P.use,xe=P.fallback,ae=L.use,bt=L.fallback;ge&&ae&&(k.use=ge.concat(ae)),xe&&bt&&(k.fallback=c(xe,bt))}return k},fe=t.createContext({}),we=function(P){var L=P.value,k=G(t.useContext(fe),L),ge=L&&L.provider,xe=t.useState(function(){return ge?Pt(ge(k.cache||N),L):a})[0];return xe&&(k.cache=xe[0],k.mutate=xe[1]),ke(function(){return xe?xe[2]:a},[]),t.createElement(fe.Provider,c(P,{value:k}))},me=function(P,L){var k=t.useState({})[1],ge=t.useRef(P),xe=t.useRef({data:!1,error:!1,isValidating:!1}),ae=t.useCallback(function(bt){var Wt=!1,Rt=ge.current;for(var xt in bt){var Se=xt;Rt[Se]!==bt[Se]&&(Rt[Se]=bt[Se],xe.current[Se]&&(Wt=!0))}Wt&&!L.current&&k({})},[]);return ke(function(){ge.current=P}),[ge,xe.current,ae]},$e=function(P){return f(P[1])?[P[0],P[1],P[2]||{}]:[P[0],null,(P[1]===null?P[2]:P[1])||{}]},Xe=function(){return c(j,t.useContext(fe))},ft=function(P){return function(){for(var k=[],ge=0;ge<arguments.length;ge++)k[ge]=arguments[ge];var xe=Xe(),ae=$e(k),bt=ae[0],Wt=ae[1],Rt=ae[2],xt=G(xe,Rt),Se=P,Ve=xt.use;if(Ve)for(var Oe=Ve.length;Oe-- >0;)Se=Ve[Oe](Se);return Se(bt,Wt||xt.fetcher,xt)}},Mt=function(P,L,k){var ge=L[P]||(L[P]=[]);return ge.push(k),function(){var xe=ge.indexOf(k);xe>=0&&(ge[xe]=ge[ge.length-1],ge.pop())}},$t={dedupe:!0},Lr=function(P,L,k){var ge=k.cache,xe=k.compare,ae=k.fallbackData,bt=k.suspense,Wt=k.revalidateOnMount,Rt=k.refreshInterval,xt=k.refreshWhenHidden,Se=k.refreshWhenOffline,Ve=re.get(ge),Oe=Ve[0],_e=Ve[1],Ke=Ve[2],ht=Ve[3],ut=tt(P),ot=ut[0],yt=ut[1],Ht=ut[2],Qt=t.useRef(!1),zt=t.useRef(!1),Yt=t.useRef(ot),fr=t.useRef(L),Zt=t.useRef(k),Ot=function(){return Zt.current},mr=function(){return Ot().isVisible()&&Ot().isOnline()},wt=function(sn){return ge.set(Ht,c(ge.get(Ht),sn))},It=ge.get(ot),Gt=u(ae)?k.fallback[ot]:ae,Lt=u(It)?Gt:It,Sr=ge.get(Ht)||{},sr=Sr.error,jr=!Qt.current,nr=function(){return jr&&!u(Wt)?Wt:Ot().isPaused()?!1:bt?u(Lt)?!1:k.revalidateIfStale:u(Lt)||k.revalidateIfStale},Kt=function(){return!ot||!L?!1:Sr.isValidating?!0:jr&&nr()},Bt=Kt(),Kr=me({data:Lt,error:sr,isValidating:Bt},zt),Mr=Kr[0],Br=Kr[1],vr=Kr[2],Cr=t.useCallback(function(sn){return r(void 0,void 0,void 0,function(){var Wr,Ir,Sn,Gn,qn,tn,rn,h,y,w,A,U,W;return n(this,function(Q){switch(Q.label){case 0:if(Wr=fr.current,!ot||!Wr||zt.current||Ot().isPaused())return[2,!1];Gn=!0,qn=sn||{},tn=!ht[ot]||!qn.dedupe,rn=function(){return!zt.current&&ot===Yt.current&&Qt.current},h=function(){var ue=ht[ot];ue&&ue[1]===Sn&&delete ht[ot]},y={isValidating:!1},w=function(){wt({isValidating:!1}),rn()&&vr(y)},wt({isValidating:!0}),vr({isValidating:!0}),Q.label=1;case 1:return Q.trys.push([1,3,,4]),tn&&(Ze(ge,ot,Mr.current.data,Mr.current.error,!0),k.loadingTimeout&&!ge.get(ot)&&setTimeout(function(){Gn&&rn()&&Ot().onLoadingSlow(ot,k)},k.loadingTimeout),ht[ot]=[Wr.apply(void 0,yt),Fe()]),W=ht[ot],Ir=W[0],Sn=W[1],[4,Ir];case 2:return Ir=Q.sent(),tn&&setTimeout(h,k.dedupingInterval),!ht[ot]||ht[ot][1]!==Sn?(tn&&rn()&&Ot().onDiscarded(ot),[2,!1]):(wt({error:a}),y.error=a,A=Ke[ot],!u(A)&&(Sn<=A[0]||Sn<=A[1]||A[1]===0)?(w(),tn&&rn()&&Ot().onDiscarded(ot),[2,!1]):(xe(Mr.current.data,Ir)?y.data=Mr.current.data:y.data=Ir,xe(ge.get(ot),Ir)||ge.set(ot,Ir),tn&&rn()&&Ot().onSuccess(Ir,ot,k),[3,4]));case 3:return U=Q.sent(),h(),Ot().isPaused()||(wt({error:U}),y.error=U,tn&&rn()&&(Ot().onError(U,ot,k),(typeof k.shouldRetryOnError=="boolean"&&k.shouldRetryOnError||f(k.shouldRetryOnError)&&k.shouldRetryOnError(U))&&mr()&&Ot().onErrorRetry(U,ot,k,Cr,{retryCount:(qn.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Gn=!1,w(),rn()&&tn&&Ze(ge,ot,y.data,y.error,!1),[2,!0]}})})},[ot]),Ct=t.useCallback(lt.bind(a,ge,function(){return Yt.current}),[]);if(ke(function(){fr.current=L,Zt.current=k}),ke(function(){if(ot){var sn=ot!==Yt.current,Wr=Cr.bind(a,$t),Ir=function(rn,h,y){vr(c({error:h,isValidating:y},xe(Mr.current.data,rn)?a:{data:rn}))},Sn=0,Gn=function(rn){if(rn==Ie){var h=Date.now();Ot().revalidateOnFocus&&h>Sn&&mr()&&(Sn=h+Ot().focusThrottleInterval,Wr())}else if(rn==Ge)Ot().revalidateOnReconnect&&mr()&&Wr();else if(rn==dt)return Cr()},qn=Mt(ot,_e,Ir),tn=Mt(ot,Oe,Gn);return zt.current=!1,Yt.current=ot,Qt.current=!0,sn&&vr({data:Lt,error:sr,isValidating:Bt}),nr()&&(u(Lt)||je?Wr():nt(Wr)),function(){zt.current=!0,qn(),tn()}}},[ot,Cr]),ke(function(){var sn;function Wr(){var Sn=f(Rt)?Rt(Lt):Rt;Sn&&sn!==-1&&(sn=setTimeout(Ir,Sn))}function Ir(){!Mr.current.error&&(xt||Ot().isVisible())&&(Se||Ot().isOnline())?Cr($t).then(Wr):Wr()}return Wr(),function(){sn&&(clearTimeout(sn),sn=-1)}},[Rt,xt,Se,Cr]),t.useDebugValue(Lt),bt&&u(Lt)&&ot)throw fr.current=L,Zt.current=k,zt.current=!1,u(sr)?Cr($t):sr;return{mutate:Ct,get data(){return Br.data=!0,Lt},get error(){return Br.error=!0,sr},get isValidating(){return Br.isValidating=!0,Bt}}},ee=s.defineProperty(we,"default",{value:j}),de=function(P){return tt(P)[0]},K=ft(Lr);e.SWRConfig=ee,e.default=K,e.mutate=E,e.unstable_serialize=de,e.useSWRConfig=Xe}(F0)),F0}var O0={exports:{}},ch={exports:{}},qA;function DU(){return qA||(qA=1,function(e,t){(function(r,n){n(t,un)})(cn,function(r,n){function o(O,q,X,ie,Ae,le,Re){try{var et=O[le](Re),Je=et.value}catch(it){return void X(it)}et.done?q(Je):Promise.resolve(Je).then(ie,Ae)}function a(O){return function(){var q=this,X=arguments;return new Promise(function(ie,Ae){var le=O.apply(q,X);function Re(Je){o(le,ie,Ae,Re,et,"next",Je)}function et(Je){o(le,ie,Ae,Re,et,"throw",Je)}Re(void 0)})}}function s(){return(s=Object.assign||function(O){for(var q=1;q<arguments.length;q++){var X=arguments[q];for(var ie in X)Object.prototype.hasOwnProperty.call(X,ie)&&(O[ie]=X[ie])}return O}).apply(this,arguments)}function u(O,q){if(O==null)return{};var X,ie,Ae={},le=Object.keys(O);for(ie=0;ie<le.length;ie++)X=le[ie],q.indexOf(X)>=0||(Ae[X]=O[X]);return Ae}function f(O){var q=function(X,ie){if(typeof X!="object"||X===null)return X;var Ae=X[Symbol.toPrimitive];if(Ae!==void 0){var le=Ae.call(X,ie||"default");if(typeof le!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ie==="string"?String:Number)(X)}(O,"string");return typeof q=="symbol"?q:String(q)}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var c={init:"init"},g=function(O){var q=O.value;return q===void 0?"":q},p=function(){return n.createElement(n.Fragment,null,"")},m={Cell:g,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function _(){for(var O=arguments.length,q=new Array(O),X=0;X<O;X++)q[X]=arguments[X];return q.reduce(function(ie,Ae){var le=Ae.style,Re=Ae.className;return ie=s({},ie,{},u(Ae,["style","className"])),le&&(ie.style=ie.style?s({},ie.style||{},{},le||{}):le),Re&&(ie.className=ie.className?ie.className+" "+Re:Re),ie.className===""&&delete ie.className,ie},{})}var C=function(O,q){return q===void 0&&(q={}),function(X){return X===void 0&&(X={}),[].concat(O,[X]).reduce(function(ie,Ae){return function le(Re,et,Je){return typeof et=="function"?le({},et(Re,Je)):Array.isArray(et)?_.apply(void 0,[Re].concat(et)):_(Re,et)}(ie,Ae,s({},q,{userProps:X}))},{})}},R=function(O,q,X,ie){return X===void 0&&(X={}),O.reduce(function(Ae,le){return le(Ae,X)},q)},I=function(O,q,X){return X===void 0&&(X={}),O.forEach(function(ie){ie(q,X)})};function S(O,q,X,ie){O.findIndex(function(Ae){return Ae.pluginName===X}),q.forEach(function(Ae){O.findIndex(function(le){return le.pluginName===Ae})})}function b(O,q){return typeof O=="function"?O(q):O}function T(O){var q=n.useRef();return q.current=O,n.useCallback(function(){return q.current},[])}var B=typeof document<"u"?n.useLayoutEffect:n.useEffect;function H(O,q){var X=n.useRef(!1);B(function(){X.current&&O(),X.current=!0},q)}function $(O,q,X){return X===void 0&&(X={}),function(ie,Ae){Ae===void 0&&(Ae={});var le=typeof ie=="string"?q[ie]:ie;if(le===void 0)throw console.info(q),new Error("Renderer Error ");return F(le,s({},O,{column:q},X,{},Ae))}}function F(O,q){return function(ie){return typeof ie=="function"&&(Ae=Object.getPrototypeOf(ie)).prototype&&Ae.prototype.isReactComponent;var Ae}(X=O)||typeof X=="function"||function(ie){return typeof ie=="object"&&typeof ie.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(ie.$$typeof.description)}(X)?n.createElement(O,q):O;var X}function ne(O,q,X){return X===void 0&&(X=0),O.map(function(ie){return M(ie=s({},ie,{parent:q,depth:X})),ie.columns&&(ie.columns=ne(ie.columns,ie,X+1)),ie})}function Y(O){return ke(O,"columns")}function M(O){var q=O.id,X=O.accessor,ie=O.Header;if(typeof X=="string"){q=q||X;var Ae=X.split(".");X=function(le){return function(Re,et,Je){if(!et)return Re;var it,_t=typeof et=="function"?et:JSON.stringify(et),mt=Ue.get(_t)||function(){var St=function(at){return function Et(Ut,jt){if(jt===void 0&&(jt=[]),Array.isArray(Ut))for(var er=0;er<Ut.length;er+=1)Et(Ut[er],jt);else jt.push(Ut);return jt}(at).map(function(Et){return String(Et).replace(".","_")}).join(".").replace(Ge,".").replace(dt,"").split(".")}(et);return Ue.set(_t,St),St}();try{it=mt.reduce(function(St,at){return St[at]},Re)}catch{}return it!==void 0?it:Je}(le,Ae)}}if(!q&&typeof ie=="string"&&ie&&(q=ie),!q&&O.columns)throw console.error(O),new Error('A column ID (or unique "Header" value) is required!');if(!q)throw console.error(O),new Error("A column ID (or string accessor) is required!");return Object.assign(O,{id:q,accessor:X}),O}function J(O,q){if(!q)throw new Error;return Object.assign(O,s({Header:p,Footer:p},m,{},q,{},O)),Object.assign(O,{originalWidth:O.width}),O}function Le(O,q,X){X===void 0&&(X=function(){return{}});for(var ie=[],Ae=O,le=0,Re=function(){return le++},et=function(){var Je={headers:[]},it=[],_t=Ae.some(function(mt){return mt.parent});Ae.forEach(function(mt){var St,at=[].concat(it).reverse()[0];_t&&(mt.parent?St=s({},mt.parent,{originalId:mt.parent.id,id:mt.parent.id+"_"+Re(),headers:[mt]},X(mt)):St=J(s({originalId:mt.id+"_placeholder",id:mt.id+"_placeholder_"+Re(),placeholderOf:mt,headers:[mt]},X(mt)),q),at&&at.originalId===St.originalId?at.headers.push(mt):it.push(St)),Je.headers.push(mt)}),ie.push(Je),Ae=it};Ae.length;)et();return ie.reverse()}var Ue=new Map;function je(){for(var O=arguments.length,q=new Array(O),X=0;X<O;X++)q[X]=arguments[X];for(var ie=0;ie<q.length;ie+=1)if(q[ie]!==void 0)return q[ie]}function nt(O){if(typeof O=="function")return O}function ke(O,q){var X=[];return function ie(Ae){Ae.forEach(function(le){le[q]?ie(le[q]):X.push(le)})}(O),X}function Be(O,q){var X=q.manualExpandedKey,ie=q.expanded,Ae=q.expandSubRows,le=Ae===void 0||Ae,Re=[];return O.forEach(function(et){return function Je(it,_t){_t===void 0&&(_t=!0),it.isExpanded=it.original&&it.original[X]||ie[it.id],it.canExpand=it.subRows&&!!it.subRows.length,_t&&Re.push(it),it.subRows&&it.subRows.length&&it.isExpanded&&it.subRows.forEach(function(mt){return Je(mt,le)})}(et)}),Re}function De(O,q,X){return nt(O)||q[O]||X[O]||X.text}function tt(O,q,X){return O?O(q,X):q===void 0}function re(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var Ie=null,Ge=/\[/g,dt=/\]/g,Ze=function(O){return s({role:"table"},O)},qe=function(O){return s({role:"rowgroup"},O)},Fe=function(O,q){var X=q.column;return s({key:"header_"+X.id,colSpan:X.totalVisibleHeaderCount,role:"columnheader"},O)},lt=function(O,q){var X=q.column;return s({key:"footer_"+X.id,colSpan:X.totalVisibleHeaderCount},O)},gt=function(O,q){return s({key:"headerGroup_"+q.index,role:"row"},O)},Pt=function(O,q){return s({key:"footerGroup_"+q.index},O)},Ft=function(O,q){return s({key:"row_"+q.row.id,role:"row"},O)},Z=function(O,q){var X=q.cell;return s({key:"cell_"+X.row.id+"_"+X.column.id,role:"cell"},O)};function N(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[Ze],getTableBodyProps:[qe],getHeaderGroupProps:[gt],getFooterGroupProps:[Pt],getHeaderProps:[Fe],getFooterProps:[lt],getRowProps:[Ft],getCellProps:[Z],useFinalInstance:[]}}c.resetHiddenColumns="resetHiddenColumns",c.toggleHideColumn="toggleHideColumn",c.setHiddenColumns="setHiddenColumns",c.toggleHideAllColumns="toggleHideAllColumns";var E=function(O){O.getToggleHiddenProps=[j],O.getToggleHideAllColumnsProps=[G],O.stateReducers.push(fe),O.useInstanceBeforeDimensions.push(we),O.headerGroupsDeps.push(function(q,X){var ie=X.instance;return[].concat(q,[ie.state.hiddenColumns])}),O.useInstance.push(me)};E.pluginName="useColumnVisibility";var j=function(O,q){var X=q.column;return[O,{onChange:function(ie){X.toggleHidden(!ie.target.checked)},style:{cursor:"pointer"},checked:X.isVisible,title:"Toggle Column Visible"}]},G=function(O,q){var X=q.instance;return[O,{onChange:function(ie){X.toggleHideAllColumns(!ie.target.checked)},style:{cursor:"pointer"},checked:!X.allColumnsHidden&&!X.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!X.allColumnsHidden&&X.state.hiddenColumns.length}]};function fe(O,q,X,ie){if(q.type===c.init)return s({hiddenColumns:[]},O);if(q.type===c.resetHiddenColumns)return s({},O,{hiddenColumns:ie.initialState.hiddenColumns||[]});if(q.type===c.toggleHideColumn){var Ae=(q.value!==void 0?q.value:!O.hiddenColumns.includes(q.columnId))?[].concat(O.hiddenColumns,[q.columnId]):O.hiddenColumns.filter(function(le){return le!==q.columnId});return s({},O,{hiddenColumns:Ae})}return q.type===c.setHiddenColumns?s({},O,{hiddenColumns:b(q.value,O.hiddenColumns)}):q.type===c.toggleHideAllColumns?s({},O,{hiddenColumns:(q.value!==void 0?q.value:!O.hiddenColumns.length)?ie.allColumns.map(function(le){return le.id}):[]}):void 0}function we(O){var q=O.headers,X=O.state.hiddenColumns;n.useRef(!1).current;var ie=0;q.forEach(function(Ae){return ie+=function le(Re,et){Re.isVisible=et&&!X.includes(Re.id);var Je=0;return Re.headers&&Re.headers.length?Re.headers.forEach(function(it){return Je+=le(it,Re.isVisible)}):Je=Re.isVisible?1:0,Re.totalVisibleHeaderCount=Je,Je}(Ae,!0)})}function me(O){var q=O.columns,X=O.flatHeaders,ie=O.dispatch,Ae=O.allColumns,le=O.getHooks,Re=O.state.hiddenColumns,et=O.autoResetHiddenColumns,Je=et===void 0||et,it=T(O),_t=Ae.length===Re.length,mt=n.useCallback(function(jt,er){return ie({type:c.toggleHideColumn,columnId:jt,value:er})},[ie]),St=n.useCallback(function(jt){return ie({type:c.setHiddenColumns,value:jt})},[ie]),at=n.useCallback(function(jt){return ie({type:c.toggleHideAllColumns,value:jt})},[ie]),Et=C(le().getToggleHideAllColumnsProps,{instance:it()});X.forEach(function(jt){jt.toggleHidden=function(er){ie({type:c.toggleHideColumn,columnId:jt.id,value:er})},jt.getToggleHiddenProps=C(le().getToggleHiddenProps,{instance:it(),column:jt})});var Ut=T(Je);H(function(){Ut()&&ie({type:c.resetHiddenColumns})},[ie,q]),Object.assign(O,{allColumnsHidden:_t,toggleHideColumn:mt,setHiddenColumns:St,toggleHideAllColumns:at,getToggleHideAllColumnsProps:Et})}var $e={},Xe={},ft=function(O,q,X){return O},Mt=function(O,q){return O.subRows||[]},$t=function(O,q,X){return""+(X?[X.id,q].join("."):q)},Lr=function(O){return O};function ee(O){var q=O.initialState,X=q===void 0?$e:q,ie=O.defaultColumn,Ae=ie===void 0?Xe:ie,le=O.getSubRows,Re=le===void 0?Mt:le,et=O.getRowId,Je=et===void 0?$t:et,it=O.stateReducer,_t=it===void 0?ft:it,mt=O.useControlledState,St=mt===void 0?Lr:mt;return s({},u(O,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:X,defaultColumn:Ae,getSubRows:Re,getRowId:Je,stateReducer:_t,useControlledState:St})}function de(O,q){q===void 0&&(q=0);var X=0,ie=0,Ae=0,le=0;return O.forEach(function(Re){var et=Re.headers;if(Re.totalLeft=q,et&&et.length){var Je=de(et,q),it=Je[0],_t=Je[1],mt=Je[2],St=Je[3];Re.totalMinWidth=it,Re.totalWidth=_t,Re.totalMaxWidth=mt,Re.totalFlexWidth=St}else Re.totalMinWidth=Re.minWidth,Re.totalWidth=Math.min(Math.max(Re.minWidth,Re.width),Re.maxWidth),Re.totalMaxWidth=Re.maxWidth,Re.totalFlexWidth=Re.canResize?Re.totalWidth:0;Re.isVisible&&(q+=Re.totalWidth,X+=Re.totalMinWidth,ie+=Re.totalWidth,Ae+=Re.totalMaxWidth,le+=Re.totalFlexWidth)}),[X,ie,Ae,le]}function K(O){var q=O.data,X=O.rows,ie=O.flatRows,Ae=O.rowsById,le=O.column,Re=O.getRowId,et=O.getSubRows,Je=O.accessValueHooks,it=O.getInstance;q.forEach(function(_t,mt){return function St(at,Et,Ut,jt,er){Ut===void 0&&(Ut=0);var Rr=at,rr=Re(at,Et,jt),Tt=Ae[rr];if(Tt)Tt.subRows&&Tt.originalSubRows.forEach(function(rt,pr){return St(rt,pr,Ut+1,Tt)});else if((Tt={id:rr,original:Rr,index:Et,depth:Ut,cells:[{}]}).cells.map=re,Tt.cells.filter=re,Tt.cells.forEach=re,Tt.cells[0].getCellProps=re,Tt.values={},er.push(Tt),ie.push(Tt),Ae[rr]=Tt,Tt.originalSubRows=et(at,Et),Tt.originalSubRows){var hr=[];Tt.originalSubRows.forEach(function(rt,pr){return St(rt,pr,Ut+1,Tt,hr)}),Tt.subRows=hr}le.accessor&&(Tt.values[le.id]=le.accessor(at,Et,Tt,er,q)),Tt.values[le.id]=R(Je,Tt.values[le.id],{row:Tt,column:le,instance:it()})}(_t,mt,0,void 0,X)})}c.resetExpanded="resetExpanded",c.toggleRowExpanded="toggleRowExpanded",c.toggleAllRowsExpanded="toggleAllRowsExpanded";var P=function(O){O.getToggleAllRowsExpandedProps=[L],O.getToggleRowExpandedProps=[k],O.stateReducers.push(ge),O.useInstance.push(xe),O.prepareRow.push(ae)};P.pluginName="useExpanded";var L=function(O,q){var X=q.instance;return[O,{onClick:function(ie){X.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},k=function(O,q){var X=q.row;return[O,{onClick:function(){X.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function ge(O,q,X,ie){if(q.type===c.init)return s({expanded:{}},O);if(q.type===c.resetExpanded)return s({},O,{expanded:ie.initialState.expanded||{}});if(q.type===c.toggleAllRowsExpanded){var Ae=q.value,le=ie.rowsById,Re=Object.keys(le).length===Object.keys(O.expanded).length;if(Ae!==void 0?Ae:!Re){var et={};return Object.keys(le).forEach(function(Et){et[Et]=!0}),s({},O,{expanded:et})}return s({},O,{expanded:{}})}if(q.type===c.toggleRowExpanded){var Je,it=q.id,_t=q.value,mt=O.expanded[it],St=_t!==void 0?_t:!mt;if(!mt&&St)return s({},O,{expanded:s({},O.expanded,(Je={},Je[it]=!0,Je))});if(mt&&!St){var at=O.expanded;return at[it],s({},O,{expanded:u(at,[it].map(f))})}return O}}function xe(O){var q=O.data,X=O.rows,ie=O.rowsById,Ae=O.manualExpandedKey,le=Ae===void 0?"expanded":Ae,Re=O.paginateExpandedRows,et=Re===void 0||Re,Je=O.expandSubRows,it=Je===void 0||Je,_t=O.autoResetExpanded,mt=_t===void 0||_t,St=O.getHooks,at=O.plugins,Et=O.state.expanded,Ut=O.dispatch;S(at,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var jt=T(mt),er=!!(Object.keys(ie).length&&Object.keys(Et).length);er&&Object.keys(ie).some(function(Fr){return!Et[Fr]})&&(er=!1),H(function(){jt()&&Ut({type:c.resetExpanded})},[Ut,q]);var Rr=n.useCallback(function(Fr,lr){Ut({type:c.toggleRowExpanded,id:Fr,value:lr})},[Ut]),rr=n.useCallback(function(Fr){return Ut({type:c.toggleAllRowsExpanded,value:Fr})},[Ut]),Tt=n.useMemo(function(){return et?Be(X,{manualExpandedKey:le,expanded:Et,expandSubRows:it}):X},[et,X,le,Et,it]),hr=n.useMemo(function(){return function(Fr){var lr=0;return Object.keys(Fr).forEach(function(dr){var Vr=dr.split(".");lr=Math.max(lr,Vr.length)}),lr}(Et)},[Et]),rt=T(O),pr=C(St().getToggleAllRowsExpandedProps,{instance:rt()});Object.assign(O,{preExpandedRows:X,expandedRows:Tt,rows:Tt,expandedDepth:hr,isAllRowsExpanded:er,toggleRowExpanded:Rr,toggleAllRowsExpanded:rr,getToggleAllRowsExpandedProps:pr})}function ae(O,q){var X=q.instance.getHooks,ie=q.instance;O.toggleRowExpanded=function(Ae){return ie.toggleRowExpanded(O.id,Ae)},O.getToggleRowExpandedProps=C(X().getToggleRowExpandedProps,{instance:ie,row:O})}var bt=function(O,q,X){return O=O.filter(function(ie){return q.some(function(Ae){var le=ie.values[Ae];return String(le).toLowerCase().includes(String(X).toLowerCase())})})};bt.autoRemove=function(O){return!O};var Wt=function(O,q,X){return O.filter(function(ie){return q.some(function(Ae){var le=ie.values[Ae];return le===void 0||String(le).toLowerCase()===String(X).toLowerCase()})})};Wt.autoRemove=function(O){return!O};var Rt=function(O,q,X){return O.filter(function(ie){return q.some(function(Ae){var le=ie.values[Ae];return le===void 0||String(le)===String(X)})})};Rt.autoRemove=function(O){return!O};var xt=function(O,q,X){return O.filter(function(ie){return q.some(function(Ae){return ie.values[Ae].includes(X)})})};xt.autoRemove=function(O){return!O||!O.length};var Se=function(O,q,X){return O.filter(function(ie){return q.some(function(Ae){var le=ie.values[Ae];return le&&le.length&&X.every(function(Re){return le.includes(Re)})})})};Se.autoRemove=function(O){return!O||!O.length};var Ve=function(O,q,X){return O.filter(function(ie){return q.some(function(Ae){var le=ie.values[Ae];return le&&le.length&&X.some(function(Re){return le.includes(Re)})})})};Ve.autoRemove=function(O){return!O||!O.length};var Oe=function(O,q,X){return O.filter(function(ie){return q.some(function(Ae){var le=ie.values[Ae];return X.includes(le)})})};Oe.autoRemove=function(O){return!O||!O.length};var _e=function(O,q,X){return O.filter(function(ie){return q.some(function(Ae){return ie.values[Ae]===X})})};_e.autoRemove=function(O){return O===void 0};var Ke=function(O,q,X){return O.filter(function(ie){return q.some(function(Ae){return ie.values[Ae]==X})})};Ke.autoRemove=function(O){return O==null};var ht=function(O,q,X){var ie=X||[],Ae=ie[0],le=ie[1];if((Ae=typeof Ae=="number"?Ae:-1/0)>(le=typeof le=="number"?le:1/0)){var Re=Ae;Ae=le,le=Re}return O.filter(function(et){return q.some(function(Je){var it=et.values[Je];return it>=Ae&&it<=le})})};ht.autoRemove=function(O){return!O||typeof O[0]!="number"&&typeof O[1]!="number"};var ut=Object.freeze({__proto__:null,text:bt,exactText:Wt,exactTextCase:Rt,includes:xt,includesAll:Se,includesSome:Ve,includesValue:Oe,exact:_e,equals:Ke,between:ht});c.resetFilters="resetFilters",c.setFilter="setFilter",c.setAllFilters="setAllFilters";var ot=function(O){O.stateReducers.push(yt),O.useInstance.push(Ht)};function yt(O,q,X,ie){if(q.type===c.init)return s({filters:[]},O);if(q.type===c.resetFilters)return s({},O,{filters:ie.initialState.filters||[]});if(q.type===c.setFilter){var Ae=q.columnId,le=q.filterValue,Re=ie.allColumns,et=ie.filterTypes,Je=Re.find(function(Ut){return Ut.id===Ae});if(!Je)throw new Error("React-Table: Could not find a column with id: "+Ae);var it=De(Je.filter,et||{},ut),_t=O.filters.find(function(Ut){return Ut.id===Ae}),mt=b(le,_t&&_t.value);return tt(it.autoRemove,mt,Je)?s({},O,{filters:O.filters.filter(function(Ut){return Ut.id!==Ae})}):s({},O,_t?{filters:O.filters.map(function(Ut){return Ut.id===Ae?{id:Ae,value:mt}:Ut})}:{filters:[].concat(O.filters,[{id:Ae,value:mt}])})}if(q.type===c.setAllFilters){var St=q.filters,at=ie.allColumns,Et=ie.filterTypes;return s({},O,{filters:b(St,O.filters).filter(function(Ut){var jt=at.find(function(er){return er.id===Ut.id});return!tt(De(jt.filter,Et||{},ut).autoRemove,Ut.value,jt)})})}}function Ht(O){var q=O.data,X=O.rows,ie=O.flatRows,Ae=O.rowsById,le=O.allColumns,Re=O.filterTypes,et=O.manualFilters,Je=O.defaultCanFilter,it=Je!==void 0&&Je,_t=O.disableFilters,mt=O.state.filters,St=O.dispatch,at=O.autoResetFilters,Et=at===void 0||at,Ut=n.useCallback(function(rt,pr){St({type:c.setFilter,columnId:rt,filterValue:pr})},[St]),jt=n.useCallback(function(rt){St({type:c.setAllFilters,filters:rt})},[St]);le.forEach(function(rt){var pr=rt.id,Fr=rt.accessor,lr=rt.defaultCanFilter,dr=rt.disableFilters;rt.canFilter=Fr?je(dr!==!0&&void 0,_t!==!0&&void 0,!0):je(lr,it,!1),rt.setFilter=function(wr){return Ut(rt.id,wr)};var Vr=mt.find(function(wr){return wr.id===pr});rt.filterValue=Vr&&Vr.value});var er=n.useMemo(function(){if(et||!mt.length)return[X,ie,Ae];var rt=[],pr={};return[function Fr(lr,dr){dr===void 0&&(dr=0);var Vr=lr;return(Vr=mt.reduce(function(wr,Gr){var Pr=Gr.id,Qr=Gr.value,tr=le.find(function(wn){return wn.id===Pr});if(!tr)return wr;dr===0&&(tr.preFilteredRows=wr);var Or=De(tr.filter,Re||{},ut);return Or?(tr.filteredRows=Or(wr,[Pr],Qr),tr.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+tr.id+"."),wr)},lr)).forEach(function(wr){rt.push(wr),pr[wr.id]=wr,wr.subRows&&(wr.subRows=wr.subRows&&wr.subRows.length>0?Fr(wr.subRows,dr+1):wr.subRows)}),Vr}(X),rt,pr]},[et,mt,X,ie,Ae,le,Re]),Rr=er[0],rr=er[1],Tt=er[2];n.useMemo(function(){le.filter(function(rt){return!mt.find(function(pr){return pr.id===rt.id})}).forEach(function(rt){rt.preFilteredRows=Rr,rt.filteredRows=Rr})},[Rr,mt,le]);var hr=T(Et);H(function(){hr()&&St({type:c.resetFilters})},[St,et?null:q]),Object.assign(O,{preFilteredRows:X,preFilteredFlatRows:ie,preFilteredRowsById:Ae,filteredRows:Rr,filteredFlatRows:rr,filteredRowsById:Tt,rows:Rr,flatRows:rr,rowsById:Tt,setFilter:Ut,setAllFilters:jt})}ot.pluginName="useFilters",c.resetGlobalFilter="resetGlobalFilter",c.setGlobalFilter="setGlobalFilter";var Qt=function(O){O.stateReducers.push(zt),O.useInstance.push(Yt)};function zt(O,q,X,ie){if(q.type===c.resetGlobalFilter)return s({},O,{globalFilter:ie.initialState.globalFilter||void 0});if(q.type===c.setGlobalFilter){var Ae=q.filterValue,le=ie.userFilterTypes,Re=De(ie.globalFilter,le||{},ut),et=b(Ae,O.globalFilter);return tt(Re.autoRemove,et)?(O.globalFilter,u(O,["globalFilter"])):s({},O,{globalFilter:et})}}function Yt(O){var q=O.data,X=O.rows,ie=O.flatRows,Ae=O.rowsById,le=O.allColumns,Re=O.filterTypes,et=O.globalFilter,Je=O.manualGlobalFilter,it=O.state.globalFilter,_t=O.dispatch,mt=O.autoResetGlobalFilter,St=mt===void 0||mt,at=O.disableGlobalFilter,Et=n.useCallback(function(Tt){_t({type:c.setGlobalFilter,filterValue:Tt})},[_t]),Ut=n.useMemo(function(){if(Je||it===void 0)return[X,ie,Ae];var Tt=[],hr={},rt=De(et,Re||{},ut);if(!rt)return console.warn("Could not find a valid 'globalFilter' option."),X;le.forEach(function(Fr){var lr=Fr.disableGlobalFilter;Fr.canFilter=je(lr!==!0&&void 0,at!==!0&&void 0,!0)});var pr=le.filter(function(Fr){return Fr.canFilter===!0});return[function Fr(lr){return(lr=rt(lr,pr.map(function(dr){return dr.id}),it)).forEach(function(dr){Tt.push(dr),hr[dr.id]=dr,dr.subRows=dr.subRows&&dr.subRows.length?Fr(dr.subRows):dr.subRows}),lr}(X),Tt,hr]},[Je,it,et,Re,le,X,ie,Ae,at]),jt=Ut[0],er=Ut[1],Rr=Ut[2],rr=T(St);H(function(){rr()&&_t({type:c.resetGlobalFilter})},[_t,Je?null:q]),Object.assign(O,{preGlobalFilteredRows:X,preGlobalFilteredFlatRows:ie,preGlobalFilteredRowsById:Ae,globalFilteredRows:jt,globalFilteredFlatRows:er,globalFilteredRowsById:Rr,rows:jt,flatRows:er,rowsById:Rr,setGlobalFilter:Et,disableGlobalFilter:at})}function fr(O,q){return q.reduce(function(X,ie){return X+(typeof ie=="number"?ie:0)},0)}Qt.pluginName="useGlobalFilter";var Zt=Object.freeze({__proto__:null,sum:fr,min:function(O){var q=O[0]||0;return O.forEach(function(X){typeof X=="number"&&(q=Math.min(q,X))}),q},max:function(O){var q=O[0]||0;return O.forEach(function(X){typeof X=="number"&&(q=Math.max(q,X))}),q},minMax:function(O){var q=O[0]||0,X=O[0]||0;return O.forEach(function(ie){typeof ie=="number"&&(q=Math.min(q,ie),X=Math.max(X,ie))}),q+".."+X},average:function(O){return fr(0,O)/O.length},median:function(O){if(!O.length)return null;var q=Math.floor(O.length/2),X=[].concat(O).sort(function(ie,Ae){return ie-Ae});return O.length%2!=0?X[q]:(X[q-1]+X[q])/2},unique:function(O){return Array.from(new Set(O).values())},uniqueCount:function(O){return new Set(O).size},count:function(O){return O.length}}),Ot=[],mr={};c.resetGroupBy="resetGroupBy",c.setGroupBy="setGroupBy",c.toggleGroupBy="toggleGroupBy";var wt=function(O){O.getGroupByToggleProps=[It],O.stateReducers.push(Gt),O.visibleColumnsDeps.push(function(q,X){var ie=X.instance;return[].concat(q,[ie.state.groupBy])}),O.visibleColumns.push(Lt),O.useInstance.push(sr),O.prepareRow.push(jr)};wt.pluginName="useGroupBy";var It=function(O,q){var X=q.header;return[O,{onClick:X.canGroupBy?function(ie){ie.persist(),X.toggleGroupBy()}:void 0,style:{cursor:X.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function Gt(O,q,X,ie){if(q.type===c.init)return s({groupBy:[]},O);if(q.type===c.resetGroupBy)return s({},O,{groupBy:ie.initialState.groupBy||[]});if(q.type===c.setGroupBy)return s({},O,{groupBy:q.value});if(q.type===c.toggleGroupBy){var Ae=q.columnId,le=q.value,Re=le!==void 0?le:!O.groupBy.includes(Ae);return s({},O,Re?{groupBy:[].concat(O.groupBy,[Ae])}:{groupBy:O.groupBy.filter(function(et){return et!==Ae})})}}function Lt(O,q){var X=q.instance.state.groupBy,ie=X.map(function(le){return O.find(function(Re){return Re.id===le})}).filter(Boolean),Ae=O.filter(function(le){return!X.includes(le.id)});return(O=[].concat(ie,Ae)).forEach(function(le){le.isGrouped=X.includes(le.id),le.groupedIndex=X.indexOf(le.id)}),O}var Sr={};function sr(O){var q=O.data,X=O.rows,ie=O.flatRows,Ae=O.rowsById,le=O.allColumns,Re=O.flatHeaders,et=O.groupByFn,Je=et===void 0?nr:et,it=O.manualGroupBy,_t=O.aggregations,mt=_t===void 0?Sr:_t,St=O.plugins,at=O.state.groupBy,Et=O.dispatch,Ut=O.autoResetGroupBy,jt=Ut===void 0||Ut,er=O.disableGroupBy,Rr=O.defaultCanGroupBy,rr=O.getHooks;S(St,["useColumnOrder","useFilters"],"useGroupBy");var Tt=T(O);le.forEach(function(tr){var Or=tr.accessor,wn=tr.defaultGroupBy,xn=tr.disableGroupBy;tr.canGroupBy=Or?je(tr.canGroupBy,xn!==!0&&void 0,er!==!0&&void 0,!0):je(tr.canGroupBy,wn,Rr,!1),tr.canGroupBy&&(tr.toggleGroupBy=function(){return O.toggleGroupBy(tr.id)}),tr.Aggregated=tr.Aggregated||tr.Cell});var hr=n.useCallback(function(tr,Or){Et({type:c.toggleGroupBy,columnId:tr,value:Or})},[Et]),rt=n.useCallback(function(tr){Et({type:c.setGroupBy,value:tr})},[Et]);Re.forEach(function(tr){tr.getGroupByToggleProps=C(rr().getGroupByToggleProps,{instance:Tt(),header:tr})});var pr=n.useMemo(function(){if(it||!at.length)return[X,ie,Ae,Ot,mr,ie,Ae];var tr=at.filter(function(Bn){return le.find(function(wo){return wo.id===Bn})}),Or=[],wn={},xn=[],Dt={},ln=[],gr={},ei=function Bn(wo,eo,Ql){if(eo===void 0&&(eo=0),eo===tr.length)return wo.map(function(Po){return s({},Po,{depth:eo})});var Na=tr[eo],zp=Je(wo,Na);return Object.entries(zp).map(function(Po,Yl){var Zl=Po[0],qs=Po[1],to=Na+":"+Zl,ro=Bn(qs,eo+1,to=Ql?Ql+">"+to:to),gn=eo?ke(qs,"leafRows"):qs,vd=function(vi,ka,_d){var zs={};return le.forEach(function(Cn){if(tr.includes(Cn.id))zs[Cn.id]=ka[0]?ka[0].values[Cn.id]:null;else{var eu=typeof Cn.aggregate=="function"?Cn.aggregate:mt[Cn.aggregate]||Zt[Cn.aggregate];if(eu){var Sd=ka.map(function(Js){return Js.values[Cn.id]}),Ed=vi.map(function(Js){var wi=Js.values[Cn.id];if(!_d&&Cn.aggregateValue){var bd=typeof Cn.aggregateValue=="function"?Cn.aggregateValue:mt[Cn.aggregateValue]||Zt[Cn.aggregateValue];if(!bd)throw console.info({column:Cn}),new Error("React Table: Invalid column.aggregateValue option for column listed above");wi=bd(wi,Js,Cn)}return wi});zs[Cn.id]=eu(Ed,Sd)}else{if(Cn.aggregate)throw console.info({column:Cn}),new Error("React Table: Invalid column.aggregate option for column listed above");zs[Cn.id]=null}}}),zs}(gn,qs,eo),wd={id:to,isGrouped:!0,groupByID:Na,groupByVal:Zl,values:vd,subRows:ro,leafRows:gn,depth:eo,index:Yl};return ro.forEach(function(vi){Or.push(vi),wn[vi.id]=vi,vi.isGrouped?(xn.push(vi),Dt[vi.id]=vi):(ln.push(vi),gr[vi.id]=vi)}),wd})}(X);return ei.forEach(function(Bn){Or.push(Bn),wn[Bn.id]=Bn,Bn.isGrouped?(xn.push(Bn),Dt[Bn.id]=Bn):(ln.push(Bn),gr[Bn.id]=Bn)}),[ei,Or,wn,xn,Dt,ln,gr]},[it,at,X,ie,Ae,le,mt,Je]),Fr=pr[0],lr=pr[1],dr=pr[2],Vr=pr[3],wr=pr[4],Gr=pr[5],Pr=pr[6],Qr=T(jt);H(function(){Qr()&&Et({type:c.resetGroupBy})},[Et,it?null:q]),Object.assign(O,{preGroupedRows:X,preGroupedFlatRow:ie,preGroupedRowsById:Ae,groupedRows:Fr,groupedFlatRows:lr,groupedRowsById:dr,onlyGroupedFlatRows:Vr,onlyGroupedRowsById:wr,nonGroupedFlatRows:Gr,nonGroupedRowsById:Pr,rows:Fr,flatRows:lr,rowsById:dr,toggleGroupBy:hr,setGroupBy:rt})}function jr(O){O.allCells.forEach(function(q){var X;q.isGrouped=q.column.isGrouped&&q.column.id===O.groupByID,q.isPlaceholder=!q.isGrouped&&q.column.isGrouped,q.isAggregated=!q.isGrouped&&!q.isPlaceholder&&((X=O.subRows)==null?void 0:X.length)})}function nr(O,q){return O.reduce(function(X,ie,Ae){var le=""+ie.values[q];return X[le]=Array.isArray(X[le])?X[le]:[],X[le].push(ie),X},{})}var Kt=/([0-9]+)/gm;function Bt(O,q){return O===q?0:O>q?1:-1}function Kr(O,q,X){return[O.values[X],q.values[X]]}function Mr(O){return typeof O=="number"?isNaN(O)||O===1/0||O===-1/0?"":String(O):typeof O=="string"?O:""}var Br=Object.freeze({__proto__:null,alphanumeric:function(O,q,X){var ie=Kr(O,q,X),Ae=ie[0],le=ie[1];for(Ae=Mr(Ae),le=Mr(le),Ae=Ae.split(Kt).filter(Boolean),le=le.split(Kt).filter(Boolean);Ae.length&&le.length;){var Re=Ae.shift(),et=le.shift(),Je=parseInt(Re,10),it=parseInt(et,10),_t=[Je,it].sort();if(isNaN(_t[0])){if(Re>et)return 1;if(et>Re)return-1}else{if(isNaN(_t[1]))return isNaN(Je)?-1:1;if(Je>it)return 1;if(it>Je)return-1}}return Ae.length-le.length},datetime:function(O,q,X){var ie=Kr(O,q,X),Ae=ie[0],le=ie[1];return Bt(Ae=Ae.getTime(),le=le.getTime())},basic:function(O,q,X){var ie=Kr(O,q,X);return Bt(ie[0],ie[1])},string:function(O,q,X){var ie=Kr(O,q,X),Ae=ie[0],le=ie[1];for(Ae=Ae.split("").filter(Boolean),le=le.split("").filter(Boolean);Ae.length&&le.length;){var Re=Ae.shift(),et=le.shift(),Je=Re.toLowerCase(),it=et.toLowerCase();if(Je>it)return 1;if(it>Je)return-1;if(Re>et)return 1;if(et>Re)return-1}return Ae.length-le.length},number:function(O,q,X){var ie=Kr(O,q,X),Ae=ie[0],le=ie[1],Re=/[^0-9.]/gi;return Bt(Ae=Number(String(Ae).replace(Re,"")),le=Number(String(le).replace(Re,"")))}});c.resetSortBy="resetSortBy",c.setSortBy="setSortBy",c.toggleSortBy="toggleSortBy",c.clearSortBy="clearSortBy",m.sortType="alphanumeric",m.sortDescFirst=!1;var vr=function(O){O.getSortByToggleProps=[Cr],O.stateReducers.push(Ct),O.useInstance.push(sn)};vr.pluginName="useSortBy";var Cr=function(O,q){var X=q.instance,ie=q.column,Ae=X.isMultiSortEvent,le=Ae===void 0?function(Re){return Re.shiftKey}:Ae;return[O,{onClick:ie.canSort?function(Re){Re.persist(),ie.toggleSortBy(void 0,!X.disableMultiSort&&le(Re))}:void 0,style:{cursor:ie.canSort?"pointer":void 0},title:ie.canSort?"Toggle SortBy":void 0}]};function Ct(O,q,X,ie){if(q.type===c.init)return s({sortBy:[]},O);if(q.type===c.resetSortBy)return s({},O,{sortBy:ie.initialState.sortBy||[]});if(q.type===c.clearSortBy)return s({},O,{sortBy:O.sortBy.filter(function(Tt){return Tt.id!==q.columnId})});if(q.type===c.setSortBy)return s({},O,{sortBy:q.sortBy});if(q.type===c.toggleSortBy){var Ae,le=q.columnId,Re=q.desc,et=q.multi,Je=ie.allColumns,it=ie.disableMultiSort,_t=ie.disableSortRemove,mt=ie.disableMultiRemove,St=ie.maxMultiSortColCount,at=St===void 0?Number.MAX_SAFE_INTEGER:St,Et=O.sortBy,Ut=Je.find(function(Tt){return Tt.id===le}).sortDescFirst,jt=Et.find(function(Tt){return Tt.id===le}),er=Et.findIndex(function(Tt){return Tt.id===le}),Rr=Re!=null,rr=[];return(Ae=!it&&et?jt?"toggle":"add":er!==Et.length-1||Et.length!==1?"replace":jt?"toggle":"replace")!="toggle"||_t||Rr||et&&mt||!(jt&&jt.desc&&!Ut||!jt.desc&&Ut)||(Ae="remove"),Ae==="replace"?rr=[{id:le,desc:Rr?Re:Ut}]:Ae==="add"?(rr=[].concat(Et,[{id:le,desc:Rr?Re:Ut}])).splice(0,rr.length-at):Ae==="toggle"?rr=Et.map(function(Tt){return Tt.id===le?s({},Tt,{desc:Rr?Re:!jt.desc}):Tt}):Ae==="remove"&&(rr=Et.filter(function(Tt){return Tt.id!==le})),s({},O,{sortBy:rr})}}function sn(O){var q=O.data,X=O.rows,ie=O.flatRows,Ae=O.allColumns,le=O.orderByFn,Re=le===void 0?Wr:le,et=O.sortTypes,Je=O.manualSortBy,it=O.defaultCanSort,_t=O.disableSortBy,mt=O.flatHeaders,St=O.state.sortBy,at=O.dispatch,Et=O.plugins,Ut=O.getHooks,jt=O.autoResetSortBy,er=jt===void 0||jt;S(Et,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var Rr=n.useCallback(function(lr){at({type:c.setSortBy,sortBy:lr})},[at]),rr=n.useCallback(function(lr,dr,Vr){at({type:c.toggleSortBy,columnId:lr,desc:dr,multi:Vr})},[at]),Tt=T(O);mt.forEach(function(lr){var dr=lr.accessor,Vr=lr.canSort,wr=lr.disableSortBy,Gr=lr.id,Pr=dr?je(wr!==!0&&void 0,_t!==!0&&void 0,!0):je(it,Vr,!1);lr.canSort=Pr,lr.canSort&&(lr.toggleSortBy=function(tr,Or){return rr(lr.id,tr,Or)},lr.clearSortBy=function(){at({type:c.clearSortBy,columnId:lr.id})}),lr.getSortByToggleProps=C(Ut().getSortByToggleProps,{instance:Tt(),column:lr});var Qr=St.find(function(tr){return tr.id===Gr});lr.isSorted=!!Qr,lr.sortedIndex=St.findIndex(function(tr){return tr.id===Gr}),lr.isSortedDesc=lr.isSorted?Qr.desc:void 0});var hr=n.useMemo(function(){if(Je||!St.length)return[X,ie];var lr=[],dr=St.filter(function(Vr){return Ae.find(function(wr){return wr.id===Vr.id})});return[function Vr(wr){var Gr=Re(wr,dr.map(function(Pr){var Qr=Ae.find(function(wn){return wn.id===Pr.id});if(!Qr)throw new Error("React-Table: Could not find a column with id: "+Pr.id+" while sorting");var tr=Qr.sortType,Or=nt(tr)||(et||{})[tr]||Br[tr];if(!Or)throw new Error("React-Table: Could not find a valid sortType of '"+tr+"' for column '"+Pr.id+"'.");return function(wn,xn){return Or(wn,xn,Pr.id,Pr.desc)}}),dr.map(function(Pr){var Qr=Ae.find(function(tr){return tr.id===Pr.id});return Qr&&Qr.sortInverted?Pr.desc:!Pr.desc}));return Gr.forEach(function(Pr){lr.push(Pr),Pr.subRows&&Pr.subRows.length!==0&&(Pr.subRows=Vr(Pr.subRows))}),Gr}(X),lr]},[Je,St,X,ie,Ae,Re,et]),rt=hr[0],pr=hr[1],Fr=T(er);H(function(){Fr()&&at({type:c.resetSortBy})},[Je?null:q]),Object.assign(O,{preSortedRows:X,preSortedFlatRows:ie,sortedRows:rt,sortedFlatRows:pr,rows:rt,flatRows:pr,setSortBy:Rr,toggleSortBy:rr})}function Wr(O,q,X){return[].concat(O).sort(function(ie,Ae){for(var le=0;le<q.length;le+=1){var Re=q[le],et=X[le]===!1||X[le]==="desc",Je=Re(ie,Ae);if(Je!==0)return et?-Je:Je}return X[0]?ie.index-Ae.index:Ae.index-ie.index})}c.resetPage="resetPage",c.gotoPage="gotoPage",c.setPageSize="setPageSize";var Ir=function(O){O.stateReducers.push(Sn),O.useInstance.push(Gn)};function Sn(O,q,X,ie){if(q.type===c.init)return s({pageSize:10,pageIndex:0},O);if(q.type===c.resetPage)return s({},O,{pageIndex:ie.initialState.pageIndex||0});if(q.type===c.gotoPage){var Ae=ie.pageCount,le=ie.page,Re=b(q.pageIndex,O.pageIndex),et=!1;return Re>O.pageIndex?et=Ae===-1?le.length>=O.pageSize:Re<Ae:Re<O.pageIndex&&(et=Re>-1),et?s({},O,{pageIndex:Re}):O}if(q.type===c.setPageSize){var Je=q.pageSize,it=O.pageSize*O.pageIndex;return s({},O,{pageIndex:Math.floor(it/Je),pageSize:Je})}}function Gn(O){var q=O.rows,X=O.autoResetPage,ie=X===void 0||X,Ae=O.manualExpandedKey,le=Ae===void 0?"expanded":Ae,Re=O.plugins,et=O.pageCount,Je=O.paginateExpandedRows,it=Je===void 0||Je,_t=O.expandSubRows,mt=_t===void 0||_t,St=O.state,at=St.pageSize,Et=St.pageIndex,Ut=St.expanded,jt=St.globalFilter,er=St.filters,Rr=St.groupBy,rr=St.sortBy,Tt=O.dispatch,hr=O.data,rt=O.manualPagination;S(Re,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var pr=T(ie);H(function(){pr()&&Tt({type:c.resetPage})},[Tt,rt?null:hr,jt,er,Rr,rr]);var Fr=rt?et:Math.ceil(q.length/at),lr=n.useMemo(function(){return Fr>0?[].concat(new Array(Fr)).fill(null).map(function(Or,wn){return wn}):[]},[Fr]),dr=n.useMemo(function(){var Or;if(rt)Or=q;else{var wn=at*Et,xn=wn+at;Or=q.slice(wn,xn)}return it?Or:Be(Or,{manualExpandedKey:le,expanded:Ut,expandSubRows:mt})},[mt,Ut,le,rt,Et,at,it,q]),Vr=Et>0,wr=Fr===-1?dr.length>=at:Et<Fr-1,Gr=n.useCallback(function(Or){Tt({type:c.gotoPage,pageIndex:Or})},[Tt]),Pr=n.useCallback(function(){return Gr(function(Or){return Or-1})},[Gr]),Qr=n.useCallback(function(){return Gr(function(Or){return Or+1})},[Gr]),tr=n.useCallback(function(Or){Tt({type:c.setPageSize,pageSize:Or})},[Tt]);Object.assign(O,{pageOptions:lr,pageCount:Fr,page:dr,canPreviousPage:Vr,canNextPage:wr,gotoPage:Gr,previousPage:Pr,nextPage:Qr,setPageSize:tr})}Ir.pluginName="usePagination",c.resetPivot="resetPivot",c.togglePivot="togglePivot";var qn=function(O){O.getPivotToggleProps=[rn],O.stateReducers.push(h),O.useInstanceAfterData.push(y),O.allColumns.push(w),O.accessValue.push(A),O.materializedColumns.push(U),O.materializedColumnsDeps.push(W),O.visibleColumns.push(Q),O.visibleColumnsDeps.push(ue),O.useInstance.push(oe),O.prepareRow.push(ce)};qn.pluginName="usePivotColumns";var tn=[],rn=function(O,q){var X=q.header;return[O,{onClick:X.canPivot?function(ie){ie.persist(),X.togglePivot()}:void 0,style:{cursor:X.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function h(O,q,X,ie){if(q.type===c.init)return s({pivotColumns:tn},O);if(q.type===c.resetPivot)return s({},O,{pivotColumns:ie.initialState.pivotColumns||tn});if(q.type===c.togglePivot){var Ae=q.columnId,le=q.value,Re=le!==void 0?le:!O.pivotColumns.includes(Ae);return s({},O,Re?{pivotColumns:[].concat(O.pivotColumns,[Ae])}:{pivotColumns:O.pivotColumns.filter(function(et){return et!==Ae})})}}function y(O){O.allColumns.forEach(function(q){q.isPivotSource=O.state.pivotColumns.includes(q.id)})}function w(O,q){var X=q.instance;return O.forEach(function(ie){ie.isPivotSource=X.state.pivotColumns.includes(ie.id),ie.uniqueValues=new Set}),O}function A(O,q){var X=q.column;return X.uniqueValues&&O!==void 0&&X.uniqueValues.add(O),O}function U(O,q){var X=q.instance,ie=X.allColumns,Ae=X.state;if(!Ae.pivotColumns.length||!Ae.groupBy||!Ae.groupBy.length)return O;var le=Ae.pivotColumns.map(function(Je){return ie.find(function(it){return it.id===Je})}).filter(Boolean),Re=ie.filter(function(Je){return!Je.isPivotSource&&!Ae.groupBy.includes(Je.id)&&!Ae.pivotColumns.includes(Je.id)}),et=Y(function Je(it,_t,mt){it===void 0&&(it=0),mt===void 0&&(mt=[]);var St=le[it];return St?Array.from(St.uniqueValues).sort().map(function(at){var Et=s({},St,{Header:St.PivotHeader||typeof St.header=="string"?St.Header+": "+at:at,isPivotGroup:!0,parent:_t,depth:it,id:_t?_t.id+"."+St.id+"."+at:St.id+"."+at,pivotValue:at});return Et.columns=Je(it+1,Et,[].concat(mt,[function(Ut){return Ut.values[St.id]===at}])),Et}):Re.map(function(at){return s({},at,{canPivot:!1,isPivoted:!0,parent:_t,depth:it,id:""+(_t?_t.id+"."+at.id:at.id),accessor:function(Et,Ut,jt){if(mt.every(function(er){return er(jt)}))return jt.values[at.id]}})})}());return[].concat(O,et)}function W(O,q){var X=q.instance.state,ie=X.pivotColumns,Ae=X.groupBy;return[].concat(O,[ie,Ae])}function Q(O,q){var X=q.instance.state;return O=O.filter(function(ie){return!ie.isPivotSource}),X.pivotColumns.length&&X.groupBy&&X.groupBy.length&&(O=O.filter(function(ie){return ie.isGrouped||ie.isPivoted})),O}function ue(O,q){var X=q.instance;return[].concat(O,[X.state.pivotColumns,X.state.groupBy])}function oe(O){var q=O.columns,X=O.allColumns,ie=O.flatHeaders,Ae=O.getHooks,le=O.plugins,Re=O.dispatch,et=O.autoResetPivot,Je=et===void 0||et,it=O.manaulPivot,_t=O.disablePivot,mt=O.defaultCanPivot;S(le,["useGroupBy"],"usePivotColumns");var St=T(O);X.forEach(function(Et){var Ut=Et.accessor,jt=Et.defaultPivot,er=Et.disablePivot;Et.canPivot=Ut?je(Et.canPivot,er!==!0&&void 0,_t!==!0&&void 0,!0):je(Et.canPivot,jt,mt,!1),Et.canPivot&&(Et.togglePivot=function(){return O.togglePivot(Et.id)}),Et.Aggregated=Et.Aggregated||Et.Cell}),ie.forEach(function(Et){Et.getPivotToggleProps=C(Ae().getPivotToggleProps,{instance:St(),header:Et})});var at=T(Je);H(function(){at()&&Re({type:c.resetPivot})},[Re,it?null:q]),Object.assign(O,{togglePivot:function(Et,Ut){Re({type:c.togglePivot,columnId:Et,value:Ut})}})}function ce(O){O.allCells.forEach(function(q){q.isPivoted=q.column.isPivoted})}c.resetSelectedRows="resetSelectedRows",c.toggleAllRowsSelected="toggleAllRowsSelected",c.toggleRowSelected="toggleRowSelected",c.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var he=function(O){O.getToggleRowSelectedProps=[ye],O.getToggleAllRowsSelectedProps=[be],O.getToggleAllPageRowsSelectedProps=[Pe],O.stateReducers.push(He),O.useInstance.push(ze),O.prepareRow.push(Qe)};he.pluginName="useRowSelect";var ye=function(O,q){var X=q.instance,ie=q.row,Ae=X.manualRowSelectedKey,le=Ae===void 0?"isSelected":Ae;return[O,{onChange:function(Re){ie.toggleRowSelected(Re.target.checked)},style:{cursor:"pointer"},checked:!(!ie.original||!ie.original[le])||ie.isSelected,title:"Toggle Row Selected",indeterminate:ie.isSomeSelected}]},be=function(O,q){var X=q.instance;return[O,{onChange:function(ie){X.toggleAllRowsSelected(ie.target.checked)},style:{cursor:"pointer"},checked:X.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!X.isAllRowsSelected&&Object.keys(X.state.selectedRowIds).length)}]},Pe=function(O,q){var X=q.instance;return[O,{onChange:function(ie){X.toggleAllPageRowsSelected(ie.target.checked)},style:{cursor:"pointer"},checked:X.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!X.isAllPageRowsSelected&&X.page.some(function(ie){var Ae=ie.id;return X.state.selectedRowIds[Ae]}))}]};function He(O,q,X,ie){if(q.type===c.init)return s({selectedRowIds:{}},O);if(q.type===c.resetSelectedRows)return s({},O,{selectedRowIds:ie.initialState.selectedRowIds||{}});if(q.type===c.toggleAllRowsSelected){var Ae=q.value,le=ie.isAllRowsSelected,Re=ie.rowsById,et=ie.nonGroupedRowsById,Je=et===void 0?Re:et,it=Ae!==void 0?Ae:!le,_t=Object.assign({},O.selectedRowIds);return it?Object.keys(Je).forEach(function(Gr){_t[Gr]=!0}):Object.keys(Je).forEach(function(Gr){delete _t[Gr]}),s({},O,{selectedRowIds:_t})}if(q.type===c.toggleRowSelected){var mt=q.id,St=q.value,at=ie.rowsById,Et=ie.selectSubRows,Ut=Et===void 0||Et,jt=ie.getSubRows,er=O.selectedRowIds[mt],Rr=St!==void 0?St:!er;if(er===Rr)return O;var rr=s({},O.selectedRowIds);return function Gr(Pr){var Qr=at[Pr];if(Qr&&(Qr.isGrouped||(Rr?rr[Pr]=!0:delete rr[Pr]),Ut&&jt(Qr)))return jt(Qr).forEach(function(tr){return Gr(tr.id)})}(mt),s({},O,{selectedRowIds:rr})}if(q.type===c.toggleAllPageRowsSelected){var Tt=q.value,hr=ie.page,rt=ie.rowsById,pr=ie.selectSubRows,Fr=pr===void 0||pr,lr=ie.isAllPageRowsSelected,dr=ie.getSubRows,Vr=Tt!==void 0?Tt:!lr,wr=s({},O.selectedRowIds);return hr.forEach(function(Gr){return function Pr(Qr){var tr=rt[Qr];if(tr.isGrouped||(Vr?wr[Qr]=!0:delete wr[Qr]),Fr&&dr(tr))return dr(tr).forEach(function(Or){return Pr(Or.id)})}(Gr.id)}),s({},O,{selectedRowIds:wr})}return O}function ze(O){var q=O.data,X=O.rows,ie=O.getHooks,Ae=O.plugins,le=O.rowsById,Re=O.nonGroupedRowsById,et=Re===void 0?le:Re,Je=O.autoResetSelectedRows,it=Je===void 0||Je,_t=O.state.selectedRowIds,mt=O.selectSubRows,St=mt===void 0||mt,at=O.dispatch,Et=O.page,Ut=O.getSubRows;S(Ae,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var jt=n.useMemo(function(){var dr=[];return X.forEach(function(Vr){var wr=St?function Gr(Pr,Qr,tr){if(Qr[Pr.id])return!0;var Or=tr(Pr);if(Or&&Or.length){var wn=!0,xn=!1;return Or.forEach(function(Dt){xn&&!wn||(Gr(Dt,Qr,tr)?xn=!0:wn=!1)}),!!wn||!!xn&&null}return!1}(Vr,_t,Ut):!!_t[Vr.id];Vr.isSelected=!!wr,Vr.isSomeSelected=wr===null,wr&&dr.push(Vr)}),dr},[X,St,_t,Ut]),er=!!(Object.keys(et).length&&Object.keys(_t).length),Rr=er;er&&Object.keys(et).some(function(dr){return!_t[dr]})&&(er=!1),er||Et&&Et.length&&Et.some(function(dr){var Vr=dr.id;return!_t[Vr]})&&(Rr=!1);var rr=T(it);H(function(){rr()&&at({type:c.resetSelectedRows})},[at,q]);var Tt=n.useCallback(function(dr){return at({type:c.toggleAllRowsSelected,value:dr})},[at]),hr=n.useCallback(function(dr){return at({type:c.toggleAllPageRowsSelected,value:dr})},[at]),rt=n.useCallback(function(dr,Vr){return at({type:c.toggleRowSelected,id:dr,value:Vr})},[at]),pr=T(O),Fr=C(ie().getToggleAllRowsSelectedProps,{instance:pr()}),lr=C(ie().getToggleAllPageRowsSelectedProps,{instance:pr()});Object.assign(O,{selectedFlatRows:jt,isAllRowsSelected:er,isAllPageRowsSelected:Rr,toggleRowSelected:rt,toggleAllRowsSelected:Tt,getToggleAllRowsSelectedProps:Fr,getToggleAllPageRowsSelectedProps:lr,toggleAllPageRowsSelected:hr})}function Qe(O,q){var X=q.instance;O.toggleRowSelected=function(ie){return X.toggleRowSelected(O.id,ie)},O.getToggleRowSelectedProps=C(X.getHooks().getToggleRowSelectedProps,{instance:X,row:O})}var te=function(O){return{}},pe=function(O){return{}};c.setRowState="setRowState",c.setCellState="setCellState",c.resetRowState="resetRowState";var ve=function(O){O.stateReducers.push(Ee),O.useInstance.push(We),O.prepareRow.push(Ye)};function Ee(O,q,X,ie){var Ae=ie.initialRowStateAccessor,le=Ae===void 0?te:Ae,Re=ie.initialCellStateAccessor,et=Re===void 0?pe:Re,Je=ie.rowsById;if(q.type===c.init)return s({rowState:{}},O);if(q.type===c.resetRowState)return s({},O,{rowState:ie.initialState.rowState||{}});if(q.type===c.setRowState){var it,_t=q.rowId,mt=q.value,St=O.rowState[_t]!==void 0?O.rowState[_t]:le(Je[_t]);return s({},O,{rowState:s({},O.rowState,(it={},it[_t]=b(mt,St),it))})}if(q.type===c.setCellState){var at,Et,Ut,jt,er,Rr=q.rowId,rr=q.columnId,Tt=q.value,hr=O.rowState[Rr]!==void 0?O.rowState[Rr]:le(Je[Rr]),rt=(hr==null||(at=hr.cellState)==null?void 0:at[rr])!==void 0?hr.cellState[rr]:et((Et=Je[Rr])==null||(Ut=Et.cells)==null?void 0:Ut.find(function(pr){return pr.column.id===rr}));return s({},O,{rowState:s({},O.rowState,(er={},er[Rr]=s({},hr,{cellState:s({},hr.cellState||{},(jt={},jt[rr]=b(Tt,rt),jt))}),er))})}}function We(O){var q=O.autoResetRowState,X=q===void 0||q,ie=O.data,Ae=O.dispatch,le=n.useCallback(function(Je,it){return Ae({type:c.setRowState,rowId:Je,value:it})},[Ae]),Re=n.useCallback(function(Je,it,_t){return Ae({type:c.setCellState,rowId:Je,columnId:it,value:_t})},[Ae]),et=T(X);H(function(){et()&&Ae({type:c.resetRowState})},[ie]),Object.assign(O,{setRowState:le,setCellState:Re})}function Ye(O,q){var X=q.instance,ie=X.initialRowStateAccessor,Ae=ie===void 0?te:ie,le=X.initialCellStateAccessor,Re=le===void 0?pe:le,et=X.state.rowState;O&&(O.state=et[O.id]!==void 0?et[O.id]:Ae(O),O.setState=function(Je){return X.setRowState(O.id,Je)},O.cells.forEach(function(Je){O.state.cellState||(O.state.cellState={}),Je.state=O.state.cellState[Je.column.id]!==void 0?O.state.cellState[Je.column.id]:Re(Je),Je.setState=function(it){return X.setCellState(O.id,Je.column.id,it)}}))}ve.pluginName="useRowState",c.resetColumnOrder="resetColumnOrder",c.setColumnOrder="setColumnOrder";var Vt=function(O){O.stateReducers.push(pt),O.visibleColumnsDeps.push(function(q,X){var ie=X.instance;return[].concat(q,[ie.state.columnOrder])}),O.visibleColumns.push(Tr),O.useInstance.push(kt)};function pt(O,q,X,ie){return q.type===c.init?s({columnOrder:[]},O):q.type===c.resetColumnOrder?s({},O,{columnOrder:ie.initialState.columnOrder||[]}):q.type===c.setColumnOrder?s({},O,{columnOrder:b(q.columnOrder,O.columnOrder)}):void 0}function Tr(O,q){var X=q.instance.state.columnOrder;if(!X||!X.length)return O;for(var ie=[].concat(X),Ae=[].concat(O),le=[],Re=function(){var et=ie.shift(),Je=Ae.findIndex(function(it){return it.id===et});Je>-1&&le.push(Ae.splice(Je,1)[0])};Ae.length&&ie.length;)Re();return[].concat(le,Ae)}function kt(O){var q=O.dispatch;O.setColumnOrder=n.useCallback(function(X){return q({type:c.setColumnOrder,columnOrder:X})},[q])}Vt.pluginName="useColumnOrder",m.canResize=!0,c.columnStartResizing="columnStartResizing",c.columnResizing="columnResizing",c.columnDoneResizing="columnDoneResizing",c.resetResize="resetResize";var Jt=function(O){O.getResizerProps=[qt],O.getHeaderProps.push({style:{position:"relative"}}),O.stateReducers.push(Ur),O.useInstance.push(pn),O.useInstanceBeforeDimensions.push(_r)},qt=function(O,q){var X=q.instance,ie=q.header,Ae=X.dispatch,le=function(Re,et){var Je=!1;if(Re.type==="touchstart"){if(Re.touches&&Re.touches.length>1)return;Je=!0}var it,_t,mt=function(rr){var Tt=[];return function hr(rt){rt.columns&&rt.columns.length&&rt.columns.map(hr),Tt.push(rt)}(rr),Tt}(et).map(function(rr){return[rr.id,rr.totalWidth]}),St=Je?Math.round(Re.touches[0].clientX):Re.clientX,at=function(){window.cancelAnimationFrame(it),it=null,Ae({type:c.columnDoneResizing})},Et=function(){window.cancelAnimationFrame(it),it=null,Ae({type:c.columnResizing,clientX:_t})},Ut=function(rr){_t=rr,it||(it=window.requestAnimationFrame(Et))},jt={mouse:{moveEvent:"mousemove",moveHandler:function(rr){return Ut(rr.clientX)},upEvent:"mouseup",upHandler:function(rr){document.removeEventListener("mousemove",jt.mouse.moveHandler),document.removeEventListener("mouseup",jt.mouse.upHandler),at()}},touch:{moveEvent:"touchmove",moveHandler:function(rr){return rr.cancelable&&(rr.preventDefault(),rr.stopPropagation()),Ut(rr.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(rr){document.removeEventListener(jt.touch.moveEvent,jt.touch.moveHandler),document.removeEventListener(jt.touch.upEvent,jt.touch.moveHandler),at()}}},er=Je?jt.touch:jt.mouse,Rr=!!function(){if(typeof Ie=="boolean")return Ie;var rr=!1;try{var Tt={get passive(){return rr=!0,!1}};window.addEventListener("test",null,Tt),window.removeEventListener("test",null,Tt)}catch{rr=!1}return Ie=rr}()&&{passive:!1};document.addEventListener(er.moveEvent,er.moveHandler,Rr),document.addEventListener(er.upEvent,er.upHandler,Rr),Ae({type:c.columnStartResizing,columnId:et.id,columnWidth:et.totalWidth,headerIdWidths:mt,clientX:St})};return[O,{onMouseDown:function(Re){return Re.persist()||le(Re,ie)},onTouchStart:function(Re){return Re.persist()||le(Re,ie)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Ur(O,q){if(q.type===c.init)return s({columnResizing:{columnWidths:{}}},O);if(q.type===c.resetResize)return s({},O,{columnResizing:{columnWidths:{}}});if(q.type===c.columnStartResizing){var X=q.clientX,ie=q.columnId,Ae=q.columnWidth,le=q.headerIdWidths;return s({},O,{columnResizing:s({},O.columnResizing,{startX:X,headerIdWidths:le,columnWidth:Ae,isResizingColumn:ie})})}if(q.type===c.columnResizing){var Re=q.clientX,et=O.columnResizing,Je=et.startX,it=et.columnWidth,_t=et.headerIdWidths,mt=(Re-Je)/it,St={};return(_t===void 0?[]:_t).forEach(function(at){var Et=at[0],Ut=at[1];St[Et]=Math.max(Ut+Ut*mt,0)}),s({},O,{columnResizing:s({},O.columnResizing,{columnWidths:s({},O.columnResizing.columnWidths,{},St)})})}return q.type===c.columnDoneResizing?s({},O,{columnResizing:s({},O.columnResizing,{startX:null,isResizingColumn:null})}):void 0}Jt.pluginName="useResizeColumns";var _r=function(O){var q=O.flatHeaders,X=O.disableResizing,ie=O.getHooks,Ae=O.state.columnResizing,le=T(O);q.forEach(function(Re){var et=je(Re.disableResizing!==!0&&void 0,X!==!0&&void 0,!0);Re.canResize=et,Re.width=Ae.columnWidths[Re.id]||Re.originalWidth||Re.width,Re.isResizing=Ae.isResizingColumn===Re.id,et&&(Re.getResizerProps=C(ie().getResizerProps,{instance:le(),header:Re}))})};function pn(O){var q=O.plugins,X=O.dispatch,ie=O.autoResetResize,Ae=ie===void 0||ie,le=O.columns;S(q,["useAbsoluteLayout"],"useResizeColumns");var Re=T(Ae);H(function(){Re()&&X({type:c.resetResize})},[le]);var et=n.useCallback(function(){return X({type:c.resetResize})},[X]);Object.assign(O,{resetResizing:et})}var kr={position:"absolute",top:0},mn=function(O){O.getTableBodyProps.push($r),O.getRowProps.push($r),O.getHeaderGroupProps.push($r),O.getFooterGroupProps.push($r),O.getHeaderProps.push(function(q,X){var ie=X.column;return[q,{style:s({},kr,{left:ie.totalLeft+"px",width:ie.totalWidth+"px"})}]}),O.getCellProps.push(function(q,X){var ie=X.cell;return[q,{style:s({},kr,{left:ie.column.totalLeft+"px",width:ie.column.totalWidth+"px"})}]}),O.getFooterProps.push(function(q,X){var ie=X.column;return[q,{style:s({},kr,{left:ie.totalLeft+"px",width:ie.totalWidth+"px"})}]})};mn.pluginName="useAbsoluteLayout";var $r=function(O,q){return[O,{style:{position:"relative",width:q.instance.totalColumnsWidth+"px"}}]},ar={display:"inline-block",boxSizing:"border-box"},Rn=function(O,q){return[O,{style:{display:"flex",width:q.instance.totalColumnsWidth+"px"}}]},vn=function(O){O.getRowProps.push(Rn),O.getHeaderGroupProps.push(Rn),O.getFooterGroupProps.push(Rn),O.getHeaderProps.push(function(q,X){var ie=X.column;return[q,{style:s({},ar,{width:ie.totalWidth+"px"})}]}),O.getCellProps.push(function(q,X){var ie=X.cell;return[q,{style:s({},ar,{width:ie.column.totalWidth+"px"})}]}),O.getFooterProps.push(function(q,X){var ie=X.column;return[q,{style:s({},ar,{width:ie.totalWidth+"px"})}]})};function mo(O){O.getTableProps.push(an),O.getRowProps.push(Hi),O.getHeaderGroupProps.push(Hi),O.getFooterGroupProps.push(Hi),O.getHeaderProps.push(vo),O.getCellProps.push(Gs),O.getFooterProps.push(Ti)}vn.pluginName="useBlockLayout",mo.pluginName="useFlexLayout";var an=function(O,q){return[O,{style:{minWidth:q.instance.totalColumnsMinWidth+"px"}}]},Hi=function(O,q){return[O,{style:{display:"flex",flex:"1 0 auto",minWidth:q.instance.totalColumnsMinWidth+"px"}}]},vo=function(O,q){var X=q.column;return[O,{style:{boxSizing:"border-box",flex:X.totalFlexWidth?X.totalFlexWidth+" 0 auto":void 0,minWidth:X.totalMinWidth+"px",width:X.totalWidth+"px"}}]},Gs=function(O,q){var X=q.cell;return[O,{style:{boxSizing:"border-box",flex:X.column.totalFlexWidth+" 0 auto",minWidth:X.column.totalMinWidth+"px",width:X.column.totalWidth+"px"}}]},Ti=function(O,q){var X=q.column;return[O,{style:{boxSizing:"border-box",flex:X.totalFlexWidth?X.totalFlexWidth+" 0 auto":void 0,minWidth:X.totalMinWidth+"px",width:X.totalWidth+"px"}}]};function Mn(O){O.stateReducers.push(cs),O.getTableProps.push(oi),O.getHeaderProps.push(Dn),O.getRowProps.push(Vo)}c.columnStartResizing="columnStartResizing",c.columnResizing="columnResizing",c.columnDoneResizing="columnDoneResizing",c.resetResize="resetResize",Mn.pluginName="useGridLayout";var oi=function(O,q){var X=q.instance;return[O,{style:{display:"grid",gridTemplateColumns:X.visibleColumns.map(function(ie){var Ae;return X.state.gridLayout.columnWidths[ie.id]?X.state.gridLayout.columnWidths[ie.id]+"px":(Ae=X.state.columnResizing)!=null&&Ae.isResizingColumn?X.state.gridLayout.startWidths[ie.id]+"px":typeof ie.width=="number"?ie.width+"px":ie.width}).join(" ")}}]},Dn=function(O,q){var X=q.column;return[O,{id:"header-cell-"+X.id,style:{position:"sticky",gridColumn:"span "+X.totalVisibleHeaderCount}}]},Vo=function(O,q){var X=q.row;return X.isExpanded?[O,{style:{gridColumn:"1 / "+(X.cells.length+1)}}]:[O,{}]};function cs(O,q,X,ie){if(q.type===c.init)return s({gridLayout:{columnWidths:{}}},O);if(q.type===c.resetResize)return s({},O,{gridLayout:{columnWidths:{}}});if(q.type===c.columnStartResizing){var Ae=q.columnId,le=q.headerIdWidths,Re=ji(Ae);if(Re!==void 0){var et=ie.visibleColumns.reduce(function(Tt,hr){var rt;return s({},Tt,((rt={})[hr.id]=ji(hr.id),rt))},{}),Je=ie.visibleColumns.reduce(function(Tt,hr){var rt;return s({},Tt,((rt={})[hr.id]=hr.minWidth,rt))},{}),it=ie.visibleColumns.reduce(function(Tt,hr){var rt;return s({},Tt,((rt={})[hr.id]=hr.maxWidth,rt))},{}),_t=le.map(function(Tt){var hr=Tt[0];return[hr,ji(hr)]});return s({},O,{gridLayout:s({},O.gridLayout,{startWidths:et,minWidths:Je,maxWidths:it,headerIdGridWidths:_t,columnWidth:Re})})}return O}if(q.type===c.columnResizing){var mt=q.clientX,St=O.columnResizing.startX,at=O.gridLayout,Et=at.columnWidth,Ut=at.minWidths,jt=at.maxWidths,er=at.headerIdGridWidths,Rr=(mt-St)/Et,rr={};return(er===void 0?[]:er).forEach(function(Tt){var hr=Tt[0],rt=Tt[1];rr[hr]=Math.min(Math.max(Ut[hr],rt+rt*Rr),jt[hr])}),s({},O,{gridLayout:s({},O.gridLayout,{columnWidths:s({},O.gridLayout.columnWidths,{},rr)})})}return q.type===c.columnDoneResizing?s({},O,{gridLayout:s({},O.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function ji(O){var q,X=(q=document.getElementById("header-cell-"+O))==null?void 0:q.offsetWidth;if(X!==void 0)return X}r._UNSTABLE_usePivotColumns=qn,r.actions=c,r.defaultColumn=m,r.defaultGroupByFn=nr,r.defaultOrderByFn=Wr,r.defaultRenderer=g,r.emptyRenderer=p,r.ensurePluginOrder=S,r.flexRender=F,r.functionalUpdate=b,r.loopHooks=I,r.makePropGetter=C,r.makeRenderer=$,r.reduceHooks=R,r.safeUseLayoutEffect=B,r.useAbsoluteLayout=mn,r.useAsyncDebounce=function(O,q){q===void 0&&(q=0);var X=n.useRef({}),ie=T(O),Ae=T(q);return n.useCallback(function(){var le=a(regeneratorRuntime.mark(function Re(){var et,Je,it,_t=arguments;return regeneratorRuntime.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:for(et=_t.length,Je=new Array(et),it=0;it<et;it++)Je[it]=_t[it];return X.current.promise||(X.current.promise=new Promise(function(St,at){X.current.resolve=St,X.current.reject=at})),X.current.timeout&&clearTimeout(X.current.timeout),X.current.timeout=setTimeout(a(regeneratorRuntime.mark(function St(){return regeneratorRuntime.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return delete X.current.timeout,at.prev=1,at.t0=X.current,at.next=5,ie().apply(void 0,Je);case 5:at.t1=at.sent,at.t0.resolve.call(at.t0,at.t1),at.next=12;break;case 9:at.prev=9,at.t2=at.catch(1),X.current.reject(at.t2);case 12:return at.prev=12,delete X.current.promise,at.finish(12);case 15:case"end":return at.stop()}},St,null,[[1,9,12,15]])})),Ae()),mt.abrupt("return",X.current.promise);case 5:case"end":return mt.stop()}},Re)}));return function(){return le.apply(this,arguments)}}(),[ie,Ae])},r.useBlockLayout=vn,r.useColumnOrder=Vt,r.useExpanded=P,r.useFilters=ot,r.useFlexLayout=mo,r.useGetLatest=T,r.useGlobalFilter=Qt,r.useGridLayout=Mn,r.useGroupBy=wt,r.useMountedLayoutEffect=H,r.usePagination=Ir,r.useResizeColumns=Jt,r.useRowSelect=he,r.useRowState=ve,r.useSortBy=vr,r.useTable=function(O){for(var q=arguments.length,X=new Array(q>1?q-1:0),ie=1;ie<q;ie++)X[ie-1]=arguments[ie];O=ee(O),X=[E].concat(X);var Ae=n.useRef({}),le=T(Ae.current);Object.assign(le(),s({},O,{plugins:X,hooks:N()})),X.filter(Boolean).forEach(function(Dt){Dt(le().hooks)});var Re=T(le().hooks);le().getHooks=Re,delete le().hooks,Object.assign(le(),R(Re().useOptions,ee(O)));var et=le(),Je=et.data,it=et.columns,_t=et.initialState,mt=et.defaultColumn,St=et.getSubRows,at=et.getRowId,Et=et.stateReducer,Ut=et.useControlledState,jt=T(Et),er=n.useCallback(function(Dt,ln){if(!ln.type)throw console.info({action:ln}),new Error("Unknown Action ");return[].concat(Re().stateReducers,Array.isArray(jt())?jt():[jt()]).reduce(function(gr,ei){return ei(gr,ln,Dt,le())||gr},Dt)},[Re,jt,le]),Rr=n.useReducer(er,void 0,function(){return er(_t,{type:c.init})}),rr=Rr[0],Tt=Rr[1],hr=R([].concat(Re().useControlledState,[Ut]),rr,{instance:le()});Object.assign(le(),{state:hr,dispatch:Tt});var rt=n.useMemo(function(){return ne(R(Re().columns,it,{instance:le()}))},[Re,le,it].concat(R(Re().columnsDeps,[],{instance:le()})));le().columns=rt;var pr=n.useMemo(function(){return R(Re().allColumns,Y(rt),{instance:le()}).map(M)},[rt,Re,le].concat(R(Re().allColumnsDeps,[],{instance:le()})));le().allColumns=pr;var Fr=n.useMemo(function(){for(var Dt=[],ln=[],gr={},ei=[].concat(pr);ei.length;){var Bn=ei.shift();K({data:Je,rows:Dt,flatRows:ln,rowsById:gr,column:Bn,getRowId:at,getSubRows:St,accessValueHooks:Re().accessValue,getInstance:le})}return[Dt,ln,gr]},[pr,Je,at,St,Re,le]),lr=Fr[0],dr=Fr[1],Vr=Fr[2];Object.assign(le(),{rows:lr,initialRows:[].concat(lr),flatRows:dr,rowsById:Vr}),I(Re().useInstanceAfterData,le());var wr=n.useMemo(function(){return R(Re().visibleColumns,pr,{instance:le()}).map(function(Dt){return J(Dt,mt)})},[Re,pr,le,mt].concat(R(Re().visibleColumnsDeps,[],{instance:le()})));pr=n.useMemo(function(){var Dt=[].concat(wr);return pr.forEach(function(ln){Dt.find(function(gr){return gr.id===ln.id})||Dt.push(ln)}),Dt},[pr,wr]),le().allColumns=pr;var Gr=n.useMemo(function(){return R(Re().headerGroups,Le(wr,mt),le())},[Re,wr,mt,le].concat(R(Re().headerGroupsDeps,[],{instance:le()})));le().headerGroups=Gr;var Pr=n.useMemo(function(){return Gr.length?Gr[0].headers:[]},[Gr]);le().headers=Pr,le().flatHeaders=Gr.reduce(function(Dt,ln){return[].concat(Dt,ln.headers)},[]),I(Re().useInstanceBeforeDimensions,le());var Qr=wr.filter(function(Dt){return Dt.isVisible}).map(function(Dt){return Dt.id}).sort().join("_");wr=n.useMemo(function(){return wr.filter(function(Dt){return Dt.isVisible})},[wr,Qr]),le().visibleColumns=wr;var tr=de(Pr),Or=tr[0],wn=tr[1],xn=tr[2];return le().totalColumnsMinWidth=Or,le().totalColumnsWidth=wn,le().totalColumnsMaxWidth=xn,I(Re().useInstance,le()),[].concat(le().flatHeaders,le().allColumns).forEach(function(Dt){Dt.render=$(le(),Dt),Dt.getHeaderProps=C(Re().getHeaderProps,{instance:le(),column:Dt}),Dt.getFooterProps=C(Re().getFooterProps,{instance:le(),column:Dt})}),le().headerGroups=n.useMemo(function(){return Gr.filter(function(Dt,ln){return Dt.headers=Dt.headers.filter(function(gr){return gr.headers?function ei(Bn){return Bn.filter(function(wo){return wo.headers?ei(wo.headers):wo.isVisible}).length}(gr.headers):gr.isVisible}),!!Dt.headers.length&&(Dt.getHeaderGroupProps=C(Re().getHeaderGroupProps,{instance:le(),headerGroup:Dt,index:ln}),Dt.getFooterGroupProps=C(Re().getFooterGroupProps,{instance:le(),headerGroup:Dt,index:ln}),!0)})},[Gr,le,Re]),le().footerGroups=[].concat(le().headerGroups).reverse(),le().prepareRow=n.useCallback(function(Dt){Dt.getRowProps=C(Re().getRowProps,{instance:le(),row:Dt}),Dt.allCells=pr.map(function(ln){var gr=Dt.values[ln.id],ei={column:ln,row:Dt,value:gr};return ei.getCellProps=C(Re().getCellProps,{instance:le(),cell:ei}),ei.render=$(le(),ln,{row:Dt,cell:ei,value:gr}),ei}),Dt.cells=wr.map(function(ln){return Dt.allCells.find(function(gr){return gr.column.id===ln.id})}),I(Re().prepareRow,Dt,{instance:le()})},[Re,le,pr,wr]),le().getTableProps=C(Re().getTableProps,{instance:le()}),le().getTableBodyProps=C(Re().getTableBodyProps,{instance:le()}),I(Re().useFinalInstance,le()),le()},Object.defineProperty(r,"__esModule",{value:!0})})}(ch,ch.exports)),ch.exports}var zA;function LU(){return zA||(zA=1,O0.exports=DU()),O0.exports}(function(e,t){(function(n,o){e.exports=o(un,RT(),NU(),kU(),LU())})(cn,(r,n,o,a,s)=>(()=>{var u={577:p=>{p.exports=n},606:p=>{p.exports=o},156:p=>{p.exports=r},767:p=>{p.exports=s},928:p=>{p.exports=a}},f={};function c(p){var m=f[p];if(m!==void 0)return m.exports;var _=f[p]={exports:{}};return u[p](_,_.exports,c),_.exports}c.n=p=>{var m=p&&p.__esModule?()=>p.default:()=>p;return c.d(m,{a:m}),m},c.d=(p,m)=>{for(var _ in m)c.o(m,_)&&!c.o(p,_)&&Object.defineProperty(p,_,{enumerable:!0,get:m[_]})},c.o=(p,m)=>Object.prototype.hasOwnProperty.call(p,m),c.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var g={};return(()=>{c.r(g),c.d(g,{CombinedDataProvider:()=>P,DatasetContext:()=>$,DatasetProvider:()=>F,FileUpload:()=>S,Image:()=>Ie,Link:()=>$t,LoginButton:()=>Lr,LogoutButton:()=>ee,SessionContext:()=>R,SessionProvider:()=>I,Table:()=>ge,TableColumn:()=>k,Text:()=>ae,ThingContext:()=>Y,ThingProvider:()=>M,Value:()=>ft,Video:()=>Wt,useDataset:()=>B,useFile:()=>tt,useSession:()=>Rt,useThing:()=>xt});var p=c(156),m=c.n(p),_=c(577),C=c(606);const R=(0,p.createContext)({login:C.login,logout:C.logout,fetch:C.fetch,session:(0,C.getDefaultSession)(),sessionRequestInProgress:!0,profile:void 0}),I=({sessionId:Se,children:Ve,onError:Oe,sessionRequestInProgress:_e,restorePreviousSession:Ke,skipLoadingProfile:ht,onSessionRestore:ut})=>{const ot=Ke||typeof ut<"u",[yt,Ht]=(0,p.useState)((0,C.getDefaultSession)()),[Qt,zt]=(0,p.useState)();(0,p.useEffect)(()=>{ut!==void 0&&(0,C.onSessionRestore)(ut)},[ut]);const Yt=typeof _e>"u"?!yt.info.isLoggedIn:_e,[fr,Zt]=(0,p.useState)(Yt);let Ot;typeof window<"u"&&(Ot=window.location),(0,p.useEffect)(()=>{(0,C.handleIncomingRedirect)({url:window.location.href,restorePreviousSession:ot}).then(async It=>{if(ht!==!0&&(It==null?void 0:It.webId)!==void 0){const Gt=await(0,_.getProfileAll)(It==null?void 0:It.webId,{fetch:yt.fetch});zt(Gt)}}).catch(It=>{if(Oe)Oe(It);else throw It}).finally(()=>{Zt(!1)}),(0,C.getDefaultSession)().on("logout",()=>{Ht((0,C.getDefaultSession)())})},[yt,Se,Oe,Ot,ot,ht]);const mr=async It=>{Zt(!0);try{await(0,C.login)(It)}catch(Gt){if(Oe)Oe(Gt);else throw Gt}finally{Zt(!1)}},wt=async()=>{try{await(0,C.logout)(),zt(void 0)}catch(It){if(Oe)Oe(It);else throw It}};return m().createElement(R.Provider,{value:{session:yt,login:mr,logout:wt,sessionRequestInProgress:fr,setSessionRequestInProgress:Zt,fetch:C.fetch,profile:Qt}},Ve)};function S({saveLocation:Se,onError:Ve,onSave:Oe,inputProps:_e,autosave:Ke}){const{fetch:ht}=(0,p.useContext)(R),ut=async ot=>{const yt=ot.target;if(yt.files&&Ke)try{const Ht=await(0,_.saveFileInContainer)(Se,yt.files[0],{slug:yt.files[0].name?yt.files[0].name:void 0,fetch:ht});Oe&&Oe(Ht)}catch(Ht){Ve&&Ve(Ht)}};return m().createElement(m().Fragment,null,m().createElement("input",Object.assign({type:"file"},_e,{onChange:ot=>ut(ot),"data-testid":"form-input"})))}var b=c(928),T=c.n(b);function B(Se,Ve){const{fetch:Oe}=(0,p.useContext)(R),{solidDataset:_e}=(0,p.useContext)($),{data:Ke,error:ht}=T()(Se?[Se,Ve,Oe]:null,()=>{const ot=Object.assign({fetch:Oe},Ve);return(0,_.getSolidDataset)(Se,ot)});return{dataset:Se?Ke:_e,error:ht}}const H=(0,p.createContext)({solidDataset:void 0,setDataset:()=>{}}),$=H,F=({children:Se,onError:Ve,solidDataset:Oe,datasetUrl:_e,loading:Ke,loadingComponent:ht})=>{const{dataset:ut,error:ot}=B(_e);ot&&Ve&&Ve(ot);const yt=Oe??ut,[Ht,Qt]=(0,p.useState)(yt);(0,p.useEffect)(()=>{Qt(yt)},[yt]);let zt=ht&&m().createElement(ht,null)||Ke||m().createElement("span",null,"Fetching data...");return ht===null&&(zt=null),m().createElement(H.Provider,{value:{solidDataset:Ht,setDataset:Qt}},Ht?Se:zt)},ne=(0,p.createContext)({thing:null,setThing:()=>{}}),Y=ne,M=({children:Se,thing:Ve,thingUrl:Oe})=>{const{solidDataset:_e}=(0,p.useContext)($);let Ke=Ve;_e&&Oe&&(Ke=(0,_.getThing)(_e,Oe));const[ht,ut]=(0,p.useState)(Ke||null);return(0,p.useEffect)(()=>{_e&&Oe?ut((0,_.getThing)(_e,Oe)):Ve&&ut(Ve)},[_e,Oe,Ve]),m().createElement(ne.Provider,{value:{thing:ht,setThing:ut}},Se)},J=async(Se,Ve,Oe,_e,Ke,ht,ut)=>{try{return Ke!==void 0&&Ve.size>Ke*1024?(Oe.setCustomValidity(`The selected file must not be larger than ${Ke}kB`),Oe.reportValidity(),null):(Oe.setCustomValidity(""),await(0,_.overwriteFile)(Se,Ve,{fetch:_e}),ht&&ht(),URL.createObjectURL(Ve))}catch(ot){return ut&&ut(ot),null}},Le=async(Se,Ve)=>await(0,_.getFile)(Se,{fetch:Ve});function Ue(Se,Ve,Oe,_e){switch(Se){case"boolean":return(0,_.getBoolean)(Ve,Oe);case"datetime":return(0,_.getDatetime)(Ve,Oe);case"decimal":return(0,_.getDecimal)(Ve,Oe);case"integer":return(0,_.getInteger)(Ve,Oe);case"url":return(0,_.getUrl)(Ve,Oe);default:return _e?(0,_.getStringWithLocale)(Ve,Oe,_e):(0,_.getStringNoLocale)(Ve,Oe)}}function je(Se,Ve,Oe,_e){switch(Se){case"boolean":return(0,_.getBooleanAll)(Ve,Oe);case"datetime":return(0,_.getDatetimeAll)(Ve,Oe);case"decimal":return(0,_.getDecimalAll)(Ve,Oe);case"integer":return(0,_.getIntegerAll)(Ve,Oe);case"url":return(0,_.getUrlAll)(Ve,Oe);default:return _e?(0,_.getStringWithLocaleAll)(Ve,Oe,_e):(0,_.getStringNoLocaleAll)(Ve,Oe)}}function nt(Se,Ve,Oe,_e,Ke){return _e.find(ht=>Se(Ve,Oe,ht,Ke))||_e[0]}function ke(Se){const{dataset:Ve,thing:Oe,properties:_e,property:Ke,type:ht,locale:ut}=Se,{solidDataset:ot,setDataset:yt=()=>{}}=(0,p.useContext)($),Ht=Ve||ot,{thing:Qt,setThing:zt=()=>{}}=(0,p.useContext)(Y),Yt=Oe||Qt||void 0;let fr;Yt||(fr=new Error("Thing not found as property or in context"));const Zt=Yt&&_e?nt(Ue,ht,Yt,_e,ut)||_e[0]:Ke;if(!Zt)throw new Error("No property provided");const Ot=Yt&&Zt?Ue(ht,Yt,Zt,ut):null;return{dataset:Ht,thing:Yt,property:Zt,error:fr,value:Ot,setDataset:yt,setThing:zt}}function Be(){const[Se,Ve]=(0,p.useState)(null);return(0,p.useEffect)(()=>{const Oe=document.createElement("input");Oe.type="datetime-local",Ve(Oe.type!=="text")},[]),Se}async function De(Se,Ve){const Oe=await(0,_.getSolidDataset)(Se);Ve(Oe)}function tt(Se){const[Ve,Oe]=(0,p.useState)(),[_e,Ke]=(0,p.useState)(!1),[ht,ut]=(0,p.useState)(),{fetch:ot}=(0,p.useContext)(R);return(0,p.useEffect)(()=>{Se&&(Ke(!0),Le(Se,ot).then(yt=>{ut(yt),Ke(!1)}).catch(yt=>{Oe(yt),Ke(!1)}))},[Se,ot]),{error:Ve,inProgress:_e,data:ht}}var re=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};function Ie(Se){var{thing:Ve,property:Oe,properties:_e,edit:Ke,autosave:ht,allowDelete:ut,onSave:ot,onError:yt,maxSize:Ht,alt:Qt,inputProps:zt,errorComponent:Yt,loadingComponent:fr,deleteComponent:Zt,saveLocation:Ot,solidDataset:mr}=Se,wt=re(Se,["thing","property","properties","edit","autosave","allowDelete","onSave","onError","maxSize","alt","inputProps","errorComponent","loadingComponent","deleteComponent","saveLocation","solidDataset"]);const{fetch:It}=(0,p.useContext)(R),Gt=ke({thing:Ve,property:Oe,properties:_e,type:"url"}),{value:Lt,thing:Sr,error:sr}=Gt;let jr;Lt||(jr=new Error("No value found for property."));const nr=!Sr&&!sr,[Kt,Bt]=(0,p.useState)(sr??jr);(0,p.useEffect)(()=>{Kt&&yt&&yt(Kt)},[Kt,yt,Yt]);const[Kr,Mr]=(0,p.useState)(),{data:Br,error:vr,inProgress:Cr}=tt(Lt);(0,p.useEffect)(()=>{if(Cr)return;if(vr){Bt(vr);return}const Ir=Br&&URL.createObjectURL(Br);Ir&&Mr(Ir)},[Br,Cr,vr]);const Ct=async()=>{if(!(!Ve||!mr||!Oe||typeof Lt!="string"||!ht))try{const Ir=(0,_.removeUrl)(Ve,Oe,Lt),Sn=(0,_.setThing)(mr,Ir),Gn=(0,_.getSourceUrl)(mr);if(!Gn)return;await(0,_.saveSolidDatasetAt)(Gn,Sn,{fetch:It})}catch(Ir){Bt(Ir)}},sn=async Ir=>{const Sn=Ir.files;if(ht&&Sn&&Sn.length>0){if(Lt){const Gn=await J(Lt,Sn[0],Ir,It,Ht,ot,yt);Gn&&Mr(Gn)}else if(!Lt&&Ot){const Gn=await(0,_.saveFileInContainer)(Ot,Sn[0],{fetch:It}),qn=(0,_.getSourceUrl)(Gn);if(qn&&Ve&&Oe&&mr){Mr(qn);try{const tn=(0,_.addUrl)(Ve,Oe,qn),rn=(0,_.setThing)(mr,tn),h=(0,_.getSourceUrl)(mr);if(!h)return;await(0,_.saveSolidDatasetAt)(h,rn,{fetch:It})}catch(tn){Bt(tn)}}}}};let Wr=null;if(nr||Cr){let Ir=fr&&m().createElement(fr,null)||m().createElement("span",null,"fetching data in progress");return fr===null&&(Ir=null),Ir}return Kt?Wr=Yt?m().createElement(Yt,{error:Kt}):m().createElement("span",null,Kt.toString()):Lt&&(Wr=m().createElement("img",Object.assign({src:Kr,alt:Qt??""},wt))),m().createElement(m().Fragment,null,Wr,Ke&&m().createElement("input",Object.assign({},zt,{type:"file",accept:"image/*",onChange:Ir=>sn(Ir.target)})),ut&&(Zt?m().createElement(Zt,{onClick:Ct}):m().createElement("button",{type:"button",onClick:Ct},"Delete")))}var Ge=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};const dt=Se=>{var Ve;const{thing:Oe,solidDataset:_e,property:Ke,properties:ht,saveDatasetTo:ut,onSave:ot,onError:yt,edit:Ht,autosave:Qt,inputProps:zt}=Se,Yt=Ge(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:fr}=(0,p.useContext)(R),{value:Zt,thing:Ot,property:mr,dataset:wt,setDataset:It,error:Gt}=ke({dataset:_e,thing:Oe,type:"datetime",property:Ke,properties:ht}),Lt=Be();(0,p.useEffect)(()=>{Gt&&yt&&yt(Gt)},[Gt,yt]);const Sr=Zt?Zt.toISOString().substring(0,Zt.toISOString().length-5):null,[sr,jr]=(0,p.useState)(Sr);let nr="";Lt||(nr=sr==null?void 0:sr.split(/T(.+)/)[0].toString());let Kt="00:00";Lt||(Kt=(Ve=sr==null?void 0:sr.split(/T(.+)/)[1])===null||Ve===void 0?void 0:Ve.toString());const[Bt,Kr]=(0,p.useState)(Kt),[Mr,Br]=(0,p.useState)(nr);(0,p.useEffect)(()=>{!Bt&&!Mr||Lt||jr(`${Mr??""}T${Bt??"00:00"}`)},[Bt,Mr,Lt]);const vr=async Ct=>{if(Sr!==sr&&Ot&&wt&&Ct.target.reportValidity()){const sn=sr,Wr=(0,_.setDatetime)(Ot,mr,new Date(`${sn}Z`));try{let Ir;ut?(Ir=await(0,_.saveSolidDatasetAt)(ut,(0,_.setThing)(wt,Wr),{fetch:fr}),await De(ut,It)):(0,_.hasResourceInfo)(wt)?(Ir=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(wt),(0,_.setThing)(wt,Wr),{fetch:fr}),await De((0,_.getSourceUrl)(wt),It)):yt&&yt(new Error("Please provide saveDatasetTo location for new data")),!Gt&&ot&&ot(Ir,Wr)}catch(Ir){yt&&yt(Ir)}}};let Cr;return Lt?Cr="datetime-local":Cr="datetime-workaround",m().createElement(m().Fragment,null,!Ht&&wt&&Ot&&m().createElement("span",Object.assign({},Yt),`${sr}`),Ht&&wt&&Ot&&Cr==="datetime-local"&&m().createElement("input",Object.assign({type:Cr,"aria-label":"Date and Time",step:"any"},zt,{onChange:Ct=>{jr(Ct.target.value)},onBlur:Ct=>Qt&&vr(Ct),value:sr,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}",placeholder:"yyyy-mm-ddThh:mm"})),Ht&&wt&&Ot&&Cr==="datetime-workaround"&&m().createElement(m().Fragment,null,m().createElement("input",Object.assign({type:"date","aria-label":"Date",step:"any"},zt,{onChange:Ct=>{Br(Ct.target.value)},onBlur:Ct=>Qt&&vr(Ct),value:Mr,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",placeholder:"yyyy-mm-dd"})),m().createElement("input",{type:"time","aria-label":"Time",value:Bt,onChange:Ct=>Kr(Ct.target.value),onBlur:Ct=>Qt&&vr(Ct),pattern:"[0-9]{2}:[0-9]{2}"})))};dt.defaultProps={autosave:!1,edit:!1};const Ze=dt;var qe=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};const Fe=Se=>{var Ve;const{thing:Oe,solidDataset:_e,property:Ke,properties:ht,saveDatasetTo:ut,locale:ot,onSave:yt,onError:Ht,edit:Qt,autosave:zt,inputProps:Yt}=Se,fr=qe(Se,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","edit","autosave","inputProps"]),{fetch:Zt}=(0,p.useContext)(R),{value:Ot,thing:mr,property:wt,dataset:It,setDataset:Gt,error:Lt}=ke({dataset:_e,thing:Oe,type:"string",property:Ke,properties:ht,locale:ot});(0,p.useEffect)(()=>{Lt&&Ht&&Ht(Lt)},[Lt,Ht]);const Sr=(Ve=Ot==null?void 0:Ot.toString())!==null&&Ve!==void 0?Ve:"",[sr,jr]=(0,p.useState)(Sr),nr=async Kt=>{if(Sr!==sr&&mr&&It&&Kt.target.reportValidity()){let Bt;ot?Bt=(0,_.setStringWithLocale)(mr,wt,sr,ot):Bt=(0,_.setStringNoLocale)(mr,wt,sr);try{let Kr;ut?(Kr=await(0,_.saveSolidDatasetAt)(ut,(0,_.setThing)(It,Bt),{fetch:Zt}),await De(ut,Gt)):(0,_.hasResourceInfo)(It)?(Kr=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(It),(0,_.setThing)(It,Bt),{fetch:Zt}),await De((0,_.getSourceUrl)(It),Gt)):Ht&&Ht(new Error("Please provide saveDatasetTo location for new data")),!Lt&&yt&&yt(Kr,Bt)}catch(Kr){Ht&&Ht(Kr)}}};return m().createElement(m().Fragment,null,!Qt&&It&&mr&&m().createElement("span",Object.assign({},fr),sr),Qt&&It&&mr&&m().createElement("input",Object.assign({type:"text"},Yt,{onChange:Kt=>{jr(Kt.target.value)},onBlur:Kt=>zt&&nr(Kt),value:sr})))};Fe.defaultProps={autosave:!1,edit:!1};const lt=Fe;var gt=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};const Pt=Se=>{var Ve;const{thing:Oe,solidDataset:_e,property:Ke,properties:ht,saveDatasetTo:ut,onSave:ot,onError:yt,edit:Ht,autosave:Qt,inputProps:zt}=Se,Yt=gt(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:fr}=(0,p.useContext)(R),{value:Zt,thing:Ot,property:mr,dataset:wt,setDataset:It,error:Gt}=ke({dataset:_e,thing:Oe,type:"boolean",property:Ke,properties:ht});(0,p.useEffect)(()=>{Gt&&yt&&yt(Gt)},[Gt,yt]);let Lt=Zt,Sr=!1;Sr=(Ve=Zt)!==null&&Ve!==void 0?Ve:!1,Lt=Sr.toString();const[sr,jr]=(0,p.useState)(Lt),[nr,Kt]=(0,p.useState)(Sr);(0,p.useEffect)(()=>{jr(nr.toString())},[nr]);const Bt=async Kr=>{if(Lt!==sr&&Ot&&wt&&Kr.target.reportValidity()){const Mr=(0,_.setBoolean)(Ot,mr,nr);try{let Br;ut?(Br=await(0,_.saveSolidDatasetAt)(ut,(0,_.setThing)(wt,Mr),{fetch:fr}),await De(ut,It)):(0,_.hasResourceInfo)(wt)?(Br=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(wt),(0,_.setThing)(wt,Mr),{fetch:fr}),await De((0,_.getSourceUrl)(wt),It)):yt&&yt(new Error("Please provide saveDatasetTo location for new data")),!Gt&&ot&&ot(Br,Mr)}catch(Br){yt&&yt(Br)}}};return m().createElement(m().Fragment,null,!Ht&&wt&&Ot&&m().createElement("span",Object.assign({},Yt),`${sr}`),Ht&&wt&&Ot&&m().createElement("input",Object.assign({type:"checkbox",checked:nr},zt,{onChange:Kr=>{Kt(Kr.target.checked)},onBlur:Kr=>Qt&&Bt(Kr),value:sr})))};Pt.defaultProps={autosave:!1,edit:!1};const Ft=Pt;var Z=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};const N=Se=>{var Ve;const{thing:Oe,solidDataset:_e,property:Ke,properties:ht,saveDatasetTo:ut,onSave:ot,onError:yt,edit:Ht,autosave:Qt,inputProps:zt}=Se,Yt=Z(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:fr}=(0,p.useContext)(R),{value:Zt,thing:Ot,property:mr,dataset:wt,setDataset:It,error:Gt}=ke({dataset:_e,thing:Oe,type:"url",property:Ke,properties:ht});(0,p.useEffect)(()=>{Gt&&yt&&yt(Gt)},[Gt,yt]);const Lt=(Ve=Zt==null?void 0:Zt.toString())!==null&&Ve!==void 0?Ve:"",[Sr,sr]=(0,p.useState)(Lt),jr=async nr=>{if(Lt!==Sr&&Ot&&wt&&nr.target.reportValidity()){const Kt=(0,_.setUrl)(Ot,mr,Sr);try{let Bt;ut?(Bt=await(0,_.saveSolidDatasetAt)(ut,(0,_.setThing)(wt,Kt),{fetch:fr}),await De(ut,It)):(0,_.hasResourceInfo)(wt)?(Bt=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(wt),(0,_.setThing)(wt,Kt),{fetch:fr}),await De((0,_.getSourceUrl)(wt),It)):yt&&yt(new Error("Please provide saveDatasetTo location for new data")),!Gt&&ot&&ot(Bt,Kt)}catch(Bt){yt&&yt(Bt)}}};return m().createElement(m().Fragment,null,!Ht&&wt&&Ot&&m().createElement("span",Object.assign({},Yt),`${Sr}`),Ht&&wt&&Ot&&m().createElement("input",Object.assign({type:"url"},zt,{onChange:nr=>{sr(nr.target.value)},onBlur:nr=>Qt&&jr(nr),value:Sr})))};N.defaultProps={autosave:!1,edit:!1};const E=N;var j=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};const G=Se=>{var Ve;const{thing:Oe,solidDataset:_e,property:Ke,properties:ht,saveDatasetTo:ut,onSave:ot,onError:yt,edit:Ht,autosave:Qt,inputProps:zt}=Se,Yt=j(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:fr}=(0,p.useContext)(R),{value:Zt,thing:Ot,property:mr,dataset:wt,setDataset:It,error:Gt}=ke({dataset:_e,thing:Oe,type:"integer",property:Ke,properties:ht});(0,p.useEffect)(()=>{Gt&&yt&&yt(Gt)},[Gt,yt]);const Lt=(Ve=Zt==null?void 0:Zt.toString())!==null&&Ve!==void 0?Ve:"",[Sr,sr]=(0,p.useState)(Lt),jr=async nr=>{if(Lt!==Sr&&Ot&&wt&&nr.target.reportValidity()){const Kt=(0,_.setInteger)(Ot,mr,parseInt(Sr,10));try{let Bt;ut?(Bt=await(0,_.saveSolidDatasetAt)(ut,(0,_.setThing)(wt,Kt),{fetch:fr}),await De(ut,It)):(0,_.hasResourceInfo)(wt)?(Bt=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(wt),(0,_.setThing)(wt,Kt),{fetch:fr}),await De((0,_.getSourceUrl)(wt),It)):yt&&yt(new Error("Please provide saveDatasetTo location for new data")),!Gt&&ot&&ot(Bt,Kt)}catch(Bt){yt&&yt(Bt)}}};return m().createElement(m().Fragment,null,!Ht&&wt&&Ot&&m().createElement("span",Object.assign({},Yt),`${Sr}`),Ht&&wt&&Ot&&m().createElement("input",Object.assign({type:"number",step:"any"},zt,{onChange:nr=>{sr(nr.target.value)},onBlur:nr=>Qt&&jr(nr),value:Sr})))};G.defaultProps={autosave:!1,edit:!1};const fe=G;var we=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};const me=Se=>{var Ve;const{thing:Oe,solidDataset:_e,property:Ke,properties:ht,saveDatasetTo:ut,onSave:ot,onError:yt,edit:Ht,autosave:Qt,inputProps:zt}=Se,Yt=we(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:fr}=(0,p.useContext)(R),{value:Zt,thing:Ot,property:mr,dataset:wt,setDataset:It,error:Gt}=ke({dataset:_e,thing:Oe,type:"decimal",property:Ke,properties:ht});(0,p.useEffect)(()=>{Gt&&yt&&yt(Gt)},[Gt,yt]);const Lt=(Ve=Zt==null?void 0:Zt.toString())!==null&&Ve!==void 0?Ve:"",[Sr,sr]=(0,p.useState)(Lt),jr=async nr=>{if(Lt!==Sr&&Ot&&wt&&nr.target.reportValidity()){const Kt=(0,_.setDecimal)(Ot,mr,parseFloat(Sr));try{let Bt;ut?(Bt=await(0,_.saveSolidDatasetAt)(ut,(0,_.setThing)(wt,Kt),{fetch:fr}),await De(ut,It)):(0,_.hasResourceInfo)(wt)?(Bt=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(wt),(0,_.setThing)(wt,Kt),{fetch:fr}),await De((0,_.getSourceUrl)(wt),It)):yt&&yt(new Error("Please provide saveDatasetTo location for new data")),!Gt&&ot&&ot(Bt,Kt)}catch(Bt){yt&&yt(Bt)}}};return m().createElement(m().Fragment,null,!Ht&&wt&&Ot&&m().createElement("span",Object.assign({},Yt),`${Sr}`),Ht&&wt&&Ot&&m().createElement("input",Object.assign({type:"number",step:"any"},zt,{onChange:nr=>{sr(nr.target.value)},onBlur:nr=>Qt&&jr(nr),value:Sr})))};me.defaultProps={autosave:!1,edit:!1};const $e=me;var Xe=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};function ft(Se){const Ve=Se,{dataType:Oe}=Ve,_e=Xe(Ve,["dataType"]),{thing:Ke,solidDataset:ht,property:ut,properties:ot,edit:yt,loadingComponent:Ht,errorComponent:Qt,locale:zt}=_e,{thing:Yt,value:fr,error:Zt}=ke({dataset:ht,thing:Ke,property:ut,properties:ot,type:Oe,locale:zt});let Ot;!yt&&!fr&&Oe!=="boolean"&&(Ot=new Error("No value found for property."));const mr=!Yt&&!Zt,[wt]=(0,p.useState)(Zt??Ot);if(mr){let Gt=Ht&&m().createElement(Ht,null)||m().createElement("span",null,"fetching data in progress");return Ht===null&&(Gt=null),Gt}if(wt)return Qt?m().createElement(Qt,{error:wt}):m().createElement("span",null,wt.toString());let It=lt;switch(Oe){case"boolean":It=Ft;break;case"datetime":It=Ze;break;case"decimal":It=$e;break;case"integer":It=fe;break;case"url":It=E;break;default:It=lt}return m().createElement(It,Object.assign({},_e))}ft.defaultProps={autosave:!1,edit:!1};var Mt=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};function $t(Se){var{children:Ve,property:Oe,properties:_e,thing:Ke,solidDataset:ht,autosave:ut,rel:ot,target:yt,edit:Ht,loadingComponent:Qt,errorComponent:zt,onSave:Yt,onError:fr}=Se,Zt=Mt(Se,["children","property","properties","thing","solidDataset","autosave","rel","target","edit","loadingComponent","errorComponent","onSave","onError"]);const{value:Ot,thing:mr,property:wt,dataset:It,error:Gt}=ke({dataset:ht,thing:Ke,property:Oe,properties:_e,type:"url"});let Lt;!Ht&&!Ot&&(Lt=new Error("URL not found for given property"));const Sr=!mr&&!Gt,[sr]=(0,p.useState)(Gt??Lt);if(Sr){let nr=Qt&&m().createElement(Qt,null)||m().createElement("span",null,"fetching data in progress");return Qt===null&&(nr=null),nr}if(sr)return zt?m().createElement(zt,{error:sr}):m().createElement("span",null,sr.toString());const jr=ot||(yt==="_blank"?"noopener noreferrer":"nofollow");return Ht?m().createElement(ft,{dataType:"url",solidDataset:It,thing:mr,property:wt,autosave:ut,onSave:Yt,onError:fr,edit:!0}):m().createElement("a",Object.assign({href:Ot,rel:jr,target:yt},Zt),Ve??Ot)}const Lr=({oidcIssuer:Se,redirectUrl:Ve,children:Oe,authOptions:_e,onError:Ke})=>{const ht=Object.assign({redirectUrl:Ve,oidcIssuer:Se},_e),{login:ut,setSessionRequestInProgress:ot}=(0,p.useContext)(R);async function yt(){ot(!0);try{await ut(ht),ot(!1)}catch(Qt){ot(!1),Ke&&Ke(Qt)}}function Ht(Qt){return Qt.preventDefault(),Qt.key==="Enter"?yt():Promise.resolve()}return Oe?m().createElement("div",{role:"button",tabIndex:0,onClick:yt,onKeyDown:Ht},Oe):m().createElement("button",{type:"button",onClick:yt,onKeyDown:Ht},"Log In")},ee=({children:Se,onLogout:Ve,onError:Oe})=>{const{logout:_e}=(0,p.useContext)(R);async function Ke(){try{await _e(),Ve&&Ve()}catch(ut){Oe&&Oe(ut)}}function ht(ut){return ut.preventDefault(),ut.key==="Enter"?Ke():Promise.resolve()}return Se?m().createElement("div",{role:"button",tabIndex:0,onClick:Ke,onKeyDown:ht},Se):m().createElement("button",{type:"button",onClick:Ke,onKeyDown:ht},"Log Out")};var de=c(767);function K(Se){const{children:Ve,solidDataset:Oe,datasetUrl:_e,thing:Ke,thingUrl:ht,onError:ut,loadingComponent:ot}=Se;return m().createElement(F,{onError:ut,solidDataset:Oe,datasetUrl:_e,loadingComponent:ot},m().createElement(M,{thing:Ke,thingUrl:ht},Ve))}const P=K;var L=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};function k(Se){throw new Error("Can't use TableColumn outside a Table.")}function ge(Se){var{children:Ve,emptyStateComponent:Oe,things:_e,filter:Ke,ascIndicator:ht,descIndicator:ut,getRowProps:ot}=Se,yt=L(Se,["children","emptyStateComponent","things","filter","ascIndicator","descIndicator","getRowProps"]);const{columns:Ht,data:Qt}=(0,p.useMemo)(()=>{const wt=[],It=_e.map(()=>({}));return p.Children.forEach(Ve,(Gt,Lt)=>{if(Gt){const{property:Sr,header:sr,body:jr,dataType:nr="string",locale:Kt,multiple:Bt=!1,sortable:Kr,sortFn:Mr,filterable:Br}=Gt.props;if(wt.push({Header:sr??`${Sr}`,accessor:`col${Lt}`,disableGlobalFilter:!Br,disableSortBy:!Kr,Cell:jr??(({value:vr})=>vr!=null?`${vr}`:"")}),Mr){const vr=(Cr,Ct,sn)=>{const Wr=Cr.values[sn],Ir=Ct.values[sn];return Mr(Wr,Ir)};wt[Lt].sortType=vr}else nr==="string"&&(wt[Lt].sortType=nr),(nr==="integer"||nr==="decimal")&&(wt[Lt].sortType="number");_e.forEach((vr,Cr)=>{It[Cr][`col${Lt}`]=Bt?je(nr,vr.thing,Sr,Kt):Ue(nr,vr.thing,Sr,Kt)})}}),{columns:wt,data:It}},[Ve,_e]),zt=(0,de.useTable)({columns:Ht,data:Qt,initialState:{globalFilter:Ke||void 0}},de.useGlobalFilter,de.useSortBy),{getTableProps:Yt,getTableBodyProps:fr,headerGroups:Zt,rows:Ot,prepareRow:mr}=zt;return Ot.length?m().createElement("table",Object.assign({},Yt(),yt),m().createElement("thead",null,Zt.map(wt=>m().createElement("tr",Object.assign({},wt.getHeaderGroupProps()),wt.headers.map(It=>m().createElement("th",Object.assign({},It.getHeaderProps(It.getSortByToggleProps())),It.render("Header"),It.isSorted&&(It.isSortedDesc?ut:ht)))))),m().createElement("tbody",Object.assign({},fr()),Ot.map(wt=>{mr(wt);const It=_e[wt.index].dataset,Gt=_e[wt.index].thing;return m().createElement("tr",Object.assign({},wt.getRowProps(ot(wt,Gt,It))),m().createElement(P,{solidDataset:It,thing:Gt},wt.cells.map(Lt=>m().createElement("td",Object.assign({},Lt.getCellProps()),Lt.render("Cell")))))}))):Oe?m().createElement(Oe,null):null}ge.defaultProps={filter:void 0,ascIndicator:m().createElement("span",{role:"img","aria-label":"Sorted in ascending order"}," ",""),descIndicator:m().createElement("span",{role:"img","aria-label":"Sorted in descending order"}," ",""),getRowProps:()=>({})};var xe=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};function ae(Se){var{thing:Ve,solidDataset:Oe,property:_e,properties:Ke,saveDatasetTo:ht,locale:ut,onSave:ot,onError:yt,inputProps:Ht,errorComponent:Qt,loadingComponent:zt,edit:Yt=!1,autosave:fr=!1}=Se,Zt=xe(Se,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","inputProps","errorComponent","loadingComponent","edit","autosave"]);const{fetch:Ot}=(0,p.useContext)(R),{error:mr,value:wt,thing:It,property:Gt,dataset:Lt,setDataset:Sr}=ke({dataset:Oe,thing:Ve,property:_e,properties:Ke,type:"string",locale:ut});let sr;!Yt&&!wt&&(sr=new Error("No value found for property."));const jr=!It&&!mr,[nr]=(0,p.useState)(mr??sr);(0,p.useEffect)(()=>{nr&&yt&&yt(nr)},[nr,yt]);const[Kt,Bt]=(0,p.useState)(wt),[,Kr]=(0,p.useState)(),[Mr,Br]=(0,p.useState)(wt),vr=async Cr=>{if(Mr!==Cr.target.value&&It&&Lt){const Ct=Cr.target.value;let sn;ut?sn=(0,_.setStringWithLocale)(It,Gt,Ct,ut):sn=(0,_.setStringNoLocale)(It,Gt,Ct);try{let Wr;ht?(Wr=await(0,_.saveSolidDatasetAt)(ht,(0,_.setThing)(Lt,sn),{fetch:Ot}),await De(ht,Sr)):(0,_.hasResourceInfo)(Lt)?(Wr=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(Lt),(0,_.setThing)(Lt,sn),{fetch:Ot}),await De((0,_.getSourceUrl)(Lt),Sr)):Kr(()=>{throw new Error("Please provide saveDatasetTo location for new data")}),ot&&ot(Wr,sn)}catch(Wr){yt&&yt(Wr)}}};if(jr){let Cr=zt&&m().createElement(zt,null)||m().createElement("span",null,"fetching data in progress");return zt===null&&(Cr=null),Cr}return nr?Qt?m().createElement(Qt,{error:nr}):m().createElement("span",null,nr.toString()):m().createElement(m().Fragment,null,!Yt&&Lt&&It&&m().createElement("span",Object.assign({},Zt),Kt),Yt&&Lt&&It&&m().createElement("input",Object.assign({type:Ht&&Ht.type?Ht.type:"text"},Ht,{onFocus:Cr=>Br(Cr.target.value),onChange:Cr=>Bt(Cr.target.value),onBlur:Cr=>fr&&vr(Cr),value:Kt||""})))}var bt=function(Se,Ve){var Oe={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Ve.indexOf(_e)<0&&(Oe[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,_e=Object.getOwnPropertySymbols(Se);Ke<_e.length;Ke++)Ve.indexOf(_e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[Ke])&&(Oe[_e[Ke]]=Se[_e[Ke]]);return Oe};function Wt(Se){var{property:Ve,properties:Oe,thing:_e,edit:Ke,autosave:ht,onSave:ut,onError:ot,maxSize:yt,inputProps:Ht,errorComponent:Qt,loadingComponent:zt}=Se,Yt=bt(Se,["property","properties","thing","edit","autosave","onSave","onError","maxSize","inputProps","errorComponent","loadingComponent"]);const{fetch:fr}=(0,p.useContext)(R),Zt=ke({thing:_e,property:Ve,properties:Oe,type:"url"}),{value:Ot,thing:mr,error:wt}=Zt;let It;!Ke&&!Ot&&(It=new Error("No value found for property."));const Gt=!mr&&!wt,[Lt,Sr]=(0,p.useState)(wt??It);(0,p.useEffect)(()=>{Lt&&ot&&ot(Lt)},[Lt,ot,Qt]);const[sr,jr]=(0,p.useState)(""),{data:nr,error:Kt,inProgress:Bt}=tt(Ot);(0,p.useEffect)(()=>{if(Bt)return;if(Kt){Sr(Kt);return}const Br=nr&&URL.createObjectURL(nr);Br&&jr(Br)},[nr,Bt,Kt]);const Kr=async Br=>{const vr=Br.files;if(ht&&vr&&vr.length>0&&Ot){const Cr=await J(Ot,vr[0],Br,fr,yt,ut,ot);Cr&&jr(Cr)}};let Mr=null;if(Gt||Bt){let Br=zt&&m().createElement(zt,null)||m().createElement("span",null,"fetching data in progress");return zt===null&&(Br=null),Br}return Lt?Mr=Qt?m().createElement(Qt,{error:Lt}):m().createElement("span",null,Lt.toString()):Ot&&(Mr=m().createElement("video",Object.assign({src:sr||Ot,controls:!0},Yt))),m().createElement(m().Fragment,null,Mr,Ke&&m().createElement("input",Object.assign({},Ht,{type:"file",accept:"video/*",onChange:Br=>Kr(Br.target)})))}function Rt(){const{session:Se,sessionRequestInProgress:Ve,fetch:Oe,login:_e,logout:Ke}=(0,p.useContext)(R);return{session:Se,sessionRequestInProgress:Ve,fetch:Oe,login:_e,logout:Ke}}function xt(Se,Ve,Oe){const{dataset:_e,error:Ke}=B(Se,Oe),{thing:ht}=(0,p.useContext)(Y);return Ve?_e?{thing:(0,_.getThing)(_e,Ve),error:Ke}:{thing:null,error:Ke}:{thing:ht||void 0,error:Ke}}})(),g})())})(VC);var Kl=VC.exports,Gi=RT(),yP="https://www.w3.org/ns/activitystreams#";function st(e){return yP+e}var UU={PREFIX:"as",NAMESPACE:yP,PREFIX_AND_NAMESPACE:{as:"https://www.w3.org/ns/activitystreams#"},NS:st,Activity:st("Activity"),Object:st("Object"),Link:st("Link"),OrderedItems:st("OrderedItems"),Collection:st("Collection"),CollectionPage:st("CollectionPage"),Image:st("Image"),Document:st("Document"),Relationship:st("Relationship"),Question:st("Question"),IntransitiveActivity:st("IntransitiveActivity"),Profile:st("Profile"),Tombstone:st("Tombstone"),Place:st("Place"),OrderedCollectionPage:st("OrderedCollectionPage"),OrderedCollection:st("OrderedCollection"),Accept:st("Accept"),Block:st("Block"),Ignore:st("Ignore"),Add:st("Add"),Announce:st("Announce"),Application:st("Application"),Arrive:st("Arrive"),Article:st("Article"),Audio:st("Audio"),Create:st("Create"),Delete:st("Delete"),Dislike:st("Dislike"),Event:st("Event"),Flag:st("Flag"),Follow:st("Follow"),Group:st("Group"),Invite:st("Invite"),Offer:st("Offer"),Join:st("Join"),Leave:st("Leave"),Like:st("Like"),View:st("View"),Listen:st("Listen"),Read:st("Read"),Move:st("Move"),Travel:st("Travel"),Mention:st("Mention"),Note:st("Note"),Page:st("Page"),Person:st("Person"),Organization:st("Organization"),Reject:st("Reject"),Remove:st("Remove"),Service:st("Service"),TentativeAccept:st("TentativeAccept"),TentativeReject:st("TentativeReject"),Undo:st("Undo"),Update:st("Update"),Video:st("Video"),actor:st("actor"),attributedTo:st("attributedTo"),attachment:st("attachment"),attachments:st("attachments"),author:st("author"),bcc:st("bcc"),bto:st("bto"),cc:st("cc"),context:st("context"),current:st("current"),first:st("first"),generator:st("generator"),icon:st("icon"),image:st("image"),inReplyTo:st("inReplyTo"),items:st("items"),last:st("last"),location:st("location"),next:st("next"),object:st("object"),oneOf:st("oneOf"),anyOf:st("anyOf"),prev:st("prev"),preview:st("preview"),provider:st("provider"),replies:st("replies"),result:st("result"),audience:st("audience"),partOf:st("partOf"),tag:st("tag"),tags:st("tags"),target:st("target"),origin:st("origin"),instrument:st("instrument"),to:st("to"),url:st("url"),subject:st("subject"),relationship:st("relationship"),describes:st("describes"),formerType:st("formerType"),accuracy:st("accuracy"),altitude:st("altitude"),content:st("content"),name:st("name"),downstreamDuplicates:st("downstreamDuplicates"),duration:st("duration"),endTime:st("endTime"),height:st("height"),href:st("href"),hreflang:st("hreflang"),id:st("id"),latitude:st("latitude"),longitude:st("longitude"),mediaType:st("mediaType"),objectType:st("objectType"),published:st("published"),radius:st("radius"),rating:st("rating"),rel:st("rel"),startIndex:st("startIndex"),startTime:st("startTime"),summary:st("summary"),totalItems:st("totalItems"),units:st("units"),updated:st("updated"),upstreamDuplicates:st("upstreamDuplicates"),verb:st("verb"),width:st("width"),deleted:st("deleted")},mP="http://www.w3.org/1999/02/22-rdf-syntax-ns#";function Fn(e){return mP+e}var MU={PREFIX:"rdf",NAMESPACE:mP,PREFIX_AND_NAMESPACE:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"},NS:Fn,Property:Fn("Property"),HTML:Fn("HTML"),langString:Fn("langString"),PlainLiteral:Fn("PlainLiteral"),Statement:Fn("Statement"),Bag:Fn("Bag"),Seq:Fn("Seq"),Alt:Fn("Alt"),List:Fn("List"),XMLLiteral:Fn("XMLLiteral"),JSON:Fn("JSON"),CompoundLiteral:Fn("CompoundLiteral"),type:Fn("type"),subject:Fn("subject"),predicate:Fn("predicate"),object:Fn("object"),value:Fn("value"),nil:Fn("nil"),first:Fn("first"),rest:Fn("rest"),language:Fn("language"),direction:Fn("direction")},vP="http://schema.org/";function xr(e){return vP+e}var wP={PREFIX:"schema-inrupt",NAMESPACE:vP,PREFIX_AND_NAMESPACE:{"schema-inrupt":"http://schema.org/"},NS:xr,Organization:xr("Organization"),Person:xr("Person"),ImageObject:xr("ImageObject"),URL:xr("URL"),MedicalTherapy:xr("MedicalTherapy"),EducationalOccupationalCredential:xr("EducationalOccupationalCredential"),PostalAddress:xr("PostalAddress"),Product:xr("Product"),Event:xr("Event"),alternateName:xr("alternateName"),givenName:xr("givenName"),familyName:xr("familyName"),additionalName:xr("additionalName"),license:xr("license"),name:xr("name"),text:xr("text"),identifier:xr("identifier"),description:xr("description"),image:xr("image"),url:xr("url"),startTime:xr("startTime"),endTime:xr("endTime"),startDate:xr("startDate"),endDate:xr("endDate"),email:xr("email"),primaryPrevention:xr("primaryPrevention"),qualifications:xr("qualifications"),attendee:xr("attendee"),address:xr("address"),streetAddress:xr("streetAddress"),addressLocality:xr("addressLocality"),addressRegion:xr("addressRegion"),postalCode:xr("postalCode"),addressCountry:xr("addressCountry"),accessCode:xr("accessCode"),accountId:xr("accountId"),serialNumber:xr("serialNumber"),productID:xr("productID"),brand:xr("brand"),model:xr("model"),value:xr("value"),distance:xr("distance"),latitude:xr("latitude"),longitude:xr("longitude"),dateModified:xr("dateModified")};function BU({onLocaleChanged:e}){const{session:t}=Kl.useSession();Ip();const[r,n]=un.useState(5);return Ar.jsxs(Ar.Fragment,{children:[Ar.jsx("button",{className:"app__link",onClick:()=>e("en-US"),children:"English"}),Ar.jsx("button",{className:"app__link",onClick:()=>e("ar-EG"),children:"Arabic"}),Ar.jsx(ik,{id:"demo"}),Ar.jsxs("p",{children:["State: ",r]}),Ar.jsx("button",{onClick:()=>{n(r+1)},children:"state++"})," ",Ar.jsx("br",{}),!t.info.isLoggedIn&&Ar.jsx(HU,{numState:r}),Ar.jsx("hr",{}),t.info.isLoggedIn&&Ar.jsx(jU,{})]})}function HU({numState:e}){const t=["https://solidcommunity.net/","https://login.inrupt.com/","https://inrupt.net/","https://solidweb.org/"];Kl.useSession();const[r,n]=un.useState("Select an identity provider");return Ar.jsx(Ar.Fragment,{children:Ar.jsxs("div",{children:[Ar.jsxs("select",{value:r,onChange:o=>n(o.target.value),children:[Ar.jsx("option",{children:"Select an identity provider"},"initialOption"),t.map(o=>Ar.jsx("option",{children:o},o))]}),Ar.jsx(Kl.LoginButton,{oidcIssuer:r,redirectUrl:window.location.href+"?numState="+e,children:Ar.jsx("button",{disabled:r==="Select an identity provider",children:"Log in"})})]})})}function jU(){const{session:e}=Kl.useSession(),t="Choose a pod",[r,n]=un.useState([]),[o,a]=un.useState(t),[s,u]=un.useState("");async function f(){const g=e.info.webId;if(g!==void 0){const p=await Gi.getPodUrlAll(g,{fetch:e.fetch});n(p)}}async function c(){const g=`${o}getting-started/note/myList`;let p;try{p=await Gi.getSolidDataset(g,{fetch:e.fetch}),Gi.getThingAll(p).forEach(C=>{p=Gi.removeThing(p,C)})}catch(_){typeof _.statusCode=="number"&&_.statusCode===404?p=Gi.createSolidDataset():console.error(_.message)}let m=Gi.createThing({name:"title"});m=Gi.addUrl(m,MU.type,UU.Article),m=Gi.addStringNoLocale(m,wP.name,s),p=Gi.setThing(p,m),await Gi.saveSolidDatasetAt(g,p,{fetch:e.fetch})}return Ar.jsxs(Ar.Fragment,{children:[Ar.jsx("p",{children:"State: "+window.location.search}),Ar.jsxs("div",{children:["Your webID is: ",e.info.webId]}),Ar.jsxs("div",{children:["Create a private reading list in my Pod.",Ar.jsx("button",{onClick:f,children:"Get pod URL"})]}),Ar.jsxs("div",{children:["a: Write to your Pod:",Ar.jsxs("select",{value:o,onChange:g=>a(g.target.value),children:[Ar.jsx("option",{children:t}),r.map(g=>Ar.jsx("option",{children:g},g))]})]}),Ar.jsxs("div",{children:["b: Enter items to write:",Ar.jsx("textarea",{value:s,onChange:g=>u(g.target.value)}),Ar.jsx("button",{onClick:c,children:"Create"})]}),Ar.jsx("hr",{}),Ar.jsx($U,{selectedPodUrl:o})]})}function $U({selectedPodUrl:e}){const{session:t}=Kl.useSession(),r=`${e}getting-started/note/myList`,[n,o]=un.useState("");async function a(){const s=await Gi.getSolidDataset(r,{fetch:t.fetch});let u=Gi.getThing(s,`${e}getting-started/note/myList#title`);o(Gi.getStringNoLocale(u,wP.name))}return Ar.jsx(Ar.Fragment,{children:Ar.jsxs("div",{children:["Retrieved to validate:",Ar.jsx("textarea",{readOnly:!0,value:n}),Ar.jsx("button",{onClick:a,children:"Read"})]})})}const VU={"en-US":{logo:"logo",demo:"This demo app was internationalized by react-intl",now:"Current date and time are {currentDateTime, date, ::EEE, MMM d, yyyy h:mm a}"},"ar-EG":{logo:" ",demo:"       ",now:"    {currentDateTime, date, ::EEE, MMM d, yyyy h:mm a}"}};function KU({render:e}){const[t,r]=un.useState("en-US");return Ar.jsx(rk,{messages:VU[t],locale:t,children:e(r)},t)}function WU({children:e}){return Ar.jsx(Ar.Fragment,{children:e})}N0.createRoot(document.getElementById("root")).render(Ar.jsx(mI.StrictMode,{children:Ar.jsx(WU,{children:Ar.jsx(Kl.SessionProvider,{sessionId:"some-id",children:Ar.jsx(KU,{render:e=>Ar.jsx(BU,{onLocaleChanged:e})})})})}));
